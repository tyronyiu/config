{
  "version": 3,
  "sources": ["../node_modules/defer-to-connect/dist/source/index.js", "../node_modules/get-stream/buffer-stream.js", "../node_modules/get-stream/index.js", "../node_modules/http-cache-semantics/index.js", "../node_modules/json-buffer/index.js", "../node_modules/keyv/src/index.js", "../node_modules/decompress-response/node_modules/mimic-response/index.js", "../node_modules/decompress-response/index.js", "../node_modules/quick-lru/index.js", "../node_modules/http2-wrapper/source/utils/delay-async-destroy.js", "../node_modules/http2-wrapper/source/agent.js", "../node_modules/http2-wrapper/source/incoming-message.js", "../node_modules/http2-wrapper/source/utils/proxy-events.js", "../node_modules/http2-wrapper/source/utils/errors.js", "../node_modules/http2-wrapper/source/utils/is-request-pseudo-header.js", "../node_modules/http2-wrapper/source/utils/validate-header-name.js", "../node_modules/http2-wrapper/source/utils/validate-header-value.js", "../node_modules/http2-wrapper/source/utils/proxy-socket-handler.js", "../node_modules/http2-wrapper/source/client-request.js", "../node_modules/resolve-alpn/index.js", "../node_modules/http2-wrapper/source/utils/calculate-server-name.js", "../node_modules/http2-wrapper/source/auto.js", "../node_modules/http2-wrapper/source/utils/js-stream-socket.js", "../node_modules/http2-wrapper/source/proxies/unexpected-status-code-error.js", "../node_modules/http2-wrapper/source/utils/check-type.js", "../node_modules/http2-wrapper/source/proxies/initialize.js", "../node_modules/http2-wrapper/source/proxies/get-auth-headers.js", "../node_modules/http2-wrapper/source/proxies/h1-over-h2.js", "../node_modules/http2-wrapper/source/proxies/h2-over-hx.js", "../node_modules/http2-wrapper/source/proxies/h2-over-h2.js", "../node_modules/http2-wrapper/source/proxies/h2-over-h1.js", "../node_modules/http2-wrapper/source/index.js", "../node_modules/webidl-conversions/lib/index.js", "../node_modules/whatwg-url/lib/utils.js", "../node_modules/tr46/index.js", "../node_modules/whatwg-url/lib/url-state-machine.js", "../node_modules/whatwg-url/lib/URL-impl.js", "../node_modules/whatwg-url/lib/URL.js", "../node_modules/whatwg-url/lib/public-api.js", "../node_modules/node-fetch/lib/index.js", "../node_modules/cross-fetch/dist/node-ponyfill.js", "../node_modules/camelcase/index.js", "../node_modules/infobox-parser/util/getValue.js", "../node_modules/infobox-parser/data-types/dataType.js", "../node_modules/infobox-parser/util/extractData.js", "../node_modules/infobox-parser/util/propertyList.js", "../node_modules/infobox-parser/util/fillVariables.js", "../node_modules/infobox-parser/util/extractProperties.js", "../node_modules/infobox-parser/util/transformProperties.js", "../node_modules/infobox-parser/util/extractInfoboxes.js", "../node_modules/infobox-parser/util/cleanSource.js", "../node_modules/infobox-parser/util/parseTables.js", "../node_modules/infobox-parser/util/parseBsTables.js", "../node_modules/infobox-parser/util/parseLists.js", "../node_modules/infobox-parser/index.js", "../node_modules/infobox-parser/data-types/small.js", "../node_modules/infobox-parser/data-types/flag.js", "../node_modules/infobox-parser/data-types/coords.js", "../node_modules/infobox-parser/data-types/instances.js", "../node_modules/infobox-parser/data-types/unbulletedLists.js", "../node_modules/infobox-parser/data-types/unmarkedLists.js", "../node_modules/infobox-parser/data-types/plainLists.js", "../node_modules/infobox-parser/data-types/marriages.js", "../node_modules/infobox-parser/data-types/nbay.js", "../node_modules/infobox-parser/data-types/other.js", "../node_modules/infobox-parser/data-types/hlist.js", "../node_modules/infobox-parser/data-types/birthDates.js", "../node_modules/infobox-parser/data-types/labeledDates.js", "../node_modules/infobox-parser/data-types/deathDates.js", "../node_modules/infobox-parser/data-types/url.js", "../node_modules/infobox-parser/data-types/website.js", "../node_modules/infobox-parser/data-types/extra.js", "../node_modules/infobox-parser/data-types/convert.js", "../node_modules/infobox-parser/data-types/filmDates.js", "../node_modules/infobox-parser/data-types/ref1.js", "../node_modules/infobox-parser/data-types/ref2.js", "../node_modules/infobox-parser/data-types/formatNum.js", "../node_modules/infobox-parser/data-types/index.js", "../node_modules/infobox-parser/util/numberParse.js", "../node_modules/hyntax/lib/helpers.js", "../node_modules/hyntax/lib/constants/token-types.js", "../node_modules/hyntax/lib/constants/tokenizer-contexts.js", "../node_modules/hyntax/lib/tokenizer-context-handlers/data.js", "../node_modules/hyntax/lib/tokenizer-context-handlers/open-tag-start.js", "../node_modules/hyntax/lib/tokenizer-context-handlers/close-tag.js", "../node_modules/hyntax/lib/tokenizer-context-handlers/open-tag-end.js", "../node_modules/hyntax/lib/tokenizer-context-handlers/attributes.js", "../node_modules/hyntax/lib/tokenizer-context-handlers/attribute-key.js", "../node_modules/hyntax/lib/tokenizer-context-handlers/attribute-value.js", "../node_modules/hyntax/lib/tokenizer-context-handlers/attribute-value-bare.js", "../node_modules/hyntax/lib/tokenizer-context-handlers/attribute-value-wrapped.js", "../node_modules/hyntax/lib/tokenizer-context-handlers/script-tag-content.js", "../node_modules/hyntax/lib/tokenizer-context-handlers/style-tag-content.js", "../node_modules/hyntax/lib/tokenizer-context-handlers/doctype-start.js", "../node_modules/hyntax/lib/tokenizer-context-handlers/doctype-end.js", "../node_modules/hyntax/lib/tokenizer-context-handlers/doctype-attributes.js", "../node_modules/hyntax/lib/tokenizer-context-handlers/doctype-attribute-wrapped.js", "../node_modules/hyntax/lib/tokenizer-context-handlers/doctype-attribute-bare.js", "../node_modules/hyntax/lib/tokenizer-context-handlers/comment-content.js", "../node_modules/hyntax/lib/tokenize.js", "../node_modules/hyntax/lib/constants/tree-constructor-contexts.js", "../node_modules/hyntax/lib/tree-constructor-context-handlers/tag.js", "../node_modules/hyntax/lib/constants/ast-nodes.js", "../node_modules/hyntax/lib/tree-constructor-context-handlers/tag-content.js", "../node_modules/hyntax/lib/tree-constructor-context-handlers/tag-name.js", "../node_modules/hyntax/lib/tree-constructor-context-handlers/attributes.js", "../node_modules/hyntax/lib/tree-constructor-context-handlers/attribute.js", "../node_modules/hyntax/lib/tree-constructor-context-handlers/attribute-value.js", "../node_modules/hyntax/lib/tree-constructor-context-handlers/comment.js", "../node_modules/hyntax/lib/tree-constructor-context-handlers/doctype.js", "../node_modules/hyntax/lib/tree-constructor-context-handlers/doctype-attributes.js", "../node_modules/hyntax/lib/tree-constructor-context-handlers/doctype-attribute.js", "../node_modules/hyntax/lib/tree-constructor-context-handlers/script-tag.js", "../node_modules/hyntax/lib/tree-constructor-context-handlers/style-tag.js", "../node_modules/hyntax/lib/construct-tree.js", "../node_modules/hyntax/lib/stream-tokenizer.js", "../node_modules/hyntax/lib/stream-tree-constructor.js", "../node_modules/hyntax/index.js", "../node_modules/dequal/lite/index.js", "../node_modules/@raycast/utils/dist/useDeepMemo.js", "../node_modules/@raycast/utils/dist/useLatest.js", "../node_modules/@raycast/utils/dist/handle-error-toast-action.js", "../node_modules/@raycast/utils/dist/usePromise.js", "../node_modules/@raycast/utils/dist/useCachedState.js", "../node_modules/object-hash/index.js", "../node_modules/@raycast/utils/dist/useCachedPromise.js", "../node_modules/media-typer/index.js", "../node_modules/content-type/index.js", "../node_modules/@raycast/utils/dist/useFetch.js", "../node_modules/signal-exit/signals.js", "../node_modules/signal-exit/index.js", "../node_modules/@raycast/utils/dist/exec-utils.js", "../node_modules/@raycast/utils/dist/useExec.js", "../node_modules/@raycast/utils/dist/useSQL.js", "../node_modules/@raycast/utils/dist/useForm.js", "../node_modules/@raycast/utils/dist/icon/color.js", "../node_modules/@raycast/utils/dist/icon/avatar.js", "../node_modules/@raycast/utils/dist/icon/favicon.js", "../node_modules/@raycast/utils/dist/icon/progress.js", "../node_modules/@raycast/utils/dist/icon/index.js", "../node_modules/@raycast/utils/dist/index.js", "../src/featured-page.tsx", "../node_modules/@sindresorhus/is/dist/index.js", "../node_modules/got/dist/source/as-promise/index.js", "../node_modules/p-cancelable/index.js", "../node_modules/got/dist/source/core/errors.js", "../node_modules/got/dist/source/core/index.js", "../node_modules/@szmarczak/http-timer/dist/source/index.js", "../node_modules/cacheable-request/src/index.ts", "../node_modules/normalize-url/index.js", "../node_modules/responselike/index.js", "../node_modules/lowercase-keys/index.js", "../node_modules/mimic-response/index.js", "../node_modules/cacheable-request/src/types.ts", "../node_modules/form-data-encoder/lib/util/isFunction.js", "../node_modules/form-data-encoder/lib/util/getStreamIterator.js", "../node_modules/form-data-encoder/lib/util/createBoundary.js", "../node_modules/form-data-encoder/lib/util/normalizeValue.js", "../node_modules/form-data-encoder/lib/util/isPlainObject.js", "../node_modules/form-data-encoder/lib/util/proxyHeaders.js", "../node_modules/form-data-encoder/lib/util/isFormData.js", "../node_modules/form-data-encoder/lib/util/escapeName.js", "../node_modules/form-data-encoder/lib/util/isFile.js", "../node_modules/form-data-encoder/lib/FormDataEncoder.js", "../node_modules/got/dist/source/core/utils/get-body-size.js", "../node_modules/got/dist/source/core/utils/is-form-data.js", "../node_modules/got/dist/source/core/utils/proxy-events.js", "../node_modules/got/dist/source/core/timed-out.js", "../node_modules/got/dist/source/core/utils/unhandle.js", "../node_modules/got/dist/source/core/utils/url-to-options.js", "../node_modules/got/dist/source/core/utils/weakable-map.js", "../node_modules/got/dist/source/core/calculate-retry-delay.js", "../node_modules/got/dist/source/core/options.js", "../node_modules/cacheable-lookup/source/index.js", "../node_modules/got/dist/source/core/parse-link-header.js", "../node_modules/got/dist/source/core/response.js", "../node_modules/got/dist/source/core/utils/is-client-request.js", "../node_modules/got/dist/source/core/utils/is-unix-socket-url.js", "../node_modules/got/dist/source/as-promise/types.js", "../node_modules/got/dist/source/create.js", "../node_modules/got/dist/source/index.js", "../node_modules/wikijs/dist/mjs/wiki.js", "../node_modules/wikijs/dist/mjs/util.js", "../node_modules/wikijs/dist/mjs/page.js", "../src/utils/api.ts", "../src/utils/language.ts", "../src/utils/preferences.ts"],
  "sourcesContent": ["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction isTLSSocket(socket) {\n    return socket.encrypted;\n}\nconst deferToConnect = (socket, fn) => {\n    let listeners;\n    if (typeof fn === 'function') {\n        const connect = fn;\n        listeners = { connect };\n    }\n    else {\n        listeners = fn;\n    }\n    const hasConnectListener = typeof listeners.connect === 'function';\n    const hasSecureConnectListener = typeof listeners.secureConnect === 'function';\n    const hasCloseListener = typeof listeners.close === 'function';\n    const onConnect = () => {\n        if (hasConnectListener) {\n            listeners.connect();\n        }\n        if (isTLSSocket(socket) && hasSecureConnectListener) {\n            if (socket.authorized) {\n                listeners.secureConnect();\n            }\n            else if (!socket.authorizationError) {\n                socket.once('secureConnect', listeners.secureConnect);\n            }\n        }\n        if (hasCloseListener) {\n            socket.once('close', listeners.close);\n        }\n    };\n    if (socket.writable && !socket.connecting) {\n        onConnect();\n    }\n    else if (socket.connecting) {\n        socket.once('connect', onConnect);\n    }\n    else if (socket.destroyed && hasCloseListener) {\n        listeners.close(socket._hadError);\n    }\n};\nexports.default = deferToConnect;\n// For CommonJS default export support\nmodule.exports = deferToConnect;\nmodule.exports.default = deferToConnect;\n", "'use strict';\nconst {PassThrough: PassThroughStream} = require('stream');\n\nmodule.exports = options => {\n\toptions = {...options};\n\n\tconst {array} = options;\n\tlet {encoding} = options;\n\tconst isBuffer = encoding === 'buffer';\n\tlet objectMode = false;\n\n\tif (array) {\n\t\tobjectMode = !(encoding || isBuffer);\n\t} else {\n\t\tencoding = encoding || 'utf8';\n\t}\n\n\tif (isBuffer) {\n\t\tencoding = null;\n\t}\n\n\tconst stream = new PassThroughStream({objectMode});\n\n\tif (encoding) {\n\t\tstream.setEncoding(encoding);\n\t}\n\n\tlet length = 0;\n\tconst chunks = [];\n\n\tstream.on('data', chunk => {\n\t\tchunks.push(chunk);\n\n\t\tif (objectMode) {\n\t\t\tlength = chunks.length;\n\t\t} else {\n\t\t\tlength += chunk.length;\n\t\t}\n\t});\n\n\tstream.getBufferedValue = () => {\n\t\tif (array) {\n\t\t\treturn chunks;\n\t\t}\n\n\t\treturn isBuffer ? Buffer.concat(chunks, length) : chunks.join('');\n\t};\n\n\tstream.getBufferedLength = () => length;\n\n\treturn stream;\n};\n", "'use strict';\nconst {constants: BufferConstants} = require('buffer');\nconst stream = require('stream');\nconst {promisify} = require('util');\nconst bufferStream = require('./buffer-stream');\n\nconst streamPipelinePromisified = promisify(stream.pipeline);\n\nclass MaxBufferError extends Error {\n\tconstructor() {\n\t\tsuper('maxBuffer exceeded');\n\t\tthis.name = 'MaxBufferError';\n\t}\n}\n\nasync function getStream(inputStream, options) {\n\tif (!inputStream) {\n\t\tthrow new Error('Expected a stream');\n\t}\n\n\toptions = {\n\t\tmaxBuffer: Infinity,\n\t\t...options\n\t};\n\n\tconst {maxBuffer} = options;\n\tconst stream = bufferStream(options);\n\n\tawait new Promise((resolve, reject) => {\n\t\tconst rejectPromise = error => {\n\t\t\t// Don't retrieve an oversized buffer.\n\t\t\tif (error && stream.getBufferedLength() <= BufferConstants.MAX_LENGTH) {\n\t\t\t\terror.bufferedData = stream.getBufferedValue();\n\t\t\t}\n\n\t\t\treject(error);\n\t\t};\n\n\t\t(async () => {\n\t\t\ttry {\n\t\t\t\tawait streamPipelinePromisified(inputStream, stream);\n\t\t\t\tresolve();\n\t\t\t} catch (error) {\n\t\t\t\trejectPromise(error);\n\t\t\t}\n\t\t})();\n\n\t\tstream.on('data', () => {\n\t\t\tif (stream.getBufferedLength() > maxBuffer) {\n\t\t\t\trejectPromise(new MaxBufferError());\n\t\t\t}\n\t\t});\n\t});\n\n\treturn stream.getBufferedValue();\n}\n\nmodule.exports = getStream;\nmodule.exports.buffer = (stream, options) => getStream(stream, {...options, encoding: 'buffer'});\nmodule.exports.array = (stream, options) => getStream(stream, {...options, array: true});\nmodule.exports.MaxBufferError = MaxBufferError;\n", "'use strict';\n// rfc7231 6.1\nconst statusCodeCacheableByDefault = new Set([\n    200,\n    203,\n    204,\n    206,\n    300,\n    301,\n    404,\n    405,\n    410,\n    414,\n    501,\n]);\n\n// This implementation does not understand partial responses (206)\nconst understoodStatuses = new Set([\n    200,\n    203,\n    204,\n    300,\n    301,\n    302,\n    303,\n    307,\n    308,\n    404,\n    405,\n    410,\n    414,\n    501,\n]);\n\nconst errorStatusCodes = new Set([\n    500,\n    502,\n    503, \n    504,\n]);\n\nconst hopByHopHeaders = {\n    date: true, // included, because we add Age update Date\n    connection: true,\n    'keep-alive': true,\n    'proxy-authenticate': true,\n    'proxy-authorization': true,\n    te: true,\n    trailer: true,\n    'transfer-encoding': true,\n    upgrade: true,\n};\n\nconst excludedFromRevalidationUpdate = {\n    // Since the old body is reused, it doesn't make sense to change properties of the body\n    'content-length': true,\n    'content-encoding': true,\n    'transfer-encoding': true,\n    'content-range': true,\n};\n\nfunction toNumberOrZero(s) {\n    const n = parseInt(s, 10);\n    return isFinite(n) ? n : 0;\n}\n\n// RFC 5861\nfunction isErrorResponse(response) {\n    // consider undefined response as faulty\n    if(!response) {\n        return true\n    }\n    return errorStatusCodes.has(response.status);\n}\n\nfunction parseCacheControl(header) {\n    const cc = {};\n    if (!header) return cc;\n\n    // TODO: When there is more than one value present for a given directive (e.g., two Expires header fields, multiple Cache-Control: max-age directives),\n    // the directive's value is considered invalid. Caches are encouraged to consider responses that have invalid freshness information to be stale\n    const parts = header.trim().split(/\\s*,\\s*/); // TODO: lame parsing\n    for (const part of parts) {\n        const [k, v] = part.split(/\\s*=\\s*/, 2);\n        cc[k] = v === undefined ? true : v.replace(/^\"|\"$/g, ''); // TODO: lame unquoting\n    }\n\n    return cc;\n}\n\nfunction formatCacheControl(cc) {\n    let parts = [];\n    for (const k in cc) {\n        const v = cc[k];\n        parts.push(v === true ? k : k + '=' + v);\n    }\n    if (!parts.length) {\n        return undefined;\n    }\n    return parts.join(', ');\n}\n\nmodule.exports = class CachePolicy {\n    constructor(\n        req,\n        res,\n        {\n            shared,\n            cacheHeuristic,\n            immutableMinTimeToLive,\n            ignoreCargoCult,\n            _fromObject,\n        } = {}\n    ) {\n        if (_fromObject) {\n            this._fromObject(_fromObject);\n            return;\n        }\n\n        if (!res || !res.headers) {\n            throw Error('Response headers missing');\n        }\n        this._assertRequestHasHeaders(req);\n\n        this._responseTime = this.now();\n        this._isShared = shared !== false;\n        this._cacheHeuristic =\n            undefined !== cacheHeuristic ? cacheHeuristic : 0.1; // 10% matches IE\n        this._immutableMinTtl =\n            undefined !== immutableMinTimeToLive\n                ? immutableMinTimeToLive\n                : 24 * 3600 * 1000;\n\n        this._status = 'status' in res ? res.status : 200;\n        this._resHeaders = res.headers;\n        this._rescc = parseCacheControl(res.headers['cache-control']);\n        this._method = 'method' in req ? req.method : 'GET';\n        this._url = req.url;\n        this._host = req.headers.host;\n        this._noAuthorization = !req.headers.authorization;\n        this._reqHeaders = res.headers.vary ? req.headers : null; // Don't keep all request headers if they won't be used\n        this._reqcc = parseCacheControl(req.headers['cache-control']);\n\n        // Assume that if someone uses legacy, non-standard uncecessary options they don't understand caching,\n        // so there's no point stricly adhering to the blindly copy&pasted directives.\n        if (\n            ignoreCargoCult &&\n            'pre-check' in this._rescc &&\n            'post-check' in this._rescc\n        ) {\n            delete this._rescc['pre-check'];\n            delete this._rescc['post-check'];\n            delete this._rescc['no-cache'];\n            delete this._rescc['no-store'];\n            delete this._rescc['must-revalidate'];\n            this._resHeaders = Object.assign({}, this._resHeaders, {\n                'cache-control': formatCacheControl(this._rescc),\n            });\n            delete this._resHeaders.expires;\n            delete this._resHeaders.pragma;\n        }\n\n        // When the Cache-Control header field is not present in a request, caches MUST consider the no-cache request pragma-directive\n        // as having the same effect as if \"Cache-Control: no-cache\" were present (see Section 5.2.1).\n        if (\n            res.headers['cache-control'] == null &&\n            /no-cache/.test(res.headers.pragma)\n        ) {\n            this._rescc['no-cache'] = true;\n        }\n    }\n\n    now() {\n        return Date.now();\n    }\n\n    storable() {\n        // The \"no-store\" request directive indicates that a cache MUST NOT store any part of either this request or any response to it.\n        return !!(\n            !this._reqcc['no-store'] &&\n            // A cache MUST NOT store a response to any request, unless:\n            // The request method is understood by the cache and defined as being cacheable, and\n            ('GET' === this._method ||\n                'HEAD' === this._method ||\n                ('POST' === this._method && this._hasExplicitExpiration())) &&\n            // the response status code is understood by the cache, and\n            understoodStatuses.has(this._status) &&\n            // the \"no-store\" cache directive does not appear in request or response header fields, and\n            !this._rescc['no-store'] &&\n            // the \"private\" response directive does not appear in the response, if the cache is shared, and\n            (!this._isShared || !this._rescc.private) &&\n            // the Authorization header field does not appear in the request, if the cache is shared,\n            (!this._isShared ||\n                this._noAuthorization ||\n                this._allowsStoringAuthenticated()) &&\n            // the response either:\n            // contains an Expires header field, or\n            (this._resHeaders.expires ||\n                // contains a max-age response directive, or\n                // contains a s-maxage response directive and the cache is shared, or\n                // contains a public response directive.\n                this._rescc['max-age'] ||\n                (this._isShared && this._rescc['s-maxage']) ||\n                this._rescc.public ||\n                // has a status code that is defined as cacheable by default\n                statusCodeCacheableByDefault.has(this._status))\n        );\n    }\n\n    _hasExplicitExpiration() {\n        // 4.2.1 Calculating Freshness Lifetime\n        return (\n            (this._isShared && this._rescc['s-maxage']) ||\n            this._rescc['max-age'] ||\n            this._resHeaders.expires\n        );\n    }\n\n    _assertRequestHasHeaders(req) {\n        if (!req || !req.headers) {\n            throw Error('Request headers missing');\n        }\n    }\n\n    satisfiesWithoutRevalidation(req) {\n        this._assertRequestHasHeaders(req);\n\n        // When presented with a request, a cache MUST NOT reuse a stored response, unless:\n        // the presented request does not contain the no-cache pragma (Section 5.4), nor the no-cache cache directive,\n        // unless the stored response is successfully validated (Section 4.3), and\n        const requestCC = parseCacheControl(req.headers['cache-control']);\n        if (requestCC['no-cache'] || /no-cache/.test(req.headers.pragma)) {\n            return false;\n        }\n\n        if (requestCC['max-age'] && this.age() > requestCC['max-age']) {\n            return false;\n        }\n\n        if (\n            requestCC['min-fresh'] &&\n            this.timeToLive() < 1000 * requestCC['min-fresh']\n        ) {\n            return false;\n        }\n\n        // the stored response is either:\n        // fresh, or allowed to be served stale\n        if (this.stale()) {\n            const allowsStale =\n                requestCC['max-stale'] &&\n                !this._rescc['must-revalidate'] &&\n                (true === requestCC['max-stale'] ||\n                    requestCC['max-stale'] > this.age() - this.maxAge());\n            if (!allowsStale) {\n                return false;\n            }\n        }\n\n        return this._requestMatches(req, false);\n    }\n\n    _requestMatches(req, allowHeadMethod) {\n        // The presented effective request URI and that of the stored response match, and\n        return (\n            (!this._url || this._url === req.url) &&\n            this._host === req.headers.host &&\n            // the request method associated with the stored response allows it to be used for the presented request, and\n            (!req.method ||\n                this._method === req.method ||\n                (allowHeadMethod && 'HEAD' === req.method)) &&\n            // selecting header fields nominated by the stored response (if any) match those presented, and\n            this._varyMatches(req)\n        );\n    }\n\n    _allowsStoringAuthenticated() {\n        //  following Cache-Control response directives (Section 5.2.2) have such an effect: must-revalidate, public, and s-maxage.\n        return (\n            this._rescc['must-revalidate'] ||\n            this._rescc.public ||\n            this._rescc['s-maxage']\n        );\n    }\n\n    _varyMatches(req) {\n        if (!this._resHeaders.vary) {\n            return true;\n        }\n\n        // A Vary header field-value of \"*\" always fails to match\n        if (this._resHeaders.vary === '*') {\n            return false;\n        }\n\n        const fields = this._resHeaders.vary\n            .trim()\n            .toLowerCase()\n            .split(/\\s*,\\s*/);\n        for (const name of fields) {\n            if (req.headers[name] !== this._reqHeaders[name]) return false;\n        }\n        return true;\n    }\n\n    _copyWithoutHopByHopHeaders(inHeaders) {\n        const headers = {};\n        for (const name in inHeaders) {\n            if (hopByHopHeaders[name]) continue;\n            headers[name] = inHeaders[name];\n        }\n        // 9.1.  Connection\n        if (inHeaders.connection) {\n            const tokens = inHeaders.connection.trim().split(/\\s*,\\s*/);\n            for (const name of tokens) {\n                delete headers[name];\n            }\n        }\n        if (headers.warning) {\n            const warnings = headers.warning.split(/,/).filter(warning => {\n                return !/^\\s*1[0-9][0-9]/.test(warning);\n            });\n            if (!warnings.length) {\n                delete headers.warning;\n            } else {\n                headers.warning = warnings.join(',').trim();\n            }\n        }\n        return headers;\n    }\n\n    responseHeaders() {\n        const headers = this._copyWithoutHopByHopHeaders(this._resHeaders);\n        const age = this.age();\n\n        // A cache SHOULD generate 113 warning if it heuristically chose a freshness\n        // lifetime greater than 24 hours and the response's age is greater than 24 hours.\n        if (\n            age > 3600 * 24 &&\n            !this._hasExplicitExpiration() &&\n            this.maxAge() > 3600 * 24\n        ) {\n            headers.warning =\n                (headers.warning ? `${headers.warning}, ` : '') +\n                '113 - \"rfc7234 5.5.4\"';\n        }\n        headers.age = `${Math.round(age)}`;\n        headers.date = new Date(this.now()).toUTCString();\n        return headers;\n    }\n\n    /**\n     * Value of the Date response header or current time if Date was invalid\n     * @return timestamp\n     */\n    date() {\n        const serverDate = Date.parse(this._resHeaders.date);\n        if (isFinite(serverDate)) {\n            return serverDate;\n        }\n        return this._responseTime;\n    }\n\n    /**\n     * Value of the Age header, in seconds, updated for the current time.\n     * May be fractional.\n     *\n     * @return Number\n     */\n    age() {\n        let age = this._ageValue();\n\n        const residentTime = (this.now() - this._responseTime) / 1000;\n        return age + residentTime;\n    }\n\n    _ageValue() {\n        return toNumberOrZero(this._resHeaders.age);\n    }\n\n    /**\n     * Value of applicable max-age (or heuristic equivalent) in seconds. This counts since response's `Date`.\n     *\n     * For an up-to-date value, see `timeToLive()`.\n     *\n     * @return Number\n     */\n    maxAge() {\n        if (!this.storable() || this._rescc['no-cache']) {\n            return 0;\n        }\n\n        // Shared responses with cookies are cacheable according to the RFC, but IMHO it'd be unwise to do so by default\n        // so this implementation requires explicit opt-in via public header\n        if (\n            this._isShared &&\n            (this._resHeaders['set-cookie'] &&\n                !this._rescc.public &&\n                !this._rescc.immutable)\n        ) {\n            return 0;\n        }\n\n        if (this._resHeaders.vary === '*') {\n            return 0;\n        }\n\n        if (this._isShared) {\n            if (this._rescc['proxy-revalidate']) {\n                return 0;\n            }\n            // if a response includes the s-maxage directive, a shared cache recipient MUST ignore the Expires field.\n            if (this._rescc['s-maxage']) {\n                return toNumberOrZero(this._rescc['s-maxage']);\n            }\n        }\n\n        // If a response includes a Cache-Control field with the max-age directive, a recipient MUST ignore the Expires field.\n        if (this._rescc['max-age']) {\n            return toNumberOrZero(this._rescc['max-age']);\n        }\n\n        const defaultMinTtl = this._rescc.immutable ? this._immutableMinTtl : 0;\n\n        const serverDate = this.date();\n        if (this._resHeaders.expires) {\n            const expires = Date.parse(this._resHeaders.expires);\n            // A cache recipient MUST interpret invalid date formats, especially the value \"0\", as representing a time in the past (i.e., \"already expired\").\n            if (Number.isNaN(expires) || expires < serverDate) {\n                return 0;\n            }\n            return Math.max(defaultMinTtl, (expires - serverDate) / 1000);\n        }\n\n        if (this._resHeaders['last-modified']) {\n            const lastModified = Date.parse(this._resHeaders['last-modified']);\n            if (isFinite(lastModified) && serverDate > lastModified) {\n                return Math.max(\n                    defaultMinTtl,\n                    ((serverDate - lastModified) / 1000) * this._cacheHeuristic\n                );\n            }\n        }\n\n        return defaultMinTtl;\n    }\n\n    timeToLive() {\n        const age = this.maxAge() - this.age();\n        const staleIfErrorAge = age + toNumberOrZero(this._rescc['stale-if-error']);\n        const staleWhileRevalidateAge = age + toNumberOrZero(this._rescc['stale-while-revalidate']);\n        return Math.max(0, age, staleIfErrorAge, staleWhileRevalidateAge) * 1000;\n    }\n\n    stale() {\n        return this.maxAge() <= this.age();\n    }\n\n    _useStaleIfError() {\n        return this.maxAge() + toNumberOrZero(this._rescc['stale-if-error']) > this.age();\n    }\n\n    useStaleWhileRevalidate() {\n        return this.maxAge() + toNumberOrZero(this._rescc['stale-while-revalidate']) > this.age();\n    }\n\n    static fromObject(obj) {\n        return new this(undefined, undefined, { _fromObject: obj });\n    }\n\n    _fromObject(obj) {\n        if (this._responseTime) throw Error('Reinitialized');\n        if (!obj || obj.v !== 1) throw Error('Invalid serialization');\n\n        this._responseTime = obj.t;\n        this._isShared = obj.sh;\n        this._cacheHeuristic = obj.ch;\n        this._immutableMinTtl =\n            obj.imm !== undefined ? obj.imm : 24 * 3600 * 1000;\n        this._status = obj.st;\n        this._resHeaders = obj.resh;\n        this._rescc = obj.rescc;\n        this._method = obj.m;\n        this._url = obj.u;\n        this._host = obj.h;\n        this._noAuthorization = obj.a;\n        this._reqHeaders = obj.reqh;\n        this._reqcc = obj.reqcc;\n    }\n\n    toObject() {\n        return {\n            v: 1,\n            t: this._responseTime,\n            sh: this._isShared,\n            ch: this._cacheHeuristic,\n            imm: this._immutableMinTtl,\n            st: this._status,\n            resh: this._resHeaders,\n            rescc: this._rescc,\n            m: this._method,\n            u: this._url,\n            h: this._host,\n            a: this._noAuthorization,\n            reqh: this._reqHeaders,\n            reqcc: this._reqcc,\n        };\n    }\n\n    /**\n     * Headers for sending to the origin server to revalidate stale response.\n     * Allows server to return 304 to allow reuse of the previous response.\n     *\n     * Hop by hop headers are always stripped.\n     * Revalidation headers may be added or removed, depending on request.\n     */\n    revalidationHeaders(incomingReq) {\n        this._assertRequestHasHeaders(incomingReq);\n        const headers = this._copyWithoutHopByHopHeaders(incomingReq.headers);\n\n        // This implementation does not understand range requests\n        delete headers['if-range'];\n\n        if (!this._requestMatches(incomingReq, true) || !this.storable()) {\n            // revalidation allowed via HEAD\n            // not for the same resource, or wasn't allowed to be cached anyway\n            delete headers['if-none-match'];\n            delete headers['if-modified-since'];\n            return headers;\n        }\n\n        /* MUST send that entity-tag in any cache validation request (using If-Match or If-None-Match) if an entity-tag has been provided by the origin server. */\n        if (this._resHeaders.etag) {\n            headers['if-none-match'] = headers['if-none-match']\n                ? `${headers['if-none-match']}, ${this._resHeaders.etag}`\n                : this._resHeaders.etag;\n        }\n\n        // Clients MAY issue simple (non-subrange) GET requests with either weak validators or strong validators. Clients MUST NOT use weak validators in other forms of request.\n        const forbidsWeakValidators =\n            headers['accept-ranges'] ||\n            headers['if-match'] ||\n            headers['if-unmodified-since'] ||\n            (this._method && this._method != 'GET');\n\n        /* SHOULD send the Last-Modified value in non-subrange cache validation requests (using If-Modified-Since) if only a Last-Modified value has been provided by the origin server.\n        Note: This implementation does not understand partial responses (206) */\n        if (forbidsWeakValidators) {\n            delete headers['if-modified-since'];\n\n            if (headers['if-none-match']) {\n                const etags = headers['if-none-match']\n                    .split(/,/)\n                    .filter(etag => {\n                        return !/^\\s*W\\//.test(etag);\n                    });\n                if (!etags.length) {\n                    delete headers['if-none-match'];\n                } else {\n                    headers['if-none-match'] = etags.join(',').trim();\n                }\n            }\n        } else if (\n            this._resHeaders['last-modified'] &&\n            !headers['if-modified-since']\n        ) {\n            headers['if-modified-since'] = this._resHeaders['last-modified'];\n        }\n\n        return headers;\n    }\n\n    /**\n     * Creates new CachePolicy with information combined from the previews response,\n     * and the new revalidation response.\n     *\n     * Returns {policy, modified} where modified is a boolean indicating\n     * whether the response body has been modified, and old cached body can't be used.\n     *\n     * @return {Object} {policy: CachePolicy, modified: Boolean}\n     */\n    revalidatedPolicy(request, response) {\n        this._assertRequestHasHeaders(request);\n        if(this._useStaleIfError() && isErrorResponse(response)) {  // I consider the revalidation request unsuccessful\n          return {\n            modified: false,\n            matches: false,\n            policy: this,\n          };\n        }\n        if (!response || !response.headers) {\n            throw Error('Response headers missing');\n        }\n\n        // These aren't going to be supported exactly, since one CachePolicy object\n        // doesn't know about all the other cached objects.\n        let matches = false;\n        if (response.status !== undefined && response.status != 304) {\n            matches = false;\n        } else if (\n            response.headers.etag &&\n            !/^\\s*W\\//.test(response.headers.etag)\n        ) {\n            // \"All of the stored responses with the same strong validator are selected.\n            // If none of the stored responses contain the same strong validator,\n            // then the cache MUST NOT use the new response to update any stored responses.\"\n            matches =\n                this._resHeaders.etag &&\n                this._resHeaders.etag.replace(/^\\s*W\\//, '') ===\n                    response.headers.etag;\n        } else if (this._resHeaders.etag && response.headers.etag) {\n            // \"If the new response contains a weak validator and that validator corresponds\n            // to one of the cache's stored responses,\n            // then the most recent of those matching stored responses is selected for update.\"\n            matches =\n                this._resHeaders.etag.replace(/^\\s*W\\//, '') ===\n                response.headers.etag.replace(/^\\s*W\\//, '');\n        } else if (this._resHeaders['last-modified']) {\n            matches =\n                this._resHeaders['last-modified'] ===\n                response.headers['last-modified'];\n        } else {\n            // If the new response does not include any form of validator (such as in the case where\n            // a client generates an If-Modified-Since request from a source other than the Last-Modified\n            // response header field), and there is only one stored response, and that stored response also\n            // lacks a validator, then that stored response is selected for update.\n            if (\n                !this._resHeaders.etag &&\n                !this._resHeaders['last-modified'] &&\n                !response.headers.etag &&\n                !response.headers['last-modified']\n            ) {\n                matches = true;\n            }\n        }\n\n        if (!matches) {\n            return {\n                policy: new this.constructor(request, response),\n                // Client receiving 304 without body, even if it's invalid/mismatched has no option\n                // but to reuse a cached body. We don't have a good way to tell clients to do\n                // error recovery in such case.\n                modified: response.status != 304,\n                matches: false,\n            };\n        }\n\n        // use other header fields provided in the 304 (Not Modified) response to replace all instances\n        // of the corresponding header fields in the stored response.\n        const headers = {};\n        for (const k in this._resHeaders) {\n            headers[k] =\n                k in response.headers && !excludedFromRevalidationUpdate[k]\n                    ? response.headers[k]\n                    : this._resHeaders[k];\n        }\n\n        const newResponse = Object.assign({}, response, {\n            status: this._status,\n            method: this._method,\n            headers,\n        });\n        return {\n            policy: new this.constructor(request, newResponse, {\n                shared: this._isShared,\n                cacheHeuristic: this._cacheHeuristic,\n                immutableMinTimeToLive: this._immutableMinTtl,\n            }),\n            modified: false,\n            matches: true,\n        };\n    }\n};\n", "//TODO: handle reviver/dehydrate function like normal\n//and handle indentation, like normal.\n//if anyone needs this... please send pull request.\n\nexports.stringify = function stringify (o) {\n  if('undefined' == typeof o) return o\n\n  if(o && Buffer.isBuffer(o))\n    return JSON.stringify(':base64:' + o.toString('base64'))\n\n  if(o && o.toJSON)\n    o =  o.toJSON()\n\n  if(o && 'object' === typeof o) {\n    var s = ''\n    var array = Array.isArray(o)\n    s = array ? '[' : '{'\n    var first = true\n\n    for(var k in o) {\n      var ignore = 'function' == typeof o[k] || (!array && 'undefined' === typeof o[k])\n      if(Object.hasOwnProperty.call(o, k) && !ignore) {\n        if(!first)\n          s += ','\n        first = false\n        if (array) {\n          if(o[k] == undefined)\n            s += 'null'\n          else\n            s += stringify(o[k])\n        } else if (o[k] !== void(0)) {\n          s += stringify(k) + ':' + stringify(o[k])\n        }\n      }\n    }\n\n    s += array ? ']' : '}'\n\n    return s\n  } else if ('string' === typeof o) {\n    return JSON.stringify(/^:/.test(o) ? ':' + o : o)\n  } else if ('undefined' === typeof o) {\n    return 'null';\n  } else\n    return JSON.stringify(o)\n}\n\nexports.parse = function (s) {\n  return JSON.parse(s, function (key, value) {\n    if('string' === typeof value) {\n      if(/^:base64:/.test(value))\n        return Buffer.from(value.substring(8), 'base64')\n      else\n        return /^:/.test(value) ? value.substring(1) : value \n    }\n    return value\n  })\n}\n", "'use strict';\n\nconst EventEmitter = require('events');\nconst JSONB = require('json-buffer');\n\nconst loadStore = options => {\n\tconst adapters = {\n\t\tredis: '@keyv/redis',\n\t\trediss: '@keyv/redis',\n\t\tmongodb: '@keyv/mongo',\n\t\tmongo: '@keyv/mongo',\n\t\tsqlite: '@keyv/sqlite',\n\t\tpostgresql: '@keyv/postgres',\n\t\tpostgres: '@keyv/postgres',\n\t\tmysql: '@keyv/mysql',\n\t\tetcd: '@keyv/etcd',\n\t\toffline: '@keyv/offline',\n\t\ttiered: '@keyv/tiered',\n\t};\n\tif (options.adapter || options.uri) {\n\t\tconst adapter = options.adapter || /^[^:+]*/.exec(options.uri)[0];\n\t\treturn new (require(adapters[adapter]))(options);\n\t}\n\n\treturn new Map();\n};\n\nconst iterableAdapters = [\n\t'sqlite',\n\t'postgres',\n\t'mysql',\n\t'mongo',\n\t'redis',\n\t'tiered',\n];\n\nclass Keyv extends EventEmitter {\n\tconstructor(uri, {emitErrors = true, ...options} = {}) {\n\t\tsuper();\n\t\tthis.opts = {\n\t\t\tnamespace: 'keyv',\n\t\t\tserialize: JSONB.stringify,\n\t\t\tdeserialize: JSONB.parse,\n\t\t\t...((typeof uri === 'string') ? {uri} : uri),\n\t\t\t...options,\n\t\t};\n\n\t\tif (!this.opts.store) {\n\t\t\tconst adapterOptions = {...this.opts};\n\t\t\tthis.opts.store = loadStore(adapterOptions);\n\t\t}\n\n\t\tif (this.opts.compression) {\n\t\t\tconst compression = this.opts.compression;\n\t\t\tthis.opts.serialize = compression.serialize.bind(compression);\n\t\t\tthis.opts.deserialize = compression.deserialize.bind(compression);\n\t\t}\n\n\t\tif (typeof this.opts.store.on === 'function' && emitErrors) {\n\t\t\tthis.opts.store.on('error', error => this.emit('error', error));\n\t\t}\n\n\t\tthis.opts.store.namespace = this.opts.namespace;\n\n\t\tconst generateIterator = iterator => async function * () {\n\t\t\tfor await (const [key, raw] of typeof iterator === 'function'\n\t\t\t\t? iterator(this.opts.store.namespace)\n\t\t\t\t: iterator) {\n\t\t\t\tconst data = this.opts.deserialize(raw);\n\t\t\t\tif (this.opts.store.namespace && !key.includes(this.opts.store.namespace)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (typeof data.expires === 'number' && Date.now() > data.expires) {\n\t\t\t\t\tthis.delete(key);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tyield [this._getKeyUnprefix(key), data.value];\n\t\t\t}\n\t\t};\n\n\t\t// Attach iterators\n\t\tif (typeof this.opts.store[Symbol.iterator] === 'function' && this.opts.store instanceof Map) {\n\t\t\tthis.iterator = generateIterator(this.opts.store);\n\t\t} else if (typeof this.opts.store.iterator === 'function' && this.opts.store.opts\n\t\t\t&& this._checkIterableAdaptar()) {\n\t\t\tthis.iterator = generateIterator(this.opts.store.iterator.bind(this.opts.store));\n\t\t}\n\t}\n\n\t_checkIterableAdaptar() {\n\t\treturn iterableAdapters.includes(this.opts.store.opts.dialect)\n\t\t\t|| iterableAdapters.findIndex(element => this.opts.store.opts.url.includes(element)) >= 0;\n\t}\n\n\t_getKeyPrefix(key) {\n\t\treturn `${this.opts.namespace}:${key}`;\n\t}\n\n\t_getKeyPrefixArray(keys) {\n\t\treturn keys.map(key => `${this.opts.namespace}:${key}`);\n\t}\n\n\t_getKeyUnprefix(key) {\n\t\treturn key\n\t\t\t.split(':')\n\t\t\t.splice(1)\n\t\t\t.join(':');\n\t}\n\n\tget(key, options) {\n\t\tconst {store} = this.opts;\n\t\tconst isArray = Array.isArray(key);\n\t\tconst keyPrefixed = isArray ? this._getKeyPrefixArray(key) : this._getKeyPrefix(key);\n\t\tif (isArray && store.getMany === undefined) {\n\t\t\tconst promises = [];\n\t\t\tfor (const key of keyPrefixed) {\n\t\t\t\tpromises.push(Promise.resolve()\n\t\t\t\t\t.then(() => store.get(key))\n\t\t\t\t\t.then(data => (typeof data === 'string') ? this.opts.deserialize(data) : (this.opts.compression ? this.opts.deserialize(data) : data))\n\t\t\t\t\t.then(data => {\n\t\t\t\t\t\tif (data === undefined || data === null) {\n\t\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (typeof data.expires === 'number' && Date.now() > data.expires) {\n\t\t\t\t\t\t\treturn this.delete(key).then(() => undefined);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn (options && options.raw) ? data : data.value;\n\t\t\t\t\t}),\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn Promise.allSettled(promises)\n\t\t\t\t.then(values => {\n\t\t\t\t\tconst data = [];\n\t\t\t\t\tfor (const value of values) {\n\t\t\t\t\t\tdata.push(value.value);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn data;\n\t\t\t\t});\n\t\t}\n\n\t\treturn Promise.resolve()\n\t\t\t.then(() => isArray ? store.getMany(keyPrefixed) : store.get(keyPrefixed))\n\t\t\t.then(data => (typeof data === 'string') ? this.opts.deserialize(data) : (this.opts.compression ? this.opts.deserialize(data) : data))\n\t\t\t.then(data => {\n\t\t\t\tif (data === undefined || data === null) {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\n\t\t\t\tif (isArray) {\n\t\t\t\t\tconst result = [];\n\n\t\t\t\t\tfor (let row of data) {\n\t\t\t\t\t\tif ((typeof row === 'string')) {\n\t\t\t\t\t\t\trow = this.opts.deserialize(row);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (row === undefined || row === null) {\n\t\t\t\t\t\t\tresult.push(undefined);\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (typeof row.expires === 'number' && Date.now() > row.expires) {\n\t\t\t\t\t\t\tthis.delete(key).then(() => undefined);\n\t\t\t\t\t\t\tresult.push(undefined);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresult.push((options && options.raw) ? row : row.value);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (typeof data.expires === 'number' && Date.now() > data.expires) {\n\t\t\t\t\treturn this.delete(key).then(() => undefined);\n\t\t\t\t}\n\n\t\t\t\treturn (options && options.raw) ? data : data.value;\n\t\t\t});\n\t}\n\n\tset(key, value, ttl) {\n\t\tconst keyPrefixed = this._getKeyPrefix(key);\n\t\tif (typeof ttl === 'undefined') {\n\t\t\tttl = this.opts.ttl;\n\t\t}\n\n\t\tif (ttl === 0) {\n\t\t\tttl = undefined;\n\t\t}\n\n\t\tconst {store} = this.opts;\n\n\t\treturn Promise.resolve()\n\t\t\t.then(() => {\n\t\t\t\tconst expires = (typeof ttl === 'number') ? (Date.now() + ttl) : null;\n\t\t\t\tif (typeof value === 'symbol') {\n\t\t\t\t\tthis.emit('error', 'symbol cannot be serialized');\n\t\t\t\t}\n\n\t\t\t\tvalue = {value, expires};\n\t\t\t\treturn this.opts.serialize(value);\n\t\t\t})\n\t\t\t.then(value => store.set(keyPrefixed, value, ttl))\n\t\t\t.then(() => true);\n\t}\n\n\tdelete(key) {\n\t\tconst {store} = this.opts;\n\t\tif (Array.isArray(key)) {\n\t\t\tconst keyPrefixed = this._getKeyPrefixArray(key);\n\t\t\tif (store.deleteMany === undefined) {\n\t\t\t\tconst promises = [];\n\t\t\t\tfor (const key of keyPrefixed) {\n\t\t\t\t\tpromises.push(store.delete(key));\n\t\t\t\t}\n\n\t\t\t\treturn Promise.allSettled(promises)\n\t\t\t\t\t.then(values => values.every(x => x.value === true));\n\t\t\t}\n\n\t\t\treturn Promise.resolve()\n\t\t\t\t.then(() => store.deleteMany(keyPrefixed));\n\t\t}\n\n\t\tconst keyPrefixed = this._getKeyPrefix(key);\n\t\treturn Promise.resolve()\n\t\t\t.then(() => store.delete(keyPrefixed));\n\t}\n\n\tclear() {\n\t\tconst {store} = this.opts;\n\t\treturn Promise.resolve()\n\t\t\t.then(() => store.clear());\n\t}\n\n\thas(key) {\n\t\tconst keyPrefixed = this._getKeyPrefix(key);\n\t\tconst {store} = this.opts;\n\t\treturn Promise.resolve()\n\t\t\t.then(async () => {\n\t\t\t\tif (typeof store.has === 'function') {\n\t\t\t\t\treturn store.has(keyPrefixed);\n\t\t\t\t}\n\n\t\t\t\tconst value = await store.get(keyPrefixed);\n\t\t\t\treturn value !== undefined;\n\t\t\t});\n\t}\n\n\tdisconnect() {\n\t\tconst {store} = this.opts;\n\t\tif (typeof store.disconnect === 'function') {\n\t\t\treturn store.disconnect();\n\t\t}\n\t}\n}\n\nmodule.exports = Keyv;\n", "'use strict';\n\n// We define these manually to ensure they're always copied\n// even if they would move up the prototype chain\n// https://nodejs.org/api/http.html#http_class_http_incomingmessage\nconst knownProperties = [\n\t'aborted',\n\t'complete',\n\t'headers',\n\t'httpVersion',\n\t'httpVersionMinor',\n\t'httpVersionMajor',\n\t'method',\n\t'rawHeaders',\n\t'rawTrailers',\n\t'setTimeout',\n\t'socket',\n\t'statusCode',\n\t'statusMessage',\n\t'trailers',\n\t'url'\n];\n\nmodule.exports = (fromStream, toStream) => {\n\tif (toStream._readableState.autoDestroy) {\n\t\tthrow new Error('The second stream must have the `autoDestroy` option set to `false`');\n\t}\n\n\tconst fromProperties = new Set(Object.keys(fromStream).concat(knownProperties));\n\n\tconst properties = {};\n\n\tfor (const property of fromProperties) {\n\t\t// Don't overwrite existing properties.\n\t\tif (property in toStream) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tproperties[property] = {\n\t\t\tget() {\n\t\t\t\tconst value = fromStream[property];\n\t\t\t\tconst isFunction = typeof value === 'function';\n\n\t\t\t\treturn isFunction ? value.bind(fromStream) : value;\n\t\t\t},\n\t\t\tset(value) {\n\t\t\t\tfromStream[property] = value;\n\t\t\t},\n\t\t\tenumerable: true,\n\t\t\tconfigurable: false\n\t\t};\n\t}\n\n\tObject.defineProperties(toStream, properties);\n\n\tfromStream.once('aborted', () => {\n\t\ttoStream.destroy();\n\n\t\ttoStream.emit('aborted');\n\t});\n\n\tfromStream.once('close', () => {\n\t\tif (fromStream.complete) {\n\t\t\tif (toStream.readable) {\n\t\t\t\ttoStream.once('end', () => {\n\t\t\t\t\ttoStream.emit('close');\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\ttoStream.emit('close');\n\t\t\t}\n\t\t} else {\n\t\t\ttoStream.emit('close');\n\t\t}\n\t});\n\n\treturn toStream;\n};\n", "'use strict';\nconst {Transform, PassThrough} = require('stream');\nconst zlib = require('zlib');\nconst mimicResponse = require('mimic-response');\n\nmodule.exports = response => {\n\tconst contentEncoding = (response.headers['content-encoding'] || '').toLowerCase();\n\n\tif (!['gzip', 'deflate', 'br'].includes(contentEncoding)) {\n\t\treturn response;\n\t}\n\n\t// TODO: Remove this when targeting Node.js 12.\n\tconst isBrotli = contentEncoding === 'br';\n\tif (isBrotli && typeof zlib.createBrotliDecompress !== 'function') {\n\t\tresponse.destroy(new Error('Brotli is not supported on Node.js < 12'));\n\t\treturn response;\n\t}\n\n\tlet isEmpty = true;\n\n\tconst checker = new Transform({\n\t\ttransform(data, _encoding, callback) {\n\t\t\tisEmpty = false;\n\n\t\t\tcallback(null, data);\n\t\t},\n\n\t\tflush(callback) {\n\t\t\tcallback();\n\t\t}\n\t});\n\n\tconst finalStream = new PassThrough({\n\t\tautoDestroy: false,\n\t\tdestroy(error, callback) {\n\t\t\tresponse.destroy();\n\n\t\t\tcallback(error);\n\t\t}\n\t});\n\n\tconst decompressStream = isBrotli ? zlib.createBrotliDecompress() : zlib.createUnzip();\n\n\tdecompressStream.once('error', error => {\n\t\tif (isEmpty && !response.readable) {\n\t\t\tfinalStream.end();\n\t\t\treturn;\n\t\t}\n\n\t\tfinalStream.destroy(error);\n\t});\n\n\tmimicResponse(response, finalStream);\n\tresponse.pipe(checker).pipe(decompressStream).pipe(finalStream);\n\n\treturn finalStream;\n};\n", "'use strict';\n\nclass QuickLRU {\n\tconstructor(options = {}) {\n\t\tif (!(options.maxSize && options.maxSize > 0)) {\n\t\t\tthrow new TypeError('`maxSize` must be a number greater than 0');\n\t\t}\n\n\t\tthis.maxSize = options.maxSize;\n\t\tthis.onEviction = options.onEviction;\n\t\tthis.cache = new Map();\n\t\tthis.oldCache = new Map();\n\t\tthis._size = 0;\n\t}\n\n\t_set(key, value) {\n\t\tthis.cache.set(key, value);\n\t\tthis._size++;\n\n\t\tif (this._size >= this.maxSize) {\n\t\t\tthis._size = 0;\n\n\t\t\tif (typeof this.onEviction === 'function') {\n\t\t\t\tfor (const [key, value] of this.oldCache.entries()) {\n\t\t\t\t\tthis.onEviction(key, value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.oldCache = this.cache;\n\t\t\tthis.cache = new Map();\n\t\t}\n\t}\n\n\tget(key) {\n\t\tif (this.cache.has(key)) {\n\t\t\treturn this.cache.get(key);\n\t\t}\n\n\t\tif (this.oldCache.has(key)) {\n\t\t\tconst value = this.oldCache.get(key);\n\t\t\tthis.oldCache.delete(key);\n\t\t\tthis._set(key, value);\n\t\t\treturn value;\n\t\t}\n\t}\n\n\tset(key, value) {\n\t\tif (this.cache.has(key)) {\n\t\t\tthis.cache.set(key, value);\n\t\t} else {\n\t\t\tthis._set(key, value);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\thas(key) {\n\t\treturn this.cache.has(key) || this.oldCache.has(key);\n\t}\n\n\tpeek(key) {\n\t\tif (this.cache.has(key)) {\n\t\t\treturn this.cache.get(key);\n\t\t}\n\n\t\tif (this.oldCache.has(key)) {\n\t\t\treturn this.oldCache.get(key);\n\t\t}\n\t}\n\n\tdelete(key) {\n\t\tconst deleted = this.cache.delete(key);\n\t\tif (deleted) {\n\t\t\tthis._size--;\n\t\t}\n\n\t\treturn this.oldCache.delete(key) || deleted;\n\t}\n\n\tclear() {\n\t\tthis.cache.clear();\n\t\tthis.oldCache.clear();\n\t\tthis._size = 0;\n\t}\n\n\t* keys() {\n\t\tfor (const [key] of this) {\n\t\t\tyield key;\n\t\t}\n\t}\n\n\t* values() {\n\t\tfor (const [, value] of this) {\n\t\t\tyield value;\n\t\t}\n\t}\n\n\t* [Symbol.iterator]() {\n\t\tfor (const item of this.cache) {\n\t\t\tyield item;\n\t\t}\n\n\t\tfor (const item of this.oldCache) {\n\t\t\tconst [key] = item;\n\t\t\tif (!this.cache.has(key)) {\n\t\t\t\tyield item;\n\t\t\t}\n\t\t}\n\t}\n\n\tget size() {\n\t\tlet oldCacheSize = 0;\n\t\tfor (const key of this.oldCache.keys()) {\n\t\t\tif (!this.cache.has(key)) {\n\t\t\t\toldCacheSize++;\n\t\t\t}\n\t\t}\n\n\t\treturn Math.min(this._size + oldCacheSize, this.maxSize);\n\t}\n}\n\nmodule.exports = QuickLRU;\n", "'use strict';\n\nmodule.exports = stream => {\n\tif (stream.listenerCount('error') !== 0) {\n\t\treturn stream;\n\t}\n\n\tstream.__destroy = stream._destroy;\n\tstream._destroy = (...args) => {\n\t\tconst callback = args.pop();\n\n\t\tstream.__destroy(...args, async error => {\n\t\t\tawait Promise.resolve();\n\t\t\tcallback(error);\n\t\t});\n\t};\n\n\tconst onError = error => {\n\t\t// eslint-disable-next-line promise/prefer-await-to-then\n\t\tPromise.resolve().then(() => {\n\t\t\tstream.emit('error', error);\n\t\t});\n\t};\n\n\tstream.once('error', onError);\n\n\t// eslint-disable-next-line promise/prefer-await-to-then\n\tPromise.resolve().then(() => {\n\t\tstream.off('error', onError);\n\t});\n\n\treturn stream;\n};\n", "'use strict';\n// See https://github.com/facebook/jest/issues/2549\n// eslint-disable-next-line node/prefer-global/url\nconst {URL} = require('url');\nconst EventEmitter = require('events');\nconst tls = require('tls');\nconst http2 = require('http2');\nconst QuickLRU = require('quick-lru');\nconst delayAsyncDestroy = require('./utils/delay-async-destroy.js');\n\nconst kCurrentStreamCount = Symbol('currentStreamCount');\nconst kRequest = Symbol('request');\nconst kOriginSet = Symbol('cachedOriginSet');\nconst kGracefullyClosing = Symbol('gracefullyClosing');\nconst kLength = Symbol('length');\n\nconst nameKeys = [\n\t// Not an Agent option actually\n\t'createConnection',\n\n\t// `http2.connect()` options\n\t'maxDeflateDynamicTableSize',\n\t'maxSettings',\n\t'maxSessionMemory',\n\t'maxHeaderListPairs',\n\t'maxOutstandingPings',\n\t'maxReservedRemoteStreams',\n\t'maxSendHeaderBlockLength',\n\t'paddingStrategy',\n\t'peerMaxConcurrentStreams',\n\t'settings',\n\n\t// `tls.connect()` source options\n\t'family',\n\t'localAddress',\n\t'rejectUnauthorized',\n\n\t// `tls.connect()` secure context options\n\t'pskCallback',\n\t'minDHSize',\n\n\t// `tls.connect()` destination options\n\t// - `servername` is automatically validated, skip it\n\t// - `host` and `port` just describe the destination server,\n\t'path',\n\t'socket',\n\n\t// `tls.createSecureContext()` options\n\t'ca',\n\t'cert',\n\t'sigalgs',\n\t'ciphers',\n\t'clientCertEngine',\n\t'crl',\n\t'dhparam',\n\t'ecdhCurve',\n\t'honorCipherOrder',\n\t'key',\n\t'privateKeyEngine',\n\t'privateKeyIdentifier',\n\t'maxVersion',\n\t'minVersion',\n\t'pfx',\n\t'secureOptions',\n\t'secureProtocol',\n\t'sessionIdContext',\n\t'ticketKeys'\n];\n\nconst getSortedIndex = (array, value, compare) => {\n\tlet low = 0;\n\tlet high = array.length;\n\n\twhile (low < high) {\n\t\tconst mid = (low + high) >>> 1;\n\n\t\tif (compare(array[mid], value)) {\n\t\t\tlow = mid + 1;\n\t\t} else {\n\t\t\thigh = mid;\n\t\t}\n\t}\n\n\treturn low;\n};\n\nconst compareSessions = (a, b) => a.remoteSettings.maxConcurrentStreams > b.remoteSettings.maxConcurrentStreams;\n\n// See https://tools.ietf.org/html/rfc8336\nconst closeCoveredSessions = (where, session) => {\n\t// Clients SHOULD NOT emit new requests on any connection whose Origin\n\t// Set is a proper subset of another connection's Origin Set, and they\n\t// SHOULD close it once all outstanding requests are satisfied.\n\tfor (let index = 0; index < where.length; index++) {\n\t\tconst coveredSession = where[index];\n\n\t\tif (\n\t\t\t// Unfortunately `.every()` returns true for an empty array\n\t\t\tcoveredSession[kOriginSet].length > 0\n\n\t\t\t// The set is a proper subset when its length is less than the other set.\n\t\t\t&& coveredSession[kOriginSet].length < session[kOriginSet].length\n\n\t\t\t// And the other set includes all elements of the subset.\n\t\t\t&& coveredSession[kOriginSet].every(origin => session[kOriginSet].includes(origin))\n\n\t\t\t// Makes sure that the session can handle all requests from the covered session.\n\t\t\t&& (coveredSession[kCurrentStreamCount] + session[kCurrentStreamCount]) <= session.remoteSettings.maxConcurrentStreams\n\t\t) {\n\t\t\t// This allows pending requests to finish and prevents making new requests.\n\t\t\tgracefullyClose(coveredSession);\n\t\t}\n\t}\n};\n\n// This is basically inverted `closeCoveredSessions(...)`.\nconst closeSessionIfCovered = (where, coveredSession) => {\n\tfor (let index = 0; index < where.length; index++) {\n\t\tconst session = where[index];\n\n\t\tif (\n\t\t\tcoveredSession[kOriginSet].length > 0\n\t\t\t&& coveredSession[kOriginSet].length < session[kOriginSet].length\n\t\t\t&& coveredSession[kOriginSet].every(origin => session[kOriginSet].includes(origin))\n\t\t\t&& (coveredSession[kCurrentStreamCount] + session[kCurrentStreamCount]) <= session.remoteSettings.maxConcurrentStreams\n\t\t) {\n\t\t\tgracefullyClose(coveredSession);\n\n\t\t\treturn true;\n\t\t}\n\t}\n\n\treturn false;\n};\n\nconst gracefullyClose = session => {\n\tsession[kGracefullyClosing] = true;\n\n\tif (session[kCurrentStreamCount] === 0) {\n\t\tsession.close();\n\t}\n};\n\nclass Agent extends EventEmitter {\n\tconstructor({timeout = 0, maxSessions = Number.POSITIVE_INFINITY, maxEmptySessions = 10, maxCachedTlsSessions = 100} = {}) {\n\t\tsuper();\n\n\t\t// SESSIONS[NORMALIZED_OPTIONS] = [];\n\t\tthis.sessions = {};\n\n\t\t// The queue for creating new sessions. It looks like this:\n\t\t// QUEUE[NORMALIZED_OPTIONS][NORMALIZED_ORIGIN] = ENTRY_FUNCTION\n\t\t//\n\t\t// It's faster when there are many origins. If there's only one, then QUEUE[`${options}:${origin}`] is faster.\n\t\t// I guess object creation / deletion is causing the slowdown.\n\t\t//\n\t\t// The entry function has `listeners`, `completed` and `destroyed` properties.\n\t\t// `listeners` is an array of objects containing `resolve` and `reject` functions.\n\t\t// `completed` is a boolean. It's set to true after ENTRY_FUNCTION is executed.\n\t\t// `destroyed` is a boolean. If it's set to true, the session will be destroyed if hasn't connected yet.\n\t\tthis.queue = {};\n\n\t\t// Each session will use this timeout value.\n\t\tthis.timeout = timeout;\n\n\t\t// Max sessions in total\n\t\tthis.maxSessions = maxSessions;\n\n\t\t// Max empty sessions in total\n\t\tthis.maxEmptySessions = maxEmptySessions;\n\n\t\tthis._emptySessionCount = 0;\n\t\tthis._sessionCount = 0;\n\n\t\t// We don't support push streams by default.\n\t\tthis.settings = {\n\t\t\tenablePush: false,\n\t\t\tinitialWindowSize: 1024 * 1024 * 32 // 32MB, see https://github.com/nodejs/node/issues/38426\n\t\t};\n\n\t\t// Reusing TLS sessions increases performance.\n\t\tthis.tlsSessionCache = new QuickLRU({maxSize: maxCachedTlsSessions});\n\t}\n\n\tget protocol() {\n\t\treturn 'https:';\n\t}\n\n\tnormalizeOptions(options) {\n\t\tlet normalized = '';\n\n\t\tfor (let index = 0; index < nameKeys.length; index++) {\n\t\t\tconst key = nameKeys[index];\n\n\t\t\tnormalized += ':';\n\n\t\t\tif (options && options[key] !== undefined) {\n\t\t\t\tnormalized += options[key];\n\t\t\t}\n\t\t}\n\n\t\treturn normalized;\n\t}\n\n\t_processQueue() {\n\t\tif (this._sessionCount >= this.maxSessions) {\n\t\t\tthis.closeEmptySessions(this.maxSessions - this._sessionCount + 1);\n\t\t\treturn;\n\t\t}\n\n\t\t// eslint-disable-next-line guard-for-in\n\t\tfor (const normalizedOptions in this.queue) {\n\t\t\t// eslint-disable-next-line guard-for-in\n\t\t\tfor (const normalizedOrigin in this.queue[normalizedOptions]) {\n\t\t\t\tconst item = this.queue[normalizedOptions][normalizedOrigin];\n\n\t\t\t\t// The entry function can be run only once.\n\t\t\t\tif (!item.completed) {\n\t\t\t\t\titem.completed = true;\n\n\t\t\t\t\titem();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t_isBetterSession(thisStreamCount, thatStreamCount) {\n\t\treturn thisStreamCount > thatStreamCount;\n\t}\n\n\t_accept(session, listeners, normalizedOrigin, options) {\n\t\tlet index = 0;\n\n\t\twhile (index < listeners.length && session[kCurrentStreamCount] < session.remoteSettings.maxConcurrentStreams) {\n\t\t\t// We assume `resolve(...)` calls `request(...)` *directly*,\n\t\t\t// otherwise the session will get overloaded.\n\t\t\tlisteners[index].resolve(session);\n\n\t\t\tindex++;\n\t\t}\n\n\t\tlisteners.splice(0, index);\n\n\t\tif (listeners.length > 0) {\n\t\t\tthis.getSession(normalizedOrigin, options, listeners);\n\t\t\tlisteners.length = 0;\n\t\t}\n\t}\n\n\tgetSession(origin, options, listeners) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif (Array.isArray(listeners) && listeners.length > 0) {\n\t\t\t\tlisteners = [...listeners];\n\n\t\t\t\t// Resolve the current promise ASAP, we're just moving the listeners.\n\t\t\t\t// They will be executed at a different time.\n\t\t\t\tresolve();\n\t\t\t} else {\n\t\t\t\tlisteners = [{resolve, reject}];\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\t// Parse origin\n\t\t\t\tif (typeof origin === 'string') {\n\t\t\t\t\torigin = new URL(origin);\n\t\t\t\t} else if (!(origin instanceof URL)) {\n\t\t\t\t\tthrow new TypeError('The `origin` argument needs to be a string or an URL object');\n\t\t\t\t}\n\n\t\t\t\tif (options) {\n\t\t\t\t\t// Validate servername\n\t\t\t\t\tconst {servername} = options;\n\t\t\t\t\tconst {hostname} = origin;\n\t\t\t\t\tif (servername && hostname !== servername) {\n\t\t\t\t\t\tthrow new Error(`Origin ${hostname} differs from servername ${servername}`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tfor (let index = 0; index < listeners.length; index++) {\n\t\t\t\t\tlisteners[index].reject(error);\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst normalizedOptions = this.normalizeOptions(options);\n\t\t\tconst normalizedOrigin = origin.origin;\n\n\t\t\tif (normalizedOptions in this.sessions) {\n\t\t\t\tconst sessions = this.sessions[normalizedOptions];\n\n\t\t\t\tlet maxConcurrentStreams = -1;\n\t\t\t\tlet currentStreamsCount = -1;\n\t\t\t\tlet optimalSession;\n\n\t\t\t\t// We could just do this.sessions[normalizedOptions].find(...) but that isn't optimal.\n\t\t\t\t// Additionally, we are looking for session which has biggest current pending streams count.\n\t\t\t\t//\n\t\t\t\t// |------------| |------------| |------------| |------------|\n\t\t\t\t// | Session: A | | Session: B | | Session: C | | Session: D |\n\t\t\t\t// | Pending: 5 |-| Pending: 8 |-| Pending: 9 |-| Pending: 4 |\n\t\t\t\t// | Max:    10 | | Max:    10 | | Max:     9 | | Max:     5 |\n\t\t\t\t// |------------| |------------| |------------| |------------|\n\t\t\t\t//                     ^\n\t\t\t\t//                     |\n\t\t\t\t//     pick this one  --\n\t\t\t\t//\n\t\t\t\tfor (let index = 0; index < sessions.length; index++) {\n\t\t\t\t\tconst session = sessions[index];\n\n\t\t\t\t\tconst sessionMaxConcurrentStreams = session.remoteSettings.maxConcurrentStreams;\n\n\t\t\t\t\tif (sessionMaxConcurrentStreams < maxConcurrentStreams) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!session[kOriginSet].includes(normalizedOrigin)) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst sessionCurrentStreamsCount = session[kCurrentStreamCount];\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tsessionCurrentStreamsCount >= sessionMaxConcurrentStreams\n\t\t\t\t\t\t|| session[kGracefullyClosing]\n\t\t\t\t\t\t// Unfortunately the `close` event isn't called immediately,\n\t\t\t\t\t\t// so `session.destroyed` is `true`, but `session.closed` is `false`.\n\t\t\t\t\t\t|| session.destroyed\n\t\t\t\t\t) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\t// We only need set this once.\n\t\t\t\t\tif (!optimalSession) {\n\t\t\t\t\t\tmaxConcurrentStreams = sessionMaxConcurrentStreams;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Either get the session which has biggest current stream count or the lowest.\n\t\t\t\t\tif (this._isBetterSession(sessionCurrentStreamsCount, currentStreamsCount)) {\n\t\t\t\t\t\toptimalSession = session;\n\t\t\t\t\t\tcurrentStreamsCount = sessionCurrentStreamsCount;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (optimalSession) {\n\t\t\t\t\tthis._accept(optimalSession, listeners, normalizedOrigin, options);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (normalizedOptions in this.queue) {\n\t\t\t\tif (normalizedOrigin in this.queue[normalizedOptions]) {\n\t\t\t\t\t// There's already an item in the queue, just attach ourselves to it.\n\t\t\t\t\tthis.queue[normalizedOptions][normalizedOrigin].listeners.push(...listeners);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.queue[normalizedOptions] = {\n\t\t\t\t\t[kLength]: 0\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// The entry must be removed from the queue IMMEDIATELY when:\n\t\t\t// 1. the session connects successfully,\n\t\t\t// 2. an error occurs.\n\t\t\tconst removeFromQueue = () => {\n\t\t\t\t// Our entry can be replaced. We cannot remove the new one.\n\t\t\t\tif (normalizedOptions in this.queue && this.queue[normalizedOptions][normalizedOrigin] === entry) {\n\t\t\t\t\tdelete this.queue[normalizedOptions][normalizedOrigin];\n\n\t\t\t\t\tif (--this.queue[normalizedOptions][kLength] === 0) {\n\t\t\t\t\t\tdelete this.queue[normalizedOptions];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// The main logic is here\n\t\t\tconst entry = async () => {\n\t\t\t\tthis._sessionCount++;\n\n\t\t\t\tconst name = `${normalizedOrigin}:${normalizedOptions}`;\n\t\t\t\tlet receivedSettings = false;\n\t\t\t\tlet socket;\n\n\t\t\t\ttry {\n\t\t\t\t\tconst computedOptions = {...options};\n\n\t\t\t\t\tif (computedOptions.settings === undefined) {\n\t\t\t\t\t\tcomputedOptions.settings = this.settings;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (computedOptions.session === undefined) {\n\t\t\t\t\t\tcomputedOptions.session = this.tlsSessionCache.get(name);\n\t\t\t\t\t}\n\n\t\t\t\t\tconst createConnection = computedOptions.createConnection || this.createConnection;\n\n\t\t\t\t\t// A hacky workaround to enable async `createConnection`\n\t\t\t\t\tsocket = await createConnection.call(this, origin, computedOptions);\n\t\t\t\t\tcomputedOptions.createConnection = () => socket;\n\n\t\t\t\t\tconst session = http2.connect(origin, computedOptions);\n\t\t\t\t\tsession[kCurrentStreamCount] = 0;\n\t\t\t\t\tsession[kGracefullyClosing] = false;\n\n\t\t\t\t\t// Node.js return https://false:443 instead of https://1.1.1.1:443\n\t\t\t\t\tconst getOriginSet = () => {\n\t\t\t\t\t\tconst {socket} = session;\n\n\t\t\t\t\t\tlet originSet;\n\t\t\t\t\t\tif (socket.servername === false) {\n\t\t\t\t\t\t\tsocket.servername = socket.remoteAddress;\n\t\t\t\t\t\t\toriginSet = session.originSet;\n\t\t\t\t\t\t\tsocket.servername = false;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\toriginSet = session.originSet;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn originSet;\n\t\t\t\t\t};\n\n\t\t\t\t\tconst isFree = () => session[kCurrentStreamCount] < session.remoteSettings.maxConcurrentStreams;\n\n\t\t\t\t\tsession.socket.once('session', tlsSession => {\n\t\t\t\t\t\tthis.tlsSessionCache.set(name, tlsSession);\n\t\t\t\t\t});\n\n\t\t\t\t\tsession.once('error', error => {\n\t\t\t\t\t\t// Listeners are empty when the session successfully connected.\n\t\t\t\t\t\tfor (let index = 0; index < listeners.length; index++) {\n\t\t\t\t\t\t\tlisteners[index].reject(error);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// The connection got broken, purge the cache.\n\t\t\t\t\t\tthis.tlsSessionCache.delete(name);\n\t\t\t\t\t});\n\n\t\t\t\t\tsession.setTimeout(this.timeout, () => {\n\t\t\t\t\t\t// Terminates all streams owned by this session.\n\t\t\t\t\t\tsession.destroy();\n\t\t\t\t\t});\n\n\t\t\t\t\tsession.once('close', () => {\n\t\t\t\t\t\tthis._sessionCount--;\n\n\t\t\t\t\t\tif (receivedSettings) {\n\t\t\t\t\t\t\t// Assumes session `close` is emitted after request `close`\n\t\t\t\t\t\t\tthis._emptySessionCount--;\n\n\t\t\t\t\t\t\t// This cannot be moved to the stream logic,\n\t\t\t\t\t\t\t// because there may be a session that hadn't made a single request.\n\t\t\t\t\t\t\tconst where = this.sessions[normalizedOptions];\n\n\t\t\t\t\t\t\tif (where.length === 1) {\n\t\t\t\t\t\t\t\tdelete this.sessions[normalizedOptions];\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\twhere.splice(where.indexOf(session), 1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Broken connection\n\t\t\t\t\t\t\tremoveFromQueue();\n\n\t\t\t\t\t\t\tconst error = new Error('Session closed without receiving a SETTINGS frame');\n\t\t\t\t\t\t\terror.code = 'HTTP2WRAPPER_NOSETTINGS';\n\n\t\t\t\t\t\t\tfor (let index = 0; index < listeners.length; index++) {\n\t\t\t\t\t\t\t\tlisteners[index].reject(error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// There may be another session awaiting.\n\t\t\t\t\t\tthis._processQueue();\n\t\t\t\t\t});\n\n\t\t\t\t\t// Iterates over the queue and processes listeners.\n\t\t\t\t\tconst processListeners = () => {\n\t\t\t\t\t\tconst queue = this.queue[normalizedOptions];\n\t\t\t\t\t\tif (!queue) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst originSet = session[kOriginSet];\n\n\t\t\t\t\t\tfor (let index = 0; index < originSet.length; index++) {\n\t\t\t\t\t\t\tconst origin = originSet[index];\n\n\t\t\t\t\t\t\tif (origin in queue) {\n\t\t\t\t\t\t\t\tconst {listeners, completed} = queue[origin];\n\n\t\t\t\t\t\t\t\tlet index = 0;\n\n\t\t\t\t\t\t\t\t// Prevents session overloading.\n\t\t\t\t\t\t\t\twhile (index < listeners.length && isFree()) {\n\t\t\t\t\t\t\t\t\t// We assume `resolve(...)` calls `request(...)` *directly*,\n\t\t\t\t\t\t\t\t\t// otherwise the session will get overloaded.\n\t\t\t\t\t\t\t\t\tlisteners[index].resolve(session);\n\n\t\t\t\t\t\t\t\t\tindex++;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tqueue[origin].listeners.splice(0, index);\n\n\t\t\t\t\t\t\t\tif (queue[origin].listeners.length === 0 && !completed) {\n\t\t\t\t\t\t\t\t\tdelete queue[origin];\n\n\t\t\t\t\t\t\t\t\tif (--queue[kLength] === 0) {\n\t\t\t\t\t\t\t\t\t\tdelete this.queue[normalizedOptions];\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// We're no longer free, no point in continuing.\n\t\t\t\t\t\t\t\tif (!isFree()) {\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\t// The Origin Set cannot shrink. No need to check if it suddenly became covered by another one.\n\t\t\t\t\tsession.on('origin', () => {\n\t\t\t\t\t\tsession[kOriginSet] = getOriginSet() || [];\n\t\t\t\t\t\tsession[kGracefullyClosing] = false;\n\t\t\t\t\t\tcloseSessionIfCovered(this.sessions[normalizedOptions], session);\n\n\t\t\t\t\t\tif (session[kGracefullyClosing] || !isFree()) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tprocessListeners();\n\n\t\t\t\t\t\tif (!isFree()) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Close covered sessions (if possible).\n\t\t\t\t\t\tcloseCoveredSessions(this.sessions[normalizedOptions], session);\n\t\t\t\t\t});\n\n\t\t\t\t\tsession.once('remoteSettings', () => {\n\t\t\t\t\t\t// The Agent could have been destroyed already.\n\t\t\t\t\t\tif (entry.destroyed) {\n\t\t\t\t\t\t\tconst error = new Error('Agent has been destroyed');\n\n\t\t\t\t\t\t\tfor (let index = 0; index < listeners.length; index++) {\n\t\t\t\t\t\t\t\tlisteners[index].reject(error);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tsession.destroy();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// See https://github.com/nodejs/node/issues/38426\n\t\t\t\t\t\tif (session.setLocalWindowSize) {\n\t\t\t\t\t\t\tsession.setLocalWindowSize(1024 * 1024 * 4); // 4 MB\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tsession[kOriginSet] = getOriginSet() || [];\n\n\t\t\t\t\t\tif (session.socket.encrypted) {\n\t\t\t\t\t\t\tconst mainOrigin = session[kOriginSet][0];\n\t\t\t\t\t\t\tif (mainOrigin !== normalizedOrigin) {\n\t\t\t\t\t\t\t\tconst error = new Error(`Requested origin ${normalizedOrigin} does not match server ${mainOrigin}`);\n\n\t\t\t\t\t\t\t\tfor (let index = 0; index < listeners.length; index++) {\n\t\t\t\t\t\t\t\t\tlisteners[index].reject(error);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tsession.destroy();\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tremoveFromQueue();\n\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst where = this.sessions;\n\n\t\t\t\t\t\t\tif (normalizedOptions in where) {\n\t\t\t\t\t\t\t\tconst sessions = where[normalizedOptions];\n\t\t\t\t\t\t\t\tsessions.splice(getSortedIndex(sessions, session, compareSessions), 0, session);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\twhere[normalizedOptions] = [session];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treceivedSettings = true;\n\t\t\t\t\t\tthis._emptySessionCount++;\n\n\t\t\t\t\t\tthis.emit('session', session);\n\t\t\t\t\t\tthis._accept(session, listeners, normalizedOrigin, options);\n\n\t\t\t\t\t\tif (session[kCurrentStreamCount] === 0 && this._emptySessionCount > this.maxEmptySessions) {\n\t\t\t\t\t\t\tthis.closeEmptySessions(this._emptySessionCount - this.maxEmptySessions);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// `session.remoteSettings.maxConcurrentStreams` might get increased\n\t\t\t\t\t\tsession.on('remoteSettings', () => {\n\t\t\t\t\t\t\tif (!isFree()) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tprocessListeners();\n\n\t\t\t\t\t\t\tif (!isFree()) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// In case the Origin Set changes\n\t\t\t\t\t\t\tcloseCoveredSessions(this.sessions[normalizedOptions], session);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\t// Shim `session.request()` in order to catch all streams\n\t\t\t\t\tsession[kRequest] = session.request;\n\t\t\t\t\tsession.request = (headers, streamOptions) => {\n\t\t\t\t\t\tif (session[kGracefullyClosing]) {\n\t\t\t\t\t\t\tthrow new Error('The session is gracefully closing. No new streams are allowed.');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst stream = session[kRequest](headers, streamOptions);\n\n\t\t\t\t\t\t// The process won't exit until the session is closed or all requests are gone.\n\t\t\t\t\t\tsession.ref();\n\n\t\t\t\t\t\tif (session[kCurrentStreamCount]++ === 0) {\n\t\t\t\t\t\t\tthis._emptySessionCount--;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tstream.once('close', () => {\n\t\t\t\t\t\t\tif (--session[kCurrentStreamCount] === 0) {\n\t\t\t\t\t\t\t\tthis._emptySessionCount++;\n\t\t\t\t\t\t\t\tsession.unref();\n\n\t\t\t\t\t\t\t\tif (this._emptySessionCount > this.maxEmptySessions || session[kGracefullyClosing]) {\n\t\t\t\t\t\t\t\t\tsession.close();\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (session.destroyed || session.closed) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (isFree() && !closeSessionIfCovered(this.sessions[normalizedOptions], session)) {\n\t\t\t\t\t\t\t\tcloseCoveredSessions(this.sessions[normalizedOptions], session);\n\t\t\t\t\t\t\t\tprocessListeners();\n\n\t\t\t\t\t\t\t\tif (session[kCurrentStreamCount] === 0) {\n\t\t\t\t\t\t\t\t\tthis._processQueue();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\treturn stream;\n\t\t\t\t\t};\n\t\t\t\t} catch (error) {\n\t\t\t\t\tremoveFromQueue();\n\t\t\t\t\tthis._sessionCount--;\n\n\t\t\t\t\tfor (let index = 0; index < listeners.length; index++) {\n\t\t\t\t\t\tlisteners[index].reject(error);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tentry.listeners = listeners;\n\t\t\tentry.completed = false;\n\t\t\tentry.destroyed = false;\n\n\t\t\tthis.queue[normalizedOptions][normalizedOrigin] = entry;\n\t\t\tthis.queue[normalizedOptions][kLength]++;\n\t\t\tthis._processQueue();\n\t\t});\n\t}\n\n\trequest(origin, options, headers, streamOptions) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.getSession(origin, options, [{\n\t\t\t\treject,\n\t\t\t\tresolve: session => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst stream = session.request(headers, streamOptions);\n\n\t\t\t\t\t\t// Do not throw before `request(...)` has been awaited\n\t\t\t\t\t\tdelayAsyncDestroy(stream);\n\n\t\t\t\t\t\tresolve(stream);\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\treject(error);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}]);\n\t\t});\n\t}\n\n\tasync createConnection(origin, options) {\n\t\treturn Agent.connect(origin, options);\n\t}\n\n\tstatic connect(origin, options) {\n\t\toptions.ALPNProtocols = ['h2'];\n\n\t\tconst port = origin.port || 443;\n\t\tconst host = origin.hostname;\n\n\t\tif (typeof options.servername === 'undefined') {\n\t\t\toptions.servername = host;\n\t\t}\n\n\t\tconst socket = tls.connect(port, host, options);\n\n\t\tif (options.socket) {\n\t\t\tsocket._peername = {\n\t\t\t\tfamily: undefined,\n\t\t\t\taddress: undefined,\n\t\t\t\tport\n\t\t\t};\n\t\t}\n\n\t\treturn socket;\n\t}\n\n\tcloseEmptySessions(maxCount = Number.POSITIVE_INFINITY) {\n\t\tlet closedCount = 0;\n\n\t\tconst {sessions} = this;\n\n\t\t// eslint-disable-next-line guard-for-in\n\t\tfor (const key in sessions) {\n\t\t\tconst thisSessions = sessions[key];\n\n\t\t\tfor (let index = 0; index < thisSessions.length; index++) {\n\t\t\t\tconst session = thisSessions[index];\n\n\t\t\t\tif (session[kCurrentStreamCount] === 0) {\n\t\t\t\t\tclosedCount++;\n\t\t\t\t\tsession.close();\n\n\t\t\t\t\tif (closedCount >= maxCount) {\n\t\t\t\t\t\treturn closedCount;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn closedCount;\n\t}\n\n\tdestroy(reason) {\n\t\tconst {sessions, queue} = this;\n\n\t\t// eslint-disable-next-line guard-for-in\n\t\tfor (const key in sessions) {\n\t\t\tconst thisSessions = sessions[key];\n\n\t\t\tfor (let index = 0; index < thisSessions.length; index++) {\n\t\t\t\tthisSessions[index].destroy(reason);\n\t\t\t}\n\t\t}\n\n\t\t// eslint-disable-next-line guard-for-in\n\t\tfor (const normalizedOptions in queue) {\n\t\t\tconst entries = queue[normalizedOptions];\n\n\t\t\t// eslint-disable-next-line guard-for-in\n\t\t\tfor (const normalizedOrigin in entries) {\n\t\t\t\tentries[normalizedOrigin].destroyed = true;\n\t\t\t}\n\t\t}\n\n\t\t// New requests should NOT attach to destroyed sessions\n\t\tthis.queue = {};\n\t\tthis.tlsSessionCache.clear();\n\t}\n\n\tget emptySessionCount() {\n\t\treturn this._emptySessionCount;\n\t}\n\n\tget pendingSessionCount() {\n\t\treturn this._sessionCount - this._emptySessionCount;\n\t}\n\n\tget sessionCount() {\n\t\treturn this._sessionCount;\n\t}\n}\n\nAgent.kCurrentStreamCount = kCurrentStreamCount;\nAgent.kGracefullyClosing = kGracefullyClosing;\n\nmodule.exports = {\n\tAgent,\n\tglobalAgent: new Agent()\n};\n", "'use strict';\nconst {Readable} = require('stream');\n\nclass IncomingMessage extends Readable {\n\tconstructor(socket, highWaterMark) {\n\t\tsuper({\n\t\t\temitClose: false,\n\t\t\tautoDestroy: true,\n\t\t\thighWaterMark\n\t\t});\n\n\t\tthis.statusCode = null;\n\t\tthis.statusMessage = '';\n\t\tthis.httpVersion = '2.0';\n\t\tthis.httpVersionMajor = 2;\n\t\tthis.httpVersionMinor = 0;\n\t\tthis.headers = {};\n\t\tthis.trailers = {};\n\t\tthis.req = null;\n\n\t\tthis.aborted = false;\n\t\tthis.complete = false;\n\t\tthis.upgrade = null;\n\n\t\tthis.rawHeaders = [];\n\t\tthis.rawTrailers = [];\n\n\t\tthis.socket = socket;\n\n\t\tthis._dumped = false;\n\t}\n\n\tget connection() {\n\t\treturn this.socket;\n\t}\n\n\tset connection(value) {\n\t\tthis.socket = value;\n\t}\n\n\t_destroy(error, callback) {\n\t\tif (!this.readableEnded) {\n\t\t\tthis.aborted = true;\n\t\t}\n\n\t\t// See https://github.com/nodejs/node/issues/35303\n\t\tcallback();\n\n\t\tthis.req._request.destroy(error);\n\t}\n\n\tsetTimeout(ms, callback) {\n\t\tthis.req.setTimeout(ms, callback);\n\t\treturn this;\n\t}\n\n\t_dump() {\n\t\tif (!this._dumped) {\n\t\t\tthis._dumped = true;\n\n\t\t\tthis.removeAllListeners('data');\n\t\t\tthis.resume();\n\t\t}\n\t}\n\n\t_read() {\n\t\tif (this.req) {\n\t\t\tthis.req._request.resume();\n\t\t}\n\t}\n}\n\nmodule.exports = IncomingMessage;\n", "'use strict';\n\nmodule.exports = (from, to, events) => {\n\tfor (const event of events) {\n\t\tfrom.on(event, (...args) => to.emit(event, ...args));\n\t}\n};\n", "'use strict';\n/* istanbul ignore file: https://github.com/nodejs/node/blob/master/lib/internal/errors.js */\n\nconst makeError = (Base, key, getMessage) => {\n\tmodule.exports[key] = class NodeError extends Base {\n\t\tconstructor(...args) {\n\t\t\tsuper(typeof getMessage === 'string' ? getMessage : getMessage(args));\n\t\t\tthis.name = `${super.name} [${key}]`;\n\t\t\tthis.code = key;\n\t\t}\n\t};\n};\n\nmakeError(TypeError, 'ERR_INVALID_ARG_TYPE', args => {\n\tconst type = args[0].includes('.') ? 'property' : 'argument';\n\n\tlet valid = args[1];\n\tconst isManyTypes = Array.isArray(valid);\n\n\tif (isManyTypes) {\n\t\tvalid = `${valid.slice(0, -1).join(', ')} or ${valid.slice(-1)}`;\n\t}\n\n\treturn `The \"${args[0]}\" ${type} must be ${isManyTypes ? 'one of' : 'of'} type ${valid}. Received ${typeof args[2]}`;\n});\n\nmakeError(TypeError, 'ERR_INVALID_PROTOCOL', args =>\n\t`Protocol \"${args[0]}\" not supported. Expected \"${args[1]}\"`\n);\n\nmakeError(Error, 'ERR_HTTP_HEADERS_SENT', args =>\n\t`Cannot ${args[0]} headers after they are sent to the client`\n);\n\nmakeError(TypeError, 'ERR_INVALID_HTTP_TOKEN', args =>\n\t`${args[0]} must be a valid HTTP token [${args[1]}]`\n);\n\nmakeError(TypeError, 'ERR_HTTP_INVALID_HEADER_VALUE', args =>\n\t`Invalid value \"${args[0]} for header \"${args[1]}\"`\n);\n\nmakeError(TypeError, 'ERR_INVALID_CHAR', args =>\n\t`Invalid character in ${args[0]} [${args[1]}]`\n);\n\nmakeError(\n\tError,\n\t'ERR_HTTP2_NO_SOCKET_MANIPULATION',\n\t'HTTP/2 sockets should not be directly manipulated (e.g. read and written)'\n);\n", "'use strict';\n\nmodule.exports = header => {\n\tswitch (header) {\n\t\tcase ':method':\n\t\tcase ':scheme':\n\t\tcase ':authority':\n\t\tcase ':path':\n\t\t\treturn true;\n\t\tdefault:\n\t\t\treturn false;\n\t}\n};\n", "'use strict';\nconst {ERR_INVALID_HTTP_TOKEN} = require('./errors.js');\nconst isRequestPseudoHeader = require('./is-request-pseudo-header.js');\n\nconst isValidHttpToken = /^[\\^`\\-\\w!#$%&*+.|~]+$/;\n\nmodule.exports = name => {\n\tif (typeof name !== 'string' || (!isValidHttpToken.test(name) && !isRequestPseudoHeader(name))) {\n\t\tthrow new ERR_INVALID_HTTP_TOKEN('Header name', name);\n\t}\n};\n", "'use strict';\nconst {\n\tERR_HTTP_INVALID_HEADER_VALUE,\n\tERR_INVALID_CHAR\n} = require('./errors.js');\n\nconst isInvalidHeaderValue = /[^\\t\\u0020-\\u007E\\u0080-\\u00FF]/;\n\nmodule.exports = (name, value) => {\n\tif (typeof value === 'undefined') {\n\t\tthrow new ERR_HTTP_INVALID_HEADER_VALUE(value, name);\n\t}\n\n\tif (isInvalidHeaderValue.test(value)) {\n\t\tthrow new ERR_INVALID_CHAR('header content', name);\n\t}\n};\n", "'use strict';\nconst {ERR_HTTP2_NO_SOCKET_MANIPULATION} = require('./errors.js');\n\n/* istanbul ignore file */\n/* https://github.com/nodejs/node/blob/6eec858f34a40ffa489c1ec54bb24da72a28c781/lib/internal/http2/compat.js#L195-L272 */\n\nconst proxySocketHandler = {\n\thas(stream, property) {\n\t\t// Replaced [kSocket] with .socket\n\t\tconst reference = stream.session === undefined ? stream : stream.session.socket;\n\t\treturn (property in stream) || (property in reference);\n\t},\n\n\tget(stream, property) {\n\t\tswitch (property) {\n\t\t\tcase 'on':\n\t\t\tcase 'once':\n\t\t\tcase 'end':\n\t\t\tcase 'emit':\n\t\t\tcase 'destroy':\n\t\t\t\treturn stream[property].bind(stream);\n\t\t\tcase 'writable':\n\t\t\tcase 'destroyed':\n\t\t\t\treturn stream[property];\n\t\t\tcase 'readable':\n\t\t\t\tif (stream.destroyed) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn stream.readable;\n\t\t\tcase 'setTimeout': {\n\t\t\t\tconst {session} = stream;\n\t\t\t\tif (session !== undefined) {\n\t\t\t\t\treturn session.setTimeout.bind(session);\n\t\t\t\t}\n\n\t\t\t\treturn stream.setTimeout.bind(stream);\n\t\t\t}\n\n\t\t\tcase 'write':\n\t\t\tcase 'read':\n\t\t\tcase 'pause':\n\t\t\tcase 'resume':\n\t\t\t\tthrow new ERR_HTTP2_NO_SOCKET_MANIPULATION();\n\t\t\tdefault: {\n\t\t\t\t// Replaced [kSocket] with .socket\n\t\t\t\tconst reference = stream.session === undefined ? stream : stream.session.socket;\n\t\t\t\tconst value = reference[property];\n\n\t\t\t\treturn typeof value === 'function' ? value.bind(reference) : value;\n\t\t\t}\n\t\t}\n\t},\n\n\tgetPrototypeOf(stream) {\n\t\tif (stream.session !== undefined) {\n\t\t\t// Replaced [kSocket] with .socket\n\t\t\treturn Reflect.getPrototypeOf(stream.session.socket);\n\t\t}\n\n\t\treturn Reflect.getPrototypeOf(stream);\n\t},\n\n\tset(stream, property, value) {\n\t\tswitch (property) {\n\t\t\tcase 'writable':\n\t\t\tcase 'readable':\n\t\t\tcase 'destroyed':\n\t\t\tcase 'on':\n\t\t\tcase 'once':\n\t\t\tcase 'end':\n\t\t\tcase 'emit':\n\t\t\tcase 'destroy':\n\t\t\t\tstream[property] = value;\n\t\t\t\treturn true;\n\t\t\tcase 'setTimeout': {\n\t\t\t\tconst {session} = stream;\n\t\t\t\tif (session === undefined) {\n\t\t\t\t\tstream.setTimeout = value;\n\t\t\t\t} else {\n\t\t\t\t\tsession.setTimeout = value;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tcase 'write':\n\t\t\tcase 'read':\n\t\t\tcase 'pause':\n\t\t\tcase 'resume':\n\t\t\t\tthrow new ERR_HTTP2_NO_SOCKET_MANIPULATION();\n\t\t\tdefault: {\n\t\t\t\t// Replaced [kSocket] with .socket\n\t\t\t\tconst reference = stream.session === undefined ? stream : stream.session.socket;\n\t\t\t\treference[property] = value;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n};\n\nmodule.exports = proxySocketHandler;\n", "'use strict';\n// See https://github.com/facebook/jest/issues/2549\n// eslint-disable-next-line node/prefer-global/url\nconst {URL, urlToHttpOptions} = require('url');\nconst http2 = require('http2');\nconst {Writable} = require('stream');\nconst {Agent, globalAgent} = require('./agent.js');\nconst IncomingMessage = require('./incoming-message.js');\nconst proxyEvents = require('./utils/proxy-events.js');\nconst {\n\tERR_INVALID_ARG_TYPE,\n\tERR_INVALID_PROTOCOL,\n\tERR_HTTP_HEADERS_SENT\n} = require('./utils/errors.js');\nconst validateHeaderName = require('./utils/validate-header-name.js');\nconst validateHeaderValue = require('./utils/validate-header-value.js');\nconst proxySocketHandler = require('./utils/proxy-socket-handler.js');\n\nconst {\n\tHTTP2_HEADER_STATUS,\n\tHTTP2_HEADER_METHOD,\n\tHTTP2_HEADER_PATH,\n\tHTTP2_HEADER_AUTHORITY,\n\tHTTP2_METHOD_CONNECT\n} = http2.constants;\n\nconst kHeaders = Symbol('headers');\nconst kOrigin = Symbol('origin');\nconst kSession = Symbol('session');\nconst kOptions = Symbol('options');\nconst kFlushedHeaders = Symbol('flushedHeaders');\nconst kJobs = Symbol('jobs');\nconst kPendingAgentPromise = Symbol('pendingAgentPromise');\n\nclass ClientRequest extends Writable {\n\tconstructor(input, options, callback) {\n\t\tsuper({\n\t\t\tautoDestroy: false,\n\t\t\temitClose: false\n\t\t});\n\n\t\tif (typeof input === 'string') {\n\t\t\tinput = urlToHttpOptions(new URL(input));\n\t\t} else if (input instanceof URL) {\n\t\t\tinput = urlToHttpOptions(input);\n\t\t} else {\n\t\t\tinput = {...input};\n\t\t}\n\n\t\tif (typeof options === 'function' || options === undefined) {\n\t\t\t// (options, callback)\n\t\t\tcallback = options;\n\t\t\toptions = input;\n\t\t} else {\n\t\t\t// (input, options, callback)\n\t\t\toptions = Object.assign(input, options);\n\t\t}\n\n\t\tif (options.h2session) {\n\t\t\tthis[kSession] = options.h2session;\n\n\t\t\tif (this[kSession].destroyed) {\n\t\t\t\tthrow new Error('The session has been closed already');\n\t\t\t}\n\n\t\t\tthis.protocol = this[kSession].socket.encrypted ? 'https:' : 'http:';\n\t\t} else if (options.agent === false) {\n\t\t\tthis.agent = new Agent({maxEmptySessions: 0});\n\t\t} else if (typeof options.agent === 'undefined' || options.agent === null) {\n\t\t\tthis.agent = globalAgent;\n\t\t} else if (typeof options.agent.request === 'function') {\n\t\t\tthis.agent = options.agent;\n\t\t} else {\n\t\t\tthrow new ERR_INVALID_ARG_TYPE('options.agent', ['http2wrapper.Agent-like Object', 'undefined', 'false'], options.agent);\n\t\t}\n\n\t\tif (this.agent) {\n\t\t\tthis.protocol = this.agent.protocol;\n\t\t}\n\n\t\tif (options.protocol && options.protocol !== this.protocol) {\n\t\t\tthrow new ERR_INVALID_PROTOCOL(options.protocol, this.protocol);\n\t\t}\n\n\t\tif (!options.port) {\n\t\t\toptions.port = options.defaultPort || (this.agent && this.agent.defaultPort) || 443;\n\t\t}\n\n\t\toptions.host = options.hostname || options.host || 'localhost';\n\n\t\t// Unused\n\t\tdelete options.hostname;\n\n\t\tconst {timeout} = options;\n\t\toptions.timeout = undefined;\n\n\t\tthis[kHeaders] = Object.create(null);\n\t\tthis[kJobs] = [];\n\n\t\tthis[kPendingAgentPromise] = undefined;\n\n\t\tthis.socket = null;\n\t\tthis.connection = null;\n\n\t\tthis.method = options.method || 'GET';\n\n\t\tif (!(this.method === 'CONNECT' && (options.path === '/' || options.path === undefined))) {\n\t\t\tthis.path = options.path;\n\t\t}\n\n\t\tthis.res = null;\n\t\tthis.aborted = false;\n\t\tthis.reusedSocket = false;\n\n\t\tconst {headers} = options;\n\t\tif (headers) {\n\t\t\t// eslint-disable-next-line guard-for-in\n\t\t\tfor (const header in headers) {\n\t\t\t\tthis.setHeader(header, headers[header]);\n\t\t\t}\n\t\t}\n\n\t\tif (options.auth && !('authorization' in this[kHeaders])) {\n\t\t\tthis[kHeaders].authorization = 'Basic ' + Buffer.from(options.auth).toString('base64');\n\t\t}\n\n\t\toptions.session = options.tlsSession;\n\t\toptions.path = options.socketPath;\n\n\t\tthis[kOptions] = options;\n\n\t\t// Clients that generate HTTP/2 requests directly SHOULD use the :authority pseudo-header field instead of the Host header field.\n\t\tthis[kOrigin] = new URL(`${this.protocol}//${options.servername || options.host}:${options.port}`);\n\n\t\t// A socket is being reused\n\t\tconst reuseSocket = options._reuseSocket;\n\t\tif (reuseSocket) {\n\t\t\toptions.createConnection = (...args) => {\n\t\t\t\tif (reuseSocket.destroyed) {\n\t\t\t\t\treturn this.agent.createConnection(...args);\n\t\t\t\t}\n\n\t\t\t\treturn reuseSocket;\n\t\t\t};\n\n\t\t\t// eslint-disable-next-line promise/prefer-await-to-then\n\t\t\tthis.agent.getSession(this[kOrigin], this[kOptions]).catch(() => {});\n\t\t}\n\n\t\tif (timeout) {\n\t\t\tthis.setTimeout(timeout);\n\t\t}\n\n\t\tif (callback) {\n\t\t\tthis.once('response', callback);\n\t\t}\n\n\t\tthis[kFlushedHeaders] = false;\n\t}\n\n\tget method() {\n\t\treturn this[kHeaders][HTTP2_HEADER_METHOD];\n\t}\n\n\tset method(value) {\n\t\tif (value) {\n\t\t\tthis[kHeaders][HTTP2_HEADER_METHOD] = value.toUpperCase();\n\t\t}\n\t}\n\n\tget path() {\n\t\tconst header = this.method === 'CONNECT' ? HTTP2_HEADER_AUTHORITY : HTTP2_HEADER_PATH;\n\n\t\treturn this[kHeaders][header];\n\t}\n\n\tset path(value) {\n\t\tif (value) {\n\t\t\tconst header = this.method === 'CONNECT' ? HTTP2_HEADER_AUTHORITY : HTTP2_HEADER_PATH;\n\n\t\t\tthis[kHeaders][header] = value;\n\t\t}\n\t}\n\n\tget host() {\n\t\treturn this[kOrigin].hostname;\n\t}\n\n\tset host(_value) {\n\t\t// Do nothing as this is read only.\n\t}\n\n\tget _mustNotHaveABody() {\n\t\treturn this.method === 'GET' || this.method === 'HEAD' || this.method === 'DELETE';\n\t}\n\n\t_write(chunk, encoding, callback) {\n\t\t// https://github.com/nodejs/node/blob/654df09ae0c5e17d1b52a900a545f0664d8c7627/lib/internal/http2/util.js#L148-L156\n\t\tif (this._mustNotHaveABody) {\n\t\t\tcallback(new Error('The GET, HEAD and DELETE methods must NOT have a body'));\n\t\t\t/* istanbul ignore next: Node.js 12 throws directly */\n\t\t\treturn;\n\t\t}\n\n\t\tthis.flushHeaders();\n\n\t\tconst callWrite = () => this._request.write(chunk, encoding, callback);\n\t\tif (this._request) {\n\t\t\tcallWrite();\n\t\t} else {\n\t\t\tthis[kJobs].push(callWrite);\n\t\t}\n\t}\n\n\t_final(callback) {\n\t\tthis.flushHeaders();\n\n\t\tconst callEnd = () => {\n\t\t\t// For GET, HEAD and DELETE and CONNECT\n\t\t\tif (this._mustNotHaveABody || this.method === 'CONNECT') {\n\t\t\t\tcallback();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._request.end(callback);\n\t\t};\n\n\t\tif (this._request) {\n\t\t\tcallEnd();\n\t\t} else {\n\t\t\tthis[kJobs].push(callEnd);\n\t\t}\n\t}\n\n\tabort() {\n\t\tif (this.res && this.res.complete) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.aborted) {\n\t\t\tprocess.nextTick(() => this.emit('abort'));\n\t\t}\n\n\t\tthis.aborted = true;\n\n\t\tthis.destroy();\n\t}\n\n\tasync _destroy(error, callback) {\n\t\tif (this.res) {\n\t\t\tthis.res._dump();\n\t\t}\n\n\t\tif (this._request) {\n\t\t\tthis._request.destroy();\n\t\t} else {\n\t\t\tprocess.nextTick(() => {\n\t\t\t\tthis.emit('close');\n\t\t\t});\n\t\t}\n\n\t\ttry {\n\t\t\tawait this[kPendingAgentPromise];\n\t\t} catch (internalError) {\n\t\t\tif (this.aborted) {\n\t\t\t\terror = internalError;\n\t\t\t}\n\t\t}\n\n\t\tcallback(error);\n\t}\n\n\tasync flushHeaders() {\n\t\tif (this[kFlushedHeaders] || this.destroyed) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis[kFlushedHeaders] = true;\n\n\t\tconst isConnectMethod = this.method === HTTP2_METHOD_CONNECT;\n\n\t\t// The real magic is here\n\t\tconst onStream = stream => {\n\t\t\tthis._request = stream;\n\n\t\t\tif (this.destroyed) {\n\t\t\t\tstream.destroy();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Forwards `timeout`, `continue`, `close` and `error` events to this instance.\n\t\t\tif (!isConnectMethod) {\n\t\t\t\t// TODO: Should we proxy `close` here?\n\t\t\t\tproxyEvents(stream, this, ['timeout', 'continue']);\n\t\t\t}\n\n\t\t\tstream.once('error', error => {\n\t\t\t\tthis.destroy(error);\n\t\t\t});\n\n\t\t\tstream.once('aborted', () => {\n\t\t\t\tconst {res} = this;\n\t\t\t\tif (res) {\n\t\t\t\t\tres.aborted = true;\n\t\t\t\t\tres.emit('aborted');\n\t\t\t\t\tres.destroy();\n\t\t\t\t} else {\n\t\t\t\t\tthis.destroy(new Error('The server aborted the HTTP/2 stream'));\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tconst onResponse = (headers, flags, rawHeaders) => {\n\t\t\t\t// If we were to emit raw request stream, it would be as fast as the native approach.\n\t\t\t\t// Note that wrapping the raw stream in a Proxy instance won't improve the performance (already tested it).\n\t\t\t\tconst response = new IncomingMessage(this.socket, stream.readableHighWaterMark);\n\t\t\t\tthis.res = response;\n\n\t\t\t\t// Undocumented, but it is used by `cacheable-request`\n\t\t\t\tresponse.url = `${this[kOrigin].origin}${this.path}`;\n\n\t\t\t\tresponse.req = this;\n\t\t\t\tresponse.statusCode = headers[HTTP2_HEADER_STATUS];\n\t\t\t\tresponse.headers = headers;\n\t\t\t\tresponse.rawHeaders = rawHeaders;\n\n\t\t\t\tresponse.once('end', () => {\n\t\t\t\t\tresponse.complete = true;\n\n\t\t\t\t\t// Has no effect, just be consistent with the Node.js behavior\n\t\t\t\t\tresponse.socket = null;\n\t\t\t\t\tresponse.connection = null;\n\t\t\t\t});\n\n\t\t\t\tif (isConnectMethod) {\n\t\t\t\t\tresponse.upgrade = true;\n\n\t\t\t\t\t// The HTTP1 API says the socket is detached here,\n\t\t\t\t\t// but we can't do that so we pass the original HTTP2 request.\n\t\t\t\t\tif (this.emit('connect', response, stream, Buffer.alloc(0))) {\n\t\t\t\t\t\tthis.emit('close');\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// No listeners attached, destroy the original request.\n\t\t\t\t\t\tstream.destroy();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// Forwards data\n\t\t\t\t\tstream.on('data', chunk => {\n\t\t\t\t\t\tif (!response._dumped && !response.push(chunk)) {\n\t\t\t\t\t\t\tstream.pause();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tstream.once('end', () => {\n\t\t\t\t\t\tif (!this.aborted) {\n\t\t\t\t\t\t\tresponse.push(null);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tif (!this.emit('response', response)) {\n\t\t\t\t\t\t// No listeners attached, dump the response.\n\t\t\t\t\t\tresponse._dump();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// This event tells we are ready to listen for the data.\n\t\t\tstream.once('response', onResponse);\n\n\t\t\t// Emits `information` event\n\t\t\tstream.once('headers', headers => this.emit('information', {statusCode: headers[HTTP2_HEADER_STATUS]}));\n\n\t\t\tstream.once('trailers', (trailers, flags, rawTrailers) => {\n\t\t\t\tconst {res} = this;\n\n\t\t\t\t// https://github.com/nodejs/node/issues/41251\n\t\t\t\tif (res === null) {\n\t\t\t\t\tonResponse(trailers, flags, rawTrailers);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Assigns trailers to the response object.\n\t\t\t\tres.trailers = trailers;\n\t\t\t\tres.rawTrailers = rawTrailers;\n\t\t\t});\n\n\t\t\tstream.once('close', () => {\n\t\t\t\tconst {aborted, res} = this;\n\t\t\t\tif (res) {\n\t\t\t\t\tif (aborted) {\n\t\t\t\t\t\tres.aborted = true;\n\t\t\t\t\t\tres.emit('aborted');\n\t\t\t\t\t\tres.destroy();\n\t\t\t\t\t}\n\n\t\t\t\t\tconst finish = () => {\n\t\t\t\t\t\tres.emit('close');\n\n\t\t\t\t\t\tthis.destroy();\n\t\t\t\t\t\tthis.emit('close');\n\t\t\t\t\t};\n\n\t\t\t\t\tif (res.readable) {\n\t\t\t\t\t\tres.once('end', finish);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfinish();\n\t\t\t\t\t}\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (!this.destroyed) {\n\t\t\t\t\tthis.destroy(new Error('The HTTP/2 stream has been early terminated'));\n\t\t\t\t\tthis.emit('close');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.destroy();\n\t\t\t\tthis.emit('close');\n\t\t\t});\n\n\t\t\tthis.socket = new Proxy(stream, proxySocketHandler);\n\n\t\t\tfor (const job of this[kJobs]) {\n\t\t\t\tjob();\n\t\t\t}\n\n\t\t\tthis[kJobs].length = 0;\n\n\t\t\tthis.emit('socket', this.socket);\n\t\t};\n\n\t\tif (!(HTTP2_HEADER_AUTHORITY in this[kHeaders]) && !isConnectMethod) {\n\t\t\tthis[kHeaders][HTTP2_HEADER_AUTHORITY] = this[kOrigin].host;\n\t\t}\n\n\t\t// Makes a HTTP2 request\n\t\tif (this[kSession]) {\n\t\t\ttry {\n\t\t\t\tonStream(this[kSession].request(this[kHeaders]));\n\t\t\t} catch (error) {\n\t\t\t\tthis.destroy(error);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.reusedSocket = true;\n\n\t\t\ttry {\n\t\t\t\tconst promise = this.agent.request(this[kOrigin], this[kOptions], this[kHeaders]);\n\t\t\t\tthis[kPendingAgentPromise] = promise;\n\n\t\t\t\tonStream(await promise);\n\n\t\t\t\tthis[kPendingAgentPromise] = false;\n\t\t\t} catch (error) {\n\t\t\t\tthis[kPendingAgentPromise] = false;\n\n\t\t\t\tthis.destroy(error);\n\t\t\t}\n\t\t}\n\t}\n\n\tget connection() {\n\t\treturn this.socket;\n\t}\n\n\tset connection(value) {\n\t\tthis.socket = value;\n\t}\n\n\tgetHeaderNames() {\n\t\treturn Object.keys(this[kHeaders]);\n\t}\n\n\thasHeader(name) {\n\t\tif (typeof name !== 'string') {\n\t\t\tthrow new ERR_INVALID_ARG_TYPE('name', 'string', name);\n\t\t}\n\n\t\treturn Boolean(this[kHeaders][name.toLowerCase()]);\n\t}\n\n\tgetHeader(name) {\n\t\tif (typeof name !== 'string') {\n\t\t\tthrow new ERR_INVALID_ARG_TYPE('name', 'string', name);\n\t\t}\n\n\t\treturn this[kHeaders][name.toLowerCase()];\n\t}\n\n\tget headersSent() {\n\t\treturn this[kFlushedHeaders];\n\t}\n\n\tremoveHeader(name) {\n\t\tif (typeof name !== 'string') {\n\t\t\tthrow new ERR_INVALID_ARG_TYPE('name', 'string', name);\n\t\t}\n\n\t\tif (this.headersSent) {\n\t\t\tthrow new ERR_HTTP_HEADERS_SENT('remove');\n\t\t}\n\n\t\tdelete this[kHeaders][name.toLowerCase()];\n\t}\n\n\tsetHeader(name, value) {\n\t\tif (this.headersSent) {\n\t\t\tthrow new ERR_HTTP_HEADERS_SENT('set');\n\t\t}\n\n\t\tvalidateHeaderName(name);\n\t\tvalidateHeaderValue(name, value);\n\n\t\tconst lowercased = name.toLowerCase();\n\n\t\tif (lowercased === 'connection') {\n\t\t\tif (value.toLowerCase() === 'keep-alive') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthrow new Error(`Invalid 'connection' header: ${value}`);\n\t\t}\n\n\t\tif (lowercased === 'host' && this.method === 'CONNECT') {\n\t\t\tthis[kHeaders][HTTP2_HEADER_AUTHORITY] = value;\n\t\t} else {\n\t\t\tthis[kHeaders][lowercased] = value;\n\t\t}\n\t}\n\n\tsetNoDelay() {\n\t\t// HTTP2 sockets cannot be malformed, do nothing.\n\t}\n\n\tsetSocketKeepAlive() {\n\t\t// HTTP2 sockets cannot be malformed, do nothing.\n\t}\n\n\tsetTimeout(ms, callback) {\n\t\tconst applyTimeout = () => this._request.setTimeout(ms, callback);\n\n\t\tif (this._request) {\n\t\t\tapplyTimeout();\n\t\t} else {\n\t\t\tthis[kJobs].push(applyTimeout);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tget maxHeadersCount() {\n\t\tif (!this.destroyed && this._request) {\n\t\t\treturn this._request.session.localSettings.maxHeaderListSize;\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tset maxHeadersCount(_value) {\n\t\t// Updating HTTP2 settings would affect all requests, do nothing.\n\t}\n}\n\nmodule.exports = ClientRequest;\n", "'use strict';\nconst tls = require('tls');\n\nmodule.exports = (options = {}, connect = tls.connect) => new Promise((resolve, reject) => {\n\tlet timeout = false;\n\n\tlet socket;\n\n\tconst callback = async () => {\n\t\tawait socketPromise;\n\n\t\tsocket.off('timeout', onTimeout);\n\t\tsocket.off('error', reject);\n\n\t\tif (options.resolveSocket) {\n\t\t\tresolve({alpnProtocol: socket.alpnProtocol, socket, timeout});\n\n\t\t\tif (timeout) {\n\t\t\t\tawait Promise.resolve();\n\t\t\t\tsocket.emit('timeout');\n\t\t\t}\n\t\t} else {\n\t\t\tsocket.destroy();\n\t\t\tresolve({alpnProtocol: socket.alpnProtocol, timeout});\n\t\t}\n\t};\n\n\tconst onTimeout = async () => {\n\t\ttimeout = true;\n\t\tcallback();\n\t};\n\n\tconst socketPromise = (async () => {\n\t\ttry {\n\t\t\tsocket = await connect(options, callback);\n\n\t\t\tsocket.on('error', reject);\n\t\t\tsocket.once('timeout', onTimeout);\n\t\t} catch (error) {\n\t\t\treject(error);\n\t\t}\n\t})();\n});\n", "'use strict';\nconst {isIP} = require('net');\nconst assert = require('assert');\n\nconst getHost = host => {\n\tif (host[0] === '[') {\n\t\tconst idx = host.indexOf(']');\n\n\t\tassert(idx !== -1);\n\t\treturn host.slice(1, idx);\n\t}\n\n\tconst idx = host.indexOf(':');\n\tif (idx === -1) {\n\t\treturn host;\n\t}\n\n\treturn host.slice(0, idx);\n};\n\nmodule.exports = host => {\n\tconst servername = getHost(host);\n\n\tif (isIP(servername)) {\n\t\treturn '';\n\t}\n\n\treturn servername;\n};\n", "'use strict';\n// See https://github.com/facebook/jest/issues/2549\n// eslint-disable-next-line node/prefer-global/url\nconst {URL, urlToHttpOptions} = require('url');\nconst http = require('http');\nconst https = require('https');\nconst resolveALPN = require('resolve-alpn');\nconst QuickLRU = require('quick-lru');\nconst {Agent, globalAgent} = require('./agent.js');\nconst Http2ClientRequest = require('./client-request.js');\nconst calculateServerName = require('./utils/calculate-server-name.js');\nconst delayAsyncDestroy = require('./utils/delay-async-destroy.js');\n\nconst cache = new QuickLRU({maxSize: 100});\nconst queue = new Map();\n\nconst installSocket = (agent, socket, options) => {\n\tsocket._httpMessage = {shouldKeepAlive: true};\n\n\tconst onFree = () => {\n\t\tagent.emit('free', socket, options);\n\t};\n\n\tsocket.on('free', onFree);\n\n\tconst onClose = () => {\n\t\tagent.removeSocket(socket, options);\n\t};\n\n\tsocket.on('close', onClose);\n\n\tconst onTimeout = () => {\n\t\tconst {freeSockets} = agent;\n\n\t\tfor (const sockets of Object.values(freeSockets)) {\n\t\t\tif (sockets.includes(socket)) {\n\t\t\t\tsocket.destroy();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t};\n\n\tsocket.on('timeout', onTimeout);\n\n\tconst onRemove = () => {\n\t\tagent.removeSocket(socket, options);\n\t\tsocket.off('close', onClose);\n\t\tsocket.off('free', onFree);\n\t\tsocket.off('timeout', onTimeout);\n\t\tsocket.off('agentRemove', onRemove);\n\t};\n\n\tsocket.on('agentRemove', onRemove);\n\n\tagent.emit('free', socket, options);\n};\n\nconst createResolveProtocol = (cache, queue = new Map(), connect = undefined) => {\n\treturn async options => {\n\t\tconst name = `${options.host}:${options.port}:${options.ALPNProtocols.sort()}`;\n\n\t\tif (!cache.has(name)) {\n\t\t\tif (queue.has(name)) {\n\t\t\t\tconst result = await queue.get(name);\n\t\t\t\treturn {alpnProtocol: result.alpnProtocol};\n\t\t\t}\n\n\t\t\tconst {path} = options;\n\t\t\toptions.path = options.socketPath;\n\n\t\t\tconst resultPromise = resolveALPN(options, connect);\n\t\t\tqueue.set(name, resultPromise);\n\n\t\t\ttry {\n\t\t\t\tconst result = await resultPromise;\n\n\t\t\t\tcache.set(name, result.alpnProtocol);\n\t\t\t\tqueue.delete(name);\n\n\t\t\t\toptions.path = path;\n\n\t\t\t\treturn result;\n\t\t\t} catch (error) {\n\t\t\t\tqueue.delete(name);\n\n\t\t\t\toptions.path = path;\n\n\t\t\t\tthrow error;\n\t\t\t}\n\t\t}\n\n\t\treturn {alpnProtocol: cache.get(name)};\n\t};\n};\n\nconst defaultResolveProtocol = createResolveProtocol(cache, queue);\n\nmodule.exports = async (input, options, callback) => {\n\tif (typeof input === 'string') {\n\t\tinput = urlToHttpOptions(new URL(input));\n\t} else if (input instanceof URL) {\n\t\tinput = urlToHttpOptions(input);\n\t} else {\n\t\tinput = {...input};\n\t}\n\n\tif (typeof options === 'function' || options === undefined) {\n\t\t// (options, callback)\n\t\tcallback = options;\n\t\toptions = input;\n\t} else {\n\t\t// (input, options, callback)\n\t\toptions = Object.assign(input, options);\n\t}\n\n\toptions.ALPNProtocols = options.ALPNProtocols || ['h2', 'http/1.1'];\n\n\tif (!Array.isArray(options.ALPNProtocols) || options.ALPNProtocols.length === 0) {\n\t\tthrow new Error('The `ALPNProtocols` option must be an Array with at least one entry');\n\t}\n\n\toptions.protocol = options.protocol || 'https:';\n\tconst isHttps = options.protocol === 'https:';\n\n\toptions.host = options.hostname || options.host || 'localhost';\n\toptions.session = options.tlsSession;\n\toptions.servername = options.servername || calculateServerName((options.headers && options.headers.host) || options.host);\n\toptions.port = options.port || (isHttps ? 443 : 80);\n\toptions._defaultAgent = isHttps ? https.globalAgent : http.globalAgent;\n\n\tconst resolveProtocol = options.resolveProtocol || defaultResolveProtocol;\n\n\t// Note: We don't support `h2session` here\n\n\tlet {agent} = options;\n\tif (agent !== undefined && agent !== false && agent.constructor.name !== 'Object') {\n\t\tthrow new Error('The `options.agent` can be only an object `http`, `https` or `http2` properties');\n\t}\n\n\tif (isHttps) {\n\t\toptions.resolveSocket = true;\n\n\t\tlet {socket, alpnProtocol, timeout} = await resolveProtocol(options);\n\n\t\tif (timeout) {\n\t\t\tif (socket) {\n\t\t\t\tsocket.destroy();\n\t\t\t}\n\n\t\t\tconst error = new Error(`Timed out resolving ALPN: ${options.timeout} ms`);\n\t\t\terror.code = 'ETIMEDOUT';\n\t\t\terror.ms = options.timeout;\n\n\t\t\tthrow error;\n\t\t}\n\n\t\t// We can't accept custom `createConnection` because the API is different for HTTP/2\n\t\tif (socket && options.createConnection) {\n\t\t\tsocket.destroy();\n\t\t\tsocket = undefined;\n\t\t}\n\n\t\tdelete options.resolveSocket;\n\n\t\tconst isHttp2 = alpnProtocol === 'h2';\n\n\t\tif (agent) {\n\t\t\tagent = isHttp2 ? agent.http2 : agent.https;\n\t\t\toptions.agent = agent;\n\t\t}\n\n\t\tif (agent === undefined) {\n\t\t\tagent = isHttp2 ? globalAgent : https.globalAgent;\n\t\t}\n\n\t\tif (socket) {\n\t\t\tif (agent === false) {\n\t\t\t\tsocket.destroy();\n\t\t\t} else {\n\t\t\t\tconst defaultCreateConnection = (isHttp2 ? Agent : https.Agent).prototype.createConnection;\n\n\t\t\t\tif (agent.createConnection === defaultCreateConnection) {\n\t\t\t\t\tif (isHttp2) {\n\t\t\t\t\t\toptions._reuseSocket = socket;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tinstallSocket(agent, socket, options);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tsocket.destroy();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (isHttp2) {\n\t\t\treturn delayAsyncDestroy(new Http2ClientRequest(options, callback));\n\t\t}\n\t} else if (agent) {\n\t\toptions.agent = agent.http;\n\t}\n\n\treturn delayAsyncDestroy(http.request(options, callback));\n};\n\nmodule.exports.protocolCache = cache;\nmodule.exports.resolveProtocol = defaultResolveProtocol;\nmodule.exports.createResolveProtocol = createResolveProtocol;\n", "'use strict';\nconst stream = require('stream');\nconst tls = require('tls');\n\n// Really awesome hack.\nconst JSStreamSocket = (new tls.TLSSocket(new stream.PassThrough()))._handle._parentWrap.constructor;\n\nmodule.exports = JSStreamSocket;\n", "'use strict';\n\nclass UnexpectedStatusCodeError extends Error {\n\tconstructor(statusCode, statusMessage = '') {\n\t\tsuper(`The proxy server rejected the request with status code ${statusCode} (${statusMessage || 'empty status message'})`);\n\t\tthis.statusCode = statusCode;\n\t\tthis.statusMessage = statusMessage;\n\t}\n}\n\nmodule.exports = UnexpectedStatusCodeError;\n", "'use strict';\n\nconst checkType = (name, value, types) => {\n\tconst valid = types.some(type => {\n\t\tconst typeofType = typeof type;\n\t\tif (typeofType === 'string') {\n\t\t\treturn typeof value === type;\n\t\t}\n\n\t\treturn value instanceof type;\n\t});\n\n\tif (!valid) {\n\t\tconst names = types.map(type => typeof type === 'string' ? type : type.name);\n\n\t\tthrow new TypeError(`Expected '${name}' to be a type of ${names.join(' or ')}, got ${typeof value}`);\n\t}\n};\n\nmodule.exports = checkType;\n", "'use strict';\n// See https://github.com/facebook/jest/issues/2549\n// eslint-disable-next-line node/prefer-global/url\nconst {URL} = require('url');\nconst checkType = require('../utils/check-type.js');\n\nmodule.exports = (self, proxyOptions) => {\n\tcheckType('proxyOptions', proxyOptions, ['object']);\n\tcheckType('proxyOptions.headers', proxyOptions.headers, ['object', 'undefined']);\n\tcheckType('proxyOptions.raw', proxyOptions.raw, ['boolean', 'undefined']);\n\tcheckType('proxyOptions.url', proxyOptions.url, [URL, 'string']);\n\n\tconst url = new URL(proxyOptions.url);\n\n\tself.proxyOptions = {\n\t\traw: true,\n\t\t...proxyOptions,\n\t\theaders: {...proxyOptions.headers},\n\t\turl\n\t};\n};\n", "'use strict';\n\nmodule.exports = self => {\n\tconst {username, password} = self.proxyOptions.url;\n\n\tif (username || password) {\n\t\tconst data = `${username}:${password}`;\n\t\tconst authorization = `Basic ${Buffer.from(data).toString('base64')}`;\n\n\t\treturn {\n\t\t\t'proxy-authorization': authorization,\n\t\t\tauthorization\n\t\t};\n\t}\n\n\treturn {};\n};\n", "'use strict';\nconst tls = require('tls');\nconst http = require('http');\nconst https = require('https');\nconst JSStreamSocket = require('../utils/js-stream-socket.js');\nconst {globalAgent} = require('../agent.js');\nconst UnexpectedStatusCodeError = require('./unexpected-status-code-error.js');\nconst initialize = require('./initialize.js');\nconst getAuthorizationHeaders = require('./get-auth-headers.js');\n\nconst createConnection = (self, options, callback) => {\n\t(async () => {\n\t\ttry {\n\t\t\tconst {proxyOptions} = self;\n\t\t\tconst {url, headers, raw} = proxyOptions;\n\n\t\t\tconst stream = await globalAgent.request(url, proxyOptions, {\n\t\t\t\t...getAuthorizationHeaders(self),\n\t\t\t\t...headers,\n\t\t\t\t':method': 'CONNECT',\n\t\t\t\t':authority': `${options.host}:${options.port}`\n\t\t\t});\n\n\t\t\tstream.once('error', callback);\n\t\t\tstream.once('response', headers => {\n\t\t\t\tconst statusCode = headers[':status'];\n\n\t\t\t\tif (statusCode !== 200) {\n\t\t\t\t\tcallback(new UnexpectedStatusCodeError(statusCode, ''));\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst encrypted = self instanceof https.Agent;\n\n\t\t\t\tif (raw && encrypted) {\n\t\t\t\t\toptions.socket = stream;\n\t\t\t\t\tconst secureStream = tls.connect(options);\n\n\t\t\t\t\tsecureStream.once('close', () => {\n\t\t\t\t\t\tstream.destroy();\n\t\t\t\t\t});\n\n\t\t\t\t\tcallback(null, secureStream);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst socket = new JSStreamSocket(stream);\n\t\t\t\tsocket.encrypted = false;\n\t\t\t\tsocket._handle.getpeername = out => {\n\t\t\t\t\tout.family = undefined;\n\t\t\t\t\tout.address = undefined;\n\t\t\t\t\tout.port = undefined;\n\t\t\t\t};\n\n\t\t\t\tcallback(null, socket);\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tcallback(error);\n\t\t}\n\t})();\n};\n\nclass HttpOverHttp2 extends http.Agent {\n\tconstructor(options) {\n\t\tsuper(options);\n\n\t\tinitialize(this, options.proxyOptions);\n\t}\n\n\tcreateConnection(options, callback) {\n\t\tcreateConnection(this, options, callback);\n\t}\n}\n\nclass HttpsOverHttp2 extends https.Agent {\n\tconstructor(options) {\n\t\tsuper(options);\n\n\t\tinitialize(this, options.proxyOptions);\n\t}\n\n\tcreateConnection(options, callback) {\n\t\tcreateConnection(this, options, callback);\n\t}\n}\n\nmodule.exports = {\n\tHttpOverHttp2,\n\tHttpsOverHttp2\n};\n", "'use strict';\nconst {Agent} = require('../agent.js');\nconst JSStreamSocket = require('../utils/js-stream-socket.js');\nconst UnexpectedStatusCodeError = require('./unexpected-status-code-error.js');\nconst initialize = require('./initialize.js');\n\nclass Http2OverHttpX extends Agent {\n\tconstructor(options) {\n\t\tsuper(options);\n\n\t\tinitialize(this, options.proxyOptions);\n\t}\n\n\tasync createConnection(origin, options) {\n\t\tconst authority = `${origin.hostname}:${origin.port || 443}`;\n\n\t\tconst [stream, statusCode, statusMessage] = await this._getProxyStream(authority);\n\t\tif (statusCode !== 200) {\n\t\t\tthrow new UnexpectedStatusCodeError(statusCode, statusMessage);\n\t\t}\n\n\t\tif (this.proxyOptions.raw) {\n\t\t\toptions.socket = stream;\n\t\t} else {\n\t\t\tconst socket = new JSStreamSocket(stream);\n\t\t\tsocket.encrypted = false;\n\t\t\tsocket._handle.getpeername = out => {\n\t\t\t\tout.family = undefined;\n\t\t\t\tout.address = undefined;\n\t\t\t\tout.port = undefined;\n\t\t\t};\n\n\t\t\treturn socket;\n\t\t}\n\n\t\treturn super.createConnection(origin, options);\n\t}\n}\n\nmodule.exports = Http2OverHttpX;\n", "'use strict';\nconst {globalAgent} = require('../agent.js');\nconst Http2OverHttpX = require('./h2-over-hx.js');\nconst getAuthorizationHeaders = require('./get-auth-headers.js');\n\nconst getStatusCode = stream => new Promise((resolve, reject) => {\n\tstream.once('error', reject);\n\tstream.once('response', headers => {\n\t\tstream.off('error', reject);\n\t\tresolve(headers[':status']);\n\t});\n});\n\nclass Http2OverHttp2 extends Http2OverHttpX {\n\tasync _getProxyStream(authority) {\n\t\tconst {proxyOptions} = this;\n\n\t\tconst headers = {\n\t\t\t...getAuthorizationHeaders(this),\n\t\t\t...proxyOptions.headers,\n\t\t\t':method': 'CONNECT',\n\t\t\t':authority': authority\n\t\t};\n\n\t\tconst stream = await globalAgent.request(proxyOptions.url, proxyOptions, headers);\n\t\tconst statusCode = await getStatusCode(stream);\n\n\t\treturn [stream, statusCode, ''];\n\t}\n}\n\nmodule.exports = Http2OverHttp2;\n", "'use strict';\nconst http = require('http');\nconst https = require('https');\nconst Http2OverHttpX = require('./h2-over-hx.js');\nconst getAuthorizationHeaders = require('./get-auth-headers.js');\n\nconst getStream = request => new Promise((resolve, reject) => {\n\tconst onConnect = (response, socket, head) => {\n\t\tsocket.unshift(head);\n\n\t\trequest.off('error', reject);\n\t\tresolve([socket, response.statusCode, response.statusMessage]);\n\t};\n\n\trequest.once('error', reject);\n\trequest.once('connect', onConnect);\n});\n\nclass Http2OverHttp extends Http2OverHttpX {\n\tasync _getProxyStream(authority) {\n\t\tconst {proxyOptions} = this;\n\t\tconst {url, headers} = this.proxyOptions;\n\n\t\tconst network = url.protocol === 'https:' ? https : http;\n\n\t\t// `new URL('https://localhost/httpbin.org:443')` results in\n\t\t// a `/httpbin.org:443` path, which has an invalid leading slash.\n\t\tconst request = network.request({\n\t\t\t...proxyOptions,\n\t\t\thostname: url.hostname,\n\t\t\tport: url.port,\n\t\t\tpath: authority,\n\t\t\theaders: {\n\t\t\t\t...getAuthorizationHeaders(this),\n\t\t\t\t...headers,\n\t\t\t\thost: authority\n\t\t\t},\n\t\t\tmethod: 'CONNECT'\n\t\t}).end();\n\n\t\treturn getStream(request);\n\t}\n}\n\nmodule.exports = {\n\tHttp2OverHttp,\n\tHttp2OverHttps: Http2OverHttp\n};\n", "'use strict';\nconst http2 = require('http2');\nconst {\n\tAgent,\n\tglobalAgent\n} = require('./agent.js');\nconst ClientRequest = require('./client-request.js');\nconst IncomingMessage = require('./incoming-message.js');\nconst auto = require('./auto.js');\nconst {\n\tHttpOverHttp2,\n\tHttpsOverHttp2\n} = require('./proxies/h1-over-h2.js');\nconst Http2OverHttp2 = require('./proxies/h2-over-h2.js');\nconst {\n\tHttp2OverHttp,\n\tHttp2OverHttps\n} = require('./proxies/h2-over-h1.js');\nconst validateHeaderName = require('./utils/validate-header-name.js');\nconst validateHeaderValue = require('./utils/validate-header-value.js');\n\nconst request = (url, options, callback) => new ClientRequest(url, options, callback);\n\nconst get = (url, options, callback) => {\n\t// eslint-disable-next-line unicorn/prevent-abbreviations\n\tconst req = new ClientRequest(url, options, callback);\n\treq.end();\n\n\treturn req;\n};\n\nmodule.exports = {\n\t...http2,\n\tClientRequest,\n\tIncomingMessage,\n\tAgent,\n\tglobalAgent,\n\trequest,\n\tget,\n\tauto,\n\tproxies: {\n\t\tHttpOverHttp2,\n\t\tHttpsOverHttp2,\n\t\tHttp2OverHttp2,\n\t\tHttp2OverHttp,\n\t\tHttp2OverHttps\n\t},\n\tvalidateHeaderName,\n\tvalidateHeaderValue\n};\n", "\"use strict\";\n\nvar conversions = {};\nmodule.exports = conversions;\n\nfunction sign(x) {\n    return x < 0 ? -1 : 1;\n}\n\nfunction evenRound(x) {\n    // Round x to the nearest integer, choosing the even integer if it lies halfway between two.\n    if ((x % 1) === 0.5 && (x & 1) === 0) { // [even number].5; round down (i.e. floor)\n        return Math.floor(x);\n    } else {\n        return Math.round(x);\n    }\n}\n\nfunction createNumberConversion(bitLength, typeOpts) {\n    if (!typeOpts.unsigned) {\n        --bitLength;\n    }\n    const lowerBound = typeOpts.unsigned ? 0 : -Math.pow(2, bitLength);\n    const upperBound = Math.pow(2, bitLength) - 1;\n\n    const moduloVal = typeOpts.moduloBitLength ? Math.pow(2, typeOpts.moduloBitLength) : Math.pow(2, bitLength);\n    const moduloBound = typeOpts.moduloBitLength ? Math.pow(2, typeOpts.moduloBitLength - 1) : Math.pow(2, bitLength - 1);\n\n    return function(V, opts) {\n        if (!opts) opts = {};\n\n        let x = +V;\n\n        if (opts.enforceRange) {\n            if (!Number.isFinite(x)) {\n                throw new TypeError(\"Argument is not a finite number\");\n            }\n\n            x = sign(x) * Math.floor(Math.abs(x));\n            if (x < lowerBound || x > upperBound) {\n                throw new TypeError(\"Argument is not in byte range\");\n            }\n\n            return x;\n        }\n\n        if (!isNaN(x) && opts.clamp) {\n            x = evenRound(x);\n\n            if (x < lowerBound) x = lowerBound;\n            if (x > upperBound) x = upperBound;\n            return x;\n        }\n\n        if (!Number.isFinite(x) || x === 0) {\n            return 0;\n        }\n\n        x = sign(x) * Math.floor(Math.abs(x));\n        x = x % moduloVal;\n\n        if (!typeOpts.unsigned && x >= moduloBound) {\n            return x - moduloVal;\n        } else if (typeOpts.unsigned) {\n            if (x < 0) {\n              x += moduloVal;\n            } else if (x === -0) { // don't return negative zero\n              return 0;\n            }\n        }\n\n        return x;\n    }\n}\n\nconversions[\"void\"] = function () {\n    return undefined;\n};\n\nconversions[\"boolean\"] = function (val) {\n    return !!val;\n};\n\nconversions[\"byte\"] = createNumberConversion(8, { unsigned: false });\nconversions[\"octet\"] = createNumberConversion(8, { unsigned: true });\n\nconversions[\"short\"] = createNumberConversion(16, { unsigned: false });\nconversions[\"unsigned short\"] = createNumberConversion(16, { unsigned: true });\n\nconversions[\"long\"] = createNumberConversion(32, { unsigned: false });\nconversions[\"unsigned long\"] = createNumberConversion(32, { unsigned: true });\n\nconversions[\"long long\"] = createNumberConversion(32, { unsigned: false, moduloBitLength: 64 });\nconversions[\"unsigned long long\"] = createNumberConversion(32, { unsigned: true, moduloBitLength: 64 });\n\nconversions[\"double\"] = function (V) {\n    const x = +V;\n\n    if (!Number.isFinite(x)) {\n        throw new TypeError(\"Argument is not a finite floating-point value\");\n    }\n\n    return x;\n};\n\nconversions[\"unrestricted double\"] = function (V) {\n    const x = +V;\n\n    if (isNaN(x)) {\n        throw new TypeError(\"Argument is NaN\");\n    }\n\n    return x;\n};\n\n// not quite valid, but good enough for JS\nconversions[\"float\"] = conversions[\"double\"];\nconversions[\"unrestricted float\"] = conversions[\"unrestricted double\"];\n\nconversions[\"DOMString\"] = function (V, opts) {\n    if (!opts) opts = {};\n\n    if (opts.treatNullAsEmptyString && V === null) {\n        return \"\";\n    }\n\n    return String(V);\n};\n\nconversions[\"ByteString\"] = function (V, opts) {\n    const x = String(V);\n    let c = undefined;\n    for (let i = 0; (c = x.codePointAt(i)) !== undefined; ++i) {\n        if (c > 255) {\n            throw new TypeError(\"Argument is not a valid bytestring\");\n        }\n    }\n\n    return x;\n};\n\nconversions[\"USVString\"] = function (V) {\n    const S = String(V);\n    const n = S.length;\n    const U = [];\n    for (let i = 0; i < n; ++i) {\n        const c = S.charCodeAt(i);\n        if (c < 0xD800 || c > 0xDFFF) {\n            U.push(String.fromCodePoint(c));\n        } else if (0xDC00 <= c && c <= 0xDFFF) {\n            U.push(String.fromCodePoint(0xFFFD));\n        } else {\n            if (i === n - 1) {\n                U.push(String.fromCodePoint(0xFFFD));\n            } else {\n                const d = S.charCodeAt(i + 1);\n                if (0xDC00 <= d && d <= 0xDFFF) {\n                    const a = c & 0x3FF;\n                    const b = d & 0x3FF;\n                    U.push(String.fromCodePoint((2 << 15) + (2 << 9) * a + b));\n                    ++i;\n                } else {\n                    U.push(String.fromCodePoint(0xFFFD));\n                }\n            }\n        }\n    }\n\n    return U.join('');\n};\n\nconversions[\"Date\"] = function (V, opts) {\n    if (!(V instanceof Date)) {\n        throw new TypeError(\"Argument is not a Date object\");\n    }\n    if (isNaN(V)) {\n        return undefined;\n    }\n\n    return V;\n};\n\nconversions[\"RegExp\"] = function (V, opts) {\n    if (!(V instanceof RegExp)) {\n        V = new RegExp(V);\n    }\n\n    return V;\n};\n", "\"use strict\";\n\nmodule.exports.mixin = function mixin(target, source) {\n  const keys = Object.getOwnPropertyNames(source);\n  for (let i = 0; i < keys.length; ++i) {\n    Object.defineProperty(target, keys[i], Object.getOwnPropertyDescriptor(source, keys[i]));\n  }\n};\n\nmodule.exports.wrapperSymbol = Symbol(\"wrapper\");\nmodule.exports.implSymbol = Symbol(\"impl\");\n\nmodule.exports.wrapperForImpl = function (impl) {\n  return impl[module.exports.wrapperSymbol];\n};\n\nmodule.exports.implForWrapper = function (wrapper) {\n  return wrapper[module.exports.implSymbol];\n};\n\n", "\"use strict\";\n\nvar punycode = require(\"punycode\");\nvar mappingTable = require(\"./lib/mappingTable.json\");\n\nvar PROCESSING_OPTIONS = {\n  TRANSITIONAL: 0,\n  NONTRANSITIONAL: 1\n};\n\nfunction normalize(str) { // fix bug in v8\n  return str.split('\\u0000').map(function (s) { return s.normalize('NFC'); }).join('\\u0000');\n}\n\nfunction findStatus(val) {\n  var start = 0;\n  var end = mappingTable.length - 1;\n\n  while (start <= end) {\n    var mid = Math.floor((start + end) / 2);\n\n    var target = mappingTable[mid];\n    if (target[0][0] <= val && target[0][1] >= val) {\n      return target;\n    } else if (target[0][0] > val) {\n      end = mid - 1;\n    } else {\n      start = mid + 1;\n    }\n  }\n\n  return null;\n}\n\nvar regexAstralSymbols = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n\nfunction countSymbols(string) {\n  return string\n    // replace every surrogate pair with a BMP symbol\n    .replace(regexAstralSymbols, '_')\n    // then get the length\n    .length;\n}\n\nfunction mapChars(domain_name, useSTD3, processing_option) {\n  var hasError = false;\n  var processed = \"\";\n\n  var len = countSymbols(domain_name);\n  for (var i = 0; i < len; ++i) {\n    var codePoint = domain_name.codePointAt(i);\n    var status = findStatus(codePoint);\n\n    switch (status[1]) {\n      case \"disallowed\":\n        hasError = true;\n        processed += String.fromCodePoint(codePoint);\n        break;\n      case \"ignored\":\n        break;\n      case \"mapped\":\n        processed += String.fromCodePoint.apply(String, status[2]);\n        break;\n      case \"deviation\":\n        if (processing_option === PROCESSING_OPTIONS.TRANSITIONAL) {\n          processed += String.fromCodePoint.apply(String, status[2]);\n        } else {\n          processed += String.fromCodePoint(codePoint);\n        }\n        break;\n      case \"valid\":\n        processed += String.fromCodePoint(codePoint);\n        break;\n      case \"disallowed_STD3_mapped\":\n        if (useSTD3) {\n          hasError = true;\n          processed += String.fromCodePoint(codePoint);\n        } else {\n          processed += String.fromCodePoint.apply(String, status[2]);\n        }\n        break;\n      case \"disallowed_STD3_valid\":\n        if (useSTD3) {\n          hasError = true;\n        }\n\n        processed += String.fromCodePoint(codePoint);\n        break;\n    }\n  }\n\n  return {\n    string: processed,\n    error: hasError\n  };\n}\n\nvar combiningMarksRegex = /[\\u0300-\\u036F\\u0483-\\u0489\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u0610-\\u061A\\u064B-\\u065F\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7\\u06E8\\u06EA-\\u06ED\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07EB-\\u07F3\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0859-\\u085B\\u08E4-\\u0903\\u093A-\\u093C\\u093E-\\u094F\\u0951-\\u0957\\u0962\\u0963\\u0981-\\u0983\\u09BC\\u09BE-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CD\\u09D7\\u09E2\\u09E3\\u0A01-\\u0A03\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A70\\u0A71\\u0A75\\u0A81-\\u0A83\\u0ABC\\u0ABE-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AE2\\u0AE3\\u0B01-\\u0B03\\u0B3C\\u0B3E-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B62\\u0B63\\u0B82\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD7\\u0C00-\\u0C03\\u0C3E-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C62\\u0C63\\u0C81-\\u0C83\\u0CBC\\u0CBE-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CE2\\u0CE3\\u0D01-\\u0D03\\u0D3E-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4D\\u0D57\\u0D62\\u0D63\\u0D82\\u0D83\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DF2\\u0DF3\\u0E31\\u0E34-\\u0E3A\\u0E47-\\u0E4E\\u0EB1\\u0EB4-\\u0EB9\\u0EBB\\u0EBC\\u0EC8-\\u0ECD\\u0F18\\u0F19\\u0F35\\u0F37\\u0F39\\u0F3E\\u0F3F\\u0F71-\\u0F84\\u0F86\\u0F87\\u0F8D-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u102B-\\u103E\\u1056-\\u1059\\u105E-\\u1060\\u1062-\\u1064\\u1067-\\u106D\\u1071-\\u1074\\u1082-\\u108D\\u108F\\u109A-\\u109D\\u135D-\\u135F\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17B4-\\u17D3\\u17DD\\u180B-\\u180D\\u18A9\\u1920-\\u192B\\u1930-\\u193B\\u19B0-\\u19C0\\u19C8\\u19C9\\u1A17-\\u1A1B\\u1A55-\\u1A5E\\u1A60-\\u1A7C\\u1A7F\\u1AB0-\\u1ABE\\u1B00-\\u1B04\\u1B34-\\u1B44\\u1B6B-\\u1B73\\u1B80-\\u1B82\\u1BA1-\\u1BAD\\u1BE6-\\u1BF3\\u1C24-\\u1C37\\u1CD0-\\u1CD2\\u1CD4-\\u1CE8\\u1CED\\u1CF2-\\u1CF4\\u1CF8\\u1CF9\\u1DC0-\\u1DF5\\u1DFC-\\u1DFF\\u20D0-\\u20F0\\u2CEF-\\u2CF1\\u2D7F\\u2DE0-\\u2DFF\\u302A-\\u302F\\u3099\\u309A\\uA66F-\\uA672\\uA674-\\uA67D\\uA69F\\uA6F0\\uA6F1\\uA802\\uA806\\uA80B\\uA823-\\uA827\\uA880\\uA881\\uA8B4-\\uA8C4\\uA8E0-\\uA8F1\\uA926-\\uA92D\\uA947-\\uA953\\uA980-\\uA983\\uA9B3-\\uA9C0\\uA9E5\\uAA29-\\uAA36\\uAA43\\uAA4C\\uAA4D\\uAA7B-\\uAA7D\\uAAB0\\uAAB2-\\uAAB4\\uAAB7\\uAAB8\\uAABE\\uAABF\\uAAC1\\uAAEB-\\uAAEF\\uAAF5\\uAAF6\\uABE3-\\uABEA\\uABEC\\uABED\\uFB1E\\uFE00-\\uFE0F\\uFE20-\\uFE2D]|\\uD800[\\uDDFD\\uDEE0\\uDF76-\\uDF7A]|\\uD802[\\uDE01-\\uDE03\\uDE05\\uDE06\\uDE0C-\\uDE0F\\uDE38-\\uDE3A\\uDE3F\\uDEE5\\uDEE6]|\\uD804[\\uDC00-\\uDC02\\uDC38-\\uDC46\\uDC7F-\\uDC82\\uDCB0-\\uDCBA\\uDD00-\\uDD02\\uDD27-\\uDD34\\uDD73\\uDD80-\\uDD82\\uDDB3-\\uDDC0\\uDE2C-\\uDE37\\uDEDF-\\uDEEA\\uDF01-\\uDF03\\uDF3C\\uDF3E-\\uDF44\\uDF47\\uDF48\\uDF4B-\\uDF4D\\uDF57\\uDF62\\uDF63\\uDF66-\\uDF6C\\uDF70-\\uDF74]|\\uD805[\\uDCB0-\\uDCC3\\uDDAF-\\uDDB5\\uDDB8-\\uDDC0\\uDE30-\\uDE40\\uDEAB-\\uDEB7]|\\uD81A[\\uDEF0-\\uDEF4\\uDF30-\\uDF36]|\\uD81B[\\uDF51-\\uDF7E\\uDF8F-\\uDF92]|\\uD82F[\\uDC9D\\uDC9E]|\\uD834[\\uDD65-\\uDD69\\uDD6D-\\uDD72\\uDD7B-\\uDD82\\uDD85-\\uDD8B\\uDDAA-\\uDDAD\\uDE42-\\uDE44]|\\uD83A[\\uDCD0-\\uDCD6]|\\uDB40[\\uDD00-\\uDDEF]/;\n\nfunction validateLabel(label, processing_option) {\n  if (label.substr(0, 4) === \"xn--\") {\n    label = punycode.toUnicode(label);\n    processing_option = PROCESSING_OPTIONS.NONTRANSITIONAL;\n  }\n\n  var error = false;\n\n  if (normalize(label) !== label ||\n      (label[3] === \"-\" && label[4] === \"-\") ||\n      label[0] === \"-\" || label[label.length - 1] === \"-\" ||\n      label.indexOf(\".\") !== -1 ||\n      label.search(combiningMarksRegex) === 0) {\n    error = true;\n  }\n\n  var len = countSymbols(label);\n  for (var i = 0; i < len; ++i) {\n    var status = findStatus(label.codePointAt(i));\n    if ((processing === PROCESSING_OPTIONS.TRANSITIONAL && status[1] !== \"valid\") ||\n        (processing === PROCESSING_OPTIONS.NONTRANSITIONAL &&\n         status[1] !== \"valid\" && status[1] !== \"deviation\")) {\n      error = true;\n      break;\n    }\n  }\n\n  return {\n    label: label,\n    error: error\n  };\n}\n\nfunction processing(domain_name, useSTD3, processing_option) {\n  var result = mapChars(domain_name, useSTD3, processing_option);\n  result.string = normalize(result.string);\n\n  var labels = result.string.split(\".\");\n  for (var i = 0; i < labels.length; ++i) {\n    try {\n      var validation = validateLabel(labels[i]);\n      labels[i] = validation.label;\n      result.error = result.error || validation.error;\n    } catch(e) {\n      result.error = true;\n    }\n  }\n\n  return {\n    string: labels.join(\".\"),\n    error: result.error\n  };\n}\n\nmodule.exports.toASCII = function(domain_name, useSTD3, processing_option, verifyDnsLength) {\n  var result = processing(domain_name, useSTD3, processing_option);\n  var labels = result.string.split(\".\");\n  labels = labels.map(function(l) {\n    try {\n      return punycode.toASCII(l);\n    } catch(e) {\n      result.error = true;\n      return l;\n    }\n  });\n\n  if (verifyDnsLength) {\n    var total = labels.slice(0, labels.length - 1).join(\".\").length;\n    if (total.length > 253 || total.length === 0) {\n      result.error = true;\n    }\n\n    for (var i=0; i < labels.length; ++i) {\n      if (labels.length > 63 || labels.length === 0) {\n        result.error = true;\n        break;\n      }\n    }\n  }\n\n  if (result.error) return null;\n  return labels.join(\".\");\n};\n\nmodule.exports.toUnicode = function(domain_name, useSTD3) {\n  var result = processing(domain_name, useSTD3, PROCESSING_OPTIONS.NONTRANSITIONAL);\n\n  return {\n    domain: result.string,\n    error: result.error\n  };\n};\n\nmodule.exports.PROCESSING_OPTIONS = PROCESSING_OPTIONS;\n", "\"use strict\";\r\nconst punycode = require(\"punycode\");\r\nconst tr46 = require(\"tr46\");\r\n\r\nconst specialSchemes = {\r\n  ftp: 21,\r\n  file: null,\r\n  gopher: 70,\r\n  http: 80,\r\n  https: 443,\r\n  ws: 80,\r\n  wss: 443\r\n};\r\n\r\nconst failure = Symbol(\"failure\");\r\n\r\nfunction countSymbols(str) {\r\n  return punycode.ucs2.decode(str).length;\r\n}\r\n\r\nfunction at(input, idx) {\r\n  const c = input[idx];\r\n  return isNaN(c) ? undefined : String.fromCodePoint(c);\r\n}\r\n\r\nfunction isASCIIDigit(c) {\r\n  return c >= 0x30 && c <= 0x39;\r\n}\r\n\r\nfunction isASCIIAlpha(c) {\r\n  return (c >= 0x41 && c <= 0x5A) || (c >= 0x61 && c <= 0x7A);\r\n}\r\n\r\nfunction isASCIIAlphanumeric(c) {\r\n  return isASCIIAlpha(c) || isASCIIDigit(c);\r\n}\r\n\r\nfunction isASCIIHex(c) {\r\n  return isASCIIDigit(c) || (c >= 0x41 && c <= 0x46) || (c >= 0x61 && c <= 0x66);\r\n}\r\n\r\nfunction isSingleDot(buffer) {\r\n  return buffer === \".\" || buffer.toLowerCase() === \"%2e\";\r\n}\r\n\r\nfunction isDoubleDot(buffer) {\r\n  buffer = buffer.toLowerCase();\r\n  return buffer === \"..\" || buffer === \"%2e.\" || buffer === \".%2e\" || buffer === \"%2e%2e\";\r\n}\r\n\r\nfunction isWindowsDriveLetterCodePoints(cp1, cp2) {\r\n  return isASCIIAlpha(cp1) && (cp2 === 58 || cp2 === 124);\r\n}\r\n\r\nfunction isWindowsDriveLetterString(string) {\r\n  return string.length === 2 && isASCIIAlpha(string.codePointAt(0)) && (string[1] === \":\" || string[1] === \"|\");\r\n}\r\n\r\nfunction isNormalizedWindowsDriveLetterString(string) {\r\n  return string.length === 2 && isASCIIAlpha(string.codePointAt(0)) && string[1] === \":\";\r\n}\r\n\r\nfunction containsForbiddenHostCodePoint(string) {\r\n  return string.search(/\\u0000|\\u0009|\\u000A|\\u000D|\\u0020|#|%|\\/|:|\\?|@|\\[|\\\\|\\]/) !== -1;\r\n}\r\n\r\nfunction containsForbiddenHostCodePointExcludingPercent(string) {\r\n  return string.search(/\\u0000|\\u0009|\\u000A|\\u000D|\\u0020|#|\\/|:|\\?|@|\\[|\\\\|\\]/) !== -1;\r\n}\r\n\r\nfunction isSpecialScheme(scheme) {\r\n  return specialSchemes[scheme] !== undefined;\r\n}\r\n\r\nfunction isSpecial(url) {\r\n  return isSpecialScheme(url.scheme);\r\n}\r\n\r\nfunction defaultPort(scheme) {\r\n  return specialSchemes[scheme];\r\n}\r\n\r\nfunction percentEncode(c) {\r\n  let hex = c.toString(16).toUpperCase();\r\n  if (hex.length === 1) {\r\n    hex = \"0\" + hex;\r\n  }\r\n\r\n  return \"%\" + hex;\r\n}\r\n\r\nfunction utf8PercentEncode(c) {\r\n  const buf = new Buffer(c);\r\n\r\n  let str = \"\";\r\n\r\n  for (let i = 0; i < buf.length; ++i) {\r\n    str += percentEncode(buf[i]);\r\n  }\r\n\r\n  return str;\r\n}\r\n\r\nfunction utf8PercentDecode(str) {\r\n  const input = new Buffer(str);\r\n  const output = [];\r\n  for (let i = 0; i < input.length; ++i) {\r\n    if (input[i] !== 37) {\r\n      output.push(input[i]);\r\n    } else if (input[i] === 37 && isASCIIHex(input[i + 1]) && isASCIIHex(input[i + 2])) {\r\n      output.push(parseInt(input.slice(i + 1, i + 3).toString(), 16));\r\n      i += 2;\r\n    } else {\r\n      output.push(input[i]);\r\n    }\r\n  }\r\n  return new Buffer(output).toString();\r\n}\r\n\r\nfunction isC0ControlPercentEncode(c) {\r\n  return c <= 0x1F || c > 0x7E;\r\n}\r\n\r\nconst extraPathPercentEncodeSet = new Set([32, 34, 35, 60, 62, 63, 96, 123, 125]);\r\nfunction isPathPercentEncode(c) {\r\n  return isC0ControlPercentEncode(c) || extraPathPercentEncodeSet.has(c);\r\n}\r\n\r\nconst extraUserinfoPercentEncodeSet =\r\n  new Set([47, 58, 59, 61, 64, 91, 92, 93, 94, 124]);\r\nfunction isUserinfoPercentEncode(c) {\r\n  return isPathPercentEncode(c) || extraUserinfoPercentEncodeSet.has(c);\r\n}\r\n\r\nfunction percentEncodeChar(c, encodeSetPredicate) {\r\n  const cStr = String.fromCodePoint(c);\r\n\r\n  if (encodeSetPredicate(c)) {\r\n    return utf8PercentEncode(cStr);\r\n  }\r\n\r\n  return cStr;\r\n}\r\n\r\nfunction parseIPv4Number(input) {\r\n  let R = 10;\r\n\r\n  if (input.length >= 2 && input.charAt(0) === \"0\" && input.charAt(1).toLowerCase() === \"x\") {\r\n    input = input.substring(2);\r\n    R = 16;\r\n  } else if (input.length >= 2 && input.charAt(0) === \"0\") {\r\n    input = input.substring(1);\r\n    R = 8;\r\n  }\r\n\r\n  if (input === \"\") {\r\n    return 0;\r\n  }\r\n\r\n  const regex = R === 10 ? /[^0-9]/ : (R === 16 ? /[^0-9A-Fa-f]/ : /[^0-7]/);\r\n  if (regex.test(input)) {\r\n    return failure;\r\n  }\r\n\r\n  return parseInt(input, R);\r\n}\r\n\r\nfunction parseIPv4(input) {\r\n  const parts = input.split(\".\");\r\n  if (parts[parts.length - 1] === \"\") {\r\n    if (parts.length > 1) {\r\n      parts.pop();\r\n    }\r\n  }\r\n\r\n  if (parts.length > 4) {\r\n    return input;\r\n  }\r\n\r\n  const numbers = [];\r\n  for (const part of parts) {\r\n    if (part === \"\") {\r\n      return input;\r\n    }\r\n    const n = parseIPv4Number(part);\r\n    if (n === failure) {\r\n      return input;\r\n    }\r\n\r\n    numbers.push(n);\r\n  }\r\n\r\n  for (let i = 0; i < numbers.length - 1; ++i) {\r\n    if (numbers[i] > 255) {\r\n      return failure;\r\n    }\r\n  }\r\n  if (numbers[numbers.length - 1] >= Math.pow(256, 5 - numbers.length)) {\r\n    return failure;\r\n  }\r\n\r\n  let ipv4 = numbers.pop();\r\n  let counter = 0;\r\n\r\n  for (const n of numbers) {\r\n    ipv4 += n * Math.pow(256, 3 - counter);\r\n    ++counter;\r\n  }\r\n\r\n  return ipv4;\r\n}\r\n\r\nfunction serializeIPv4(address) {\r\n  let output = \"\";\r\n  let n = address;\r\n\r\n  for (let i = 1; i <= 4; ++i) {\r\n    output = String(n % 256) + output;\r\n    if (i !== 4) {\r\n      output = \".\" + output;\r\n    }\r\n    n = Math.floor(n / 256);\r\n  }\r\n\r\n  return output;\r\n}\r\n\r\nfunction parseIPv6(input) {\r\n  const address = [0, 0, 0, 0, 0, 0, 0, 0];\r\n  let pieceIndex = 0;\r\n  let compress = null;\r\n  let pointer = 0;\r\n\r\n  input = punycode.ucs2.decode(input);\r\n\r\n  if (input[pointer] === 58) {\r\n    if (input[pointer + 1] !== 58) {\r\n      return failure;\r\n    }\r\n\r\n    pointer += 2;\r\n    ++pieceIndex;\r\n    compress = pieceIndex;\r\n  }\r\n\r\n  while (pointer < input.length) {\r\n    if (pieceIndex === 8) {\r\n      return failure;\r\n    }\r\n\r\n    if (input[pointer] === 58) {\r\n      if (compress !== null) {\r\n        return failure;\r\n      }\r\n      ++pointer;\r\n      ++pieceIndex;\r\n      compress = pieceIndex;\r\n      continue;\r\n    }\r\n\r\n    let value = 0;\r\n    let length = 0;\r\n\r\n    while (length < 4 && isASCIIHex(input[pointer])) {\r\n      value = value * 0x10 + parseInt(at(input, pointer), 16);\r\n      ++pointer;\r\n      ++length;\r\n    }\r\n\r\n    if (input[pointer] === 46) {\r\n      if (length === 0) {\r\n        return failure;\r\n      }\r\n\r\n      pointer -= length;\r\n\r\n      if (pieceIndex > 6) {\r\n        return failure;\r\n      }\r\n\r\n      let numbersSeen = 0;\r\n\r\n      while (input[pointer] !== undefined) {\r\n        let ipv4Piece = null;\r\n\r\n        if (numbersSeen > 0) {\r\n          if (input[pointer] === 46 && numbersSeen < 4) {\r\n            ++pointer;\r\n          } else {\r\n            return failure;\r\n          }\r\n        }\r\n\r\n        if (!isASCIIDigit(input[pointer])) {\r\n          return failure;\r\n        }\r\n\r\n        while (isASCIIDigit(input[pointer])) {\r\n          const number = parseInt(at(input, pointer));\r\n          if (ipv4Piece === null) {\r\n            ipv4Piece = number;\r\n          } else if (ipv4Piece === 0) {\r\n            return failure;\r\n          } else {\r\n            ipv4Piece = ipv4Piece * 10 + number;\r\n          }\r\n          if (ipv4Piece > 255) {\r\n            return failure;\r\n          }\r\n          ++pointer;\r\n        }\r\n\r\n        address[pieceIndex] = address[pieceIndex] * 0x100 + ipv4Piece;\r\n\r\n        ++numbersSeen;\r\n\r\n        if (numbersSeen === 2 || numbersSeen === 4) {\r\n          ++pieceIndex;\r\n        }\r\n      }\r\n\r\n      if (numbersSeen !== 4) {\r\n        return failure;\r\n      }\r\n\r\n      break;\r\n    } else if (input[pointer] === 58) {\r\n      ++pointer;\r\n      if (input[pointer] === undefined) {\r\n        return failure;\r\n      }\r\n    } else if (input[pointer] !== undefined) {\r\n      return failure;\r\n    }\r\n\r\n    address[pieceIndex] = value;\r\n    ++pieceIndex;\r\n  }\r\n\r\n  if (compress !== null) {\r\n    let swaps = pieceIndex - compress;\r\n    pieceIndex = 7;\r\n    while (pieceIndex !== 0 && swaps > 0) {\r\n      const temp = address[compress + swaps - 1];\r\n      address[compress + swaps - 1] = address[pieceIndex];\r\n      address[pieceIndex] = temp;\r\n      --pieceIndex;\r\n      --swaps;\r\n    }\r\n  } else if (compress === null && pieceIndex !== 8) {\r\n    return failure;\r\n  }\r\n\r\n  return address;\r\n}\r\n\r\nfunction serializeIPv6(address) {\r\n  let output = \"\";\r\n  const seqResult = findLongestZeroSequence(address);\r\n  const compress = seqResult.idx;\r\n  let ignore0 = false;\r\n\r\n  for (let pieceIndex = 0; pieceIndex <= 7; ++pieceIndex) {\r\n    if (ignore0 && address[pieceIndex] === 0) {\r\n      continue;\r\n    } else if (ignore0) {\r\n      ignore0 = false;\r\n    }\r\n\r\n    if (compress === pieceIndex) {\r\n      const separator = pieceIndex === 0 ? \"::\" : \":\";\r\n      output += separator;\r\n      ignore0 = true;\r\n      continue;\r\n    }\r\n\r\n    output += address[pieceIndex].toString(16);\r\n\r\n    if (pieceIndex !== 7) {\r\n      output += \":\";\r\n    }\r\n  }\r\n\r\n  return output;\r\n}\r\n\r\nfunction parseHost(input, isSpecialArg) {\r\n  if (input[0] === \"[\") {\r\n    if (input[input.length - 1] !== \"]\") {\r\n      return failure;\r\n    }\r\n\r\n    return parseIPv6(input.substring(1, input.length - 1));\r\n  }\r\n\r\n  if (!isSpecialArg) {\r\n    return parseOpaqueHost(input);\r\n  }\r\n\r\n  const domain = utf8PercentDecode(input);\r\n  const asciiDomain = tr46.toASCII(domain, false, tr46.PROCESSING_OPTIONS.NONTRANSITIONAL, false);\r\n  if (asciiDomain === null) {\r\n    return failure;\r\n  }\r\n\r\n  if (containsForbiddenHostCodePoint(asciiDomain)) {\r\n    return failure;\r\n  }\r\n\r\n  const ipv4Host = parseIPv4(asciiDomain);\r\n  if (typeof ipv4Host === \"number\" || ipv4Host === failure) {\r\n    return ipv4Host;\r\n  }\r\n\r\n  return asciiDomain;\r\n}\r\n\r\nfunction parseOpaqueHost(input) {\r\n  if (containsForbiddenHostCodePointExcludingPercent(input)) {\r\n    return failure;\r\n  }\r\n\r\n  let output = \"\";\r\n  const decoded = punycode.ucs2.decode(input);\r\n  for (let i = 0; i < decoded.length; ++i) {\r\n    output += percentEncodeChar(decoded[i], isC0ControlPercentEncode);\r\n  }\r\n  return output;\r\n}\r\n\r\nfunction findLongestZeroSequence(arr) {\r\n  let maxIdx = null;\r\n  let maxLen = 1; // only find elements > 1\r\n  let currStart = null;\r\n  let currLen = 0;\r\n\r\n  for (let i = 0; i < arr.length; ++i) {\r\n    if (arr[i] !== 0) {\r\n      if (currLen > maxLen) {\r\n        maxIdx = currStart;\r\n        maxLen = currLen;\r\n      }\r\n\r\n      currStart = null;\r\n      currLen = 0;\r\n    } else {\r\n      if (currStart === null) {\r\n        currStart = i;\r\n      }\r\n      ++currLen;\r\n    }\r\n  }\r\n\r\n  // if trailing zeros\r\n  if (currLen > maxLen) {\r\n    maxIdx = currStart;\r\n    maxLen = currLen;\r\n  }\r\n\r\n  return {\r\n    idx: maxIdx,\r\n    len: maxLen\r\n  };\r\n}\r\n\r\nfunction serializeHost(host) {\r\n  if (typeof host === \"number\") {\r\n    return serializeIPv4(host);\r\n  }\r\n\r\n  // IPv6 serializer\r\n  if (host instanceof Array) {\r\n    return \"[\" + serializeIPv6(host) + \"]\";\r\n  }\r\n\r\n  return host;\r\n}\r\n\r\nfunction trimControlChars(url) {\r\n  return url.replace(/^[\\u0000-\\u001F\\u0020]+|[\\u0000-\\u001F\\u0020]+$/g, \"\");\r\n}\r\n\r\nfunction trimTabAndNewline(url) {\r\n  return url.replace(/\\u0009|\\u000A|\\u000D/g, \"\");\r\n}\r\n\r\nfunction shortenPath(url) {\r\n  const path = url.path;\r\n  if (path.length === 0) {\r\n    return;\r\n  }\r\n  if (url.scheme === \"file\" && path.length === 1 && isNormalizedWindowsDriveLetter(path[0])) {\r\n    return;\r\n  }\r\n\r\n  path.pop();\r\n}\r\n\r\nfunction includesCredentials(url) {\r\n  return url.username !== \"\" || url.password !== \"\";\r\n}\r\n\r\nfunction cannotHaveAUsernamePasswordPort(url) {\r\n  return url.host === null || url.host === \"\" || url.cannotBeABaseURL || url.scheme === \"file\";\r\n}\r\n\r\nfunction isNormalizedWindowsDriveLetter(string) {\r\n  return /^[A-Za-z]:$/.test(string);\r\n}\r\n\r\nfunction URLStateMachine(input, base, encodingOverride, url, stateOverride) {\r\n  this.pointer = 0;\r\n  this.input = input;\r\n  this.base = base || null;\r\n  this.encodingOverride = encodingOverride || \"utf-8\";\r\n  this.stateOverride = stateOverride;\r\n  this.url = url;\r\n  this.failure = false;\r\n  this.parseError = false;\r\n\r\n  if (!this.url) {\r\n    this.url = {\r\n      scheme: \"\",\r\n      username: \"\",\r\n      password: \"\",\r\n      host: null,\r\n      port: null,\r\n      path: [],\r\n      query: null,\r\n      fragment: null,\r\n\r\n      cannotBeABaseURL: false\r\n    };\r\n\r\n    const res = trimControlChars(this.input);\r\n    if (res !== this.input) {\r\n      this.parseError = true;\r\n    }\r\n    this.input = res;\r\n  }\r\n\r\n  const res = trimTabAndNewline(this.input);\r\n  if (res !== this.input) {\r\n    this.parseError = true;\r\n  }\r\n  this.input = res;\r\n\r\n  this.state = stateOverride || \"scheme start\";\r\n\r\n  this.buffer = \"\";\r\n  this.atFlag = false;\r\n  this.arrFlag = false;\r\n  this.passwordTokenSeenFlag = false;\r\n\r\n  this.input = punycode.ucs2.decode(this.input);\r\n\r\n  for (; this.pointer <= this.input.length; ++this.pointer) {\r\n    const c = this.input[this.pointer];\r\n    const cStr = isNaN(c) ? undefined : String.fromCodePoint(c);\r\n\r\n    // exec state machine\r\n    const ret = this[\"parse \" + this.state](c, cStr);\r\n    if (!ret) {\r\n      break; // terminate algorithm\r\n    } else if (ret === failure) {\r\n      this.failure = true;\r\n      break;\r\n    }\r\n  }\r\n}\r\n\r\nURLStateMachine.prototype[\"parse scheme start\"] = function parseSchemeStart(c, cStr) {\r\n  if (isASCIIAlpha(c)) {\r\n    this.buffer += cStr.toLowerCase();\r\n    this.state = \"scheme\";\r\n  } else if (!this.stateOverride) {\r\n    this.state = \"no scheme\";\r\n    --this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n    return failure;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse scheme\"] = function parseScheme(c, cStr) {\r\n  if (isASCIIAlphanumeric(c) || c === 43 || c === 45 || c === 46) {\r\n    this.buffer += cStr.toLowerCase();\r\n  } else if (c === 58) {\r\n    if (this.stateOverride) {\r\n      if (isSpecial(this.url) && !isSpecialScheme(this.buffer)) {\r\n        return false;\r\n      }\r\n\r\n      if (!isSpecial(this.url) && isSpecialScheme(this.buffer)) {\r\n        return false;\r\n      }\r\n\r\n      if ((includesCredentials(this.url) || this.url.port !== null) && this.buffer === \"file\") {\r\n        return false;\r\n      }\r\n\r\n      if (this.url.scheme === \"file\" && (this.url.host === \"\" || this.url.host === null)) {\r\n        return false;\r\n      }\r\n    }\r\n    this.url.scheme = this.buffer;\r\n    this.buffer = \"\";\r\n    if (this.stateOverride) {\r\n      return false;\r\n    }\r\n    if (this.url.scheme === \"file\") {\r\n      if (this.input[this.pointer + 1] !== 47 || this.input[this.pointer + 2] !== 47) {\r\n        this.parseError = true;\r\n      }\r\n      this.state = \"file\";\r\n    } else if (isSpecial(this.url) && this.base !== null && this.base.scheme === this.url.scheme) {\r\n      this.state = \"special relative or authority\";\r\n    } else if (isSpecial(this.url)) {\r\n      this.state = \"special authority slashes\";\r\n    } else if (this.input[this.pointer + 1] === 47) {\r\n      this.state = \"path or authority\";\r\n      ++this.pointer;\r\n    } else {\r\n      this.url.cannotBeABaseURL = true;\r\n      this.url.path.push(\"\");\r\n      this.state = \"cannot-be-a-base-URL path\";\r\n    }\r\n  } else if (!this.stateOverride) {\r\n    this.buffer = \"\";\r\n    this.state = \"no scheme\";\r\n    this.pointer = -1;\r\n  } else {\r\n    this.parseError = true;\r\n    return failure;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse no scheme\"] = function parseNoScheme(c) {\r\n  if (this.base === null || (this.base.cannotBeABaseURL && c !== 35)) {\r\n    return failure;\r\n  } else if (this.base.cannotBeABaseURL && c === 35) {\r\n    this.url.scheme = this.base.scheme;\r\n    this.url.path = this.base.path.slice();\r\n    this.url.query = this.base.query;\r\n    this.url.fragment = \"\";\r\n    this.url.cannotBeABaseURL = true;\r\n    this.state = \"fragment\";\r\n  } else if (this.base.scheme === \"file\") {\r\n    this.state = \"file\";\r\n    --this.pointer;\r\n  } else {\r\n    this.state = \"relative\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse special relative or authority\"] = function parseSpecialRelativeOrAuthority(c) {\r\n  if (c === 47 && this.input[this.pointer + 1] === 47) {\r\n    this.state = \"special authority ignore slashes\";\r\n    ++this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n    this.state = \"relative\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse path or authority\"] = function parsePathOrAuthority(c) {\r\n  if (c === 47) {\r\n    this.state = \"authority\";\r\n  } else {\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse relative\"] = function parseRelative(c) {\r\n  this.url.scheme = this.base.scheme;\r\n  if (isNaN(c)) {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.url.path = this.base.path.slice();\r\n    this.url.query = this.base.query;\r\n  } else if (c === 47) {\r\n    this.state = \"relative slash\";\r\n  } else if (c === 63) {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.url.path = this.base.path.slice();\r\n    this.url.query = \"\";\r\n    this.state = \"query\";\r\n  } else if (c === 35) {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.url.path = this.base.path.slice();\r\n    this.url.query = this.base.query;\r\n    this.url.fragment = \"\";\r\n    this.state = \"fragment\";\r\n  } else if (isSpecial(this.url) && c === 92) {\r\n    this.parseError = true;\r\n    this.state = \"relative slash\";\r\n  } else {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.url.path = this.base.path.slice(0, this.base.path.length - 1);\r\n\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse relative slash\"] = function parseRelativeSlash(c) {\r\n  if (isSpecial(this.url) && (c === 47 || c === 92)) {\r\n    if (c === 92) {\r\n      this.parseError = true;\r\n    }\r\n    this.state = \"special authority ignore slashes\";\r\n  } else if (c === 47) {\r\n    this.state = \"authority\";\r\n  } else {\r\n    this.url.username = this.base.username;\r\n    this.url.password = this.base.password;\r\n    this.url.host = this.base.host;\r\n    this.url.port = this.base.port;\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse special authority slashes\"] = function parseSpecialAuthoritySlashes(c) {\r\n  if (c === 47 && this.input[this.pointer + 1] === 47) {\r\n    this.state = \"special authority ignore slashes\";\r\n    ++this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n    this.state = \"special authority ignore slashes\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse special authority ignore slashes\"] = function parseSpecialAuthorityIgnoreSlashes(c) {\r\n  if (c !== 47 && c !== 92) {\r\n    this.state = \"authority\";\r\n    --this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse authority\"] = function parseAuthority(c, cStr) {\r\n  if (c === 64) {\r\n    this.parseError = true;\r\n    if (this.atFlag) {\r\n      this.buffer = \"%40\" + this.buffer;\r\n    }\r\n    this.atFlag = true;\r\n\r\n    // careful, this is based on buffer and has its own pointer (this.pointer != pointer) and inner chars\r\n    const len = countSymbols(this.buffer);\r\n    for (let pointer = 0; pointer < len; ++pointer) {\r\n      const codePoint = this.buffer.codePointAt(pointer);\r\n\r\n      if (codePoint === 58 && !this.passwordTokenSeenFlag) {\r\n        this.passwordTokenSeenFlag = true;\r\n        continue;\r\n      }\r\n      const encodedCodePoints = percentEncodeChar(codePoint, isUserinfoPercentEncode);\r\n      if (this.passwordTokenSeenFlag) {\r\n        this.url.password += encodedCodePoints;\r\n      } else {\r\n        this.url.username += encodedCodePoints;\r\n      }\r\n    }\r\n    this.buffer = \"\";\r\n  } else if (isNaN(c) || c === 47 || c === 63 || c === 35 ||\r\n             (isSpecial(this.url) && c === 92)) {\r\n    if (this.atFlag && this.buffer === \"\") {\r\n      this.parseError = true;\r\n      return failure;\r\n    }\r\n    this.pointer -= countSymbols(this.buffer) + 1;\r\n    this.buffer = \"\";\r\n    this.state = \"host\";\r\n  } else {\r\n    this.buffer += cStr;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse hostname\"] =\r\nURLStateMachine.prototype[\"parse host\"] = function parseHostName(c, cStr) {\r\n  if (this.stateOverride && this.url.scheme === \"file\") {\r\n    --this.pointer;\r\n    this.state = \"file host\";\r\n  } else if (c === 58 && !this.arrFlag) {\r\n    if (this.buffer === \"\") {\r\n      this.parseError = true;\r\n      return failure;\r\n    }\r\n\r\n    const host = parseHost(this.buffer, isSpecial(this.url));\r\n    if (host === failure) {\r\n      return failure;\r\n    }\r\n\r\n    this.url.host = host;\r\n    this.buffer = \"\";\r\n    this.state = \"port\";\r\n    if (this.stateOverride === \"hostname\") {\r\n      return false;\r\n    }\r\n  } else if (isNaN(c) || c === 47 || c === 63 || c === 35 ||\r\n             (isSpecial(this.url) && c === 92)) {\r\n    --this.pointer;\r\n    if (isSpecial(this.url) && this.buffer === \"\") {\r\n      this.parseError = true;\r\n      return failure;\r\n    } else if (this.stateOverride && this.buffer === \"\" &&\r\n               (includesCredentials(this.url) || this.url.port !== null)) {\r\n      this.parseError = true;\r\n      return false;\r\n    }\r\n\r\n    const host = parseHost(this.buffer, isSpecial(this.url));\r\n    if (host === failure) {\r\n      return failure;\r\n    }\r\n\r\n    this.url.host = host;\r\n    this.buffer = \"\";\r\n    this.state = \"path start\";\r\n    if (this.stateOverride) {\r\n      return false;\r\n    }\r\n  } else {\r\n    if (c === 91) {\r\n      this.arrFlag = true;\r\n    } else if (c === 93) {\r\n      this.arrFlag = false;\r\n    }\r\n    this.buffer += cStr;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse port\"] = function parsePort(c, cStr) {\r\n  if (isASCIIDigit(c)) {\r\n    this.buffer += cStr;\r\n  } else if (isNaN(c) || c === 47 || c === 63 || c === 35 ||\r\n             (isSpecial(this.url) && c === 92) ||\r\n             this.stateOverride) {\r\n    if (this.buffer !== \"\") {\r\n      const port = parseInt(this.buffer);\r\n      if (port > Math.pow(2, 16) - 1) {\r\n        this.parseError = true;\r\n        return failure;\r\n      }\r\n      this.url.port = port === defaultPort(this.url.scheme) ? null : port;\r\n      this.buffer = \"\";\r\n    }\r\n    if (this.stateOverride) {\r\n      return false;\r\n    }\r\n    this.state = \"path start\";\r\n    --this.pointer;\r\n  } else {\r\n    this.parseError = true;\r\n    return failure;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nconst fileOtherwiseCodePoints = new Set([47, 92, 63, 35]);\r\n\r\nURLStateMachine.prototype[\"parse file\"] = function parseFile(c) {\r\n  this.url.scheme = \"file\";\r\n\r\n  if (c === 47 || c === 92) {\r\n    if (c === 92) {\r\n      this.parseError = true;\r\n    }\r\n    this.state = \"file slash\";\r\n  } else if (this.base !== null && this.base.scheme === \"file\") {\r\n    if (isNaN(c)) {\r\n      this.url.host = this.base.host;\r\n      this.url.path = this.base.path.slice();\r\n      this.url.query = this.base.query;\r\n    } else if (c === 63) {\r\n      this.url.host = this.base.host;\r\n      this.url.path = this.base.path.slice();\r\n      this.url.query = \"\";\r\n      this.state = \"query\";\r\n    } else if (c === 35) {\r\n      this.url.host = this.base.host;\r\n      this.url.path = this.base.path.slice();\r\n      this.url.query = this.base.query;\r\n      this.url.fragment = \"\";\r\n      this.state = \"fragment\";\r\n    } else {\r\n      if (this.input.length - this.pointer - 1 === 0 || // remaining consists of 0 code points\r\n          !isWindowsDriveLetterCodePoints(c, this.input[this.pointer + 1]) ||\r\n          (this.input.length - this.pointer - 1 >= 2 && // remaining has at least 2 code points\r\n           !fileOtherwiseCodePoints.has(this.input[this.pointer + 2]))) {\r\n        this.url.host = this.base.host;\r\n        this.url.path = this.base.path.slice();\r\n        shortenPath(this.url);\r\n      } else {\r\n        this.parseError = true;\r\n      }\r\n\r\n      this.state = \"path\";\r\n      --this.pointer;\r\n    }\r\n  } else {\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse file slash\"] = function parseFileSlash(c) {\r\n  if (c === 47 || c === 92) {\r\n    if (c === 92) {\r\n      this.parseError = true;\r\n    }\r\n    this.state = \"file host\";\r\n  } else {\r\n    if (this.base !== null && this.base.scheme === \"file\") {\r\n      if (isNormalizedWindowsDriveLetterString(this.base.path[0])) {\r\n        this.url.path.push(this.base.path[0]);\r\n      } else {\r\n        this.url.host = this.base.host;\r\n      }\r\n    }\r\n    this.state = \"path\";\r\n    --this.pointer;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse file host\"] = function parseFileHost(c, cStr) {\r\n  if (isNaN(c) || c === 47 || c === 92 || c === 63 || c === 35) {\r\n    --this.pointer;\r\n    if (!this.stateOverride && isWindowsDriveLetterString(this.buffer)) {\r\n      this.parseError = true;\r\n      this.state = \"path\";\r\n    } else if (this.buffer === \"\") {\r\n      this.url.host = \"\";\r\n      if (this.stateOverride) {\r\n        return false;\r\n      }\r\n      this.state = \"path start\";\r\n    } else {\r\n      let host = parseHost(this.buffer, isSpecial(this.url));\r\n      if (host === failure) {\r\n        return failure;\r\n      }\r\n      if (host === \"localhost\") {\r\n        host = \"\";\r\n      }\r\n      this.url.host = host;\r\n\r\n      if (this.stateOverride) {\r\n        return false;\r\n      }\r\n\r\n      this.buffer = \"\";\r\n      this.state = \"path start\";\r\n    }\r\n  } else {\r\n    this.buffer += cStr;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse path start\"] = function parsePathStart(c) {\r\n  if (isSpecial(this.url)) {\r\n    if (c === 92) {\r\n      this.parseError = true;\r\n    }\r\n    this.state = \"path\";\r\n\r\n    if (c !== 47 && c !== 92) {\r\n      --this.pointer;\r\n    }\r\n  } else if (!this.stateOverride && c === 63) {\r\n    this.url.query = \"\";\r\n    this.state = \"query\";\r\n  } else if (!this.stateOverride && c === 35) {\r\n    this.url.fragment = \"\";\r\n    this.state = \"fragment\";\r\n  } else if (c !== undefined) {\r\n    this.state = \"path\";\r\n    if (c !== 47) {\r\n      --this.pointer;\r\n    }\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse path\"] = function parsePath(c) {\r\n  if (isNaN(c) || c === 47 || (isSpecial(this.url) && c === 92) ||\r\n      (!this.stateOverride && (c === 63 || c === 35))) {\r\n    if (isSpecial(this.url) && c === 92) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    if (isDoubleDot(this.buffer)) {\r\n      shortenPath(this.url);\r\n      if (c !== 47 && !(isSpecial(this.url) && c === 92)) {\r\n        this.url.path.push(\"\");\r\n      }\r\n    } else if (isSingleDot(this.buffer) && c !== 47 &&\r\n               !(isSpecial(this.url) && c === 92)) {\r\n      this.url.path.push(\"\");\r\n    } else if (!isSingleDot(this.buffer)) {\r\n      if (this.url.scheme === \"file\" && this.url.path.length === 0 && isWindowsDriveLetterString(this.buffer)) {\r\n        if (this.url.host !== \"\" && this.url.host !== null) {\r\n          this.parseError = true;\r\n          this.url.host = \"\";\r\n        }\r\n        this.buffer = this.buffer[0] + \":\";\r\n      }\r\n      this.url.path.push(this.buffer);\r\n    }\r\n    this.buffer = \"\";\r\n    if (this.url.scheme === \"file\" && (c === undefined || c === 63 || c === 35)) {\r\n      while (this.url.path.length > 1 && this.url.path[0] === \"\") {\r\n        this.parseError = true;\r\n        this.url.path.shift();\r\n      }\r\n    }\r\n    if (c === 63) {\r\n      this.url.query = \"\";\r\n      this.state = \"query\";\r\n    }\r\n    if (c === 35) {\r\n      this.url.fragment = \"\";\r\n      this.state = \"fragment\";\r\n    }\r\n  } else {\r\n    // TODO: If c is not a URL code point and not \"%\", parse error.\r\n\r\n    if (c === 37 &&\r\n      (!isASCIIHex(this.input[this.pointer + 1]) ||\r\n        !isASCIIHex(this.input[this.pointer + 2]))) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    this.buffer += percentEncodeChar(c, isPathPercentEncode);\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse cannot-be-a-base-URL path\"] = function parseCannotBeABaseURLPath(c) {\r\n  if (c === 63) {\r\n    this.url.query = \"\";\r\n    this.state = \"query\";\r\n  } else if (c === 35) {\r\n    this.url.fragment = \"\";\r\n    this.state = \"fragment\";\r\n  } else {\r\n    // TODO: Add: not a URL code point\r\n    if (!isNaN(c) && c !== 37) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    if (c === 37 &&\r\n        (!isASCIIHex(this.input[this.pointer + 1]) ||\r\n         !isASCIIHex(this.input[this.pointer + 2]))) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    if (!isNaN(c)) {\r\n      this.url.path[0] = this.url.path[0] + percentEncodeChar(c, isC0ControlPercentEncode);\r\n    }\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse query\"] = function parseQuery(c, cStr) {\r\n  if (isNaN(c) || (!this.stateOverride && c === 35)) {\r\n    if (!isSpecial(this.url) || this.url.scheme === \"ws\" || this.url.scheme === \"wss\") {\r\n      this.encodingOverride = \"utf-8\";\r\n    }\r\n\r\n    const buffer = new Buffer(this.buffer); // TODO: Use encoding override instead\r\n    for (let i = 0; i < buffer.length; ++i) {\r\n      if (buffer[i] < 0x21 || buffer[i] > 0x7E || buffer[i] === 0x22 || buffer[i] === 0x23 ||\r\n          buffer[i] === 0x3C || buffer[i] === 0x3E) {\r\n        this.url.query += percentEncode(buffer[i]);\r\n      } else {\r\n        this.url.query += String.fromCodePoint(buffer[i]);\r\n      }\r\n    }\r\n\r\n    this.buffer = \"\";\r\n    if (c === 35) {\r\n      this.url.fragment = \"\";\r\n      this.state = \"fragment\";\r\n    }\r\n  } else {\r\n    // TODO: If c is not a URL code point and not \"%\", parse error.\r\n    if (c === 37 &&\r\n      (!isASCIIHex(this.input[this.pointer + 1]) ||\r\n        !isASCIIHex(this.input[this.pointer + 2]))) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    this.buffer += cStr;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nURLStateMachine.prototype[\"parse fragment\"] = function parseFragment(c) {\r\n  if (isNaN(c)) { // do nothing\r\n  } else if (c === 0x0) {\r\n    this.parseError = true;\r\n  } else {\r\n    // TODO: If c is not a URL code point and not \"%\", parse error.\r\n    if (c === 37 &&\r\n      (!isASCIIHex(this.input[this.pointer + 1]) ||\r\n        !isASCIIHex(this.input[this.pointer + 2]))) {\r\n      this.parseError = true;\r\n    }\r\n\r\n    this.url.fragment += percentEncodeChar(c, isC0ControlPercentEncode);\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nfunction serializeURL(url, excludeFragment) {\r\n  let output = url.scheme + \":\";\r\n  if (url.host !== null) {\r\n    output += \"//\";\r\n\r\n    if (url.username !== \"\" || url.password !== \"\") {\r\n      output += url.username;\r\n      if (url.password !== \"\") {\r\n        output += \":\" + url.password;\r\n      }\r\n      output += \"@\";\r\n    }\r\n\r\n    output += serializeHost(url.host);\r\n\r\n    if (url.port !== null) {\r\n      output += \":\" + url.port;\r\n    }\r\n  } else if (url.host === null && url.scheme === \"file\") {\r\n    output += \"//\";\r\n  }\r\n\r\n  if (url.cannotBeABaseURL) {\r\n    output += url.path[0];\r\n  } else {\r\n    for (const string of url.path) {\r\n      output += \"/\" + string;\r\n    }\r\n  }\r\n\r\n  if (url.query !== null) {\r\n    output += \"?\" + url.query;\r\n  }\r\n\r\n  if (!excludeFragment && url.fragment !== null) {\r\n    output += \"#\" + url.fragment;\r\n  }\r\n\r\n  return output;\r\n}\r\n\r\nfunction serializeOrigin(tuple) {\r\n  let result = tuple.scheme + \"://\";\r\n  result += serializeHost(tuple.host);\r\n\r\n  if (tuple.port !== null) {\r\n    result += \":\" + tuple.port;\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\nmodule.exports.serializeURL = serializeURL;\r\n\r\nmodule.exports.serializeURLOrigin = function (url) {\r\n  // https://url.spec.whatwg.org/#concept-url-origin\r\n  switch (url.scheme) {\r\n    case \"blob\":\r\n      try {\r\n        return module.exports.serializeURLOrigin(module.exports.parseURL(url.path[0]));\r\n      } catch (e) {\r\n        // serializing an opaque origin returns \"null\"\r\n        return \"null\";\r\n      }\r\n    case \"ftp\":\r\n    case \"gopher\":\r\n    case \"http\":\r\n    case \"https\":\r\n    case \"ws\":\r\n    case \"wss\":\r\n      return serializeOrigin({\r\n        scheme: url.scheme,\r\n        host: url.host,\r\n        port: url.port\r\n      });\r\n    case \"file\":\r\n      // spec says \"exercise to the reader\", chrome says \"file://\"\r\n      return \"file://\";\r\n    default:\r\n      // serializing an opaque origin returns \"null\"\r\n      return \"null\";\r\n  }\r\n};\r\n\r\nmodule.exports.basicURLParse = function (input, options) {\r\n  if (options === undefined) {\r\n    options = {};\r\n  }\r\n\r\n  const usm = new URLStateMachine(input, options.baseURL, options.encodingOverride, options.url, options.stateOverride);\r\n  if (usm.failure) {\r\n    return \"failure\";\r\n  }\r\n\r\n  return usm.url;\r\n};\r\n\r\nmodule.exports.setTheUsername = function (url, username) {\r\n  url.username = \"\";\r\n  const decoded = punycode.ucs2.decode(username);\r\n  for (let i = 0; i < decoded.length; ++i) {\r\n    url.username += percentEncodeChar(decoded[i], isUserinfoPercentEncode);\r\n  }\r\n};\r\n\r\nmodule.exports.setThePassword = function (url, password) {\r\n  url.password = \"\";\r\n  const decoded = punycode.ucs2.decode(password);\r\n  for (let i = 0; i < decoded.length; ++i) {\r\n    url.password += percentEncodeChar(decoded[i], isUserinfoPercentEncode);\r\n  }\r\n};\r\n\r\nmodule.exports.serializeHost = serializeHost;\r\n\r\nmodule.exports.cannotHaveAUsernamePasswordPort = cannotHaveAUsernamePasswordPort;\r\n\r\nmodule.exports.serializeInteger = function (integer) {\r\n  return String(integer);\r\n};\r\n\r\nmodule.exports.parseURL = function (input, options) {\r\n  if (options === undefined) {\r\n    options = {};\r\n  }\r\n\r\n  // We don't handle blobs, so this just delegates:\r\n  return module.exports.basicURLParse(input, { baseURL: options.baseURL, encodingOverride: options.encodingOverride });\r\n};\r\n", "\"use strict\";\nconst usm = require(\"./url-state-machine\");\n\nexports.implementation = class URLImpl {\n  constructor(constructorArgs) {\n    const url = constructorArgs[0];\n    const base = constructorArgs[1];\n\n    let parsedBase = null;\n    if (base !== undefined) {\n      parsedBase = usm.basicURLParse(base);\n      if (parsedBase === \"failure\") {\n        throw new TypeError(\"Invalid base URL\");\n      }\n    }\n\n    const parsedURL = usm.basicURLParse(url, { baseURL: parsedBase });\n    if (parsedURL === \"failure\") {\n      throw new TypeError(\"Invalid URL\");\n    }\n\n    this._url = parsedURL;\n\n    // TODO: query stuff\n  }\n\n  get href() {\n    return usm.serializeURL(this._url);\n  }\n\n  set href(v) {\n    const parsedURL = usm.basicURLParse(v);\n    if (parsedURL === \"failure\") {\n      throw new TypeError(\"Invalid URL\");\n    }\n\n    this._url = parsedURL;\n  }\n\n  get origin() {\n    return usm.serializeURLOrigin(this._url);\n  }\n\n  get protocol() {\n    return this._url.scheme + \":\";\n  }\n\n  set protocol(v) {\n    usm.basicURLParse(v + \":\", { url: this._url, stateOverride: \"scheme start\" });\n  }\n\n  get username() {\n    return this._url.username;\n  }\n\n  set username(v) {\n    if (usm.cannotHaveAUsernamePasswordPort(this._url)) {\n      return;\n    }\n\n    usm.setTheUsername(this._url, v);\n  }\n\n  get password() {\n    return this._url.password;\n  }\n\n  set password(v) {\n    if (usm.cannotHaveAUsernamePasswordPort(this._url)) {\n      return;\n    }\n\n    usm.setThePassword(this._url, v);\n  }\n\n  get host() {\n    const url = this._url;\n\n    if (url.host === null) {\n      return \"\";\n    }\n\n    if (url.port === null) {\n      return usm.serializeHost(url.host);\n    }\n\n    return usm.serializeHost(url.host) + \":\" + usm.serializeInteger(url.port);\n  }\n\n  set host(v) {\n    if (this._url.cannotBeABaseURL) {\n      return;\n    }\n\n    usm.basicURLParse(v, { url: this._url, stateOverride: \"host\" });\n  }\n\n  get hostname() {\n    if (this._url.host === null) {\n      return \"\";\n    }\n\n    return usm.serializeHost(this._url.host);\n  }\n\n  set hostname(v) {\n    if (this._url.cannotBeABaseURL) {\n      return;\n    }\n\n    usm.basicURLParse(v, { url: this._url, stateOverride: \"hostname\" });\n  }\n\n  get port() {\n    if (this._url.port === null) {\n      return \"\";\n    }\n\n    return usm.serializeInteger(this._url.port);\n  }\n\n  set port(v) {\n    if (usm.cannotHaveAUsernamePasswordPort(this._url)) {\n      return;\n    }\n\n    if (v === \"\") {\n      this._url.port = null;\n    } else {\n      usm.basicURLParse(v, { url: this._url, stateOverride: \"port\" });\n    }\n  }\n\n  get pathname() {\n    if (this._url.cannotBeABaseURL) {\n      return this._url.path[0];\n    }\n\n    if (this._url.path.length === 0) {\n      return \"\";\n    }\n\n    return \"/\" + this._url.path.join(\"/\");\n  }\n\n  set pathname(v) {\n    if (this._url.cannotBeABaseURL) {\n      return;\n    }\n\n    this._url.path = [];\n    usm.basicURLParse(v, { url: this._url, stateOverride: \"path start\" });\n  }\n\n  get search() {\n    if (this._url.query === null || this._url.query === \"\") {\n      return \"\";\n    }\n\n    return \"?\" + this._url.query;\n  }\n\n  set search(v) {\n    // TODO: query stuff\n\n    const url = this._url;\n\n    if (v === \"\") {\n      url.query = null;\n      return;\n    }\n\n    const input = v[0] === \"?\" ? v.substring(1) : v;\n    url.query = \"\";\n    usm.basicURLParse(input, { url, stateOverride: \"query\" });\n  }\n\n  get hash() {\n    if (this._url.fragment === null || this._url.fragment === \"\") {\n      return \"\";\n    }\n\n    return \"#\" + this._url.fragment;\n  }\n\n  set hash(v) {\n    if (v === \"\") {\n      this._url.fragment = null;\n      return;\n    }\n\n    const input = v[0] === \"#\" ? v.substring(1) : v;\n    this._url.fragment = \"\";\n    usm.basicURLParse(input, { url: this._url, stateOverride: \"fragment\" });\n  }\n\n  toJSON() {\n    return this.href;\n  }\n};\n", "\"use strict\";\n\nconst conversions = require(\"webidl-conversions\");\nconst utils = require(\"./utils.js\");\nconst Impl = require(\".//URL-impl.js\");\n\nconst impl = utils.implSymbol;\n\nfunction URL(url) {\n  if (!this || this[impl] || !(this instanceof URL)) {\n    throw new TypeError(\"Failed to construct 'URL': Please use the 'new' operator, this DOM object constructor cannot be called as a function.\");\n  }\n  if (arguments.length < 1) {\n    throw new TypeError(\"Failed to construct 'URL': 1 argument required, but only \" + arguments.length + \" present.\");\n  }\n  const args = [];\n  for (let i = 0; i < arguments.length && i < 2; ++i) {\n    args[i] = arguments[i];\n  }\n  args[0] = conversions[\"USVString\"](args[0]);\n  if (args[1] !== undefined) {\n  args[1] = conversions[\"USVString\"](args[1]);\n  }\n\n  module.exports.setup(this, args);\n}\n\nURL.prototype.toJSON = function toJSON() {\n  if (!this || !module.exports.is(this)) {\n    throw new TypeError(\"Illegal invocation\");\n  }\n  const args = [];\n  for (let i = 0; i < arguments.length && i < 0; ++i) {\n    args[i] = arguments[i];\n  }\n  return this[impl].toJSON.apply(this[impl], args);\n};\nObject.defineProperty(URL.prototype, \"href\", {\n  get() {\n    return this[impl].href;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].href = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nURL.prototype.toString = function () {\n  if (!this || !module.exports.is(this)) {\n    throw new TypeError(\"Illegal invocation\");\n  }\n  return this.href;\n};\n\nObject.defineProperty(URL.prototype, \"origin\", {\n  get() {\n    return this[impl].origin;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"protocol\", {\n  get() {\n    return this[impl].protocol;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].protocol = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"username\", {\n  get() {\n    return this[impl].username;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].username = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"password\", {\n  get() {\n    return this[impl].password;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].password = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"host\", {\n  get() {\n    return this[impl].host;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].host = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"hostname\", {\n  get() {\n    return this[impl].hostname;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].hostname = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"port\", {\n  get() {\n    return this[impl].port;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].port = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"pathname\", {\n  get() {\n    return this[impl].pathname;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].pathname = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"search\", {\n  get() {\n    return this[impl].search;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].search = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nObject.defineProperty(URL.prototype, \"hash\", {\n  get() {\n    return this[impl].hash;\n  },\n  set(V) {\n    V = conversions[\"USVString\"](V);\n    this[impl].hash = V;\n  },\n  enumerable: true,\n  configurable: true\n});\n\n\nmodule.exports = {\n  is(obj) {\n    return !!obj && obj[impl] instanceof Impl.implementation;\n  },\n  create(constructorArgs, privateData) {\n    let obj = Object.create(URL.prototype);\n    this.setup(obj, constructorArgs, privateData);\n    return obj;\n  },\n  setup(obj, constructorArgs, privateData) {\n    if (!privateData) privateData = {};\n    privateData.wrapper = obj;\n\n    obj[impl] = new Impl.implementation(constructorArgs, privateData);\n    obj[impl][utils.wrapperSymbol] = obj;\n  },\n  interface: URL,\n  expose: {\n    Window: { URL: URL },\n    Worker: { URL: URL }\n  }\n};\n\n", "\"use strict\";\n\nexports.URL = require(\"./URL\").interface;\nexports.serializeURL = require(\"./url-state-machine\").serializeURL;\nexports.serializeURLOrigin = require(\"./url-state-machine\").serializeURLOrigin;\nexports.basicURLParse = require(\"./url-state-machine\").basicURLParse;\nexports.setTheUsername = require(\"./url-state-machine\").setTheUsername;\nexports.setThePassword = require(\"./url-state-machine\").setThePassword;\nexports.serializeHost = require(\"./url-state-machine\").serializeHost;\nexports.serializeInteger = require(\"./url-state-machine\").serializeInteger;\nexports.parseURL = require(\"./url-state-machine\").parseURL;\n", "'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar Stream = _interopDefault(require('stream'));\nvar http = _interopDefault(require('http'));\nvar Url = _interopDefault(require('url'));\nvar whatwgUrl = _interopDefault(require('whatwg-url'));\nvar https = _interopDefault(require('https'));\nvar zlib = _interopDefault(require('zlib'));\n\n// Based on https://github.com/tmpvar/jsdom/blob/aa85b2abf07766ff7bf5c1f6daafb3726f2f2db5/lib/jsdom/living/blob.js\n\n// fix for \"Readable\" isn't a named export issue\nconst Readable = Stream.Readable;\n\nconst BUFFER = Symbol('buffer');\nconst TYPE = Symbol('type');\n\nclass Blob {\n\tconstructor() {\n\t\tthis[TYPE] = '';\n\n\t\tconst blobParts = arguments[0];\n\t\tconst options = arguments[1];\n\n\t\tconst buffers = [];\n\t\tlet size = 0;\n\n\t\tif (blobParts) {\n\t\t\tconst a = blobParts;\n\t\t\tconst length = Number(a.length);\n\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\tconst element = a[i];\n\t\t\t\tlet buffer;\n\t\t\t\tif (element instanceof Buffer) {\n\t\t\t\t\tbuffer = element;\n\t\t\t\t} else if (ArrayBuffer.isView(element)) {\n\t\t\t\t\tbuffer = Buffer.from(element.buffer, element.byteOffset, element.byteLength);\n\t\t\t\t} else if (element instanceof ArrayBuffer) {\n\t\t\t\t\tbuffer = Buffer.from(element);\n\t\t\t\t} else if (element instanceof Blob) {\n\t\t\t\t\tbuffer = element[BUFFER];\n\t\t\t\t} else {\n\t\t\t\t\tbuffer = Buffer.from(typeof element === 'string' ? element : String(element));\n\t\t\t\t}\n\t\t\t\tsize += buffer.length;\n\t\t\t\tbuffers.push(buffer);\n\t\t\t}\n\t\t}\n\n\t\tthis[BUFFER] = Buffer.concat(buffers);\n\n\t\tlet type = options && options.type !== undefined && String(options.type).toLowerCase();\n\t\tif (type && !/[^\\u0020-\\u007E]/.test(type)) {\n\t\t\tthis[TYPE] = type;\n\t\t}\n\t}\n\tget size() {\n\t\treturn this[BUFFER].length;\n\t}\n\tget type() {\n\t\treturn this[TYPE];\n\t}\n\ttext() {\n\t\treturn Promise.resolve(this[BUFFER].toString());\n\t}\n\tarrayBuffer() {\n\t\tconst buf = this[BUFFER];\n\t\tconst ab = buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\treturn Promise.resolve(ab);\n\t}\n\tstream() {\n\t\tconst readable = new Readable();\n\t\treadable._read = function () {};\n\t\treadable.push(this[BUFFER]);\n\t\treadable.push(null);\n\t\treturn readable;\n\t}\n\ttoString() {\n\t\treturn '[object Blob]';\n\t}\n\tslice() {\n\t\tconst size = this.size;\n\n\t\tconst start = arguments[0];\n\t\tconst end = arguments[1];\n\t\tlet relativeStart, relativeEnd;\n\t\tif (start === undefined) {\n\t\t\trelativeStart = 0;\n\t\t} else if (start < 0) {\n\t\t\trelativeStart = Math.max(size + start, 0);\n\t\t} else {\n\t\t\trelativeStart = Math.min(start, size);\n\t\t}\n\t\tif (end === undefined) {\n\t\t\trelativeEnd = size;\n\t\t} else if (end < 0) {\n\t\t\trelativeEnd = Math.max(size + end, 0);\n\t\t} else {\n\t\t\trelativeEnd = Math.min(end, size);\n\t\t}\n\t\tconst span = Math.max(relativeEnd - relativeStart, 0);\n\n\t\tconst buffer = this[BUFFER];\n\t\tconst slicedBuffer = buffer.slice(relativeStart, relativeStart + span);\n\t\tconst blob = new Blob([], { type: arguments[2] });\n\t\tblob[BUFFER] = slicedBuffer;\n\t\treturn blob;\n\t}\n}\n\nObject.defineProperties(Blob.prototype, {\n\tsize: { enumerable: true },\n\ttype: { enumerable: true },\n\tslice: { enumerable: true }\n});\n\nObject.defineProperty(Blob.prototype, Symbol.toStringTag, {\n\tvalue: 'Blob',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * fetch-error.js\n *\n * FetchError interface for operational errors\n */\n\n/**\n * Create FetchError instance\n *\n * @param   String      message      Error message for human\n * @param   String      type         Error type for machine\n * @param   String      systemError  For Node.js system error\n * @return  FetchError\n */\nfunction FetchError(message, type, systemError) {\n  Error.call(this, message);\n\n  this.message = message;\n  this.type = type;\n\n  // when err.type is `system`, err.code contains system error code\n  if (systemError) {\n    this.code = this.errno = systemError.code;\n  }\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nFetchError.prototype = Object.create(Error.prototype);\nFetchError.prototype.constructor = FetchError;\nFetchError.prototype.name = 'FetchError';\n\nlet convert;\ntry {\n\tconvert = require('encoding').convert;\n} catch (e) {}\n\nconst INTERNALS = Symbol('Body internals');\n\n// fix an issue where \"PassThrough\" isn't a named export for node <10\nconst PassThrough = Stream.PassThrough;\n\n/**\n * Body mixin\n *\n * Ref: https://fetch.spec.whatwg.org/#body\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nfunction Body(body) {\n\tvar _this = this;\n\n\tvar _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n\t    _ref$size = _ref.size;\n\n\tlet size = _ref$size === undefined ? 0 : _ref$size;\n\tvar _ref$timeout = _ref.timeout;\n\tlet timeout = _ref$timeout === undefined ? 0 : _ref$timeout;\n\n\tif (body == null) {\n\t\t// body is undefined or null\n\t\tbody = null;\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\tbody = Buffer.from(body.toString());\n\t} else if (isBlob(body)) ; else if (Buffer.isBuffer(body)) ; else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\tbody = Buffer.from(body);\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\tbody = Buffer.from(body.buffer, body.byteOffset, body.byteLength);\n\t} else if (body instanceof Stream) ; else {\n\t\t// none of the above\n\t\t// coerce to string then buffer\n\t\tbody = Buffer.from(String(body));\n\t}\n\tthis[INTERNALS] = {\n\t\tbody,\n\t\tdisturbed: false,\n\t\terror: null\n\t};\n\tthis.size = size;\n\tthis.timeout = timeout;\n\n\tif (body instanceof Stream) {\n\t\tbody.on('error', function (err) {\n\t\t\tconst error = err.name === 'AbortError' ? err : new FetchError(`Invalid response body while trying to fetch ${_this.url}: ${err.message}`, 'system', err);\n\t\t\t_this[INTERNALS].error = error;\n\t\t});\n\t}\n}\n\nBody.prototype = {\n\tget body() {\n\t\treturn this[INTERNALS].body;\n\t},\n\n\tget bodyUsed() {\n\t\treturn this[INTERNALS].disturbed;\n\t},\n\n\t/**\n  * Decode response as ArrayBuffer\n  *\n  * @return  Promise\n  */\n\tarrayBuffer() {\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\t});\n\t},\n\n\t/**\n  * Return raw response as Blob\n  *\n  * @return Promise\n  */\n\tblob() {\n\t\tlet ct = this.headers && this.headers.get('content-type') || '';\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn Object.assign(\n\t\t\t// Prevent copying\n\t\t\tnew Blob([], {\n\t\t\t\ttype: ct.toLowerCase()\n\t\t\t}), {\n\t\t\t\t[BUFFER]: buf\n\t\t\t});\n\t\t});\n\t},\n\n\t/**\n  * Decode response as json\n  *\n  * @return  Promise\n  */\n\tjson() {\n\t\tvar _this2 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(buffer.toString());\n\t\t\t} catch (err) {\n\t\t\t\treturn Body.Promise.reject(new FetchError(`invalid json response body at ${_this2.url} reason: ${err.message}`, 'invalid-json'));\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n  * Decode response as text\n  *\n  * @return  Promise\n  */\n\ttext() {\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn buffer.toString();\n\t\t});\n\t},\n\n\t/**\n  * Decode response as buffer (non-spec api)\n  *\n  * @return  Promise\n  */\n\tbuffer() {\n\t\treturn consumeBody.call(this);\n\t},\n\n\t/**\n  * Decode response as text, while automatically detecting the encoding and\n  * trying to decode to UTF-8 (non-spec api)\n  *\n  * @return  Promise\n  */\n\ttextConverted() {\n\t\tvar _this3 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn convertBody(buffer, _this3.headers);\n\t\t});\n\t}\n};\n\n// In browsers, all properties are enumerable.\nObject.defineProperties(Body.prototype, {\n\tbody: { enumerable: true },\n\tbodyUsed: { enumerable: true },\n\tarrayBuffer: { enumerable: true },\n\tblob: { enumerable: true },\n\tjson: { enumerable: true },\n\ttext: { enumerable: true }\n});\n\nBody.mixIn = function (proto) {\n\tfor (const name of Object.getOwnPropertyNames(Body.prototype)) {\n\t\t// istanbul ignore else: future proof\n\t\tif (!(name in proto)) {\n\t\t\tconst desc = Object.getOwnPropertyDescriptor(Body.prototype, name);\n\t\t\tObject.defineProperty(proto, name, desc);\n\t\t}\n\t}\n};\n\n/**\n * Consume and convert an entire Body to a Buffer.\n *\n * Ref: https://fetch.spec.whatwg.org/#concept-body-consume-body\n *\n * @return  Promise\n */\nfunction consumeBody() {\n\tvar _this4 = this;\n\n\tif (this[INTERNALS].disturbed) {\n\t\treturn Body.Promise.reject(new TypeError(`body used already for: ${this.url}`));\n\t}\n\n\tthis[INTERNALS].disturbed = true;\n\n\tif (this[INTERNALS].error) {\n\t\treturn Body.Promise.reject(this[INTERNALS].error);\n\t}\n\n\tlet body = this.body;\n\n\t// body is null\n\tif (body === null) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is blob\n\tif (isBlob(body)) {\n\t\tbody = body.stream();\n\t}\n\n\t// body is buffer\n\tif (Buffer.isBuffer(body)) {\n\t\treturn Body.Promise.resolve(body);\n\t}\n\n\t// istanbul ignore if: should never happen\n\tif (!(body instanceof Stream)) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is stream\n\t// get ready to actually consume the body\n\tlet accum = [];\n\tlet accumBytes = 0;\n\tlet abort = false;\n\n\treturn new Body.Promise(function (resolve, reject) {\n\t\tlet resTimeout;\n\n\t\t// allow timeout on slow response body\n\t\tif (_this4.timeout) {\n\t\t\tresTimeout = setTimeout(function () {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`Response timeout while trying to fetch ${_this4.url} (over ${_this4.timeout}ms)`, 'body-timeout'));\n\t\t\t}, _this4.timeout);\n\t\t}\n\n\t\t// handle stream errors\n\t\tbody.on('error', function (err) {\n\t\t\tif (err.name === 'AbortError') {\n\t\t\t\t// if the request was aborted, reject with this Error\n\t\t\t\tabort = true;\n\t\t\t\treject(err);\n\t\t\t} else {\n\t\t\t\t// other errors, such as incorrect content-encoding\n\t\t\t\treject(new FetchError(`Invalid response body while trying to fetch ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\n\t\tbody.on('data', function (chunk) {\n\t\t\tif (abort || chunk === null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (_this4.size && accumBytes + chunk.length > _this4.size) {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`content size at ${_this4.url} over limit: ${_this4.size}`, 'max-size'));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\taccumBytes += chunk.length;\n\t\t\taccum.push(chunk);\n\t\t});\n\n\t\tbody.on('end', function () {\n\t\t\tif (abort) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tclearTimeout(resTimeout);\n\n\t\t\ttry {\n\t\t\t\tresolve(Buffer.concat(accum, accumBytes));\n\t\t\t} catch (err) {\n\t\t\t\t// handle streams that have accumulated too much data (issue #414)\n\t\t\t\treject(new FetchError(`Could not create Buffer from response body for ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\t});\n}\n\n/**\n * Detect buffer encoding and convert to target encoding\n * ref: http://www.w3.org/TR/2011/WD-html5-20110113/parsing.html#determining-the-character-encoding\n *\n * @param   Buffer  buffer    Incoming buffer\n * @param   String  encoding  Target encoding\n * @return  String\n */\nfunction convertBody(buffer, headers) {\n\tif (typeof convert !== 'function') {\n\t\tthrow new Error('The package `encoding` must be installed to use the textConverted() function');\n\t}\n\n\tconst ct = headers.get('content-type');\n\tlet charset = 'utf-8';\n\tlet res, str;\n\n\t// header\n\tif (ct) {\n\t\tres = /charset=([^;]*)/i.exec(ct);\n\t}\n\n\t// no charset in content type, peek at response body for at most 1024 bytes\n\tstr = buffer.slice(0, 1024).toString();\n\n\t// html5\n\tif (!res && str) {\n\t\tres = /<meta.+?charset=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// html4\n\tif (!res && str) {\n\t\tres = /<meta[\\s]+?http-equiv=(['\"])content-type\\1[\\s]+?content=(['\"])(.+?)\\2/i.exec(str);\n\t\tif (!res) {\n\t\t\tres = /<meta[\\s]+?content=(['\"])(.+?)\\1[\\s]+?http-equiv=(['\"])content-type\\3/i.exec(str);\n\t\t\tif (res) {\n\t\t\t\tres.pop(); // drop last quote\n\t\t\t}\n\t\t}\n\n\t\tif (res) {\n\t\t\tres = /charset=(.*)/i.exec(res.pop());\n\t\t}\n\t}\n\n\t// xml\n\tif (!res && str) {\n\t\tres = /<\\?xml.+?encoding=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// found charset\n\tif (res) {\n\t\tcharset = res.pop();\n\n\t\t// prevent decode issues when sites use incorrect encoding\n\t\t// ref: https://hsivonen.fi/encoding-menu/\n\t\tif (charset === 'gb2312' || charset === 'gbk') {\n\t\t\tcharset = 'gb18030';\n\t\t}\n\t}\n\n\t// turn raw buffers into a single utf-8 buffer\n\treturn convert(buffer, 'UTF-8', charset).toString();\n}\n\n/**\n * Detect a URLSearchParams object\n * ref: https://github.com/bitinn/node-fetch/issues/296#issuecomment-307598143\n *\n * @param   Object  obj     Object to detect by type or brand\n * @return  String\n */\nfunction isURLSearchParams(obj) {\n\t// Duck-typing as a necessary condition.\n\tif (typeof obj !== 'object' || typeof obj.append !== 'function' || typeof obj.delete !== 'function' || typeof obj.get !== 'function' || typeof obj.getAll !== 'function' || typeof obj.has !== 'function' || typeof obj.set !== 'function') {\n\t\treturn false;\n\t}\n\n\t// Brand-checking and more duck-typing as optional condition.\n\treturn obj.constructor.name === 'URLSearchParams' || Object.prototype.toString.call(obj) === '[object URLSearchParams]' || typeof obj.sort === 'function';\n}\n\n/**\n * Check if `obj` is a W3C `Blob` object (which `File` inherits from)\n * @param  {*} obj\n * @return {boolean}\n */\nfunction isBlob(obj) {\n\treturn typeof obj === 'object' && typeof obj.arrayBuffer === 'function' && typeof obj.type === 'string' && typeof obj.stream === 'function' && typeof obj.constructor === 'function' && typeof obj.constructor.name === 'string' && /^(Blob|File)$/.test(obj.constructor.name) && /^(Blob|File)$/.test(obj[Symbol.toStringTag]);\n}\n\n/**\n * Clone body given Res/Req instance\n *\n * @param   Mixed  instance  Response or Request instance\n * @return  Mixed\n */\nfunction clone(instance) {\n\tlet p1, p2;\n\tlet body = instance.body;\n\n\t// don't allow cloning a used body\n\tif (instance.bodyUsed) {\n\t\tthrow new Error('cannot clone body after it is used');\n\t}\n\n\t// check that body is a stream and not form-data object\n\t// note: we can't clone the form-data object without having it as a dependency\n\tif (body instanceof Stream && typeof body.getBoundary !== 'function') {\n\t\t// tee instance body\n\t\tp1 = new PassThrough();\n\t\tp2 = new PassThrough();\n\t\tbody.pipe(p1);\n\t\tbody.pipe(p2);\n\t\t// set instance body to teed body and return the other teed body\n\t\tinstance[INTERNALS].body = p1;\n\t\tbody = p2;\n\t}\n\n\treturn body;\n}\n\n/**\n * Performs the operation \"extract a `Content-Type` value from |object|\" as\n * specified in the specification:\n * https://fetch.spec.whatwg.org/#concept-bodyinit-extract\n *\n * This function assumes that instance.body is present.\n *\n * @param   Mixed  instance  Any options.body input\n */\nfunction extractContentType(body) {\n\tif (body === null) {\n\t\t// body is null\n\t\treturn null;\n\t} else if (typeof body === 'string') {\n\t\t// body is string\n\t\treturn 'text/plain;charset=UTF-8';\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\treturn 'application/x-www-form-urlencoded;charset=UTF-8';\n\t} else if (isBlob(body)) {\n\t\t// body is blob\n\t\treturn body.type || null;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn null;\n\t} else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\treturn null;\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\treturn null;\n\t} else if (typeof body.getBoundary === 'function') {\n\t\t// detect form data input from form-data module\n\t\treturn `multipart/form-data;boundary=${body.getBoundary()}`;\n\t} else if (body instanceof Stream) {\n\t\t// body is stream\n\t\t// can't really do much about this\n\t\treturn null;\n\t} else {\n\t\t// Body constructor defaults other things to string\n\t\treturn 'text/plain;charset=UTF-8';\n\t}\n}\n\n/**\n * The Fetch Standard treats this as if \"total bytes\" is a property on the body.\n * For us, we have to explicitly get it with a function.\n *\n * ref: https://fetch.spec.whatwg.org/#concept-body-total-bytes\n *\n * @param   Body    instance   Instance of Body\n * @return  Number?            Number of bytes, or null if not possible\n */\nfunction getTotalBytes(instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\treturn 0;\n\t} else if (isBlob(body)) {\n\t\treturn body.size;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn body.length;\n\t} else if (body && typeof body.getLengthSync === 'function') {\n\t\t// detect form data input from form-data module\n\t\tif (body._lengthRetrievers && body._lengthRetrievers.length == 0 || // 1.x\n\t\tbody.hasKnownLength && body.hasKnownLength()) {\n\t\t\t// 2.x\n\t\t\treturn body.getLengthSync();\n\t\t}\n\t\treturn null;\n\t} else {\n\t\t// body is stream\n\t\treturn null;\n\t}\n}\n\n/**\n * Write a Body to a Node.js WritableStream (e.g. http.Request) object.\n *\n * @param   Body    instance   Instance of Body\n * @return  Void\n */\nfunction writeToStream(dest, instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\tdest.end();\n\t} else if (isBlob(body)) {\n\t\tbody.stream().pipe(dest);\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\tdest.write(body);\n\t\tdest.end();\n\t} else {\n\t\t// body is stream\n\t\tbody.pipe(dest);\n\t}\n}\n\n// expose Promise\nBody.Promise = global.Promise;\n\n/**\n * headers.js\n *\n * Headers class offers convenient helpers\n */\n\nconst invalidTokenRegex = /[^\\^_`a-zA-Z\\-0-9!#$%&'*+.|~]/;\nconst invalidHeaderCharRegex = /[^\\t\\x20-\\x7e\\x80-\\xff]/;\n\nfunction validateName(name) {\n\tname = `${name}`;\n\tif (invalidTokenRegex.test(name) || name === '') {\n\t\tthrow new TypeError(`${name} is not a legal HTTP header name`);\n\t}\n}\n\nfunction validateValue(value) {\n\tvalue = `${value}`;\n\tif (invalidHeaderCharRegex.test(value)) {\n\t\tthrow new TypeError(`${value} is not a legal HTTP header value`);\n\t}\n}\n\n/**\n * Find the key in the map object given a header name.\n *\n * Returns undefined if not found.\n *\n * @param   String  name  Header name\n * @return  String|Undefined\n */\nfunction find(map, name) {\n\tname = name.toLowerCase();\n\tfor (const key in map) {\n\t\tif (key.toLowerCase() === name) {\n\t\t\treturn key;\n\t\t}\n\t}\n\treturn undefined;\n}\n\nconst MAP = Symbol('map');\nclass Headers {\n\t/**\n  * Headers class\n  *\n  * @param   Object  headers  Response headers\n  * @return  Void\n  */\n\tconstructor() {\n\t\tlet init = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n\n\t\tthis[MAP] = Object.create(null);\n\n\t\tif (init instanceof Headers) {\n\t\t\tconst rawHeaders = init.raw();\n\t\t\tconst headerNames = Object.keys(rawHeaders);\n\n\t\t\tfor (const headerName of headerNames) {\n\t\t\t\tfor (const value of rawHeaders[headerName]) {\n\t\t\t\t\tthis.append(headerName, value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// We don't worry about converting prop to ByteString here as append()\n\t\t// will handle it.\n\t\tif (init == null) ; else if (typeof init === 'object') {\n\t\t\tconst method = init[Symbol.iterator];\n\t\t\tif (method != null) {\n\t\t\t\tif (typeof method !== 'function') {\n\t\t\t\t\tthrow new TypeError('Header pairs must be iterable');\n\t\t\t\t}\n\n\t\t\t\t// sequence<sequence<ByteString>>\n\t\t\t\t// Note: per spec we have to first exhaust the lists then process them\n\t\t\t\tconst pairs = [];\n\t\t\t\tfor (const pair of init) {\n\t\t\t\t\tif (typeof pair !== 'object' || typeof pair[Symbol.iterator] !== 'function') {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be iterable');\n\t\t\t\t\t}\n\t\t\t\t\tpairs.push(Array.from(pair));\n\t\t\t\t}\n\n\t\t\t\tfor (const pair of pairs) {\n\t\t\t\t\tif (pair.length !== 2) {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be a name/value tuple');\n\t\t\t\t\t}\n\t\t\t\t\tthis.append(pair[0], pair[1]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// record<ByteString, ByteString>\n\t\t\t\tfor (const key of Object.keys(init)) {\n\t\t\t\t\tconst value = init[key];\n\t\t\t\t\tthis.append(key, value);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new TypeError('Provided initializer must be an object');\n\t\t}\n\t}\n\n\t/**\n  * Return combined header value given name\n  *\n  * @param   String  name  Header name\n  * @return  Mixed\n  */\n\tget(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key === undefined) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this[MAP][key].join(', ');\n\t}\n\n\t/**\n  * Iterate over all headers\n  *\n  * @param   Function  callback  Executed for each item with parameters (value, name, thisArg)\n  * @param   Boolean   thisArg   `this` context for callback function\n  * @return  Void\n  */\n\tforEach(callback) {\n\t\tlet thisArg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n\t\tlet pairs = getHeaders(this);\n\t\tlet i = 0;\n\t\twhile (i < pairs.length) {\n\t\t\tvar _pairs$i = pairs[i];\n\t\t\tconst name = _pairs$i[0],\n\t\t\t      value = _pairs$i[1];\n\n\t\t\tcallback.call(thisArg, value, name, this);\n\t\t\tpairs = getHeaders(this);\n\t\t\ti++;\n\t\t}\n\t}\n\n\t/**\n  * Overwrite header values given name\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tset(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tthis[MAP][key !== undefined ? key : name] = [value];\n\t}\n\n\t/**\n  * Append a value onto existing header\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tappend(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tthis[MAP][key].push(value);\n\t\t} else {\n\t\t\tthis[MAP][name] = [value];\n\t\t}\n\t}\n\n\t/**\n  * Check for header name existence\n  *\n  * @param   String   name  Header name\n  * @return  Boolean\n  */\n\thas(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\treturn find(this[MAP], name) !== undefined;\n\t}\n\n\t/**\n  * Delete all header values given name\n  *\n  * @param   String  name  Header name\n  * @return  Void\n  */\n\tdelete(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tdelete this[MAP][key];\n\t\t}\n\t}\n\n\t/**\n  * Return raw headers (non-spec api)\n  *\n  * @return  Object\n  */\n\traw() {\n\t\treturn this[MAP];\n\t}\n\n\t/**\n  * Get an iterator on keys.\n  *\n  * @return  Iterator\n  */\n\tkeys() {\n\t\treturn createHeadersIterator(this, 'key');\n\t}\n\n\t/**\n  * Get an iterator on values.\n  *\n  * @return  Iterator\n  */\n\tvalues() {\n\t\treturn createHeadersIterator(this, 'value');\n\t}\n\n\t/**\n  * Get an iterator on entries.\n  *\n  * This is the default iterator of the Headers object.\n  *\n  * @return  Iterator\n  */\n\t[Symbol.iterator]() {\n\t\treturn createHeadersIterator(this, 'key+value');\n\t}\n}\nHeaders.prototype.entries = Headers.prototype[Symbol.iterator];\n\nObject.defineProperty(Headers.prototype, Symbol.toStringTag, {\n\tvalue: 'Headers',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Headers.prototype, {\n\tget: { enumerable: true },\n\tforEach: { enumerable: true },\n\tset: { enumerable: true },\n\tappend: { enumerable: true },\n\thas: { enumerable: true },\n\tdelete: { enumerable: true },\n\tkeys: { enumerable: true },\n\tvalues: { enumerable: true },\n\tentries: { enumerable: true }\n});\n\nfunction getHeaders(headers) {\n\tlet kind = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'key+value';\n\n\tconst keys = Object.keys(headers[MAP]).sort();\n\treturn keys.map(kind === 'key' ? function (k) {\n\t\treturn k.toLowerCase();\n\t} : kind === 'value' ? function (k) {\n\t\treturn headers[MAP][k].join(', ');\n\t} : function (k) {\n\t\treturn [k.toLowerCase(), headers[MAP][k].join(', ')];\n\t});\n}\n\nconst INTERNAL = Symbol('internal');\n\nfunction createHeadersIterator(target, kind) {\n\tconst iterator = Object.create(HeadersIteratorPrototype);\n\titerator[INTERNAL] = {\n\t\ttarget,\n\t\tkind,\n\t\tindex: 0\n\t};\n\treturn iterator;\n}\n\nconst HeadersIteratorPrototype = Object.setPrototypeOf({\n\tnext() {\n\t\t// istanbul ignore if\n\t\tif (!this || Object.getPrototypeOf(this) !== HeadersIteratorPrototype) {\n\t\t\tthrow new TypeError('Value of `this` is not a HeadersIterator');\n\t\t}\n\n\t\tvar _INTERNAL = this[INTERNAL];\n\t\tconst target = _INTERNAL.target,\n\t\t      kind = _INTERNAL.kind,\n\t\t      index = _INTERNAL.index;\n\n\t\tconst values = getHeaders(target, kind);\n\t\tconst len = values.length;\n\t\tif (index >= len) {\n\t\t\treturn {\n\t\t\t\tvalue: undefined,\n\t\t\t\tdone: true\n\t\t\t};\n\t\t}\n\n\t\tthis[INTERNAL].index = index + 1;\n\n\t\treturn {\n\t\t\tvalue: values[index],\n\t\t\tdone: false\n\t\t};\n\t}\n}, Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));\n\nObject.defineProperty(HeadersIteratorPrototype, Symbol.toStringTag, {\n\tvalue: 'HeadersIterator',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * Export the Headers object in a form that Node.js can consume.\n *\n * @param   Headers  headers\n * @return  Object\n */\nfunction exportNodeCompatibleHeaders(headers) {\n\tconst obj = Object.assign({ __proto__: null }, headers[MAP]);\n\n\t// http.request() only supports string as Host header. This hack makes\n\t// specifying custom Host header possible.\n\tconst hostHeaderKey = find(headers[MAP], 'Host');\n\tif (hostHeaderKey !== undefined) {\n\t\tobj[hostHeaderKey] = obj[hostHeaderKey][0];\n\t}\n\n\treturn obj;\n}\n\n/**\n * Create a Headers object from an object of headers, ignoring those that do\n * not conform to HTTP grammar productions.\n *\n * @param   Object  obj  Object of headers\n * @return  Headers\n */\nfunction createHeadersLenient(obj) {\n\tconst headers = new Headers();\n\tfor (const name of Object.keys(obj)) {\n\t\tif (invalidTokenRegex.test(name)) {\n\t\t\tcontinue;\n\t\t}\n\t\tif (Array.isArray(obj[name])) {\n\t\t\tfor (const val of obj[name]) {\n\t\t\t\tif (invalidHeaderCharRegex.test(val)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (headers[MAP][name] === undefined) {\n\t\t\t\t\theaders[MAP][name] = [val];\n\t\t\t\t} else {\n\t\t\t\t\theaders[MAP][name].push(val);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (!invalidHeaderCharRegex.test(obj[name])) {\n\t\t\theaders[MAP][name] = [obj[name]];\n\t\t}\n\t}\n\treturn headers;\n}\n\nconst INTERNALS$1 = Symbol('Response internals');\n\n// fix an issue where \"STATUS_CODES\" aren't a named export for node <10\nconst STATUS_CODES = http.STATUS_CODES;\n\n/**\n * Response class\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nclass Response {\n\tconstructor() {\n\t\tlet body = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\t\tlet opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tBody.call(this, body, opts);\n\n\t\tconst status = opts.status || 200;\n\t\tconst headers = new Headers(opts.headers);\n\n\t\tif (body != null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(body);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tthis[INTERNALS$1] = {\n\t\t\turl: opts.url,\n\t\t\tstatus,\n\t\t\tstatusText: opts.statusText || STATUS_CODES[status],\n\t\t\theaders,\n\t\t\tcounter: opts.counter\n\t\t};\n\t}\n\n\tget url() {\n\t\treturn this[INTERNALS$1].url || '';\n\t}\n\n\tget status() {\n\t\treturn this[INTERNALS$1].status;\n\t}\n\n\t/**\n  * Convenience property representing if the request ended normally\n  */\n\tget ok() {\n\t\treturn this[INTERNALS$1].status >= 200 && this[INTERNALS$1].status < 300;\n\t}\n\n\tget redirected() {\n\t\treturn this[INTERNALS$1].counter > 0;\n\t}\n\n\tget statusText() {\n\t\treturn this[INTERNALS$1].statusText;\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$1].headers;\n\t}\n\n\t/**\n  * Clone this response\n  *\n  * @return  Response\n  */\n\tclone() {\n\t\treturn new Response(clone(this), {\n\t\t\turl: this.url,\n\t\t\tstatus: this.status,\n\t\t\tstatusText: this.statusText,\n\t\t\theaders: this.headers,\n\t\t\tok: this.ok,\n\t\t\tredirected: this.redirected\n\t\t});\n\t}\n}\n\nBody.mixIn(Response.prototype);\n\nObject.defineProperties(Response.prototype, {\n\turl: { enumerable: true },\n\tstatus: { enumerable: true },\n\tok: { enumerable: true },\n\tredirected: { enumerable: true },\n\tstatusText: { enumerable: true },\n\theaders: { enumerable: true },\n\tclone: { enumerable: true }\n});\n\nObject.defineProperty(Response.prototype, Symbol.toStringTag, {\n\tvalue: 'Response',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nconst INTERNALS$2 = Symbol('Request internals');\nconst URL = Url.URL || whatwgUrl.URL;\n\n// fix an issue where \"format\", \"parse\" aren't a named export for node <10\nconst parse_url = Url.parse;\nconst format_url = Url.format;\n\n/**\n * Wrapper around `new URL` to handle arbitrary URLs\n *\n * @param  {string} urlStr\n * @return {void}\n */\nfunction parseURL(urlStr) {\n\t/*\n \tCheck whether the URL is absolute or not\n \t\tScheme: https://tools.ietf.org/html/rfc3986#section-3.1\n \tAbsolute URL: https://tools.ietf.org/html/rfc3986#section-4.3\n */\n\tif (/^[a-zA-Z][a-zA-Z\\d+\\-.]*:/.exec(urlStr)) {\n\t\turlStr = new URL(urlStr).toString();\n\t}\n\n\t// Fallback to old implementation for arbitrary URLs\n\treturn parse_url(urlStr);\n}\n\nconst streamDestructionSupported = 'destroy' in Stream.Readable.prototype;\n\n/**\n * Check if a value is an instance of Request.\n *\n * @param   Mixed   input\n * @return  Boolean\n */\nfunction isRequest(input) {\n\treturn typeof input === 'object' && typeof input[INTERNALS$2] === 'object';\n}\n\nfunction isAbortSignal(signal) {\n\tconst proto = signal && typeof signal === 'object' && Object.getPrototypeOf(signal);\n\treturn !!(proto && proto.constructor.name === 'AbortSignal');\n}\n\n/**\n * Request class\n *\n * @param   Mixed   input  Url or Request instance\n * @param   Object  init   Custom options\n * @return  Void\n */\nclass Request {\n\tconstructor(input) {\n\t\tlet init = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tlet parsedURL;\n\n\t\t// normalize input\n\t\tif (!isRequest(input)) {\n\t\t\tif (input && input.href) {\n\t\t\t\t// in order to support Node.js' Url objects; though WHATWG's URL objects\n\t\t\t\t// will fall into this branch also (since their `toString()` will return\n\t\t\t\t// `href` property anyway)\n\t\t\t\tparsedURL = parseURL(input.href);\n\t\t\t} else {\n\t\t\t\t// coerce input to a string before attempting to parse\n\t\t\t\tparsedURL = parseURL(`${input}`);\n\t\t\t}\n\t\t\tinput = {};\n\t\t} else {\n\t\t\tparsedURL = parseURL(input.url);\n\t\t}\n\n\t\tlet method = init.method || input.method || 'GET';\n\t\tmethod = method.toUpperCase();\n\n\t\tif ((init.body != null || isRequest(input) && input.body !== null) && (method === 'GET' || method === 'HEAD')) {\n\t\t\tthrow new TypeError('Request with GET/HEAD method cannot have body');\n\t\t}\n\n\t\tlet inputBody = init.body != null ? init.body : isRequest(input) && input.body !== null ? clone(input) : null;\n\n\t\tBody.call(this, inputBody, {\n\t\t\ttimeout: init.timeout || input.timeout || 0,\n\t\t\tsize: init.size || input.size || 0\n\t\t});\n\n\t\tconst headers = new Headers(init.headers || input.headers || {});\n\n\t\tif (inputBody != null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(inputBody);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tlet signal = isRequest(input) ? input.signal : null;\n\t\tif ('signal' in init) signal = init.signal;\n\n\t\tif (signal != null && !isAbortSignal(signal)) {\n\t\t\tthrow new TypeError('Expected signal to be an instanceof AbortSignal');\n\t\t}\n\n\t\tthis[INTERNALS$2] = {\n\t\t\tmethod,\n\t\t\tredirect: init.redirect || input.redirect || 'follow',\n\t\t\theaders,\n\t\t\tparsedURL,\n\t\t\tsignal\n\t\t};\n\n\t\t// node-fetch-only options\n\t\tthis.follow = init.follow !== undefined ? init.follow : input.follow !== undefined ? input.follow : 20;\n\t\tthis.compress = init.compress !== undefined ? init.compress : input.compress !== undefined ? input.compress : true;\n\t\tthis.counter = init.counter || input.counter || 0;\n\t\tthis.agent = init.agent || input.agent;\n\t}\n\n\tget method() {\n\t\treturn this[INTERNALS$2].method;\n\t}\n\n\tget url() {\n\t\treturn format_url(this[INTERNALS$2].parsedURL);\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$2].headers;\n\t}\n\n\tget redirect() {\n\t\treturn this[INTERNALS$2].redirect;\n\t}\n\n\tget signal() {\n\t\treturn this[INTERNALS$2].signal;\n\t}\n\n\t/**\n  * Clone this request\n  *\n  * @return  Request\n  */\n\tclone() {\n\t\treturn new Request(this);\n\t}\n}\n\nBody.mixIn(Request.prototype);\n\nObject.defineProperty(Request.prototype, Symbol.toStringTag, {\n\tvalue: 'Request',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Request.prototype, {\n\tmethod: { enumerable: true },\n\turl: { enumerable: true },\n\theaders: { enumerable: true },\n\tredirect: { enumerable: true },\n\tclone: { enumerable: true },\n\tsignal: { enumerable: true }\n});\n\n/**\n * Convert a Request to Node.js http request options.\n *\n * @param   Request  A Request instance\n * @return  Object   The options object to be passed to http.request\n */\nfunction getNodeRequestOptions(request) {\n\tconst parsedURL = request[INTERNALS$2].parsedURL;\n\tconst headers = new Headers(request[INTERNALS$2].headers);\n\n\t// fetch step 1.3\n\tif (!headers.has('Accept')) {\n\t\theaders.set('Accept', '*/*');\n\t}\n\n\t// Basic fetch\n\tif (!parsedURL.protocol || !parsedURL.hostname) {\n\t\tthrow new TypeError('Only absolute URLs are supported');\n\t}\n\n\tif (!/^https?:$/.test(parsedURL.protocol)) {\n\t\tthrow new TypeError('Only HTTP(S) protocols are supported');\n\t}\n\n\tif (request.signal && request.body instanceof Stream.Readable && !streamDestructionSupported) {\n\t\tthrow new Error('Cancellation of streamed requests with AbortSignal is not supported in node < 8');\n\t}\n\n\t// HTTP-network-or-cache fetch steps 2.4-2.7\n\tlet contentLengthValue = null;\n\tif (request.body == null && /^(POST|PUT)$/i.test(request.method)) {\n\t\tcontentLengthValue = '0';\n\t}\n\tif (request.body != null) {\n\t\tconst totalBytes = getTotalBytes(request);\n\t\tif (typeof totalBytes === 'number') {\n\t\t\tcontentLengthValue = String(totalBytes);\n\t\t}\n\t}\n\tif (contentLengthValue) {\n\t\theaders.set('Content-Length', contentLengthValue);\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.11\n\tif (!headers.has('User-Agent')) {\n\t\theaders.set('User-Agent', 'node-fetch/1.0 (+https://github.com/bitinn/node-fetch)');\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.15\n\tif (request.compress && !headers.has('Accept-Encoding')) {\n\t\theaders.set('Accept-Encoding', 'gzip,deflate');\n\t}\n\n\tlet agent = request.agent;\n\tif (typeof agent === 'function') {\n\t\tagent = agent(parsedURL);\n\t}\n\n\tif (!headers.has('Connection') && !agent) {\n\t\theaders.set('Connection', 'close');\n\t}\n\n\t// HTTP-network fetch step 4.2\n\t// chunked encoding is handled by Node.js\n\n\treturn Object.assign({}, parsedURL, {\n\t\tmethod: request.method,\n\t\theaders: exportNodeCompatibleHeaders(headers),\n\t\tagent\n\t});\n}\n\n/**\n * abort-error.js\n *\n * AbortError interface for cancelled requests\n */\n\n/**\n * Create AbortError instance\n *\n * @param   String      message      Error message for human\n * @return  AbortError\n */\nfunction AbortError(message) {\n  Error.call(this, message);\n\n  this.type = 'aborted';\n  this.message = message;\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nAbortError.prototype = Object.create(Error.prototype);\nAbortError.prototype.constructor = AbortError;\nAbortError.prototype.name = 'AbortError';\n\nconst URL$1 = Url.URL || whatwgUrl.URL;\n\n// fix an issue where \"PassThrough\", \"resolve\" aren't a named export for node <10\nconst PassThrough$1 = Stream.PassThrough;\n\nconst isDomainOrSubdomain = function isDomainOrSubdomain(destination, original) {\n\tconst orig = new URL$1(original).hostname;\n\tconst dest = new URL$1(destination).hostname;\n\n\treturn orig === dest || orig[orig.length - dest.length - 1] === '.' && orig.endsWith(dest);\n};\n\n/**\n * Fetch function\n *\n * @param   Mixed    url   Absolute url or Request instance\n * @param   Object   opts  Fetch options\n * @return  Promise\n */\nfunction fetch(url, opts) {\n\n\t// allow custom promise\n\tif (!fetch.Promise) {\n\t\tthrow new Error('native promise missing, set fetch.Promise to your favorite alternative');\n\t}\n\n\tBody.Promise = fetch.Promise;\n\n\t// wrap http.request into fetch\n\treturn new fetch.Promise(function (resolve, reject) {\n\t\t// build request object\n\t\tconst request = new Request(url, opts);\n\t\tconst options = getNodeRequestOptions(request);\n\n\t\tconst send = (options.protocol === 'https:' ? https : http).request;\n\t\tconst signal = request.signal;\n\n\t\tlet response = null;\n\n\t\tconst abort = function abort() {\n\t\t\tlet error = new AbortError('The user aborted a request.');\n\t\t\treject(error);\n\t\t\tif (request.body && request.body instanceof Stream.Readable) {\n\t\t\t\trequest.body.destroy(error);\n\t\t\t}\n\t\t\tif (!response || !response.body) return;\n\t\t\tresponse.body.emit('error', error);\n\t\t};\n\n\t\tif (signal && signal.aborted) {\n\t\t\tabort();\n\t\t\treturn;\n\t\t}\n\n\t\tconst abortAndFinalize = function abortAndFinalize() {\n\t\t\tabort();\n\t\t\tfinalize();\n\t\t};\n\n\t\t// send request\n\t\tconst req = send(options);\n\t\tlet reqTimeout;\n\n\t\tif (signal) {\n\t\t\tsignal.addEventListener('abort', abortAndFinalize);\n\t\t}\n\n\t\tfunction finalize() {\n\t\t\treq.abort();\n\t\t\tif (signal) signal.removeEventListener('abort', abortAndFinalize);\n\t\t\tclearTimeout(reqTimeout);\n\t\t}\n\n\t\tif (request.timeout) {\n\t\t\treq.once('socket', function (socket) {\n\t\t\t\treqTimeout = setTimeout(function () {\n\t\t\t\t\treject(new FetchError(`network timeout at: ${request.url}`, 'request-timeout'));\n\t\t\t\t\tfinalize();\n\t\t\t\t}, request.timeout);\n\t\t\t});\n\t\t}\n\n\t\treq.on('error', function (err) {\n\t\t\treject(new FetchError(`request to ${request.url} failed, reason: ${err.message}`, 'system', err));\n\t\t\tfinalize();\n\t\t});\n\n\t\treq.on('response', function (res) {\n\t\t\tclearTimeout(reqTimeout);\n\n\t\t\tconst headers = createHeadersLenient(res.headers);\n\n\t\t\t// HTTP fetch step 5\n\t\t\tif (fetch.isRedirect(res.statusCode)) {\n\t\t\t\t// HTTP fetch step 5.2\n\t\t\t\tconst location = headers.get('Location');\n\n\t\t\t\t// HTTP fetch step 5.3\n\t\t\t\tlet locationURL = null;\n\t\t\t\ttry {\n\t\t\t\t\tlocationURL = location === null ? null : new URL$1(location, request.url).toString();\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// error here can only be invalid URL in Location: header\n\t\t\t\t\t// do not throw when options.redirect == manual\n\t\t\t\t\t// let the user extract the errorneous redirect URL\n\t\t\t\t\tif (request.redirect !== 'manual') {\n\t\t\t\t\t\treject(new FetchError(`uri requested responds with an invalid redirect URL: ${location}`, 'invalid-redirect'));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// HTTP fetch step 5.5\n\t\t\t\tswitch (request.redirect) {\n\t\t\t\t\tcase 'error':\n\t\t\t\t\t\treject(new FetchError(`uri requested responds with a redirect, redirect mode is set to error: ${request.url}`, 'no-redirect'));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\tcase 'manual':\n\t\t\t\t\t\t// node-fetch-specific step: make manual redirect a bit easier to use by setting the Location header value to the resolved URL.\n\t\t\t\t\t\tif (locationURL !== null) {\n\t\t\t\t\t\t\t// handle corrupted header\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\theaders.set('Location', locationURL);\n\t\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\t\t// istanbul ignore next: nodejs server prevent invalid response headers, we can't test this through normal request\n\t\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'follow':\n\t\t\t\t\t\t// HTTP-redirect fetch step 2\n\t\t\t\t\t\tif (locationURL === null) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 5\n\t\t\t\t\t\tif (request.counter >= request.follow) {\n\t\t\t\t\t\t\treject(new FetchError(`maximum redirect reached at: ${request.url}`, 'max-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 6 (counter increment)\n\t\t\t\t\t\t// Create a new Request object.\n\t\t\t\t\t\tconst requestOpts = {\n\t\t\t\t\t\t\theaders: new Headers(request.headers),\n\t\t\t\t\t\t\tfollow: request.follow,\n\t\t\t\t\t\t\tcounter: request.counter + 1,\n\t\t\t\t\t\t\tagent: request.agent,\n\t\t\t\t\t\t\tcompress: request.compress,\n\t\t\t\t\t\t\tmethod: request.method,\n\t\t\t\t\t\t\tbody: request.body,\n\t\t\t\t\t\t\tsignal: request.signal,\n\t\t\t\t\t\t\ttimeout: request.timeout,\n\t\t\t\t\t\t\tsize: request.size\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tif (!isDomainOrSubdomain(request.url, locationURL)) {\n\t\t\t\t\t\t\tfor (const name of ['authorization', 'www-authenticate', 'cookie', 'cookie2']) {\n\t\t\t\t\t\t\t\trequestOpts.headers.delete(name);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 9\n\t\t\t\t\t\tif (res.statusCode !== 303 && request.body && getTotalBytes(request) === null) {\n\t\t\t\t\t\t\treject(new FetchError('Cannot follow redirect with body being a readable stream', 'unsupported-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 11\n\t\t\t\t\t\tif (res.statusCode === 303 || (res.statusCode === 301 || res.statusCode === 302) && request.method === 'POST') {\n\t\t\t\t\t\t\trequestOpts.method = 'GET';\n\t\t\t\t\t\t\trequestOpts.body = undefined;\n\t\t\t\t\t\t\trequestOpts.headers.delete('content-length');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 15\n\t\t\t\t\t\tresolve(fetch(new Request(locationURL, requestOpts)));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// prepare response\n\t\t\tres.once('end', function () {\n\t\t\t\tif (signal) signal.removeEventListener('abort', abortAndFinalize);\n\t\t\t});\n\t\t\tlet body = res.pipe(new PassThrough$1());\n\n\t\t\tconst response_options = {\n\t\t\t\turl: request.url,\n\t\t\t\tstatus: res.statusCode,\n\t\t\t\tstatusText: res.statusMessage,\n\t\t\t\theaders: headers,\n\t\t\t\tsize: request.size,\n\t\t\t\ttimeout: request.timeout,\n\t\t\t\tcounter: request.counter\n\t\t\t};\n\n\t\t\t// HTTP-network fetch step 12.1.1.3\n\t\t\tconst codings = headers.get('Content-Encoding');\n\n\t\t\t// HTTP-network fetch step 12.1.1.4: handle content codings\n\n\t\t\t// in following scenarios we ignore compression support\n\t\t\t// 1. compression support is disabled\n\t\t\t// 2. HEAD request\n\t\t\t// 3. no Content-Encoding header\n\t\t\t// 4. no content response (204)\n\t\t\t// 5. content not modified response (304)\n\t\t\tif (!request.compress || request.method === 'HEAD' || codings === null || res.statusCode === 204 || res.statusCode === 304) {\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// For Node v6+\n\t\t\t// Be less strict when decoding compressed responses, since sometimes\n\t\t\t// servers send slightly invalid responses that are still accepted\n\t\t\t// by common browsers.\n\t\t\t// Always using Z_SYNC_FLUSH is what cURL does.\n\t\t\tconst zlibOptions = {\n\t\t\t\tflush: zlib.Z_SYNC_FLUSH,\n\t\t\t\tfinishFlush: zlib.Z_SYNC_FLUSH\n\t\t\t};\n\n\t\t\t// for gzip\n\t\t\tif (codings == 'gzip' || codings == 'x-gzip') {\n\t\t\t\tbody = body.pipe(zlib.createGunzip(zlibOptions));\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for deflate\n\t\t\tif (codings == 'deflate' || codings == 'x-deflate') {\n\t\t\t\t// handle the infamous raw deflate response from old servers\n\t\t\t\t// a hack for old IIS and Apache servers\n\t\t\t\tconst raw = res.pipe(new PassThrough$1());\n\t\t\t\traw.once('data', function (chunk) {\n\t\t\t\t\t// see http://stackoverflow.com/questions/37519828\n\t\t\t\t\tif ((chunk[0] & 0x0F) === 0x08) {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflate());\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflateRaw());\n\t\t\t\t\t}\n\t\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\t\tresolve(response);\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for br\n\t\t\tif (codings == 'br' && typeof zlib.createBrotliDecompress === 'function') {\n\t\t\t\tbody = body.pipe(zlib.createBrotliDecompress());\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// otherwise, use response as-is\n\t\t\tresponse = new Response(body, response_options);\n\t\t\tresolve(response);\n\t\t});\n\n\t\twriteToStream(req, request);\n\t});\n}\n/**\n * Redirect code matching\n *\n * @param   Number   code  Status code\n * @return  Boolean\n */\nfetch.isRedirect = function (code) {\n\treturn code === 301 || code === 302 || code === 303 || code === 307 || code === 308;\n};\n\n// expose Promise\nfetch.Promise = global.Promise;\n\nmodule.exports = exports = fetch;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = exports;\nexports.Headers = Headers;\nexports.Request = Request;\nexports.Response = Response;\nexports.FetchError = FetchError;\n", "const nodeFetch = require('node-fetch')\nconst realFetch = nodeFetch.default || nodeFetch\n\nconst fetch = function (url, options) {\n  // Support schemaless URIs on the server for parity with the browser.\n  // Ex: //github.com/ -> https://github.com/\n  if (/^\\/\\//.test(url)) {\n    url = 'https:' + url\n  }\n  return realFetch.call(this, url, options)\n}\n\nfetch.ponyfill = true\n\nmodule.exports = exports = fetch\nexports.fetch = fetch\nexports.Headers = nodeFetch.Headers\nexports.Request = nodeFetch.Request\nexports.Response = nodeFetch.Response\n\n// Needed for TypeScript consumers without esModuleInterop.\nexports.default = fetch\n", "'use strict';\n\nfunction preserveCamelCase(str) {\n\tlet isLastCharLower = false;\n\tlet isLastCharUpper = false;\n\tlet isLastLastCharUpper = false;\n\n\tfor (let i = 0; i < str.length; i++) {\n\t\tconst c = str[i];\n\n\t\tif (isLastCharLower && /[a-zA-Z]/.test(c) && c.toUpperCase() === c) {\n\t\t\tstr = str.substr(0, i) + '-' + str.substr(i);\n\t\t\tisLastCharLower = false;\n\t\t\tisLastLastCharUpper = isLastCharUpper;\n\t\t\tisLastCharUpper = true;\n\t\t\ti++;\n\t\t} else if (isLastCharUpper && isLastLastCharUpper && /[a-zA-Z]/.test(c) && c.toLowerCase() === c) {\n\t\t\tstr = str.substr(0, i - 1) + '-' + str.substr(i - 1);\n\t\t\tisLastLastCharUpper = isLastCharUpper;\n\t\t\tisLastCharUpper = false;\n\t\t\tisLastCharLower = true;\n\t\t} else {\n\t\t\tisLastCharLower = c.toLowerCase() === c;\n\t\t\tisLastLastCharUpper = isLastCharUpper;\n\t\t\tisLastCharUpper = c.toUpperCase() === c;\n\t\t}\n\t}\n\n\treturn str;\n}\n\nmodule.exports = function (str) {\n\tif (arguments.length > 1) {\n\t\tstr = Array.from(arguments)\n\t\t\t.map(x => x.trim())\n\t\t\t.filter(x => x.length)\n\t\t\t.join('-');\n\t} else {\n\t\tstr = str.trim();\n\t}\n\n\tif (str.length === 0) {\n\t\treturn '';\n\t}\n\n\tif (str.length === 1) {\n\t\treturn str.toLowerCase();\n\t}\n\n\tif (/^[a-z0-9]+$/.test(str)) {\n\t\treturn str;\n\t}\n\n\tconst hasUpperCase = str !== str.toLowerCase();\n\n\tif (hasUpperCase) {\n\t\tstr = preserveCamelCase(str);\n\t}\n\n\treturn str\n\t\t.replace(/^[_.\\- ]+/, '')\n\t\t.toLowerCase()\n\t\t.replace(/[_.\\- ]+(\\w|$)/g, (m, p1) => p1.toUpperCase());\n};\n", "const extraPropertyPattern = /\\n?\\s?\\|\\s?\\w+$/;\nconst endingPattern = /\\n\\}\\}$/;\nconst linksPattern = /((\\$\\w+_\\d+)\\s*,?\\s*){2,}/g;\nconst linkSeparatorPattern = /[,\\s?]/g;\n\nfunction trimWrappers(str) {\n  return str\n    .replace(/\\[\\[/g, '')\n    .replace(/\\]\\]/g, '')\n    .replace(/\\{\\{/g, '')\n    .replace(/\\}\\}/g, '')\n    .trim();\n}\n\nfunction trimOr(str) {\n  const orPosition = str.indexOf('|');\n  if (orPosition !== -1) {\n    return str.substring(0, orPosition);\n  }\n  return str;\n}\n\nexport default function getValue(raw, key) {\n  if (!raw) {\n    return null;\n  }\n\n  const cleansed = raw\n    .trim()\n    .replace(/File:/, '')\n    // Have not found reason for this but it breaks parsing, so we are just\n    // removing it for now\n    .replace(/\\{\\{\\d+\\}\\}/g, '')\n    .replace(extraPropertyPattern, '')\n    .replace(endingPattern, '');\n\n  if (cleansed === 'y' || cleansed === 'yes') {\n    return true;\n  }\n\n  if (key == 'birthPlace') {\n    return raw.trim();\n  }\n\n  // Is it a list of links??\n  const links = cleansed.match(linksPattern);\n  if (links) {\n    return links[0].split(linkSeparatorPattern).filter(text => text);\n  }\n\n  return trimOr(trimWrappers(cleansed));\n}\n", "export const DO_NOT_REPLACE = Symbol('DO NOT REPLACE');\n\nexport default function dataType({\n  globalPattern,\n  parsePattern,\n  parse,\n  variable,\n  name,\n}) {\n  return (source) => {\n    const matches = source.match(globalPattern);\n    if (!matches) {\n      return {\n        [name]: [],\n        sourceAfter: source,\n      };\n    }\n    const instances = matches.map((match) => parse(match.match(parsePattern)));\n    const sourceAfter = matches.reduce((memo, match, index) => {\n      if (instances[index] === DO_NOT_REPLACE) {\n        return memo;\n      }\n      return memo.replace(match, `$${variable}_${index}`);\n    }, source);\n    return {\n      data: {\n        [name]: instances,\n      },\n      sourceAfter,\n    };\n  };\n}\n", "import dataTypes from '../data-types/index';\n\nfunction byDataHandler({ source, context }, handler) {\n  const { data, sourceAfter } = handler(source);\n  return {\n    context: Object.assign({}, context, data),\n    source: sourceAfter,\n  };\n}\n\nexport default function extractData(source) {\n  return dataTypes\n    .map(type => type.handler)\n    .reduce(byDataHandler, {\n      context: {},\n      source,\n    });\n}\n", "import getValue from './getValue';\nimport camelCase from 'camelcase';\n\nconst keyValueGlobalPattern = /\\|\\s*([-'\\u0400-\\u04FF\\w\\s]+)\\s*=\\s*([^|]+)?/g;\nconst keyValuePattern = /\\|\\s*([-'\\u0400-\\u04FF\\w\\s]+)\\s*=\\s*([^|]+)?/;\n\nexport default function findPropertyList(source) {\n  const keyValuePairs = source.match(keyValueGlobalPattern);\n  if (!keyValuePairs) {\n    return [];\n  }\n  return keyValuePairs\n    .map(match => {\n      const result = keyValuePattern.exec(match);\n      if (!result) {\n        return null;\n      }\n      const [, rawKey, rawValue] = result;\n      const key = camelCase(rawKey.trim());\n      return {\n        key,\n        value: getValue(rawValue, key),\n      };\n    })\n    .filter(item => item);\n}\n", "import dataTypes from '../data-types/index';\n\nexport function fillVariable(value, context, { simplifyDataValues } = {}) {\n  if (typeof value !== 'string') {\n    console.log(\n      `Warning: Something went wrong. Could not fill variables in: (${typeof value}) ${JSON.stringify(\n        value\n      )}`\n    );\n    return {};\n  }\n  const dataType = dataTypes.find((type) => value.match(type.pattern));\n  if (dataType) {\n    const [matched, index] = dataType.pattern.exec(value);\n    const dataValue = context[dataType.name][parseInt(index, 10)];\n    if (!simplifyDataValues && typeof dataValue === 'string') {\n      return value.replace(matched, dataValue);\n    }\n    return dataValue;\n  }\n  return value;\n}\n\n// Recursive varaible filling... even handles arrays of values\nexport default function fillVariables(value, context, options) {\n  if (value === undefined) {\n    return value;\n  }\n  if (value instanceof Date) {\n    return value;\n  }\n  if (typeof value === 'number') {\n    return value;\n  }\n  if (Array.isArray(value)) {\n    return value.map((item) => fillVariables(item, context, options));\n  }\n  if (typeof value === 'object') {\n    return Object.keys(value).reduce((memo, key) => {\n      return Object.assign(memo, {\n        [key]: fillVariables(value[key], context, options),\n      });\n    }, {});\n    // return value.map(item => fillVariables(item, context, options));\n  }\n  const filled = fillVariable(value, context, options);\n  if (filled === value) {\n    return value;\n  }\n  return fillVariables(filled, context, options);\n}\n", "import dataTypes from '../data-types/index';\nimport findPropertyList from './propertyList';\nimport numberParse from './numberParse';\nimport fillVariables from './fillVariables';\n\nconst smallDataType = dataTypes.find((type) => type.name === 'smalls');\n\nfunction handleSmallData(value, context, { simplifyDataValues }) {\n  if (typeof value === 'string' && value.match(smallDataType.pattern)) {\n    const primary = value\n      .replace(smallDataType.pattern, '')\n      // Cleaning up from inserted commas\n      .replace(/,/, '')\n      .trim();\n    const [, index] = smallDataType.pattern.exec(value);\n    const secondary = context[smallDataType.name][parseInt(index, 10)];\n    const result = {\n      primary: getVariableValue(primary, context, { simplifyDataValues }),\n      secondary: getVariableValue(secondary, context, { simplifyDataValues }),\n    };\n    return simplifyDataValues ? result.primary : result;\n  }\n  return null;\n}\n\nfunction getVariableValue(value, context, { simplifyDataValues } = {}) {\n  // Handling small data differently... I dont like this...\n  const smallData = handleSmallData(value, context, { simplifyDataValues });\n  if (smallData) {\n    return smallData;\n  }\n  return fillVariables(value, context, { simplifyDataValues });\n}\n\nfunction reduceVariable(key, value, context, options) {\n  if (value === null) {\n    return null;\n  }\n  if (typeof value === 'boolean') {\n    return value;\n  }\n  // First array pass...\n  if (Array.isArray(value)) {\n    return value.map((item) => getVariableValue(item, context, options));\n  }\n  if (key.match(/areaTotal/) || key.match(/population/)) {\n    let float = numberParse(value);\n    if (float === false) float = parseFloat(value, 10);\n    if (!isNaN(float)) {\n      return float;\n    }\n  }\n  if (key.match(/date/i)) {\n    const dateValue = +new Date(value);\n    if (!isNaN(dateValue)) {\n      return new Date(value);\n    }\n  }\n  const variableValue = getVariableValue(value, context, options);\n\n  // Second array pass. If first variable was an array of variables.\n  if (Array.isArray(variableValue)) {\n    return variableValue.map((item) =>\n      getVariableValue(item, context, options)\n    );\n  }\n  return variableValue;\n}\n\nfunction byVariableReduction(context, options) {\n  return (memo, { key, value }) => {\n    const reduced = reduceVariable(key, value, context, options);\n    if (reduced === '' || reduced === null) {\n      return memo;\n    }\n    return Object.assign({}, memo, {\n      [key]: reduced,\n    });\n  };\n}\n\nexport default function extractProperties(\n  { source, context },\n  { simplifyDataValues = true } = {}\n) {\n  return findPropertyList(source).reduce(\n    byVariableReduction(context, { simplifyDataValues }),\n    {}\n  );\n}\n", "// import getValue from './getValue';\nimport camelCase from 'camelcase';\n\nconst blankNamePattern = /blank(\\d+)?NameSec2/;\nconst blankInfoPattern = /blank(\\d+)?InfoSec2/;\n\nexport default function transformProperties(properties) {\n  return Object.keys(properties)\n    .reduce((transformed, key) => {\n      const value = properties[key];\n      const match = key.match(blankNamePattern);\n      if (match) {\n        const id = match[1] || '';\n        const blankName = properties[`blank${id}NameSec2`];\n        const blankInfo = properties[`blank${id}InfoSec2`];\n        if (typeof blankName !== 'string') return transformed;\n        return Object.assign(transformed, {\n          [camelCase(blankName)]: blankInfo,\n        });\n      }\n      if (key.match(blankInfoPattern)) {\n        return transformed;\n      }\n      return Object.assign(transformed, {\n        [key]: value,\n      });\n    }, {});\n}\n", "function findOuterIndex(source) {\n\tlet lastOpen = [];\n\tfor (let i = 0; i < source.length - 1; i++) {\n    const nextTwo = source.substr(i, 2);\n    if (nextTwo === '{{') {\n\t\t\tlastOpen.push(i);\n\t\t\t// Move forward, so we do not count closures right next to each other\n\t\t\ti++;\n\t\t\tcontinue;\n\t\t}\n    if (nextTwo === '}}') {\n\t\t\tconst openAt = lastOpen.pop();\n\t\t\tif (lastOpen.length === 0) {\n\t\t\t\t// Adding 2 here for the closure\n\t\t\t\treturn i + 2;\n\t\t\t}\n\t\t\t// Move forward, so we do not count closures right next to each other\n\t\t\ti++;\n\t\t}    \n  }\n}\n\nconst infoBoxStartPattern = /{{\\w*box/;\n\nfunction parse(source) {\n\tconst startMatch = source.match(infoBoxStartPattern);\n\tif (!startMatch) {\n\t\t// May not have a a proper infobox wrapper, let's use the entire source\n\t\t// by default\n\t\treturn { data: source, sourceLeft: null };\n\t}\n\tconst startIndex = startMatch.index;\n\tconst withStart = source.substring(startIndex);\n\tconst outerIndex = findOuterIndex(withStart);\n\tif (!outerIndex) {\n\t\treturn { data: source, sourceLeft: null };\n\t}\n\tconst data = withStart.substring(0, outerIndex);\n\tconst sourceLeft = source.substring(outerIndex);\n\tconst sourceLeftHasMatch = !!sourceLeft.match(infoBoxStartPattern);\n\treturn {\n\t\tdata,\n\t\tsourceLeft: sourceLeftHasMatch ? sourceLeft : null\n\t};\n}\n\nexport default function extractInfoboxes(source) {\n  let parsed = parse(source);\n  const infoboxes = [parsed.data];\n  while(parsed.sourceLeft) {\n  \tparsed = parse(parsed.sourceLeft);\n  \tinfoboxes.push(parsed.data);\n  }\n  return infoboxes;\n}\n", "export default function cleanSource(\n  source,\n  { removeSmall = false, removeReferences = true } = {}\n) {\n  if (removeReferences) {\n    source = source\n      .replace(/<ref(\\s\\w+=[^>]+)?>.*<\\/ref>/g, '')\n      .replace(/<ref(\\s\\w+=[^>]+)?\\s?\\/>/g, '');\n  }\n\n  if (removeSmall) {\n    source = source.replace(/<small>.*<\\/small>/g, '');\n  }\n\n  return (\n    source\n      // Remove ticks\n      .replace(/'''?/g, '')\n      .replace(/\\|display=inline/g, '')\n      // This is a little iffy\n      .replace(/<br\\s?\\/?>/g, ',')\n      .replace(/&minus;/g, '-')\n      .replace(/<sup>/g, '^')\n      // Remove shortened footnote templates\n      .replace(/\\{\\{sfn\\|([^\\}\\}]+)\\}\\}/g, '')\n      // Remove explanatory footnotes\n      .replace(/\\{\\{efn\\|([^\\}\\}]+)\\}\\}/g, '')\n      .replace(/\u2212/g, '-')\n      .replace(/<\\/sup>/g, '')\n      // Replace nowrap template with its content\n      .replace(/\\{\\{\\s*nowrap\\s*\\|([^\\n\\}]+)\\}\\}/gi, '$1')\n      // HTML comments\n      .replace(/<!--([\\s\\S]*?)-->/g, '')\n      .replace(/&nbsp;/g, ' ')\n      .replace(\"|''See list''\", '')\n  );\n}\n", "import camelcase from 'camelcase';\nimport extractData from './extractData';\nimport cleanSource from './cleanSource';\nimport fillVariables, { fillVariable } from './fillVariables';\n\nconst tableStartPattern = /{\\|(.*)\\n?/;\nconst tableEndPattern = /\\n\\|}/;\nconst headersPattern = /!\\s?(.*)/g;\nconst rowPattern = /\\|-/;\nconst cellSeparatorPattern = /(?:\\n\\|)|(?:\\|\\|)/;\nconst linkPattern = /\\[\\[([^\\]]+)\\]\\]/g;\nconst linkNamePattern = /^.*\\|/;\nconst inlineHeaderPattern = '!!';\nconst actionPattern = /{{anchor\\|(.*)}}/g;\nconst rowSpanCountPattern = /rowspan=\"(\\d+)\"/;\n\nconst stripLinks = (source) =>\n  source.replace(linkPattern, (m, capture) => {\n    const result = capture.replace(linkNamePattern, '').trim();\n    return result || capture;\n  });\nconst removeActions = (source) => source.replace(actionPattern, '');\nconst transformCell = (source) =>\n  stripLinks(removeActions(source || ''))\n    .replace(rowSpanCountPattern, '')\n    .replace(linkNamePattern, '')\n    .trim();\n\nconst transformCells = (row) =>\n  row.split(cellSeparatorPattern).map(transformCell);\n\nconst findIndex = (t, p) => {\n  const m = t.match(p);\n  return m ? m.index : -1;\n};\n\nconst findTableStart = (source) => {\n  const m = source.match(tableStartPattern);\n  return m ? m.index + m[0].length : -1;\n};\nconst findTableEnd = (source) => findIndex(source, tableEndPattern);\n\nconst getHeaders = (source) => {\n  const headers = [];\n  let match;\n  while ((match = headersPattern.exec(source))) {\n    headers.push(...match[1].split(inlineHeaderPattern).map(transformCell));\n  }\n  return headers;\n};\n\nfunction transformRowSpan(rows) {\n  return rows\n    .map(transformCells)\n    .reduce((merged, cells, index) => {\n      const k = index === 0 ? 0 : 1;\n      for (let i = 0; i < cells.length; i++) {\n        if (!merged[i + k]) merged[i + k] = {};\n        if (cells[i]) {\n          merged[i + k][cells[i]] = 1;\n        }\n      }\n      return merged;\n    }, [])\n    .map((o) => Object.keys(o).join(','))\n    .join(' || ');\n}\n\nconst getRows = (source) => {\n  const raw = source\n    .split(rowPattern)\n    .map((e) => e.replace(/^.*\\n+?\\|/, '').trim())\n    .filter((e) => e);\n\n  const rows = [];\n  let spanN = 0;\n  let spanCount = 0;\n  let rowsInSpan = [];\n\n  for (const row of raw) {\n    const match = row.match(rowSpanCountPattern);\n    if (match) {\n      spanN = 0;\n      spanCount = parseInt(match[1]);\n      rowsInSpan = [];\n    }\n    if (spanN < spanCount) {\n      rowsInSpan.push(row);\n      if (++spanN === spanCount) {\n        rows.push(transformRowSpan(rowsInSpan));\n      }\n    } else {\n      rows.push(row);\n    }\n  }\n\n  return rows;\n};\n\nconst getNextTable = (source, context, options) => {\n  let left = source;\n  const start = findTableStart(left);\n\n  if (start === -1) return null;\n  left = left.substring(start);\n\n  const end = findTableEnd(left);\n\n  if (end === -1) return null;\n  left = left.substring(0, end);\n\n  const rows = getRows(left);\n\n  if (!rows.length) return null;\n\n  const headers = getHeaders(rows[0]);\n\n  if (!headers.length) return null;\n\n  const data = rows\n    .slice(1)\n    .map(transformCells)\n    .map((row) => {\n      return headers.reduce((obj, key, index) => {\n        obj[camelcase(fillVariable(key, context, options))] = fillVariables(\n          row[index],\n          context,\n          options\n        );\n        return obj;\n      }, {});\n    });\n\n  return { data, end: start + end };\n};\n\nexport default function (source, options) {\n  const cleanedSource = cleanSource(source, options);\n  const data = extractData(cleanedSource);\n  const tables = [];\n  let left = data.source;\n  let result = null;\n  while ((result = getNextTable(left, data.context, options))) {\n    if (!result) {\n      return tables;\n    }\n    tables.push(result.data);\n    left = left.substring(result.end);\n  }\n  return tables;\n}\n", "const linkPattern = /\\[\\[([^\\]]+)\\]\\]/g;\nconst kmPattern = /{{BSkm\\|([\\dx]+,[\\dx]+)\\|([\\dx]+,[\\dx]+)}}/g;\n\nfunction clean(text) {\n  return text\n    .substring(2, text.length - 2)\n    .replace(linkPattern, (m, x) => x.split('|')[0])\n    .replace(/'''?/g, '');\n}\n\n// Source: https://en.wikipedia.org/wiki/Wikipedia:Route_diagram_template#{{BS-map}}_rows_with_icons_and_text\nfunction parseRow(raw) {\n  let countMatch = raw[0].match(/BS(\\d)/);\n  let type = raw[0].substring(2);\n  let count = 1;\n  let icons = [];\n  let index = 1;\n  if (countMatch) {\n    count = countMatch[1];\n    type = raw[0].substring(3);\n  }\n  for (; index <= count; index++) {\n    icons.push(raw[index]);\n  }\n  const margin = raw[index++];\n  const text1 = raw[index++];\n  const text2 = raw[index++];\n  const comment = raw[index++];\n  return {\n    type,\n    margin,\n    text1,\n    text2,\n    comment,\n    icons,\n  };\n}\n\nexport default function (source) {\n  const results = source.replace(kmPattern, '$1/$2').match(/{{BS([^}}]+)}}/g);\n  if (results) {\n    return results\n      .map((result) => clean(result).split('|'))\n      .map(parseRow)\n      .filter(({ type }) => type[0] !== '-');\n  }\n  return null;\n}\n", "const headingPattern = /[^=]==\\s?([\\w\\s]+)\\s?==/g\nconst subheadingPattern = /===([\\w\\s]+)===/g\nconst tableStartPattern = /{{list.+start.*}}/gi\nconst tableEndPattern = /{{list.+end.*}}/gi\nconst rowPattern = /{{(.*)}}/g\nconst rowPatternSingle = /{{(.*)}}/\n\nfunction getHeadings(text) {\n\tlet match;\n\tconst headings = [];\n\twhile ((match = headingPattern.exec(text)) !== null) {\n\t\theadings.push({\n\t\t\theading: match[1].trim(),\n\t\t\tstart: match.index,\n\t\t\tend: match.index + match[0].length\n\t\t})\n\t}\n\treturn headings;\n}\n\nfunction getSubheadings(text) {\n\tlet match;\n\tconst subheadings = [];\n\twhile ((match = subheadingPattern.exec(text)) !== null) {\n\t\tsubheadings.push({\n\t\t\theading: match[1].trim(),\n\t\t\tstart: match.index,\n\t\t\tend: match.index + match[0].length\n\t\t})\n\t}\n\treturn subheadings;\n}\n\nfunction getMatches(text, pattern) {\n\tlet match;\n\tconst matches = [];\n\twhile ((match = pattern.exec(text)) !== null) {\n\t\tmatches.push({\n\t\t\tvalue: match[1] && match[1].trim(),\n\t\t\tstart: match.index,\n\t\t\tend: match.index + match[0].length\n\t\t})\n\t}\n\treturn matches;\n}\n\nfunction parseTableData(raw) {\n\tconst matches = raw.match(rowPattern);\n\tif (!matches) return [];\n\treturn matches.map(el => {\n\t\tconst [,text] = el.match(rowPatternSingle);\n\t\tconst columns = text.trim().split('|');\n\t\treturn columns.slice(1);\n\t});\n}\n\nfunction getTables(text) {\n\tconst tableStarts = getMatches(text, tableStartPattern);\n\tconst tableEnds = getMatches(text, tableEndPattern);\n\treturn tableStarts.map((tableStart, index) => {\n\t\tconst tableEnd = tableEnds[index];\n\t\tif (!tableEnd) {\n\t\t\tthrow new Error('[Table Parsing] Failed to pair table');\n\t\t}\n\t\tconst raw = text\n\t\t\t\t.substring(tableStart.end, tableEnd.start)\n\t\t\t\t.trim()\n\t\t\t\t.replace(/'''/g, '');\n\t\treturn {\n\t\t\trows: parseTableData(raw),\n\t\t\tstart: tableStart.start,\n\t\t\tend: tableEnd.end\n\t\t}\n\t});\n}\n\nfunction last(list) {\n\treturn list.length ? list[list.length - 1] : undefined;\n}\n\nexport default function (source) {\n\tconst headings = getMatches(source, headingPattern);\n\tconst subheadings = getMatches(source, subheadingPattern);\n\tconst tables = getTables(source);\n\n\ttables.forEach(table => {\n\t\tconst headingsBefore = headings.filter(heading => {\n\t\t\treturn heading.end < table.start;\n\t\t}).map(e => e.value)\n\t\ttable.heading = last(headingsBefore);\n\t\tconst subheadingsBefore = subheadings.filter(subheading => {\n\t\t\treturn subheading.end < table.start;\n\t\t}).map(e => e.value)\n\t\ttable.subheading = last(subheadingsBefore);\n\t\tdelete table.start;\n\t\tdelete table.end;\n\t});\n\n\treturn tables;\n}", "import camelCase from 'camelcase';\nimport extractData from './util/extractData';\nimport extractProperties from './util/extractProperties';\nimport transformProperties from './util/transformProperties';\nimport extractInfoboxes from './util/extractInfoboxes';\nimport cleanSource from './util/cleanSource';\nimport parseTables from './util/parseTables';\nimport parseBsTables from './util/parseBsTables';\nimport parseLists from './util/parseLists';\n\n/**\n * Parse Wiki Infobox Text\n * @param {string} source - Infobox source text\n * @param {Object} options - Parsing options\n * @param {boolean} [options.simplifyDataValues=true] - Only use primary data values\n * @param {boolean} [options.removeSmall=false] - Remove <small>...</small> chunks of source data\n * @param {boolean} [options.removeReferences=true] - Remove <ref>...</ref> chunks of source data\n * @returns {Object} Structured information from source text\n */\nexport default function parseInfobox(source, options) {\n  const infoboxes = extractInfoboxes(source).map((infobox) => {\n    const cleanedSource = cleanSource(infobox, options);\n    const data = extractData(cleanedSource);\n    const props = extractProperties(data, options);\n    return transformProperties(props);\n  });\n\n  if (!infoboxes.length) return {};\n\n  const res = {\n    // First infobox should be the main one\n    general: infoboxes.shift(),\n  };\n\n  infoboxes.forEach((next) => {\n    const type = next.type;\n    if (type) {\n      res[camelCase(type)] = next;\n    } else {\n      Object.assign(res, {\n        general: Object.assign({}, res.general, next),\n      });\n    }\n  });\n\n  res.tables = parseTables(source);\n  res.bsTables = parseBsTables(source);\n  res.lists = parseLists(source);\n\n  return res;\n}\n", "const smallGlobalPattern = /\\{\\{small\\|([^\\}\\}]+)\\}\\}/g;\nconst smallPattern = /small\\|([^\\}\\}]+)\\}\\}/;\n\nexport default {\n  globalPattern: smallGlobalPattern,\n  parsePattern: smallPattern,\n  parse: results => {\n    const [, value] = results;\n    return value;\n  },\n  variable: 'SMALL',\n  name: 'smalls',\n};\n", "const flagGlobalPattern = /\\{\\{flag\\|([^\\}\\}]+)\\}\\}/g;\nconst flagPattern = /flag\\|([^\\}\\}]+)\\}\\}/;\n\nexport default {\n  globalPattern: flagGlobalPattern,\n  parsePattern: flagPattern,\n  parse: results => {\n    const [, value] = results;\n    return value;\n  },\n  variable: 'FLAG',\n  name: 'flags',\n};\n", "const coordsGlobalPattern = /\\{\\{coord\\|([^\\}\\}]+)\\}\\}/g;\nconst coordsPattern = /coord\\|([^\\}\\}]+)\\}\\}/;\n\nexport default {\n  globalPattern: coordsGlobalPattern,\n  parsePattern: coordsPattern,\n  parse: results => {\n    const [, value] = results;\n    return value;\n  },\n  variable: 'COORD',\n  name: 'coords',\n};\n", "const globalPattern = /\\[\\[([^\\]\\|]+)\\|?([^\\]]+)?\\]\\]/g;\nconst pattern = /\\[\\[([^\\]\\|]+)\\|?([^\\]]+)?\\]\\]/;\n\nexport default {\n  globalPattern: globalPattern,\n  parsePattern: pattern,\n  parse: results => {\n    const [, value, type] = results;\n    return value || type;\n  },\n  variable: 'INSTANCE',\n  name: 'instances',\n};\n", "import getValue from '../util/getValue';\n\nconst listItemPrefixPattern = /^\\|\\s?/;\nconst unbulletedListGlobalPattern = /\\{\\{(?:unbulleted list|ubl|ubt|ublist|unbullet)\\s?\\|([^\\}\\}]+)\\}\\}/gi;\nconst unbulletedListItemPattern = /\\|\\s*([^|}]+)/g;\n\nexport default {\n  globalPattern: unbulletedListGlobalPattern,\n  parsePattern: unbulletedListItemPattern,\n  parse: (listItems) => {\n    if (!listItems) {\n      return [];\n    }\n    return listItems\n      .map((item) => item.replace(listItemPrefixPattern, '').trim())\n      .filter((value) => value && value.length);\n  },\n  variable: 'UNBULLETED_LIST',\n  name: 'unbulletedLists',\n};\n", "const listItemPrefixPattern = /^\\*\\s*/;\nconst plainListGlobalPattern = /\\n(\\*\\s*[^*|]+)+/g;\nconst plainListItemPattern = /\\*\\s*([^*|]+)/g;\n\nexport default {\n  globalPattern: plainListGlobalPattern,\n  parsePattern: plainListItemPattern,\n  parse: listItems => {\n    if (!listItems) {\n      return [];\n    }\n    return listItems\n      .map(item => item.replace(listItemPrefixPattern, '').trim())\n      .filter(value => value && value.length);\n  },\n  variable: 'UNMARKED_LIST',\n  name: 'unmarkedLists',\n};\n", "import getValue from '../util/getValue';\n\nconst listItemPrefixPattern = /^\\*\\s?/;\nconst plainListGlobalPattern = /\\{\\{f?p?P?l?a?i?n?t?\\s?list\\s?\\|([^\\}\\}]+)\\}\\}/g;\nconst plainListItemPattern = /\\*\\s*([^*}]+)/g;\n\nexport default {\n  globalPattern: plainListGlobalPattern,\n  parsePattern: plainListItemPattern,\n  parse: (listItems) => {\n    if (!listItems) {\n      return [];\n    }\n    return (\n      listItems\n        .map((item) => item.replace(listItemPrefixPattern, '').trim())\n        // .map(getValue)\n        .filter((value) => value && value.length)\n    );\n  },\n  variable: 'PLAIN_LIST',\n  name: 'plainLists',\n};\n", "const marriageGlobalPattern = /\\{\\{Marriage\\|([^\\}\\}]+)\\}\\}/gi;\nconst marriagePattern = /Marriage\\|([^|]+)\\|(.*)\\}\\}/i;\n\nexport default {\n  globalPattern: marriageGlobalPattern,\n  parsePattern: marriagePattern,\n  parse: results => {\n    const [, who, married] = results;\n    return {\n      who,\n      married,\n    };\n  },\n  variable: 'MARRIAGE',\n  name: 'marriages',\n};\n", "const nbayGlobalPattern = /\\{\\{nbay\\|([^\\}\\}]+)\\}\\}/gi;\nconst nbayPattern = /nbay\\|([^|]+)\\|(.*)\\}\\}/i;\n\nexport default {\n  globalPattern: nbayGlobalPattern,\n  parsePattern: nbayPattern,\n  parse: results => {\n    const [, year, type] = results;\n    return year;\n  },\n  variable: 'nbay',\n  name: 'nbay',\n};\n", "const otherGlobalPattern = /\\{\\{([^|\\n]+)\\|([^|\\n]+)\\|?([^\\}\\n]+)?\\}\\}/g;\nconst otherPattern = /\\{\\{([^|\\n]+)\\|([^|\\n]+)\\|?([^\\}\\n]+)?\\}\\}/;\n\nexport default {\n  globalPattern: otherGlobalPattern,\n  parsePattern: otherPattern,\n  parse: results => {\n    const [, label, descriptor, extra] = results;\n    return label;\n  },\n  variable: 'OTHER',\n  name: 'others',\n};\n", "const hlistGlobalPattern = /\\{\\{hlist\\|([^\\}\\}]+)\\}\\}/gi;\nconst hlistPattern = /hlist\\|(.*)\\n?\\}\\}/i;\n\nexport default {\n  globalPattern: hlistGlobalPattern,\n  parsePattern: hlistPattern,\n  parse: (results) => {\n    let [, elements] = results;\n    return elements.split('|');\n  },\n  variable: 'HLIST',\n  name: 'hlists',\n};\n", "const birthDateGlobalPattern = /\\{\\{birth\\sdate([^\\}\\}]+)\\}\\}/ig;\nconst birthDatePattern = /(\\d+)\\|(\\d+)\\|(\\d+)/;\n\nconst millisInYear = 1000 * 60 * 60 * 24 * 365;\n\nexport default {\n  globalPattern: birthDateGlobalPattern,\n  parsePattern: birthDatePattern,\n  parse: results => {\n    const [, year, month, day] = results;\n    const date = new Date(year, month-1, day);\n    const age = Math.floor((Date.now() - +date) / millisInYear);\n    return {\n      date,\n      age,\n    };\n  },\n  variable: 'BIRTH_DATE',\n  name: 'birthDates',\n};\n", "import { DO_NOT_REPLACE } from './dataType'\nconst labeledDateGlobalPattern = /\\{\\{([^\\n\\}\\}]+)\\}\\}/g;\nconst labeledDatePattern = /(.*)/;\n\nexport default {\n  globalPattern: labeledDateGlobalPattern,\n  parsePattern: labeledDatePattern,\n  parse: results => {\n    const firstPipeIndex = results[0].indexOf('|');\n    if (firstPipeIndex > -1) {\n      const str = results[0]\n        .substring(firstPipeIndex + 1)\n        .slice(0, -2)\n      let potentialDate = new Date(str + ' GMT');\n      if (!isNaN(potentialDate.getTime())) {\n        return { date: potentialDate };\n      }\n      potentialDate = new Date(str.split('|').join('-') + ' GMT')\n      if (!isNaN(potentialDate.getTime())) {\n        return { date: potentialDate };\n      }\n    }\n    return DO_NOT_REPLACE;\n  },\n  variable: 'LABELED_DATE',\n  name: 'labeledDates',\n};\n", "const deathDateGlobalPattern = /\\{\\{death\\sdate\\sand\\sage([^\\}\\}]+)\\}\\}/ig;\nconst deathDatePattern = /(\\d+)\\|(\\d+)\\|(\\d+)\\|(\\d+)\\|?(\\d+)?\\|?(\\d+)?/;\n\nconst millisInYear = 1000 * 60 * 60 * 24 * 365;\n\nexport default {\n  globalPattern: deathDateGlobalPattern,\n  parsePattern: deathDatePattern,\n  parse: results => {\n    // Some articles do not list birth month/day so we just estimate the birth date\n    const [, deathYear, deathMonth, deathDay, birthYear, birthMonth = 0, birthDay = 0] = results;\n    const deathDate = new Date(deathYear, deathMonth-1, deathDay);\n    const birthDate = new Date(birthYear, birthMonth-1, birthDay);\n    const age = Math.floor((Number(deathDate) - Number(birthDate)) / millisInYear);\n    return {\n      date: deathDate,\n      age,\n    };\n  },\n  variable: 'DEATH_DATE',\n  name: 'deathDates',\n};\n", "const URLGlobalPattern = /\\{\\{URL\\|([^\\}\\}]+)\\}\\}/g;\nconst URLPattern = /URL\\|([^\\}\\}]+)\\}\\}/;\n\nexport default {\n  globalPattern: URLGlobalPattern,\n  parsePattern: URLPattern,\n  parse: results => {\n    const [, value] = results;\n    return value;\n  },\n  variable: 'URL',\n  name: 'urls',\n};\n", "const websiteGlobalPattern = /\\[(https?):\\/\\/((?:www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6})\\b([-a-zA-Z0-9@:%_\\+.~#?&//=]*)\\s+([\\w\\s]+)\\]/g;\nconst websitePattern = /\\[(https?):\\/\\/((?:www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6})\\b([-a-zA-Z0-9@:%_\\+.~#?&//=]*)\\s+([\\w\\s]+)\\]/;\n\nexport default {\n  globalPattern: websiteGlobalPattern,\n  parsePattern: websitePattern,\n  parse: results => {\n    const [, protocol, hostname, path, title] = results;\n    return {\n      protocol,\n      hostname,\n      path,\n      title,\n      url: `${protocol}://${hostname}${path}`\n    };\n  },\n  variable: 'WEBSITE',\n  name: 'websites',\n};\n", "const globalPattern = /\\{\\{Extra[^}}]+\\}\\}/gi;\nconst parsePattern = /\\|\\s?(\\w+)\\s+=\\s+(.+)/g;\nconst propPattern = /\\|\\s?(\\w+)\\s+=\\s+(.+)/;\n\nexport default {\n  globalPattern,\n  parsePattern,\n  parse: (obj) => {\n    const e = obj.reduce((memo, i) => {\n      const [, key, value] = i.match(propPattern);\n      memo[key] = value;\n      return memo;\n    }, {});\n    return e;\n  },\n  variable: 'EXTRA',\n  name: 'extra',\n};\n", "const convertGlobalPattern = /\\{\\{convert\\|([\\d\\.]+)\\|(\\w+)/g;\nconst convertPattern = /\\{\\{convert\\|([\\d\\.]+)\\|(\\w+)/;\n\nexport default {\n  globalPattern: convertGlobalPattern,\n  parsePattern: convertPattern,\n  parse: results => {\n    const [, num, unit] = results;\n    return `${num} ${unit}`;\n  },\n  variable: 'CONVERT',\n  name: 'converts',\n};\n", "const filmDatesPattern = /\\{\\{film\\sdate([^\\}\\}]+)\\}\\}/gi;\nconst filmDatePatternGlobal = /(\\d+)\\|?(\\d+)\\|?(\\d+)\\|?([^\\|\\}]*)\\|?(ref\\d+=([^\\|\\}]*))?/g;\nconst filmDatePattern = /(\\d+)\\|?(\\d+)\\|?(\\d+)\\|?([^\\|\\}]*)\\|?(ref\\d+=([^\\|\\}]*))?/;\n\n// Format documented here:\n// https://en.wikipedia.org/wiki/Template:Film_date/doc\n// Target:\n// Year required, month day etc. optional...\n// {{Film date|year1|month1|day1|location1|ref1=<ref name=\"xxxxx\" />|year2|month2|day2|location2|ref2=<ref name=\"yyyy\" />}}\n\nexport default {\n  globalPattern: filmDatesPattern,\n  parsePattern: filmDatePatternGlobal,\n  parse: (results) => {\n    return results.map((result) => {\n      const [_, year, month, day, location, _ref, ref] = result.match(\n        filmDatePattern\n      );\n      const date = new Date(year, month && month - 1, day);\n      return {\n        date,\n        location,\n        ref,\n      };\n    });\n  },\n  variable: 'FILM_DATES',\n  name: 'filmDates',\n};\n", "const otherGlobalPattern = /<ref(\\s\\w+=[^>]+)?>(.*)<\\/ref>/g;\nconst otherPattern = /<ref(\\s\\w+=[^>]+)?>(.*)<\\/ref>/;\n\nconst attributeGlobalPattern = /(\\w+)=([\"\\w]+)/g;\nconst attributePattern = /(\\w+)=([\"\\w]+)/;\n\nexport default {\n  globalPattern: otherGlobalPattern,\n  parsePattern: otherPattern,\n  parse: (results) => {\n    const [_, attributesSource, contents] = results;\n    const attributes = (\n      (attributesSource || '').match(attributeGlobalPattern) || []\n    ).reduce((memo, attr) => {\n      if (attr) {\n        const [_, key, value] = attr.match(attributePattern);\n        memo[key] = value.replace(/\"/g, '');\n      }\n      return memo;\n    }, {});\n    return { attributes, contents };\n  },\n  variable: 'REF',\n  name: 'refs',\n};\n", "const otherGlobalPattern = /<ref(\\s\\w+=[^>]+)?\\/>/g;\nconst otherPattern = /<ref(\\s\\w+=[^>]+)?\\/>/;\n\nconst attributeGlobalPattern = /(\\w+)=([\"\\w]+)/g;\nconst attributePattern = /(\\w+)=([\"\\w]+)/;\n\nexport default {\n  globalPattern: otherGlobalPattern,\n  parsePattern: otherPattern,\n  parse: (results) => {\n    const attributes = results[1]\n      .match(attributeGlobalPattern)\n      .reduce((memo, attr) => {\n        const [_, key, value] = attr.match(attributePattern);\n        memo[key] = value.replace(/\"/g, '');\n        return memo;\n      }, {});\n    return { attributes };\n  },\n  variable: 'REF',\n  name: 'refs',\n};\n", "const globalPattern = /\\{\\{formatnum:\\d+\\}\\}/gi;\nconst parsePattern = /\\{\\{formatnum:(\\d+)\\}\\}/;\n\nexport default {\n  globalPattern,\n  parsePattern,\n  parse: (results) => {\n    const [, value] = results;\n    return parseFloat(value);\n  },\n  variable: 'FORMAT_NUM',\n  name: 'formatNum',\n};\n", "import small from './small';\nimport flag from './flag';\nimport coords from './coords';\nimport instances from './instances';\nimport unbulletedLists from './unbulletedLists';\nimport unmarkedLists from './unmarkedLists';\nimport plainLists from './plainLists';\nimport marriages from './marriages';\nimport nbay from './nbay';\nimport other from './other';\nimport hlist from './hlist';\nimport birthDates from './birthDates';\nimport labeledDates from './labeledDates';\nimport deathDates from './deathDates';\nimport url from './url';\nimport website from './website';\nimport extra from './extra';\nimport convert from './convert';\nimport createDataTypeHandler from './dataType';\nimport filmDates from './filmDates';\nimport ref1 from './ref1';\nimport ref2 from './ref2';\nimport formatNum from './formatNum';\n\nconst dataTypes = [\n  // Order is very important here...\n  instances,\n  ref1,\n  ref2,\n  small,\n  formatNum,\n  flag,\n  coords,\n  marriages,\n  birthDates,\n  labeledDates,\n  deathDates,\n  unbulletedLists,\n  website,\n  hlist,\n  url,\n  convert,\n  nbay,\n  filmDates,\n  // other needs to always be after specific data dypes\n  other,\n  extra,\n  // Lists should be last\n  plainLists,\n  unmarkedLists,\n];\n\nexport default dataTypes.map((type) => {\n  return {\n    handler: createDataTypeHandler(type),\n    name: type.name,\n    pattern: new RegExp(`\\\\$${type.variable}_(\\\\d+)`),\n  };\n});\n", "\n/**\n * Given a string meant to contain a number, tries to find out\n * the number considering comma or point separators\n * @param  {String} number\n * @return {Number} with the parsed number, false, if the parsing is\n *                  not possible\n */\nexport default (number) => {\n\n  if (typeof number !== 'string') return false\n\n  number = number.trim().replace(/ /g, '')\n\n  // Find out if commas are used as thousand or decimal separators.\n  // If the string has both, and commas are first, then commas are\n  // thousand separators (english style)\n  if (number.match(/,/) && number.match(/\\./)) {\n    if (number.indexOf(',') < number.indexOf('.')) {\n      return parseEnglish(number)\n    } else {\n      return parseSpanish(number)\n    }\n  }\n\n  if (number.match(/,/) && !number.match(/\\./)) {\n    if (number.match(/,/g).length > 1) {\n\n      // If there is more than one, then it's a thousand separator\n      return parseEnglish(number)\n    } else {\n\n      // If it's follwed by 3 digits, it's proably a thousand separator\n      if (number.match(/,[0-9]{3}($|^[0-9])/)) {\n        return parseEnglish(number)\n      } else {\n        return parseSpanish(number)\n      }\n\n    }\n  }\n\n  if (!number.match(/,/) && number.match(/\\./)) {\n    if (number.match(/\\./g).length > 1) {\n\n      // If there is more than one, then it's a thousand separator\n      return parseSpanish(number)\n    } else {\n\n      // If it's follwed by 3 digits, it's proably a thousand separator\n      if (number.match(/\\.[0-9]{3}($|^[0-9])/)) {\n        return parseSpanish(number)\n      } else {\n        return parseEnglish(number)\n      }\n\n    }\n  }\n\n  // If it looks the same as number or string, just cast it\n  if ((+number).toString() === number) return +number\n\n  return false\n}\n\nconst parseEnglish = (str) => {\n  return +str.replace(/,/g, '')\n}\n\nconst parseSpanish = (str) => {\n  return +str.replace(/\\./g, '').replace(/,/g, '.')\n}\n\n", "const OPEN_TAG_NAME_PATTERN = /^<(\\S+)/\nconst CLOSE_TAG_NAME_PATTERN = /^<\\/((?:.|\\n)*)>$/\n\nfunction prettyJSON (obj) {\n  return JSON.stringify(obj, null, 2)\n}\n\n/**\n * Clear tree of nodes from everything\n * \"parentRef\" properties so the tree\n * can be easily stringified into JSON.\n */\nfunction clearAst (ast) {\n  const cleanAst = ast\n\n  delete cleanAst.parentRef\n\n  if (Array.isArray(ast.content.children)) {\n    cleanAst.content.children = ast.content.children.map((node) => {\n      return clearAst(node)\n    })\n  }\n\n  return cleanAst\n}\n\nfunction parseOpenTagName (openTagStartTokenContent) {\n  const match = openTagStartTokenContent.match(OPEN_TAG_NAME_PATTERN)\n\n  if (match === null) {\n    throw new Error(\n      'Unable to parse open tag name.\\n' +\n      `${ openTagStartTokenContent } does not match pattern of opening tag.`\n    )\n  }\n\n  return match[1].toLowerCase()\n}\n\nfunction parseCloseTagName (closeTagTokenContent) {\n  const match = closeTagTokenContent.match(CLOSE_TAG_NAME_PATTERN)\n\n  if (match === null) {\n    throw new Error(\n      'Unable to parse close tag name.\\n' +\n      `${ closeTagTokenContent } does not match pattern of closing tag.`\n    )\n  }\n\n  return match[1].trim().toLowerCase()\n}\n\nfunction calculateTokenCharactersRange (state, { keepBuffer }) {\n  if (keepBuffer === undefined) {\n    throw new Error(\n      'Unable to calculate characters range for token.\\n' +\n      '\"keepBuffer\" parameter is not specified to decide if ' +\n      'the decision buffer is a part of characters range.'\n    )\n  }\n\n  const startPosition = (\n    state.caretPosition -\n    (state.accumulatedContent.length - 1) -\n    state.decisionBuffer.length\n  )\n\n  let endPosition\n\n  if (!keepBuffer) {\n    endPosition = state.caretPosition - state.decisionBuffer.length\n  } else {\n    endPosition = state.caretPosition\n  }\n\n  return { startPosition, endPosition }\n}\n\nfunction isWhitespace (char) {\n  return char === ' ' || char === '\\n' || char === '\\t'\n}\n\nmodule.exports = {\n  prettyJSON,\n  clearAst,\n  parseOpenTagName,\n  parseCloseTagName,\n  calculateTokenCharactersRange,\n  isWhitespace\n}\n", "module.exports = {\n  TOKEN_TEXT: 'token:text',\n\n  TOKEN_OPEN_TAG_START: 'token:open-tag-start',\n\n  TOKEN_ATTRIBUTE_KEY: 'token:attribute-key',\n  TOKEN_ATTRIBUTE_ASSIGNMENT: 'token:attribute-assignment',\n  TOKEN_ATTRIBUTE_VALUE_WRAPPER_START: 'token:attribute-value-wrapper-start',\n  TOKEN_ATTRIBUTE_VALUE: 'token:attribute-value',\n  TOKEN_ATTRIBUTE_VALUE_WRAPPER_END: 'token:attribute-value-wrapper-end',\n\n  TOKEN_OPEN_TAG_END: 'token:open-tag-end',\n  TOKEN_CLOSE_TAG: 'token:close-tag',\n\n  TOKEN_OPEN_TAG_START_SCRIPT: 'token:open-tag-start-script',\n  TOKEN_SCRIPT_TAG_CONTENT: 'token:script-tag-content',\n  TOKEN_OPEN_TAG_END_SCRIPT: 'token:open-tag-end-script',\n  TOKEN_CLOSE_TAG_SCRIPT: 'token:close-tag-script',\n\n  TOKEN_OPEN_TAG_START_STYLE: 'token:open-tag-start-style',\n  TOKEN_STYLE_TAG_CONTENT: 'token:style-tag-content',\n  TOKEN_OPEN_TAG_END_STYLE: 'token:open-tag-end-style',\n  TOKEN_CLOSE_TAG_STYLE: 'token:close-tag-style',\n\n  TOKEN_DOCTYPE_START: 'token:doctype-start',\n  TOKEN_DOCTYPE_END: 'token:doctype-end',\n  TOKEN_DOCTYPE_ATTRIBUTE_WRAPPER_START: 'token:doctype-attribute-wrapper-start',\n  TOKEN_DOCTYPE_ATTRIBUTE: 'token:doctype-attribute',\n  TOKEN_DOCTYPE_ATTRIBUTE_WRAPPER_END: 'token:doctype-attribute-wrapper-end',\n\n  TOKEN_COMMENT_START: 'token:comment-start',\n  TOKEN_COMMENT_CONTENT: 'token:comment-content',\n  TOKEN_COMMENT_END: 'token:comment-end'\n}\n\n", "module.exports = {\n  DATA_CONTEXT: 'tokenizer-context:data',\n  OPEN_TAG_START_CONTEXT: 'tokenizer-context:open-tag-start',\n  CLOSE_TAG_CONTEXT: 'tokenizer-context:close-tag',\n  ATTRIBUTES_CONTEXT: 'tokenizer-context:attributes',\n  OPEN_TAG_END_CONTEXT: 'tokenizer-context:open-tag-end',\n  ATTRIBUTE_KEY_CONTEXT: 'tokenizer-context:attribute-key',\n  ATTRIBUTE_VALUE_CONTEXT: 'tokenizer-context:attribute-value',\n  ATTRIBUTE_VALUE_BARE_CONTEXT: 'tokenizer-context:attribute-value-bare',\n  ATTRIBUTE_VALUE_WRAPPED_CONTEXT: 'tokenizer-context:attribute-value-wrapped',\n  SCRIPT_CONTENT_CONTEXT: 'tokenizer-context:script-content',\n  STYLE_CONTENT_CONTEXT: 'tokenizer-context:style-content',\n  DOCTYPE_START_CONTEXT: 'tokenizer-context:doctype-start',\n  DOCTYPE_END_CONTEXT: 'tokenizer-context:doctype-end',\n  DOCTYPE_ATTRIBUTES_CONTEXT: 'tokenizer-context:doctype-attributes',\n  DOCTYPE_ATTRIBUTE_WRAPPED_CONTEXT: 'tokenizer-context:doctype-attribute-wrapped',\n  DOCTYPE_ATTRIBUTE_BARE_CONTEXT: 'tokenizer-context:doctype-attribute-bare',\n  COMMENT_START_CONTEXT: 'tokenizer-context:comment-start',\n  COMMENT_CONTENT_CONTEXT: 'tokenizer-context:comment-content',\n  COMMENT_END_CONTEXT: 'tokenizer-context:comment-end'\n}\n", "const { calculateTokenCharactersRange } = require('../helpers')\n\nconst {\n  TOKEN_TEXT,\n  TOKEN_COMMENT_START\n} = require('../constants/token-types')\nconst {\n  OPEN_TAG_START_CONTEXT,\n  CLOSE_TAG_CONTEXT,\n  DOCTYPE_START_CONTEXT,\n  COMMENT_CONTENT_CONTEXT\n} = require('../constants/tokenizer-contexts')\n\nconst COMMENT_START = '<!--'\n\nfunction generateTextToken (state) {\n  const range = calculateTokenCharactersRange(state, { keepBuffer: false })\n\n  return {\n    type: TOKEN_TEXT,\n    content: state.accumulatedContent,\n    startPosition: range.startPosition,\n    endPosition: range.endPosition\n  }\n}\n\nfunction openingCornerBraceWithText (state, tokens) {\n  if (state.accumulatedContent.length !== 0) {\n    tokens.push(generateTextToken(state))\n  }\n\n  state.accumulatedContent = state.decisionBuffer\n  state.decisionBuffer = ''\n  state.currentContext = OPEN_TAG_START_CONTEXT\n  state.caretPosition++\n}\n\nfunction openingCornerBraceWithSlash (state, tokens) {\n  if (state.accumulatedContent.length !== 0) {\n    tokens.push(generateTextToken(state))\n  }\n\n  state.accumulatedContent = state.decisionBuffer\n  state.decisionBuffer = ''\n  state.currentContext = CLOSE_TAG_CONTEXT\n  state.caretPosition++\n}\n\nfunction doctypeStart (state, tokens) {\n  if (state.accumulatedContent.length !== 0) {\n    tokens.push(generateTextToken(state))\n  }\n\n  state.accumulatedContent = state.decisionBuffer\n  state.decisionBuffer = ''\n  state.currentContext = DOCTYPE_START_CONTEXT\n  state.caretPosition++\n}\n\nfunction commentStart (state, tokens) {\n  if (state.accumulatedContent.length !== 0) {\n    tokens.push(generateTextToken(state))\n  }\n\n  const commentStartRange = {\n    startPosition: state.caretPosition - (COMMENT_START.length - 1),\n    endPosition: state.caretPosition\n  }\n\n  tokens.push({\n    type: TOKEN_COMMENT_START,\n    content: state.decisionBuffer,\n    startPosition: commentStartRange.startPosition,\n    endPosition: commentStartRange.endPosition\n  })\n\n  state.accumulatedContent = ''\n  state.decisionBuffer = ''\n  state.currentContext = COMMENT_CONTENT_CONTEXT\n  state.caretPosition++\n}\n\nfunction handleContentEnd (state, tokens) {\n  const textContent = state.accumulatedContent + state.decisionBuffer\n\n  if (textContent.length !== 0) {\n    const range = calculateTokenCharactersRange(state, { keepBuffer: false })\n\n    tokens.push({\n      type: TOKEN_TEXT,\n      content: textContent,\n      startPosition: range.startPosition,\n      endPosition: range.endPosition\n    })\n  }\n}\n\nfunction isIncompleteDoctype (chars) {\n  const charsUpperCase = chars.toUpperCase()\n\n  return (\n    charsUpperCase === '<!'\n    || charsUpperCase === '<!D'\n    || charsUpperCase === '<!DO'\n    || charsUpperCase === '<!DOC'\n    || charsUpperCase === '<!DOCT'\n    || charsUpperCase === '<!DOCTY'\n    || charsUpperCase === '<!DOCTYP'\n  )\n}\n\nconst OPEN_TAG_START_PATTERN = /^<\\w/\n\nfunction parseSyntax (chars, state, tokens) {\n  if (OPEN_TAG_START_PATTERN.test(chars)) {\n    return openingCornerBraceWithText(state, tokens)\n  }\n\n  if (chars === '</') {\n    return openingCornerBraceWithSlash(state, tokens)\n  }\n\n  if (\n    chars === '<'\n    || chars === '<!'\n    || chars === '<!-'\n  ) {\n    state.caretPosition++\n\n    return\n  }\n\n  if (chars === COMMENT_START) {\n    return commentStart(state, tokens)\n  }\n\n  if (isIncompleteDoctype(chars)) {\n    state.caretPosition++\n\n    return\n  }\n\n  if (chars.toUpperCase() === '<!DOCTYPE') {\n    return doctypeStart(state, tokens)\n  }\n\n  state.accumulatedContent += state.decisionBuffer\n  state.decisionBuffer = ''\n  state.caretPosition++\n}\n\nmodule.exports = {\n  parseSyntax,\n  handleContentEnd\n}\n", "const {\n  parseOpenTagName,\n  isWhitespace,\n  calculateTokenCharactersRange\n} = require('../helpers')\n\nconst {\n  TOKEN_OPEN_TAG_START,\n  TOKEN_OPEN_TAG_START_SCRIPT,\n  TOKEN_OPEN_TAG_START_STYLE\n} = require('../constants/token-types')\nconst {\n  OPEN_TAG_END_CONTEXT,\n  ATTRIBUTES_CONTEXT\n} = require('../constants/tokenizer-contexts')\n\nconst tokensMap = {\n  'script': TOKEN_OPEN_TAG_START_SCRIPT,\n  'style': TOKEN_OPEN_TAG_START_STYLE,\n  'default': TOKEN_OPEN_TAG_START\n}\n\nfunction tagEnd (state, tokens) {\n  const tagName = parseOpenTagName(state.accumulatedContent)\n  const range = calculateTokenCharactersRange(state, { keepBuffer: false })\n\n  tokens.push({\n    type: tokensMap[tagName] || tokensMap.default,\n    content: state.accumulatedContent,\n    startPosition: range.startPosition,\n    endPosition: range.endPosition\n  })\n\n  state.decisionBuffer = ''\n  state.accumulatedContent = ''\n  state.currentContext = OPEN_TAG_END_CONTEXT\n  state.contextParams[OPEN_TAG_END_CONTEXT] = { tagName }\n}\n\nfunction whitespace (state, tokens) {\n  const tagName = parseOpenTagName(state.accumulatedContent)\n  const range = calculateTokenCharactersRange(state, { keepBuffer: false })\n\n  tokens.push({\n    type: tokensMap[tagName] || tokensMap.default,\n    content: state.accumulatedContent,\n    startPosition: range.startPosition,\n    endPosition: range.endPosition\n  })\n\n  state.accumulatedContent = ''\n  state.decisionBuffer = ''\n  state.currentContext = ATTRIBUTES_CONTEXT\n  state.contextParams[ATTRIBUTES_CONTEXT] = { tagName }\n  state.caretPosition++\n}\n\nfunction parseSyntax (chars, state, tokens) {\n  if (chars === '>' || chars === '/') {\n    return tagEnd(state, tokens)\n  }\n\n  if (isWhitespace(chars)) {\n    return whitespace(state, tokens)\n  }\n\n  state.accumulatedContent += state.decisionBuffer\n  state.decisionBuffer = ''\n  state.caretPosition++\n}\n\nmodule.exports = {\n  parseSyntax\n}\n", "const { calculateTokenCharactersRange } = require('../helpers')\n\nconst { TOKEN_CLOSE_TAG } = require('../constants/token-types')\nconst { DATA_CONTEXT } = require('../constants/tokenizer-contexts')\n\nfunction closingCornerBrace (state, tokens) {\n  const range = calculateTokenCharactersRange(state, { keepBuffer: true })\n\n  tokens.push({\n    type: TOKEN_CLOSE_TAG,\n    content: state.accumulatedContent + state.decisionBuffer,\n    startPosition: range.startPosition,\n    endPosition: range.endPosition\n  })\n\n  state.accumulatedContent = ''\n  state.decisionBuffer = ''\n  state.currentContext = DATA_CONTEXT\n  state.caretPosition++\n}\n\nfunction parseSyntax (chars, state, tokens) {\n  if (chars === '>') {\n    return closingCornerBrace(state, tokens)\n  }\n\n  state.accumulatedContent += state.decisionBuffer\n  state.decisionBuffer = ''\n  state.caretPosition++\n}\n\nmodule.exports = {\n  parseSyntax\n}\n", "const { calculateTokenCharactersRange } = require('../helpers')\n\nconst {\n  TOKEN_OPEN_TAG_END,\n  TOKEN_OPEN_TAG_END_SCRIPT,\n  TOKEN_OPEN_TAG_END_STYLE\n} = require('../constants/token-types')\nconst {\n  OPEN_TAG_END_CONTEXT,\n  DATA_CONTEXT,\n  SCRIPT_CONTENT_CONTEXT,\n  STYLE_CONTENT_CONTEXT\n} = require('../constants/tokenizer-contexts')\n\nconst tokensMap = {\n  'script': TOKEN_OPEN_TAG_END_SCRIPT,\n  'style': TOKEN_OPEN_TAG_END_STYLE,\n  'default': TOKEN_OPEN_TAG_END\n}\n\nconst contextsMap = {\n  'script': SCRIPT_CONTENT_CONTEXT,\n  'style': STYLE_CONTENT_CONTEXT,\n  'default': DATA_CONTEXT\n}\n\nfunction closingCornerBrace (state, tokens) {\n  const range = calculateTokenCharactersRange(state, { keepBuffer: true })\n  const tagName = state.contextParams[OPEN_TAG_END_CONTEXT].tagName\n\n  tokens.push({\n    type: tokensMap[tagName] || tokensMap.default,\n    content: state.accumulatedContent + state.decisionBuffer,\n    startPosition: range.startPosition,\n    endPosition: range.endPosition\n  })\n\n  state.accumulatedContent = ''\n  state.decisionBuffer = ''\n  state.currentContext = contextsMap[tagName] || contextsMap.default\n  state.caretPosition++\n\n  state.contextParams[OPEN_TAG_END_CONTEXT] = undefined\n}\n\nfunction parseSyntax (chars, state, tokens) {\n  if (chars === '>') {\n    return closingCornerBrace(state, tokens)\n  }\n\n  state.accumulatedContent += state.decisionBuffer\n  state.decisionBuffer = ''\n  state.caretPosition++\n}\n\nmodule.exports = {\n  parseSyntax\n}\n", "const {\n  isWhitespace,\n  calculateTokenCharactersRange\n} = require('../helpers')\nconst {\n  ATTRIBUTES_CONTEXT,\n  OPEN_TAG_END_CONTEXT,\n  ATTRIBUTE_VALUE_CONTEXT,\n  ATTRIBUTE_KEY_CONTEXT\n} = require('../constants/tokenizer-contexts')\nconst { TOKEN_ATTRIBUTE_ASSIGNMENT } = require('../constants/token-types')\n\nfunction tagEnd (state) {\n  const tagName = state.contextParams[ATTRIBUTES_CONTEXT].tagName\n\n  state.accumulatedContent = ''\n  state.decisionBuffer = ''\n  state.currentContext = OPEN_TAG_END_CONTEXT\n  state.contextParams[OPEN_TAG_END_CONTEXT] = { tagName }\n\n  state.contextParams[ATTRIBUTES_CONTEXT] = undefined\n}\n\nfunction noneWhitespace (state) {\n  state.accumulatedContent = state.decisionBuffer\n  state.decisionBuffer = ''\n  state.currentContext = ATTRIBUTE_KEY_CONTEXT\n  state.caretPosition++\n}\n\nfunction equal (state, tokens) {\n  const range = calculateTokenCharactersRange(state, { keepBuffer: true })\n\n  tokens.push({\n    type: TOKEN_ATTRIBUTE_ASSIGNMENT,\n    content: state.decisionBuffer,\n    startPosition: range.startPosition,\n    endPosition: range.endPosition\n  })\n\n  state.accumulatedContent = ''\n  state.decisionBuffer = ''\n  state.currentContext = ATTRIBUTE_VALUE_CONTEXT\n  state.caretPosition++\n}\n\nfunction parseSyntax (chars, state, tokens) {\n  if (chars === '>' || chars === '/') {\n    return tagEnd(state, tokens)\n  }\n\n  if (chars === '=') {\n    return equal(state, tokens)\n  }\n\n  if (!isWhitespace(chars)) {\n    return noneWhitespace(state, tokens)\n  }\n\n  state.decisionBuffer = ''\n  state.caretPosition++\n}\n\nmodule.exports = {\n  parseSyntax\n}\n", "const { calculateTokenCharactersRange } = require('../helpers')\n\nconst { TOKEN_ATTRIBUTE_KEY } = require('../constants/token-types')\nconst { ATTRIBUTES_CONTEXT } = require('../constants/tokenizer-contexts')\n\nfunction keyEnd (state, tokens) {\n  const range = calculateTokenCharactersRange(state, { keepBuffer: false })\n\n  tokens.push({\n    type: TOKEN_ATTRIBUTE_KEY,\n    content: state.accumulatedContent,\n    startPosition: range.startPosition,\n    endPosition: range.endPosition\n  })\n\n  state.accumulatedContent = ''\n  state.decisionBuffer = ''\n  state.currentContext = ATTRIBUTES_CONTEXT\n}\n\nfunction isKeyBreak (chars) {\n  return (\n    chars === '='\n    || chars === ' '\n    || chars === '\\n'\n    || chars === '\\t'\n    || chars === '/'\n    || chars === '>'\n  )\n}\n\nfunction parseSyntax (chars, state, tokens) {\n  if (isKeyBreak(chars)) {\n    return keyEnd(state, tokens)\n  }\n\n  state.accumulatedContent += state.decisionBuffer\n  state.decisionBuffer = ''\n  state.caretPosition++\n}\n\nmodule.exports = {\n  parseSyntax\n}\n", "const { isWhitespace } = require('../helpers')\nconst {\n  ATTRIBUTE_VALUE_WRAPPED_CONTEXT,\n  ATTRIBUTES_CONTEXT,\n  ATTRIBUTE_VALUE_BARE_CONTEXT\n} = require('../constants/tokenizer-contexts')\nconst {\n  TOKEN_ATTRIBUTE_VALUE_WRAPPER_START\n} = require('../constants/token-types')\n\nfunction wrapper (state, tokens) {\n  const wrapper = state.decisionBuffer\n\n  tokens.push({\n    type: TOKEN_ATTRIBUTE_VALUE_WRAPPER_START,\n    content: wrapper,\n    startPosition: state.caretPosition,\n    endPosition: state.caretPosition\n  })\n\n  state.accumulatedContent = ''\n  state.decisionBuffer = ''\n  state.currentContext = ATTRIBUTE_VALUE_WRAPPED_CONTEXT\n  state.contextParams[ATTRIBUTE_VALUE_WRAPPED_CONTEXT] = { wrapper }\n  state.caretPosition++\n}\n\nfunction bare (state) {\n  state.accumulatedContent = state.decisionBuffer\n  state.decisionBuffer = ''\n  state.currentContext = ATTRIBUTE_VALUE_BARE_CONTEXT\n  state.caretPosition++\n}\n\nfunction tagEnd (state) {\n  state.accumulatedContent = ''\n  state.decisionBuffer = ''\n  state.currentContext = ATTRIBUTES_CONTEXT\n}\n\nfunction parseSyntax (chars, state, tokens) {\n  if (chars === '\"' || chars === '\\'') {\n    return wrapper(state, tokens)\n  }\n\n  if (chars === '>' || chars === '/') {\n    return tagEnd(state, tokens)\n  }\n\n  if (!isWhitespace(chars)) {\n    return bare(state, tokens)\n  }\n\n  state.decisionBuffer = ''\n  state.caretPosition++\n}\n\nmodule.exports = {\n  parseSyntax\n}\n", "const {\n  calculateTokenCharactersRange,\n  isWhitespace\n} = require('../helpers')\n\nconst { TOKEN_ATTRIBUTE_VALUE } = require('../constants/token-types')\nconst { ATTRIBUTES_CONTEXT } = require('../constants/tokenizer-contexts')\n\nfunction valueEnd (state, tokens) {\n  const range = calculateTokenCharactersRange(state, { keepBuffer: false })\n\n  tokens.push({\n    type: TOKEN_ATTRIBUTE_VALUE,\n    content: state.accumulatedContent,\n    startPosition: range.startPosition,\n    endPosition: range.endPosition\n  })\n\n  state.accumulatedContent = ''\n  state.decisionBuffer = ''\n  state.currentContext = ATTRIBUTES_CONTEXT\n}\n\nfunction parseSyntax (chars, state, tokens) {\n  if (\n    isWhitespace(chars)\n    || chars === '>'\n    || chars === '/'\n  ) {\n    return valueEnd(state, tokens)\n  }\n\n  state.accumulatedContent += state.decisionBuffer\n  state.decisionBuffer = ''\n  state.caretPosition++\n}\n\nmodule.exports = {\n  parseSyntax\n}\n", "const { calculateTokenCharactersRange } = require('../helpers')\n\nconst {\n  TOKEN_ATTRIBUTE_VALUE,\n  TOKEN_ATTRIBUTE_VALUE_WRAPPER_END\n} = require('../constants/token-types')\nconst {\n  ATTRIBUTES_CONTEXT,\n  ATTRIBUTE_VALUE_WRAPPED_CONTEXT\n} = require('../constants/tokenizer-contexts')\n\nfunction wrapper (state, tokens) {\n  const range = calculateTokenCharactersRange(state, { keepBuffer: false })\n  const endWrapperPosition = range.endPosition + 1\n\n  tokens.push(\n    {\n      type: TOKEN_ATTRIBUTE_VALUE,\n      content: state.accumulatedContent,\n      startPosition: range.startPosition,\n      endPosition: range.endPosition\n    },\n    {\n      type: TOKEN_ATTRIBUTE_VALUE_WRAPPER_END,\n      content: state.decisionBuffer,\n      startPosition: endWrapperPosition,\n      endPosition: endWrapperPosition\n    }\n  )\n\n  state.accumulatedContent = ''\n  state.decisionBuffer = ''\n  state.currentContext = ATTRIBUTES_CONTEXT\n  state.caretPosition++\n\n  state.contextParams[ATTRIBUTE_VALUE_WRAPPED_CONTEXT] = undefined\n}\n\nfunction parseSyntax (chars, state, tokens) {\n  const wrapperChar = state.contextParams[ATTRIBUTE_VALUE_WRAPPED_CONTEXT].wrapper\n\n  if (chars === wrapperChar) {\n    return wrapper(state, tokens)\n  }\n\n  state.accumulatedContent += state.decisionBuffer\n  state.decisionBuffer = ''\n  state.caretPosition++\n}\n\nmodule.exports = {\n  parseSyntax\n}\n", "const { calculateTokenCharactersRange } = require('../helpers')\n\nconst {\n  TOKEN_SCRIPT_TAG_CONTENT,\n  TOKEN_CLOSE_TAG_SCRIPT\n} = require('../constants/token-types')\nconst { DATA_CONTEXT } = require('../constants/tokenizer-contexts')\n\nfunction closingScriptTag (state, tokens) {\n  if (state.accumulatedContent !== '') {\n    const range = calculateTokenCharactersRange(state, { keepBuffer: false })\n\n    tokens.push({\n      type: TOKEN_SCRIPT_TAG_CONTENT,\n      content: state.accumulatedContent,\n      startPosition: range.startPosition,\n      endPosition: range.endPosition\n    })\n  }\n\n  tokens.push({\n    type: TOKEN_CLOSE_TAG_SCRIPT,\n    content: state.decisionBuffer,\n    startPosition: state.caretPosition - (state.decisionBuffer.length - 1),\n    endPosition: state.caretPosition\n  })\n\n  state.accumulatedContent = ''\n  state.decisionBuffer = ''\n  state.currentContext = DATA_CONTEXT\n  state.caretPosition++\n}\n\nconst INCOMPLETE_CLOSING_TAG_PATTERN = /<\\/[^>]+$/\nconst CLOSING_SCRIPT_TAG_PATTERN = /<\\/script\\s*>/i\n\nfunction parseSyntax (chars, state, tokens) {\n  if (\n    chars === '<' ||\n    chars === '</' ||\n    INCOMPLETE_CLOSING_TAG_PATTERN.test(chars)\n  ) {\n    state.caretPosition++\n\n    return\n  }\n\n  if (CLOSING_SCRIPT_TAG_PATTERN.test(chars)) {\n    return closingScriptTag(state, tokens)\n  }\n\n  state.accumulatedContent += state.decisionBuffer\n  state.decisionBuffer = ''\n  state.caretPosition++\n}\n\nmodule.exports = {\n  parseSyntax\n}\n", "const { calculateTokenCharactersRange } = require('../helpers')\n\nconst {\n  TOKEN_STYLE_TAG_CONTENT,\n  TOKEN_CLOSE_TAG_STYLE\n} = require('../constants/token-types')\nconst { DATA_CONTEXT } = require('../constants/tokenizer-contexts')\n\nfunction closingStyleTag (state, tokens) {\n  if (state.accumulatedContent !== '') {\n    const range = calculateTokenCharactersRange(state, { keepBuffer: false })\n\n    tokens.push({\n      type: TOKEN_STYLE_TAG_CONTENT,\n      content: state.accumulatedContent,\n      startPosition: range.startPosition,\n      endPosition: range.endPosition\n    })\n  }\n\n  tokens.push({\n    type: TOKEN_CLOSE_TAG_STYLE,\n    content: state.decisionBuffer,\n    startPosition: state.caretPosition - (state.decisionBuffer.length - 1),\n    endPosition: state.caretPosition\n  })\n\n  state.accumulatedContent = ''\n  state.decisionBuffer = ''\n  state.currentContext = DATA_CONTEXT\n  state.caretPosition++\n}\n\nconst INCOMPLETE_CLOSING_TAG_PATTERN = /<\\/[^>]+$/\nconst CLOSING_STYLE_TAG_PATTERN = /<\\/style\\s*>/i\n\nfunction parseSyntax (chars, state, tokens) {\n  if (\n    chars === '<' ||\n    chars === '</' ||\n    INCOMPLETE_CLOSING_TAG_PATTERN.test(chars)\n  ) {\n    state.caretPosition++\n\n    return\n  }\n\n  if (CLOSING_STYLE_TAG_PATTERN.test(chars)) {\n    return closingStyleTag(state, tokens)\n  }\n\n  state.accumulatedContent += state.decisionBuffer\n  state.decisionBuffer = ''\n  state.caretPosition++\n}\n\nmodule.exports = {\n  parseSyntax\n}\n", "const { isWhitespace, calculateTokenCharactersRange } = require('../helpers')\n\nconst {\n  TOKEN_DOCTYPE_START\n} = require('../constants/token-types')\n\nconst {\n  DOCTYPE_END_CONTEXT,\n  DOCTYPE_ATTRIBUTES_CONTEXT\n} = require('../constants/tokenizer-contexts')\n\nfunction generateDoctypeStartToken (state) {\n  const range = calculateTokenCharactersRange(state, { keepBuffer: false })\n\n  return {\n    type: TOKEN_DOCTYPE_START,\n    content: state.accumulatedContent,\n    startPosition: range.startPosition,\n    endPosition: range.endPosition\n  }\n}\n\nfunction closingCornerBrace (state, tokens) {\n  tokens.push(generateDoctypeStartToken(state))\n\n  state.accumulatedContent = ''\n  state.decisionBuffer = ''\n  state.currentContext = DOCTYPE_END_CONTEXT\n}\n\nfunction whitespace (state, tokens) {\n  tokens.push(generateDoctypeStartToken(state))\n\n  state.accumulatedContent = ''\n  state.decisionBuffer = ''\n  state.currentContext = DOCTYPE_ATTRIBUTES_CONTEXT\n}\n\nfunction parseSyntax (chars, state, tokens) {\n  if (isWhitespace(chars)) {\n    return whitespace(state, tokens)\n  }\n\n  if (chars === '>') {\n    return closingCornerBrace(state, tokens)\n  }\n\n  state.decisionBuffer = ''\n  state.caretPosition++\n}\n\nmodule.exports = {\n  parseSyntax\n}\n", "const { calculateTokenCharactersRange } = require('../helpers')\n\nconst { TOKEN_DOCTYPE_END } = require('../constants/token-types')\nconst { DATA_CONTEXT } = require('../constants/tokenizer-contexts')\n\nfunction closingCornerBrace (state, tokens) {\n  const range = calculateTokenCharactersRange(state, { keepBuffer: true })\n\n  tokens.push({\n    type: TOKEN_DOCTYPE_END,\n    content: state.decisionBuffer,\n    startPosition: range.startPosition,\n    endPosition: range.endPosition\n  })\n\n  state.accumulatedContent = ''\n  state.decisionBuffer = ''\n  state.currentContext = DATA_CONTEXT\n  state.caretPosition++\n}\n\nfunction parseSyntax (chars, state, tokens) {\n  return closingCornerBrace(state, tokens)\n}\n\nmodule.exports = {\n  parseSyntax\n}\n", "const { isWhitespace } = require('../helpers')\n\nconst {\n  DOCTYPE_ATTRIBUTE_WRAPPED_CONTEXT,\n  DOCTYPE_ATTRIBUTE_BARE_CONTEXT,\n  DOCTYPE_END_CONTEXT\n} = require('../constants/tokenizer-contexts')\nconst {\n  TOKEN_DOCTYPE_ATTRIBUTE_WRAPPER_START\n} = require('../constants/token-types')\n\nfunction wrapper (state, tokens) {\n  const wrapper = state.decisionBuffer\n\n  tokens.push({\n    type: TOKEN_DOCTYPE_ATTRIBUTE_WRAPPER_START,\n    content: wrapper,\n    startPosition: state.caretPosition,\n    endPosition: state.caretPosition\n  })\n\n  state.accumulatedContent = ''\n  state.decisionBuffer = ''\n  state.currentContext = DOCTYPE_ATTRIBUTE_WRAPPED_CONTEXT\n  state.contextParams[DOCTYPE_ATTRIBUTE_WRAPPED_CONTEXT] = { wrapper }\n  state.caretPosition++\n}\n\nfunction bare (state) {\n  state.accumulatedContent = state.decisionBuffer\n  state.decisionBuffer = ''\n  state.currentContext = DOCTYPE_ATTRIBUTE_BARE_CONTEXT\n  state.caretPosition++\n}\n\nfunction closingCornerBrace (state) {\n  state.accumulatedContent = ''\n  state.decisionBuffer = ''\n  state.currentContext = DOCTYPE_END_CONTEXT\n}\n\nfunction parseSyntax (chars, state, tokens) {\n  if (chars === '\"' || chars === '\\'') {\n    return wrapper(state, tokens)\n  }\n\n  if (chars === '>') {\n    return closingCornerBrace(state, tokens)\n  }\n\n  if (!isWhitespace(chars)) {\n    return bare(state, tokens)\n  }\n\n  state.decisionBuffer = ''\n  state.caretPosition++\n}\n\nmodule.exports = {\n  parseSyntax\n}\n", "const { calculateTokenCharactersRange } = require('../helpers')\n\nconst {\n  TOKEN_DOCTYPE_ATTRIBUTE_WRAPPER_END,\n  TOKEN_DOCTYPE_ATTRIBUTE\n} = require('../constants/token-types')\nconst {\n  DOCTYPE_ATTRIBUTE_WRAPPED_CONTEXT,\n  DOCTYPE_ATTRIBUTES_CONTEXT\n} = require('../constants/tokenizer-contexts')\n\nfunction wrapper (state, tokens) {\n  const range = calculateTokenCharactersRange(state, { keepBuffer: false })\n  const endWrapperPosition = range.endPosition + 1\n\n  tokens.push({\n    type: TOKEN_DOCTYPE_ATTRIBUTE,\n    content: state.accumulatedContent,\n    startPosition: range.startPosition,\n    endPosition: range.endPosition\n  })\n\n  tokens.push({\n    type: TOKEN_DOCTYPE_ATTRIBUTE_WRAPPER_END,\n    content: state.decisionBuffer,\n    startPosition: endWrapperPosition,\n    endPosition: endWrapperPosition\n  })\n\n  state.accumulatedContent = ''\n  state.decisionBuffer = ''\n  state.currentContext = DOCTYPE_ATTRIBUTES_CONTEXT\n  state.caretPosition++\n\n  state.contextParams[DOCTYPE_ATTRIBUTE_WRAPPED_CONTEXT] = undefined\n}\n\nfunction parseSyntax (chars, state, tokens) {\n  const wrapperChar = state.contextParams[DOCTYPE_ATTRIBUTE_WRAPPED_CONTEXT].wrapper\n\n  if (chars === wrapperChar) {\n    return wrapper(state, tokens)\n  }\n\n  state.accumulatedContent += state.decisionBuffer\n  state.decisionBuffer = ''\n  state.caretPosition++\n}\n\nmodule.exports = {\n  parseSyntax\n}\n", "const { isWhitespace, calculateTokenCharactersRange } = require('../helpers')\n\nconst {\n  TOKEN_DOCTYPE_ATTRIBUTE\n} = require('../constants/token-types')\nconst {\n  DOCTYPE_ATTRIBUTES_CONTEXT\n} = require('../constants/tokenizer-contexts')\n\nfunction attributeEnd (state, tokens) {\n  const range = calculateTokenCharactersRange(state, { keepBuffer: false })\n\n  tokens.push({\n    type: TOKEN_DOCTYPE_ATTRIBUTE,\n    content: state.accumulatedContent,\n    startPosition: range.startPosition,\n    endPosition: range.endPosition\n  })\n\n  state.accumulatedContent = ''\n  state.decisionBuffer = ''\n  state.currentContext = DOCTYPE_ATTRIBUTES_CONTEXT\n}\n\nfunction parseSyntax (chars, state, tokens) {\n  if (isWhitespace(chars) || chars === '>') {\n    return attributeEnd(state, tokens)\n  }\n\n  state.accumulatedContent += state.decisionBuffer\n  state.decisionBuffer = ''\n  state.caretPosition++\n}\n\nmodule.exports = {\n  parseSyntax\n}\n", "const { calculateTokenCharactersRange } = require('../helpers')\n\nconst {\n  TOKEN_COMMENT_END,\n  TOKEN_COMMENT_CONTENT\n} = require('../constants/token-types')\nconst {\n  DATA_CONTEXT\n} = require('../constants/tokenizer-contexts')\n\nconst COMMENT_END = '-->'\n\nfunction commentEnd (state, tokens) {\n  const contentRange = calculateTokenCharactersRange(state, { keepBuffer: false })\n  const commentEndRange = {\n    startPosition: contentRange.endPosition + 1,\n    endPosition: contentRange.endPosition + COMMENT_END.length,\n  }\n\n  tokens.push({\n    type: TOKEN_COMMENT_CONTENT,\n    content: state.accumulatedContent,\n    startPosition: contentRange.startPosition,\n    endPosition: contentRange.endPosition\n  })\n\n  tokens.push({\n    type: TOKEN_COMMENT_END,\n    content: state.decisionBuffer,\n    startPosition: commentEndRange.startPosition,\n    endPosition: commentEndRange.endPosition\n  })\n\n  state.accumulatedContent = ''\n  state.decisionBuffer = ''\n  state.currentContext = DATA_CONTEXT\n  state.caretPosition++\n}\n\nfunction parseSyntax (chars, state, tokens) {\n  if (chars === '-' || chars === '--') {\n    state.caretPosition++\n\n    return\n  }\n\n  if (chars === COMMENT_END) {\n    return commentEnd(state, tokens)\n  }\n\n  state.accumulatedContent += state.decisionBuffer\n  state.decisionBuffer = ''\n  state.caretPosition++\n}\n\nmodule.exports = {\n  parseSyntax\n}\n", "const dataContext = require('./tokenizer-context-handlers/data')\nconst openTagStartContext = require('./tokenizer-context-handlers/open-tag-start')\nconst closeTagContext = require('./tokenizer-context-handlers/close-tag')\nconst openTagEndContext = require('./tokenizer-context-handlers/open-tag-end')\nconst attributesContext = require('./tokenizer-context-handlers/attributes')\nconst attributeKeyContext = require('./tokenizer-context-handlers/attribute-key')\nconst attributeValueContext = require('./tokenizer-context-handlers/attribute-value')\nconst attributeValueBareContext = require('./tokenizer-context-handlers/attribute-value-bare')\nconst attributeValueWrappedContext = require('./tokenizer-context-handlers/attribute-value-wrapped')\nconst scriptContentContext = require('./tokenizer-context-handlers/script-tag-content')\nconst styleContentContext = require('./tokenizer-context-handlers/style-tag-content')\nconst doctypeStartContext = require('./tokenizer-context-handlers/doctype-start')\nconst doctypeEndContextFactory = require('./tokenizer-context-handlers/doctype-end')\nconst doctypeAttributesContext = require('./tokenizer-context-handlers/doctype-attributes')\nconst doctypeAttributeWrappedContext = require('./tokenizer-context-handlers/doctype-attribute-wrapped')\nconst doctypeAttributeBareEndContext = require('./tokenizer-context-handlers/doctype-attribute-bare')\nconst commentContentContext = require('./tokenizer-context-handlers/comment-content')\n\nconst {\n  DATA_CONTEXT,\n  OPEN_TAG_START_CONTEXT,\n  CLOSE_TAG_CONTEXT,\n  ATTRIBUTES_CONTEXT,\n  OPEN_TAG_END_CONTEXT,\n  ATTRIBUTE_KEY_CONTEXT,\n  ATTRIBUTE_VALUE_CONTEXT,\n  ATTRIBUTE_VALUE_BARE_CONTEXT,\n  ATTRIBUTE_VALUE_WRAPPED_CONTEXT,\n  SCRIPT_CONTENT_CONTEXT,\n  STYLE_CONTENT_CONTEXT,\n  DOCTYPE_START_CONTEXT,\n  DOCTYPE_END_CONTEXT,\n  DOCTYPE_ATTRIBUTES_CONTEXT,\n  DOCTYPE_ATTRIBUTE_WRAPPED_CONTEXT,\n  DOCTYPE_ATTRIBUTE_BARE_CONTEXT,\n  COMMENT_CONTENT_CONTEXT,\n} = require('./constants/tokenizer-contexts')\n\nconst contextHandlersMap = {\n  [DATA_CONTEXT]: dataContext,\n  [OPEN_TAG_START_CONTEXT]: openTagStartContext,\n  [CLOSE_TAG_CONTEXT]: closeTagContext,\n  [ATTRIBUTES_CONTEXT]: attributesContext,\n  [OPEN_TAG_END_CONTEXT]: openTagEndContext,\n  [ATTRIBUTE_KEY_CONTEXT]: attributeKeyContext,\n  [ATTRIBUTE_VALUE_CONTEXT]: attributeValueContext,\n  [ATTRIBUTE_VALUE_BARE_CONTEXT]: attributeValueBareContext,\n  [ATTRIBUTE_VALUE_WRAPPED_CONTEXT]: attributeValueWrappedContext,\n  [SCRIPT_CONTENT_CONTEXT]: scriptContentContext,\n  [STYLE_CONTENT_CONTEXT]: styleContentContext,\n  [DOCTYPE_START_CONTEXT]: doctypeStartContext,\n  [DOCTYPE_END_CONTEXT]: doctypeEndContextFactory,\n  [DOCTYPE_ATTRIBUTES_CONTEXT]: doctypeAttributesContext,\n  [DOCTYPE_ATTRIBUTE_WRAPPED_CONTEXT]: doctypeAttributeWrappedContext,\n  [DOCTYPE_ATTRIBUTE_BARE_CONTEXT]: doctypeAttributeBareEndContext,\n  [COMMENT_CONTENT_CONTEXT]: commentContentContext\n}\n\nfunction tokenizeChars (\n  chars,\n  state,\n  tokens,\n  { isFinalChunk, positionOffset }\n) {\n  let charIndex = state.caretPosition - positionOffset\n\n  while (charIndex < chars.length) {\n    const context = contextHandlersMap[state.currentContext]\n\n    state.decisionBuffer += chars[charIndex]\n    context.parseSyntax(state.decisionBuffer, state, tokens)\n\n    charIndex = state.caretPosition - positionOffset\n  }\n\n  if (isFinalChunk) {\n    const context = contextHandlersMap[state.currentContext]\n\n    // Move the caret back, as at this point\n    // it in the position outside of chars array,\n    // and it should not be taken into account\n    // when calculating characters range\n    state.caretPosition--\n\n    if (context.handleContentEnd !== undefined) {\n      context.handleContentEnd(state, tokens)\n    }\n  }\n}\n\nfunction tokenize (\n  content = '',\n  existingState,\n  { isFinalChunk } = {}\n) {\n  isFinalChunk = isFinalChunk === undefined ? true : isFinalChunk\n\n  let state\n\n  if (existingState !== undefined) {\n    state = Object.assign({}, existingState)\n  } else {\n    state = {\n      currentContext: DATA_CONTEXT,\n      contextParams: {},\n      decisionBuffer: '',\n      accumulatedContent: '',\n      caretPosition: 0\n    }\n  }\n\n  const chars = state.decisionBuffer + content\n  const tokens = []\n\n  const positionOffset = state.caretPosition - state.decisionBuffer.length\n\n  tokenizeChars(chars, state, tokens, {\n    isFinalChunk,\n    positionOffset\n  })\n\n  return { state, tokens }\n}\n\nmodule.exports = tokenize\n", "module.exports = {\n  TAG_CONTENT_CONTEXT: 'tree-constructor-context:tag-content',\n  TAG_CONTEXT: 'tree-constructor-context:tag',\n  TAG_NAME_CONTEXT: 'tree-constructor-context:tag-name',\n  ATTRIBUTES_CONTEXT: 'tree-constructor-context:attributes',\n  ATTRIBUTE_CONTEXT: 'tree-constructor-context:attribute',\n  ATTRIBUTE_VALUE_CONTEXT: 'tree-constructor-context:attribute-value',\n  COMMENT_CONTEXT: 'tree-constructor-context:comment',\n  DOCTYPE_CONTEXT: 'tree-constructor-context:doctype',\n  DOCTYPE_ATTRIBUTES_CONTEXT: 'tree-constructor-context:doctype-attributes',\n  DOCTYPE_ATTRIBUTE_CONTEXT: 'tree-constructor-context:doctype-attribute',\n  SCRIPT_TAG_CONTEXT: 'tree-constructor-context:script-tag',\n  STYLE_TAG_CONTEXT: 'tree-constructor-context:style-tag'\n}\n", "const {\n  TOKEN_OPEN_TAG_START,\n  TOKEN_OPEN_TAG_END,\n  TOKEN_CLOSE_TAG,\n  TOKEN_ATTRIBUTE_KEY,\n  TOKEN_ATTRIBUTE_ASSIGNMENT\n} = require('../constants/token-types')\nconst {\n  TAG_NAME_CONTEXT,\n  ATTRIBUTES_CONTEXT,\n  TAG_CONTENT_CONTEXT\n} = require('../constants/tree-constructor-contexts')\n\nfunction handleOpenTagStart (state, token) {\n  state.currentNode.content.openStart = token\n  state.currentContext = {\n    parentRef: state.currentContext,\n    type: TAG_NAME_CONTEXT\n  }\n\n  return state\n}\n\nfunction handleAttributeStart (state) {\n  state.currentContext = {\n    parentRef: state.currentContext,\n    type: ATTRIBUTES_CONTEXT\n  }\n\n  return state\n}\n\nfunction handleOpenTagEnd (state, token) {\n  const SELF_CLOSING_TAGS = [\n    'area',\n    'base',\n    'br',\n    'col',\n    'embed',\n    'hr',\n    'img',\n    'input',\n    'keygen',\n    'link',\n    'meta',\n    'param',\n    'source',\n    'track',\n    'wbr'\n  ]\n  const tagName = state.currentNode.content.name\n\n  state.currentNode.content.openEnd = token\n\n  if (SELF_CLOSING_TAGS.indexOf(tagName) !== -1) {\n    state.currentNode.content.selfClosing = true\n    state.currentNode = state.currentNode.parentRef\n    state.currentContext = state.currentContext.parentRef\n    state.caretPosition++\n\n    return state\n  }\n\n  state.currentNode.content.selfClosing = false\n  state.currentContext = {\n    parentRef: state.currentContext,\n    type: TAG_CONTENT_CONTEXT\n  }\n  state.caretPosition++\n\n  return state\n}\n\nfunction handleCloseTag (state, token) {\n  state.currentNode.content.close = token\n  state.currentNode = state.currentNode.parentRef\n  state.currentContext = state.currentContext.parentRef\n  state.caretPosition++\n\n  return state\n}\n\nmodule.exports = function tag (token, state) {\n  if (token.type === TOKEN_OPEN_TAG_START) {\n    return handleOpenTagStart(state, token)\n  }\n\n  const ATTRIBUTE_START_TOKENS = [\n    TOKEN_ATTRIBUTE_KEY,\n    TOKEN_ATTRIBUTE_ASSIGNMENT\n  ]\n\n  if (ATTRIBUTE_START_TOKENS.indexOf(token.type) !== -1) {\n    return handleAttributeStart(state)\n  }\n\n  if (token.type === TOKEN_OPEN_TAG_END) {\n    return handleOpenTagEnd(state, token)\n  }\n\n  if (token.type === TOKEN_CLOSE_TAG) {\n    return handleCloseTag(state, token)\n  }\n\n  state.caretPosition++\n\n  return state\n}\n", "module.exports = {\n  NODE_DOCUMENT: 'document',\n  NODE_TAG: 'tag',\n  NODE_TEXT: 'text',\n  NODE_DOCTYPE: 'doctype',\n  NODE_COMMENT: 'comment',\n  NODE_SCRIPT: 'script',\n  NODE_STYLE: 'style'\n}\n", "const parseCloseTagName = require('../helpers').parseCloseTagName\n\nconst {\n  TOKEN_OPEN_TAG_START,\n  TOKEN_CLOSE_TAG,\n  TOKEN_COMMENT_START,\n  TOKEN_DOCTYPE_START,\n  TOKEN_TEXT,\n  TOKEN_OPEN_TAG_START_SCRIPT,\n  TOKEN_OPEN_TAG_START_STYLE\n} = require('../constants/token-types')\nconst {\n  TAG_CONTEXT,\n  COMMENT_CONTEXT,\n  DOCTYPE_CONTEXT,\n  SCRIPT_TAG_CONTEXT,\n  STYLE_TAG_CONTEXT\n} = require('../constants/tree-constructor-contexts')\nconst {\n  NODE_TAG,\n  NODE_TEXT,\n  NODE_DOCTYPE,\n  NODE_COMMENT,\n  NODE_SCRIPT,\n  NODE_STYLE\n} = require('../constants/ast-nodes')\n\nfunction handleOpenTagStart (state) {\n  if (state.currentNode.content.children === undefined) {\n    state.currentNode.content.children = []\n  }\n\n  const tagNode = {\n    nodeType: NODE_TAG,\n    parentRef: state.currentNode,\n    content: {}\n  }\n\n  state.currentNode.content.children.push(tagNode)\n\n  state.currentNode = tagNode\n  state.currentContext = {\n    parentRef: state.currentContext,\n    type: TAG_CONTEXT\n  }\n\n  return state\n}\n\nfunction handleCloseTag (state, token) {\n  const closeTagName = parseCloseTagName(token.content)\n\n  if (closeTagName !== state.currentNode.content.name) {\n    state.caretPosition++\n\n    return state\n  }\n\n  state.currentContext = state.currentContext.parentRef\n\n  return state\n}\n\nfunction handleCommentStart (state) {\n  if (state.currentNode.content.children === undefined) {\n    state.currentNode.content.children = []\n  }\n\n  const commentNode = {\n    nodeType: NODE_COMMENT,\n    parentRef: state.currentNode,\n    content: {}\n  }\n\n  state.currentNode.content.children.push(commentNode)\n\n  state.currentNode = commentNode\n  state.currentContext = {\n    parentRef: state.currentContext,\n    type: COMMENT_CONTEXT\n  }\n\n  return state\n}\n\nfunction handleDoctypeStart (state) {\n  if (state.currentNode.content.children === undefined) {\n    state.currentNode.content.children = []\n  }\n\n  const doctypeNode = {\n    nodeType: NODE_DOCTYPE,\n    parentRef: state.currentNode,\n    content: {}\n  }\n\n  state.currentNode.content.children.push(doctypeNode)\n\n  state.currentNode = doctypeNode\n  state.currentContext = {\n    parentRef: state.currentContext,\n    type: DOCTYPE_CONTEXT\n  }\n\n  return state\n}\n\nfunction handleText (state, token) {\n  if (state.currentNode.content.children === undefined) {\n    state.currentNode.content.children = []\n  }\n\n  const textNode = {\n    nodeType: NODE_TEXT,\n    parentRef: state.currentNode,\n    content: {\n      value: token\n    }\n  }\n\n  state.currentNode.content.children.push(textNode)\n  state.caretPosition++\n\n  return state\n}\n\nfunction handleOpenTagStartScript (state) {\n  if (state.currentNode.content.children === undefined) {\n    state.currentNode.content.children = []\n  }\n\n  const scriptNode = {\n    nodeType: NODE_SCRIPT,\n    parentRef: state.currentNode,\n    content: {}\n  }\n\n  state.currentNode.content.children.push(scriptNode)\n\n  state.currentNode = scriptNode\n  state.currentContext = {\n    type: SCRIPT_TAG_CONTEXT,\n    parentRef: state.currentContext\n  }\n\n  return state\n}\n\nfunction handleOpenTagStartStyle (state) {\n  if (state.currentNode.content.children === undefined) {\n    state.currentNode.content.children = []\n  }\n\n  const styleNode = {\n    nodeType: NODE_STYLE,\n    parentRef: state.currentNode,\n    content: {}\n  }\n\n  state.currentNode.content.children.push(styleNode)\n\n  state.currentNode = styleNode\n  state.currentContext = {\n    type: STYLE_TAG_CONTEXT,\n    parentRef: state.currentContext\n  }\n\n  return state\n}\n\nmodule.exports = function tagContent (token, state) {\n  if (token.type === TOKEN_OPEN_TAG_START) {\n    return handleOpenTagStart(state, token)\n  }\n\n  if (token.type === TOKEN_TEXT) {\n    return handleText(state, token)\n  }\n\n  if (token.type === TOKEN_CLOSE_TAG) {\n    return handleCloseTag(state, token)\n  }\n\n  if (token.type === TOKEN_COMMENT_START) {\n    return handleCommentStart(state, token)\n  }\n\n  if (token.type === TOKEN_DOCTYPE_START) {\n    return handleDoctypeStart(state, token)\n  }\n\n  if (token.type === TOKEN_OPEN_TAG_START_SCRIPT) {\n    return handleOpenTagStartScript(state, token)\n  }\n\n  if (token.type === TOKEN_OPEN_TAG_START_STYLE) {\n    return handleOpenTagStartStyle(state, token)\n  }\n\n  state.caretPosition++\n\n  return state\n}\n", "/**\n * Parser for 'tag-name' context.\n * Parses tag name from 'open-tag-start' (<div)\n * token and save the tag name as self content.\n * Ignores tokens others than 'open-tag-start'.\n */\n\nconst parseOpenTagName = require('../helpers').parseOpenTagName\nconst {\n  TOKEN_OPEN_TAG_START\n} = require('../constants/token-types')\n\nfunction handleTagOpenStart (state, token) {\n  state.currentNode.content.name = parseOpenTagName(token.content)\n\n  state.currentContext = state.currentContext.parentRef\n\n  return state\n}\n\nmodule.exports = function tagName (token, state) {\n  if (token.type === TOKEN_OPEN_TAG_START) {\n    handleTagOpenStart(state, token)\n  }\n\n  state.caretPosition++\n\n  return state\n}\n", "const {\n  TOKEN_ATTRIBUTE_KEY,\n  TOKEN_ATTRIBUTE_ASSIGNMENT,\n  TOKEN_OPEN_TAG_END,\n  TOKEN_OPEN_TAG_END_SCRIPT,\n  TOKEN_OPEN_TAG_END_STYLE\n} = require('../constants/token-types')\nconst {\n  ATTRIBUTE_CONTEXT\n} = require('../constants/tree-constructor-contexts')\n\nfunction handlerAttributeStart (state) {\n  if (state.currentNode.content.attributes === undefined) {\n    state.currentNode.content.attributes = []\n  }\n\n  // new empty attribute\n  state.currentNode.content.attributes.push({})\n\n  state.currentContext = {\n    parentRef: state.currentContext,\n    type: ATTRIBUTE_CONTEXT\n  }\n\n  return state\n}\n\nfunction handleOpenTagEnd (state) {\n  state.currentContext = state.currentContext.parentRef\n\n  return state\n}\n\nmodule.exports = function attributes (token, state) {\n  const ATTRIBUTE_START_TOKENS = [\n    TOKEN_ATTRIBUTE_KEY,\n    TOKEN_ATTRIBUTE_ASSIGNMENT\n  ]\n\n  if (ATTRIBUTE_START_TOKENS.indexOf(token.type) !== -1) {\n    return handlerAttributeStart(state)\n  }\n\n  const ATTRIBUTES_END_TOKENS = [\n    TOKEN_OPEN_TAG_END,\n    TOKEN_OPEN_TAG_END_SCRIPT,\n    TOKEN_OPEN_TAG_END_STYLE\n  ]\n\n  if (ATTRIBUTES_END_TOKENS.indexOf(token.type) !== -1) {\n    return handleOpenTagEnd(state)\n  }\n\n  state.caretPosition++\n\n  return state\n}\n", "const {\n  TOKEN_OPEN_TAG_END,\n  TOKEN_OPEN_TAG_END_SCRIPT,\n  TOKEN_OPEN_TAG_END_STYLE,\n  TOKEN_ATTRIBUTE_KEY,\n  TOKEN_ATTRIBUTE_ASSIGNMENT\n} = require('../constants/token-types')\nconst {\n  ATTRIBUTE_VALUE_CONTEXT\n} = require('../constants/tree-constructor-contexts')\n\nfunction getLastAttribute (state) {\n  const attributes = state.currentNode.content.attributes\n\n  return attributes[attributes.length - 1]\n}\n\nfunction handleOpenTagEnd (state) {\n  state.currentContext = state.currentContext.parentRef\n\n  return state\n}\n\nfunction handleAttributeKey (state, token) {\n  const attribute = getLastAttribute(state)\n\n  if (attribute.key !== undefined || attribute.value !== undefined) {\n    state.currentContext = state.currentContext.parentRef\n\n    return state\n  }\n\n  attribute.key = token\n  state.caretPosition++\n\n  return state\n}\n\nfunction handleAttributeAssignment (state) {\n  const attribute = getLastAttribute(state)\n\n  if (attribute.value !== undefined) {\n    state.currentContext = state.currentContext.parentRef\n\n    return state\n  }\n\n  state.currentContext = {\n    parentRef: state.currentContext,\n    type: ATTRIBUTE_VALUE_CONTEXT\n  }\n  state.caretPosition++\n\n  return state\n}\n\nmodule.exports = function attribute (token, state) {\n  const OPEN_TAG_END_TOKENS = [\n    TOKEN_OPEN_TAG_END,\n    TOKEN_OPEN_TAG_END_SCRIPT,\n    TOKEN_OPEN_TAG_END_STYLE\n  ]\n\n  if (OPEN_TAG_END_TOKENS.indexOf(token.type) !== -1) {\n    return handleOpenTagEnd(state)\n  }\n\n  if (token.type === TOKEN_ATTRIBUTE_KEY) {\n    return handleAttributeKey(state, token)\n  }\n\n  if (token.type === TOKEN_ATTRIBUTE_ASSIGNMENT) {\n    return handleAttributeAssignment(state)\n  }\n\n  state.caretPosition++\n\n  return state\n}\n", "const {\n  TOKEN_OPEN_TAG_END,\n  TOKEN_OPEN_TAG_END_SCRIPT,\n  TOKEN_OPEN_TAG_END_STYLE,\n  TOKEN_ATTRIBUTE_KEY,\n  TOKEN_ATTRIBUTE_ASSIGNMENT,\n  TOKEN_ATTRIBUTE_VALUE,\n  TOKEN_ATTRIBUTE_VALUE_WRAPPER_START,\n  TOKEN_ATTRIBUTE_VALUE_WRAPPER_END\n} = require('../constants/token-types')\n\nfunction getLastAttribute (state) {\n  const attributes = state.currentNode.content.attributes\n\n  return attributes[attributes.length - 1]\n}\n\nfunction handleValueEnd (state) {\n  state.currentContext = state.currentContext.parentRef\n\n  return state\n}\n\nfunction handleAttributeValue (state, token) {\n  const attribute = getLastAttribute(state)\n\n  attribute.value = token\n  state.caretPosition++\n\n  return state\n}\n\nfunction handleAttributeValueWrapperStart (state, token) {\n  const attribute = getLastAttribute(state)\n\n  attribute.startWrapper = token\n  state.caretPosition++\n\n  return state\n}\n\nfunction handleAttributeValueWrapperEnd (state, token) {\n  const attribute = getLastAttribute(state)\n\n  attribute.endWrapper = token\n  state.caretPosition++\n\n  return state\n}\n\nmodule.exports = function attributeValue (token, state) {\n  const VALUE_END_TOKENS = [\n    TOKEN_OPEN_TAG_END,\n    TOKEN_OPEN_TAG_END_SCRIPT,\n    TOKEN_OPEN_TAG_END_STYLE,\n    TOKEN_ATTRIBUTE_KEY,\n    TOKEN_ATTRIBUTE_ASSIGNMENT\n  ]\n\n  if (VALUE_END_TOKENS.indexOf(token.type) !== -1) {\n    return handleValueEnd(state)\n  }\n\n  if (token.type === TOKEN_ATTRIBUTE_VALUE) {\n    return handleAttributeValue(state, token)\n  }\n\n  if (token.type === TOKEN_ATTRIBUTE_VALUE_WRAPPER_START) {\n    return handleAttributeValueWrapperStart(state, token)\n  }\n\n  if (token.type === TOKEN_ATTRIBUTE_VALUE_WRAPPER_END) {\n    return handleAttributeValueWrapperEnd(state, token)\n  }\n\n  state.caretPosition++\n\n  return state\n}\n", "const {\n  TOKEN_COMMENT_START,\n  TOKEN_COMMENT_END,\n  TOKEN_COMMENT_CONTENT\n} = require('../constants/token-types')\n\nfunction handleCommentStart (state, token) {\n  state.currentNode.content.start = token\n  state.caretPosition++\n\n  return state\n}\n\nfunction handleCommentContent (state, token) {\n  state.currentNode.content.value = token\n  state.caretPosition++\n\n  return state\n}\n\nfunction handleCommentEnd (state, token) {\n  state.currentNode.content.end = token\n  state.currentNode = state.currentNode.parentRef\n  state.currentContext = state.currentContext.parentRef\n  state.caretPosition++\n\n  return state\n}\n\nmodule.exports = function comment (token, state) {\n  if (token.type === TOKEN_COMMENT_START) {\n    return handleCommentStart(state, token)\n  }\n\n  if (token.type === TOKEN_COMMENT_CONTENT) {\n    return handleCommentContent(state, token)\n  }\n\n  if (token.type === TOKEN_COMMENT_END) {\n    return handleCommentEnd(state, token)\n  }\n\n  state.caretPosition++\n\n  return state\n}\n", "const {\n  TOKEN_DOCTYPE_END,\n  TOKEN_DOCTYPE_ATTRIBUTE,\n  TOKEN_DOCTYPE_START,\n  TOKEN_DOCTYPE_ATTRIBUTE_WRAPPER_START\n} = require('../constants/token-types')\nconst {\n  DOCTYPE_ATTRIBUTES_CONTEXT\n} = require('../constants/tree-constructor-contexts')\n\nfunction handleDoctypeStart (state, token) {\n  state.currentNode.content.start = token\n  state.caretPosition++\n\n  return state\n}\n\nfunction handleDoctypeEnd (state, token) {\n  state.currentNode.content.end = token\n  state.currentNode = state.currentNode.parentRef\n  state.currentContext = state.currentContext.parentRef\n  state.caretPosition++\n\n  return state\n}\n\nfunction handleDoctypeAttributes (state) {\n  state.currentContext = {\n    parentRef: state.currentContext,\n    type: DOCTYPE_ATTRIBUTES_CONTEXT\n  }\n\n  return state\n}\n\nmodule.exports = function doctype (token, state) {\n  if (token.type === TOKEN_DOCTYPE_START) {\n    return handleDoctypeStart(state, token)\n  }\n\n  if (token.type === TOKEN_DOCTYPE_END) {\n    return handleDoctypeEnd(state, token)\n  }\n\n  const ATTRIBUTES_START_TOKENS = [\n    TOKEN_DOCTYPE_ATTRIBUTE_WRAPPER_START,\n    TOKEN_DOCTYPE_ATTRIBUTE\n  ]\n\n  if (ATTRIBUTES_START_TOKENS.indexOf(token.type) !== -1) {\n    return handleDoctypeAttributes(state, token)\n  }\n\n  state.caretPosition++\n\n  return state\n}\n", "const {\n  DOCTYPE_ATTRIBUTE_CONTEXT\n} = require('../constants/tree-constructor-contexts')\n\nconst {\n  TOKEN_DOCTYPE_END,\n  TOKEN_DOCTYPE_ATTRIBUTE,\n  TOKEN_DOCTYPE_ATTRIBUTE_WRAPPER_START\n} = require('../constants/token-types')\n\nfunction handleDoctypeEnd (state) {\n  state.currentContext = state.currentContext.parentRef\n\n  return state\n}\n\nfunction handleAttribute (state) {\n  if (state.currentNode.content.attributes === undefined) {\n    state.currentNode.content.attributes = []\n  }\n\n  // new empty attribute\n  state.currentNode.content.attributes.push({})\n\n  state.currentContext = {\n    type: DOCTYPE_ATTRIBUTE_CONTEXT,\n    parentRef: state.currentContext\n  }\n\n  return state\n}\n\nmodule.exports = function doctypeAttributes (token, state) {\n  if (token.type === TOKEN_DOCTYPE_END) {\n    return handleDoctypeEnd(state, token)\n  }\n\n  const ATTRIBUTE_START_TOKENS = [\n    TOKEN_DOCTYPE_ATTRIBUTE_WRAPPER_START,\n    TOKEN_DOCTYPE_ATTRIBUTE\n  ]\n\n  if (ATTRIBUTE_START_TOKENS.indexOf(token.type) !== -1) {\n    return handleAttribute(state, token)\n  }\n\n  state.caretPosition++\n\n  return state\n}\n", "const {\n  TOKEN_DOCTYPE_END,\n  TOKEN_DOCTYPE_ATTRIBUTE,\n  TOKEN_DOCTYPE_ATTRIBUTE_WRAPPER_START,\n  TOKEN_DOCTYPE_ATTRIBUTE_WRAPPER_END\n} = require('../constants/token-types')\n\nfunction getLastAttribute (state) {\n  const attributes = state.currentNode.content.attributes\n\n  return attributes[attributes.length - 1]\n}\n\nfunction handleDoctypeEnd (state) {\n  state.currentContext = state.currentContext.parentRef\n\n  return state\n}\n\nfunction handleAttributeValue (state, token) {\n  const attribute = getLastAttribute(state)\n\n  if (attribute.value !== undefined) {\n    state.currentContext = state.currentContext.parentRef\n\n    return state\n  }\n\n  attribute.value = token\n  state.caretPosition++\n\n  return state\n}\n\nfunction handleAttributeWrapperStart (state, token) {\n  const attribute = getLastAttribute(state)\n\n  if (attribute.start !== undefined || attribute.value !== undefined) {\n    state.currentContext = state.currentContext.parentRef\n\n    return state\n  }\n\n  attribute.startWrapper = token\n  state.caretPosition++\n\n  return state\n}\n\nfunction handleAttributeWrapperEnd (state, token) {\n  const attribute = getLastAttribute(state)\n\n  attribute.endWrapper = token\n  state.currentContext = state.currentContext.parentRef\n  state.caretPosition++\n\n  return state\n}\n\nmodule.exports = function doctypeAttribute (token, state) {\n  if (token.type === TOKEN_DOCTYPE_END) {\n    return handleDoctypeEnd(state, token)\n  }\n\n  if (token.type === TOKEN_DOCTYPE_ATTRIBUTE_WRAPPER_START) {\n    return handleAttributeWrapperStart(state, token)\n  }\n\n  if (token.type === TOKEN_DOCTYPE_ATTRIBUTE_WRAPPER_END) {\n    return handleAttributeWrapperEnd(state, token)\n  }\n\n  if (token.type === TOKEN_DOCTYPE_ATTRIBUTE) {\n    return handleAttributeValue(state, token)\n  }\n\n  state.caretPosition++\n\n  return state\n}\n", "const {\n  TOKEN_OPEN_TAG_START_SCRIPT,\n  TOKEN_OPEN_TAG_END_SCRIPT,\n  TOKEN_CLOSE_TAG_SCRIPT,\n  TOKEN_ATTRIBUTE_KEY,\n  TOKEN_ATTRIBUTE_ASSIGNMENT,\n  TOKEN_SCRIPT_TAG_CONTENT\n} = require('../constants/token-types')\nconst { ATTRIBUTES_CONTEXT } = require('../constants/tree-constructor-contexts')\n\nfunction handleOpenTagStartScript (state, token) {\n  state.currentNode.content.openStart = token\n  state.caretPosition++\n\n  return state\n}\n\nfunction handleAttributeStartScript (state) {\n  state.currentContext = {\n    parentRef: state.currentContext,\n    type: ATTRIBUTES_CONTEXT\n  }\n\n  return state\n}\n\nfunction handleOpenTagEndScript (state, token) {\n  state.currentNode.content.openEnd = token\n  state.caretPosition++\n\n  return state\n}\n\nfunction handleScriptContent (state, token) {\n  state.currentNode.content.value = token\n  state.caretPosition++\n\n  return state\n}\n\nfunction handleCloseTagScript (state, token) {\n  state.currentNode.content.close = token\n  state.currentNode = state.currentNode.parentRef\n  state.currentContext = state.currentContext.parentRef\n  state.caretPosition++\n\n  return state\n}\n\nmodule.exports = function scriptTag (token, state) {\n  if (token.type === TOKEN_OPEN_TAG_START_SCRIPT) {\n    return handleOpenTagStartScript(state, token)\n  }\n\n  const ATTRIBUTE_START_TOKENS = [\n    TOKEN_ATTRIBUTE_KEY,\n    TOKEN_ATTRIBUTE_ASSIGNMENT\n  ]\n\n  if (ATTRIBUTE_START_TOKENS.indexOf(token.type) !== -1) {\n    return handleAttributeStartScript(state)\n  }\n\n\n  if (token.type === TOKEN_OPEN_TAG_END_SCRIPT) {\n    return handleOpenTagEndScript(state, token)\n  }\n\n  if (token.type === TOKEN_SCRIPT_TAG_CONTENT) {\n    return handleScriptContent(state, token)\n  }\n\n  if (token.type === TOKEN_CLOSE_TAG_SCRIPT) {\n    return handleCloseTagScript(state, token)\n  }\n\n  state.caretPosition++\n\n  return state\n}\n", "const {\n  TOKEN_OPEN_TAG_START_STYLE,\n  TOKEN_OPEN_TAG_END_STYLE,\n  TOKEN_CLOSE_TAG_STYLE,\n  TOKEN_ATTRIBUTE_KEY,\n  TOKEN_ATTRIBUTE_ASSIGNMENT,\n  TOKEN_STYLE_TAG_CONTENT\n} = require('../constants/token-types')\nconst { ATTRIBUTES_CONTEXT } = require('../constants/tree-constructor-contexts')\n\nfunction handleOpenTagStartStyle (state, token) {\n  state.currentNode.content.openStart = token\n  state.caretPosition++\n\n  return state\n}\n\nfunction handleAttributeStartStyle (state) {\n  state.currentContext = {\n    parentRef: state.currentContext,\n    type: ATTRIBUTES_CONTEXT\n  }\n\n  return state\n}\n\nfunction handleOpenTagEndStyle (state, token) {\n  state.currentNode.content.openEnd = token\n  state.caretPosition++\n\n  return state\n}\n\nfunction handleStyleContent (state, token) {\n  state.currentNode.content.value = token\n  state.caretPosition++\n\n  return state\n}\n\nfunction handleCloseTagStyle (state, token) {\n  state.currentNode.content.close = token\n  state.currentNode = state.currentNode.parentRef\n  state.currentContext = state.currentContext.parentRef\n  state.caretPosition++\n\n  return state\n}\n\nmodule.exports = function styleTag (token, state) {\n  if (token.type === TOKEN_OPEN_TAG_START_STYLE) {\n    return handleOpenTagStartStyle(state, token)\n  }\n\n  const ATTRIBUTE_START_TOKENS = [\n    TOKEN_ATTRIBUTE_KEY,\n    TOKEN_ATTRIBUTE_ASSIGNMENT\n  ]\n\n  if (ATTRIBUTE_START_TOKENS.indexOf(token.type) !== -1) {\n    return handleAttributeStartStyle(state)\n  }\n\n  if (token.type === TOKEN_OPEN_TAG_END_STYLE) {\n    return handleOpenTagEndStyle(state, token)\n  }\n\n  if (token.type === TOKEN_STYLE_TAG_CONTENT) {\n    return handleStyleContent(state, token)\n  }\n\n  if (token.type === TOKEN_CLOSE_TAG_STYLE) {\n    return handleCloseTagStyle(state, token)\n  }\n\n  state.caretPosition++\n\n  return state\n}\n", "const tag = require('./tree-constructor-context-handlers/tag')\nconst tagContent = require('./tree-constructor-context-handlers/tag-content')\nconst tagName = require('./tree-constructor-context-handlers/tag-name')\nconst attributes = require('./tree-constructor-context-handlers/attributes')\nconst attribute = require('./tree-constructor-context-handlers/attribute')\nconst attributeValue = require('./tree-constructor-context-handlers/attribute-value')\nconst comment = require('./tree-constructor-context-handlers/comment')\nconst doctype = require('./tree-constructor-context-handlers/doctype')\nconst doctypeAttributes = require('./tree-constructor-context-handlers/doctype-attributes')\nconst doctypeAttribute = require('./tree-constructor-context-handlers/doctype-attribute')\nconst scriptTag = require('./tree-constructor-context-handlers/script-tag')\nconst styleTag = require('./tree-constructor-context-handlers/style-tag')\n\nconst {\n  TAG_CONTENT_CONTEXT,\n  TAG_CONTEXT,\n  TAG_NAME_CONTEXT,\n  ATTRIBUTES_CONTEXT,\n  ATTRIBUTE_CONTEXT,\n  ATTRIBUTE_VALUE_CONTEXT,\n  COMMENT_CONTEXT,\n  DOCTYPE_CONTEXT,\n  DOCTYPE_ATTRIBUTES_CONTEXT,\n  DOCTYPE_ATTRIBUTE_CONTEXT,\n  SCRIPT_TAG_CONTEXT,\n  STYLE_TAG_CONTEXT\n} = require('./constants/tree-constructor-contexts')\nconst { NODE_DOCUMENT } = require('./constants/ast-nodes')\n\nconst contextsMap = {\n  [TAG_CONTENT_CONTEXT]: tagContent,\n  [TAG_CONTEXT]: tag,\n  [TAG_NAME_CONTEXT]: tagName,\n  [ATTRIBUTES_CONTEXT]: attributes,\n  [ATTRIBUTE_CONTEXT]: attribute,\n  [ATTRIBUTE_VALUE_CONTEXT]: attributeValue,\n  [COMMENT_CONTEXT]: comment,\n  [DOCTYPE_CONTEXT]: doctype,\n  [DOCTYPE_ATTRIBUTES_CONTEXT]: doctypeAttributes,\n  [DOCTYPE_ATTRIBUTE_CONTEXT]: doctypeAttribute,\n  [SCRIPT_TAG_CONTEXT]: scriptTag,\n  [STYLE_TAG_CONTEXT]: styleTag\n}\n\nfunction processTokens (tokens, state, positionOffset) {\n  let tokenIndex = state.caretPosition - positionOffset\n\n  while (tokenIndex < tokens.length) {\n    const token = tokens[tokenIndex]\n    const contextHandler = contextsMap[state.currentContext.type]\n\n    state = contextHandler(token, state)\n    tokenIndex = state.caretPosition - positionOffset\n  }\n\n  return state\n}\n\nmodule.exports = function constructTree (\n  tokens = [],\n  existingState\n) {\n  let state = existingState\n\n  if (existingState === undefined) {\n    const rootContext = {\n      type: TAG_CONTENT_CONTEXT,\n      parentRef: undefined,\n      content: []\n    }\n    const rootNode = {\n      nodeType: NODE_DOCUMENT,\n      parentRef: undefined,\n      content: {}\n    }\n\n    state = {\n      caretPosition: 0,\n      currentContext: rootContext,\n      currentNode: rootNode,\n      rootNode\n    }\n  }\n\n  const positionOffset = state.caretPosition\n\n  processTokens(tokens, state, positionOffset)\n\n  return { state, ast: state.rootNode }\n}\n", "const { Transform } = require('stream')\n\nconst tokenize = require('./tokenize')\n\nclass StreamTokenizer extends Transform {\n  constructor (options) {\n    super(Object.assign(\n      {},\n      options,\n      {\n        decodeStrings: false,\n        readableObjectMode: true\n      }\n    ))\n\n    this.currentTokenizerState = undefined\n    this.setDefaultEncoding('utf8')\n  }\n\n  _transform (chunk, encoding, callback) {\n    let chunkString = chunk\n\n    if (Buffer.isBuffer(chunk)) {\n      chunkString = chunk.toString()\n    }\n\n    const { state, tokens } = tokenize(\n      chunkString,\n      this.currentTokenizerState,\n      { isFinalChunk: false }\n    )\n\n    this.currentTokenizerState = state\n\n    callback(null, tokens)\n  }\n\n  _flush (callback) {\n    const tokenizeResults = tokenize(\n      '',\n      this.currentTokenizerState,\n      { isFinalChunk: true }\n    )\n\n    this.push(tokenizeResults.tokens)\n\n    callback()\n  }\n}\n\nmodule.exports = StreamTokenizer\n", "const { Transform } = require('stream')\n\nconst constructTree = require('./construct-tree')\n\nclass StreamTreeConstructor extends Transform {\n  constructor (options) {\n    super(Object.assign(\n      {},\n      options,\n      {\n        objectMode: true,\n        readableObjectMode: true\n      }\n    ))\n\n    this.currentState = undefined\n  }\n\n  _transform (tokensChunk, encoding, callback) {\n    const { state, ast } = constructTree(\n      tokensChunk,\n      this.currentState\n    )\n\n    this.currentState = state\n\n    callback(null, ast)\n  }\n}\n\nmodule.exports = StreamTreeConstructor\n", "const tokenize = require('./lib/tokenize')\nconst constructTree = require('./lib/construct-tree')\nconst StreamTokenizer = require('./lib/stream-tokenizer')\nconst StreamTreeConstructor = require('./lib/stream-tree-constructor')\n\n// Need to be separate exports\n// in order to be properly bundled\n// and recognised by Rollup as named\n// exports\nmodule.exports.tokenize = tokenize\nmodule.exports.constructTree = constructTree\nmodule.exports.StreamTokenizer = StreamTokenizer\nmodule.exports.StreamTreeConstructor = StreamTreeConstructor\n", "var has = Object.prototype.hasOwnProperty;\n\nfunction dequal(foo, bar) {\n\tvar ctor, len;\n\tif (foo === bar) return true;\n\n\tif (foo && bar && (ctor=foo.constructor) === bar.constructor) {\n\t\tif (ctor === Date) return foo.getTime() === bar.getTime();\n\t\tif (ctor === RegExp) return foo.toString() === bar.toString();\n\n\t\tif (ctor === Array) {\n\t\t\tif ((len=foo.length) === bar.length) {\n\t\t\t\twhile (len-- && dequal(foo[len], bar[len]));\n\t\t\t}\n\t\t\treturn len === -1;\n\t\t}\n\n\t\tif (!ctor || typeof foo === 'object') {\n\t\t\tlen = 0;\n\t\t\tfor (ctor in foo) {\n\t\t\t\tif (has.call(foo, ctor) && ++len && !has.call(bar, ctor)) return false;\n\t\t\t\tif (!(ctor in bar) || !dequal(foo[ctor], bar[ctor])) return false;\n\t\t\t}\n\t\t\treturn Object.keys(bar).length === len;\n\t\t}\n\t}\n\n\treturn foo !== foo && bar !== bar;\n}\n\nexports.dequal = dequal;", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useDeepMemo = void 0;\nconst react_1 = require(\"react\");\nconst lite_1 = require(\"dequal/lite\");\n/**\n * @param value the value to be memoized (usually a dependency list)\n * @returns a memoized version of the value as long as it remains deeply equal\n */\nfunction useDeepMemo(value) {\n    const ref = (0, react_1.useRef)(value);\n    const signalRef = (0, react_1.useRef)(0);\n    if (!(0, lite_1.dequal)(value, ref.current)) {\n        ref.current = value;\n        signalRef.current += 1;\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    return (0, react_1.useMemo)(() => ref.current, [signalRef.current]);\n}\nexports.useDeepMemo = useDeepMemo;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useLatest = void 0;\nconst react_1 = require(\"react\");\n/**\n * Returns the latest state.\n *\n * This is mostly useful to get access to the latest value of some props or state inside an asynchronous callback, instead of that value at the time the callback was created from.\n */\nfunction useLatest(value) {\n    const ref = (0, react_1.useRef)(value);\n    ref.current = value;\n    return ref;\n}\nexports.useLatest = useLatest;\n", "\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.handleErrorToastAction = void 0;\nconst fs = __importStar(require(\"fs\"));\nconst path = __importStar(require(\"path\"));\nconst api_1 = require(\"@raycast/api\");\nconst handleErrorToastAction = (error) => {\n    let privateExtension = true;\n    let title = \"[Extension Name]...\";\n    let extensionURL = \"\";\n    try {\n        const packageJSON = JSON.parse(fs.readFileSync(path.join(api_1.environment.assetsPath, \"..\", \"package.json\"), \"utf8\"));\n        title = `[${packageJSON.title}]...`;\n        extensionURL = `https://raycast.com/${packageJSON.owner || packageJSON.author}/${packageJSON.name}`;\n        if (!packageJSON.owner || packageJSON.access === \"public\") {\n            privateExtension = false;\n        }\n    }\n    catch (err) {\n        // no-op\n    }\n    // if it's a private extension, we can't construct the URL to report the error\n    // so we fallback to copying the error to the clipboard\n    const fallback = api_1.environment.isDevelopment || privateExtension;\n    return {\n        title: fallback ? \"Copy Logs\" : \"Report Error\",\n        onAction(toast) {\n            toast.hide();\n            if (fallback) {\n                api_1.Clipboard.copy(error?.stack || error?.message || \"\");\n            }\n            else {\n                (0, api_1.open)(`https://github.com/raycast/extensions/issues/new?&labels=extension%2Cbug&template=extension_bug_report.yml&title=${encodeURIComponent(title)}&extension-url=${encodeURI(extensionURL)}&description=${encodeURIComponent(`#### Error:\n\\`\\`\\`\n${error?.stack || error?.message || \"\"}\n\\`\\`\\`\n`)}`);\n            }\n        },\n    };\n};\nexports.handleErrorToastAction = handleErrorToastAction;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.usePromise = void 0;\nconst react_1 = require(\"react\");\nconst api_1 = require(\"@raycast/api\");\nconst useDeepMemo_1 = require(\"./useDeepMemo\");\nconst useLatest_1 = require(\"./useLatest\");\nconst handle_error_toast_action_1 = require(\"./handle-error-toast-action\");\nfunction usePromise(fn, args, options) {\n    const lastCallId = (0, react_1.useRef)(0);\n    const [state, set] = (0, react_1.useState)({ isLoading: true });\n    const fnRef = (0, useLatest_1.useLatest)(fn);\n    const latestAbortable = (0, useLatest_1.useLatest)(options?.abortable);\n    const latestArgs = (0, useLatest_1.useLatest)(args || []);\n    const latestOnError = (0, useLatest_1.useLatest)(options?.onError);\n    const latestOnData = (0, useLatest_1.useLatest)(options?.onData);\n    const latestOnWillExecute = (0, useLatest_1.useLatest)(options?.onWillExecute);\n    const latestValue = (0, useLatest_1.useLatest)(state.data);\n    const latestCallback = (0, react_1.useRef)();\n    const callback = (0, react_1.useCallback)((...args) => {\n        const callId = ++lastCallId.current;\n        if (latestAbortable.current) {\n            latestAbortable.current.current?.abort();\n            latestAbortable.current.current = new AbortController();\n        }\n        latestOnWillExecute.current?.(args);\n        set((prevState) => ({ ...prevState, isLoading: true }));\n        return fnRef.current(...args).then((data) => {\n            if (callId === lastCallId.current) {\n                if (latestOnData.current) {\n                    latestOnData.current(data);\n                }\n                set({ data, isLoading: false });\n            }\n            return data;\n        }, (error) => {\n            if (error.name == \"AbortError\") {\n                return error;\n            }\n            if (callId === lastCallId.current) {\n                // handle errors\n                if (latestOnError.current) {\n                    latestOnError.current(error);\n                }\n                else {\n                    console.error(error);\n                    if (api_1.environment.launchType !== api_1.LaunchType.Background) {\n                        (0, api_1.showToast)({\n                            style: api_1.Toast.Style.Failure,\n                            title: \"Failed to fetch latest data\",\n                            message: error.message,\n                            primaryAction: {\n                                title: \"Retry\",\n                                onAction(toast) {\n                                    toast.hide();\n                                    latestCallback.current?.(...(latestArgs.current || []));\n                                },\n                            },\n                            secondaryAction: (0, handle_error_toast_action_1.handleErrorToastAction)(error),\n                        });\n                    }\n                }\n                set({ error, isLoading: false });\n            }\n            return error;\n        });\n    }, [latestAbortable, latestOnData, latestOnError, latestArgs, fnRef, set, latestCallback, latestOnWillExecute]\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    );\n    latestCallback.current = callback;\n    const revalidate = (0, react_1.useCallback)(() => {\n        return callback(...(latestArgs.current || []));\n    }, [callback, latestArgs]);\n    const mutate = (0, react_1.useCallback)(async (asyncUpdate, options) => {\n        let dataBeforeOptimisticUpdate;\n        try {\n            if (options?.optimisticUpdate) {\n                if (typeof options?.rollbackOnError !== \"function\" && options?.rollbackOnError !== false) {\n                    // keep track of the data before the optimistic update,\n                    // but only if we need it (eg. only when we want to automatically rollback after)\n                    dataBeforeOptimisticUpdate = structuredClone(latestValue.current?.value);\n                }\n                const update = options.optimisticUpdate;\n                set((prevState) => ({ ...prevState, data: update(prevState.data) }));\n            }\n            return await asyncUpdate;\n        }\n        catch (err) {\n            if (typeof options?.rollbackOnError === \"function\") {\n                const update = options.rollbackOnError;\n                set((prevState) => ({ ...prevState, data: update(prevState.data) }));\n            }\n            else if (options?.optimisticUpdate && options?.rollbackOnError !== false) {\n                set((prevState) => ({ ...prevState, data: dataBeforeOptimisticUpdate }));\n            }\n            throw err;\n        }\n        finally {\n            if (options?.shouldRevalidateAfter !== false) {\n                if (api_1.environment.launchType === api_1.LaunchType.Background || api_1.environment.commandMode === \"menu-bar\") {\n                    // when in the background or in a menu bar, we are going to await the revalidation\n                    // to make sure we get the right data at the end of the mutation\n                    await revalidate();\n                }\n                else {\n                    revalidate();\n                }\n            }\n        }\n    }, [revalidate, latestValue, set]);\n    // revalidate when the args change\n    (0, react_1.useEffect)(() => {\n        if (options?.execute !== false) {\n            callback(...(args || []));\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [(0, useDeepMemo_1.useDeepMemo)([args, options?.execute, callback])]);\n    // abort request when unmounting\n    (0, react_1.useEffect)(() => {\n        return () => {\n            if (latestAbortable.current) {\n                // eslint-disable-next-line react-hooks/exhaustive-deps\n                latestAbortable.current.current?.abort();\n            }\n        };\n    }, [latestAbortable]);\n    return { ...state, revalidate, mutate };\n}\nexports.usePromise = usePromise;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useCachedState = void 0;\nconst react_1 = require(\"react\");\nconst api_1 = require(\"@raycast/api\");\nconst useLatest_1 = require(\"./useLatest\");\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction replacer(key, _value) {\n    const value = this[key];\n    if (value instanceof Date) {\n        return `__raycast_cached_date__${value.toString()}`;\n    }\n    if (Buffer.isBuffer(value)) {\n        return `__raycast_cached_buffer__${value.toString(\"base64\")}`;\n    }\n    return _value;\n}\nfunction reviver(_key, value) {\n    if (typeof value === \"string\" && value.startsWith(\"__raycast_cached_date__\")) {\n        return new Date(value.replace(\"__raycast_cached_date__\", \"\"));\n    }\n    if (typeof value === \"string\" && value.startsWith(\"__raycast_cached_buffer__\")) {\n        return Buffer.from(value.replace(\"__raycast_cached_buffer__\", \"\"), \"base64\");\n    }\n    return value;\n}\nconst rootCache = Symbol(\"cache without namespace\");\nconst cacheMap = new Map();\nfunction useCachedState(key, initialState, config) {\n    const cacheKey = config?.cacheNamespace || rootCache;\n    const cache = cacheMap.get(cacheKey) || cacheMap.set(cacheKey, new api_1.Cache({ namespace: config?.cacheNamespace })).get(cacheKey);\n    if (!cache) {\n        throw new Error(\"Missing cache\");\n    }\n    const keyRef = (0, useLatest_1.useLatest)(key);\n    const initialValueRef = (0, useLatest_1.useLatest)(initialState);\n    const cachedState = (0, react_1.useSyncExternalStore)(cache.subscribe, () => {\n        try {\n            return cache.get(keyRef.current);\n        }\n        catch (error) {\n            console.error(\"Could not get Cache data:\", error);\n            return undefined;\n        }\n    });\n    const state = (0, react_1.useMemo)(() => {\n        if (typeof cachedState !== \"undefined\") {\n            if (cachedState === \"undefined\") {\n                return undefined;\n            }\n            try {\n                return JSON.parse(cachedState, reviver);\n            }\n            catch (err) {\n                // the data got corrupted somehow\n                console.warn(\"The cached data is corrupted\", err);\n                return initialValueRef.current;\n            }\n        }\n        else {\n            return initialValueRef.current;\n        }\n    }, [cachedState, initialValueRef]);\n    const stateRef = (0, useLatest_1.useLatest)(state);\n    const setStateAndCache = (0, react_1.useCallback)((updater) => {\n        // @ts-expect-error TS struggles to infer the types as T could potentially be a function\n        const newValue = typeof updater === \"function\" ? updater(stateRef.current) : updater;\n        if (typeof newValue === \"undefined\") {\n            cache.set(keyRef.current, \"undefined\");\n        }\n        else {\n            const stringifiedValue = JSON.stringify(newValue, replacer);\n            cache.set(keyRef.current, stringifiedValue);\n        }\n        return newValue;\n    }, [cache, keyRef, stateRef]);\n    return [state, setStateAndCache];\n}\nexports.useCachedState = useCachedState;\n", "'use strict';\n\nvar crypto = require('crypto');\n\n/**\n * Exported function\n *\n * Options:\n *\n *  - `algorithm` hash algo to be used by this instance: *'sha1', 'md5'\n *  - `excludeValues` {true|*false} hash object keys, values ignored\n *  - `encoding` hash encoding, supports 'buffer', '*hex', 'binary', 'base64'\n *  - `ignoreUnknown` {true|*false} ignore unknown object types\n *  - `replacer` optional function that replaces values before hashing\n *  - `respectFunctionProperties` {*true|false} consider function properties when hashing\n *  - `respectFunctionNames` {*true|false} consider 'name' property of functions for hashing\n *  - `respectType` {*true|false} Respect special properties (prototype, constructor)\n *    when hashing to distinguish between types\n *  - `unorderedArrays` {true|*false} Sort all arrays before hashing\n *  - `unorderedSets` {*true|false} Sort `Set` and `Map` instances before hashing\n *  * = default\n *\n * @param {object} object value to hash\n * @param {object} options hashing options\n * @return {string} hash value\n * @api public\n */\nexports = module.exports = objectHash;\n\nfunction objectHash(object, options){\n  options = applyDefaults(object, options);\n\n  return hash(object, options);\n}\n\n/**\n * Exported sugar methods\n *\n * @param {object} object value to hash\n * @return {string} hash value\n * @api public\n */\nexports.sha1 = function(object){\n  return objectHash(object);\n};\nexports.keys = function(object){\n  return objectHash(object, {excludeValues: true, algorithm: 'sha1', encoding: 'hex'});\n};\nexports.MD5 = function(object){\n  return objectHash(object, {algorithm: 'md5', encoding: 'hex'});\n};\nexports.keysMD5 = function(object){\n  return objectHash(object, {algorithm: 'md5', encoding: 'hex', excludeValues: true});\n};\n\n// Internals\nvar hashes = crypto.getHashes ? crypto.getHashes().slice() : ['sha1', 'md5'];\nhashes.push('passthrough');\nvar encodings = ['buffer', 'hex', 'binary', 'base64'];\n\nfunction applyDefaults(object, sourceOptions){\n  sourceOptions = sourceOptions || {};\n\n  // create a copy rather than mutating\n  var options = {};\n  options.algorithm = sourceOptions.algorithm || 'sha1';\n  options.encoding = sourceOptions.encoding || 'hex';\n  options.excludeValues = sourceOptions.excludeValues ? true : false;\n  options.algorithm = options.algorithm.toLowerCase();\n  options.encoding = options.encoding.toLowerCase();\n  options.ignoreUnknown = sourceOptions.ignoreUnknown !== true ? false : true; // default to false\n  options.respectType = sourceOptions.respectType === false ? false : true; // default to true\n  options.respectFunctionNames = sourceOptions.respectFunctionNames === false ? false : true;\n  options.respectFunctionProperties = sourceOptions.respectFunctionProperties === false ? false : true;\n  options.unorderedArrays = sourceOptions.unorderedArrays !== true ? false : true; // default to false\n  options.unorderedSets = sourceOptions.unorderedSets === false ? false : true; // default to false\n  options.unorderedObjects = sourceOptions.unorderedObjects === false ? false : true; // default to true\n  options.replacer = sourceOptions.replacer || undefined;\n  options.excludeKeys = sourceOptions.excludeKeys || undefined;\n\n  if(typeof object === 'undefined') {\n    throw new Error('Object argument required.');\n  }\n\n  // if there is a case-insensitive match in the hashes list, accept it\n  // (i.e. SHA256 for sha256)\n  for (var i = 0; i < hashes.length; ++i) {\n    if (hashes[i].toLowerCase() === options.algorithm.toLowerCase()) {\n      options.algorithm = hashes[i];\n    }\n  }\n\n  if(hashes.indexOf(options.algorithm) === -1){\n    throw new Error('Algorithm \"' + options.algorithm + '\"  not supported. ' +\n      'supported values: ' + hashes.join(', '));\n  }\n\n  if(encodings.indexOf(options.encoding) === -1 &&\n     options.algorithm !== 'passthrough'){\n    throw new Error('Encoding \"' + options.encoding + '\"  not supported. ' +\n      'supported values: ' + encodings.join(', '));\n  }\n\n  return options;\n}\n\n/** Check if the given function is a native function */\nfunction isNativeFunction(f) {\n  if ((typeof f) !== 'function') {\n    return false;\n  }\n  var exp = /^function\\s+\\w*\\s*\\(\\s*\\)\\s*{\\s+\\[native code\\]\\s+}$/i;\n  return exp.exec(Function.prototype.toString.call(f)) != null;\n}\n\nfunction hash(object, options) {\n  var hashingStream;\n\n  if (options.algorithm !== 'passthrough') {\n    hashingStream = crypto.createHash(options.algorithm);\n  } else {\n    hashingStream = new PassThrough();\n  }\n\n  if (typeof hashingStream.write === 'undefined') {\n    hashingStream.write = hashingStream.update;\n    hashingStream.end   = hashingStream.update;\n  }\n\n  var hasher = typeHasher(options, hashingStream);\n  hasher.dispatch(object);\n  if (!hashingStream.update) {\n    hashingStream.end('');\n  }\n\n  if (hashingStream.digest) {\n    return hashingStream.digest(options.encoding === 'buffer' ? undefined : options.encoding);\n  }\n\n  var buf = hashingStream.read();\n  if (options.encoding === 'buffer') {\n    return buf;\n  }\n\n  return buf.toString(options.encoding);\n}\n\n/**\n * Expose streaming API\n *\n * @param {object} object  Value to serialize\n * @param {object} options  Options, as for hash()\n * @param {object} stream  A stream to write the serializiation to\n * @api public\n */\nexports.writeToStream = function(object, options, stream) {\n  if (typeof stream === 'undefined') {\n    stream = options;\n    options = {};\n  }\n\n  options = applyDefaults(object, options);\n\n  return typeHasher(options, stream).dispatch(object);\n};\n\nfunction typeHasher(options, writeTo, context){\n  context = context || [];\n  var write = function(str) {\n    if (writeTo.update) {\n      return writeTo.update(str, 'utf8');\n    } else {\n      return writeTo.write(str, 'utf8');\n    }\n  };\n\n  return {\n    dispatch: function(value){\n      if (options.replacer) {\n        value = options.replacer(value);\n      }\n\n      var type = typeof value;\n      if (value === null) {\n        type = 'null';\n      }\n\n      //console.log(\"[DEBUG] Dispatch: \", value, \"->\", type, \" -> \", \"_\" + type);\n\n      return this['_' + type](value);\n    },\n    _object: function(object) {\n      var pattern = (/\\[object (.*)\\]/i);\n      var objString = Object.prototype.toString.call(object);\n      var objType = pattern.exec(objString);\n      if (!objType) { // object type did not match [object ...]\n        objType = 'unknown:[' + objString + ']';\n      } else {\n        objType = objType[1]; // take only the class name\n      }\n\n      objType = objType.toLowerCase();\n\n      var objectNumber = null;\n\n      if ((objectNumber = context.indexOf(object)) >= 0) {\n        return this.dispatch('[CIRCULAR:' + objectNumber + ']');\n      } else {\n        context.push(object);\n      }\n\n      if (typeof Buffer !== 'undefined' && Buffer.isBuffer && Buffer.isBuffer(object)) {\n        write('buffer:');\n        return write(object);\n      }\n\n      if(objType !== 'object' && objType !== 'function' && objType !== 'asyncfunction') {\n        if(this['_' + objType]) {\n          this['_' + objType](object);\n        } else if (options.ignoreUnknown) {\n          return write('[' + objType + ']');\n        } else {\n          throw new Error('Unknown object type \"' + objType + '\"');\n        }\n      }else{\n        var keys = Object.keys(object);\n        if (options.unorderedObjects) {\n          keys = keys.sort();\n        }\n        // Make sure to incorporate special properties, so\n        // Types with different prototypes will produce\n        // a different hash and objects derived from\n        // different functions (`new Foo`, `new Bar`) will\n        // produce different hashes.\n        // We never do this for native functions since some\n        // seem to break because of that.\n        if (options.respectType !== false && !isNativeFunction(object)) {\n          keys.splice(0, 0, 'prototype', '__proto__', 'constructor');\n        }\n\n        if (options.excludeKeys) {\n          keys = keys.filter(function(key) { return !options.excludeKeys(key); });\n        }\n\n        write('object:' + keys.length + ':');\n        var self = this;\n        return keys.forEach(function(key){\n          self.dispatch(key);\n          write(':');\n          if(!options.excludeValues) {\n            self.dispatch(object[key]);\n          }\n          write(',');\n        });\n      }\n    },\n    _array: function(arr, unordered){\n      unordered = typeof unordered !== 'undefined' ? unordered :\n        options.unorderedArrays !== false; // default to options.unorderedArrays\n\n      var self = this;\n      write('array:' + arr.length + ':');\n      if (!unordered || arr.length <= 1) {\n        return arr.forEach(function(entry) {\n          return self.dispatch(entry);\n        });\n      }\n\n      // the unordered case is a little more complicated:\n      // since there is no canonical ordering on objects,\n      // i.e. {a:1} < {a:2} and {a:1} > {a:2} are both false,\n      // we first serialize each entry using a PassThrough stream\n      // before sorting.\n      // also: we can\u2019t use the same context array for all entries\n      // since the order of hashing should *not* matter. instead,\n      // we keep track of the additions to a copy of the context array\n      // and add all of them to the global context array when we\u2019re done\n      var contextAdditions = [];\n      var entries = arr.map(function(entry) {\n        var strm = new PassThrough();\n        var localContext = context.slice(); // make copy\n        var hasher = typeHasher(options, strm, localContext);\n        hasher.dispatch(entry);\n        // take only what was added to localContext and append it to contextAdditions\n        contextAdditions = contextAdditions.concat(localContext.slice(context.length));\n        return strm.read().toString();\n      });\n      context = context.concat(contextAdditions);\n      entries.sort();\n      return this._array(entries, false);\n    },\n    _date: function(date){\n      return write('date:' + date.toJSON());\n    },\n    _symbol: function(sym){\n      return write('symbol:' + sym.toString());\n    },\n    _error: function(err){\n      return write('error:' + err.toString());\n    },\n    _boolean: function(bool){\n      return write('bool:' + bool.toString());\n    },\n    _string: function(string){\n      write('string:' + string.length + ':');\n      write(string.toString());\n    },\n    _function: function(fn){\n      write('fn:');\n      if (isNativeFunction(fn)) {\n        this.dispatch('[native]');\n      } else {\n        this.dispatch(fn.toString());\n      }\n\n      if (options.respectFunctionNames !== false) {\n        // Make sure we can still distinguish native functions\n        // by their name, otherwise String and Function will\n        // have the same hash\n        this.dispatch(\"function-name:\" + String(fn.name));\n      }\n\n      if (options.respectFunctionProperties) {\n        this._object(fn);\n      }\n    },\n    _number: function(number){\n      return write('number:' + number.toString());\n    },\n    _xml: function(xml){\n      return write('xml:' + xml.toString());\n    },\n    _null: function() {\n      return write('Null');\n    },\n    _undefined: function() {\n      return write('Undefined');\n    },\n    _regexp: function(regex){\n      return write('regex:' + regex.toString());\n    },\n    _uint8array: function(arr){\n      write('uint8array:');\n      return this.dispatch(Array.prototype.slice.call(arr));\n    },\n    _uint8clampedarray: function(arr){\n      write('uint8clampedarray:');\n      return this.dispatch(Array.prototype.slice.call(arr));\n    },\n    _int8array: function(arr){\n      write('int8array:');\n      return this.dispatch(Array.prototype.slice.call(arr));\n    },\n    _uint16array: function(arr){\n      write('uint16array:');\n      return this.dispatch(Array.prototype.slice.call(arr));\n    },\n    _int16array: function(arr){\n      write('int16array:');\n      return this.dispatch(Array.prototype.slice.call(arr));\n    },\n    _uint32array: function(arr){\n      write('uint32array:');\n      return this.dispatch(Array.prototype.slice.call(arr));\n    },\n    _int32array: function(arr){\n      write('int32array:');\n      return this.dispatch(Array.prototype.slice.call(arr));\n    },\n    _float32array: function(arr){\n      write('float32array:');\n      return this.dispatch(Array.prototype.slice.call(arr));\n    },\n    _float64array: function(arr){\n      write('float64array:');\n      return this.dispatch(Array.prototype.slice.call(arr));\n    },\n    _arraybuffer: function(arr){\n      write('arraybuffer:');\n      return this.dispatch(new Uint8Array(arr));\n    },\n    _url: function(url) {\n      return write('url:' + url.toString(), 'utf8');\n    },\n    _map: function(map) {\n      write('map:');\n      var arr = Array.from(map);\n      return this._array(arr, options.unorderedSets !== false);\n    },\n    _set: function(set) {\n      write('set:');\n      var arr = Array.from(set);\n      return this._array(arr, options.unorderedSets !== false);\n    },\n    _file: function(file) {\n      write('file:');\n      return this.dispatch([file.name, file.size, file.type, file.lastModfied]);\n    },\n    _blob: function() {\n      if (options.ignoreUnknown) {\n        return write('[blob]');\n      }\n\n      throw Error('Hashing Blob objects is currently not supported\\n' +\n        '(see https://github.com/puleos/object-hash/issues/26)\\n' +\n        'Use \"options.replacer\" or \"options.ignoreUnknown\"\\n');\n    },\n    _domwindow: function() { return write('domwindow'); },\n    _bigint: function(number){\n      return write('bigint:' + number.toString());\n    },\n    /* Node.js standard native objects */\n    _process: function() { return write('process'); },\n    _timer: function() { return write('timer'); },\n    _pipe: function() { return write('pipe'); },\n    _tcp: function() { return write('tcp'); },\n    _udp: function() { return write('udp'); },\n    _tty: function() { return write('tty'); },\n    _statwatcher: function() { return write('statwatcher'); },\n    _securecontext: function() { return write('securecontext'); },\n    _connection: function() { return write('connection'); },\n    _zlib: function() { return write('zlib'); },\n    _context: function() { return write('context'); },\n    _nodescript: function() { return write('nodescript'); },\n    _httpparser: function() { return write('httpparser'); },\n    _dataview: function() { return write('dataview'); },\n    _signal: function() { return write('signal'); },\n    _fsevent: function() { return write('fsevent'); },\n    _tlswrap: function() { return write('tlswrap'); },\n  };\n}\n\n// Mini-implementation of stream.PassThrough\n// We are far from having need for the full implementation, and we can\n// make assumptions like \"many writes, then only one final read\"\n// and we can ignore encoding specifics\nfunction PassThrough() {\n  return {\n    buf: '',\n\n    write: function(b) {\n      this.buf += b;\n    },\n\n    end: function(b) {\n      this.buf += b;\n    },\n\n    read: function() {\n      return this.buf;\n    }\n  };\n}\n", "\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useCachedPromise = void 0;\nconst react_1 = require(\"react\");\nconst object_hash_1 = __importDefault(require(\"object-hash\"));\nconst useCachedState_1 = require(\"./useCachedState\");\nconst usePromise_1 = require(\"./usePromise\");\nconst useLatest_1 = require(\"./useLatest\");\n// Symbol to differentiate an empty cache from `undefined`\nconst emptyCache = Symbol();\nfunction useCachedPromise(fn, args, options) {\n    const { initialData, keepPreviousData, ...usePromiseOptions } = options || {};\n    const lastUpdateFrom = (0, react_1.useRef)();\n    const [cachedData, mutateCache] = (0, useCachedState_1.useCachedState)((0, object_hash_1.default)(args || []), emptyCache, {\n        cacheNamespace: (0, object_hash_1.default)(fn),\n    });\n    // Use a ref to store previous returned data. Use the inital data as its inital value from the cache.\n    const laggyDataRef = (0, react_1.useRef)(cachedData !== emptyCache ? cachedData : initialData);\n    const { mutate: _mutate, revalidate, ...state\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n     } = (0, usePromise_1.usePromise)(fn, args || [], {\n        ...usePromiseOptions,\n        onData(data) {\n            if (usePromiseOptions.onData) {\n                usePromiseOptions.onData(data);\n            }\n            // update the cache when we fetch new values\n            lastUpdateFrom.current = \"promise\";\n            laggyDataRef.current = data;\n            mutateCache(data);\n        },\n    });\n    // data returned if there are no special cases\n    const data = cachedData !== emptyCache ? cachedData : initialData;\n    const returnedData = \n    // if the latest update if from the Promise, we keep it\n    lastUpdateFrom.current === \"promise\"\n        ? laggyDataRef.current\n        : // if we want to keep the latest data, we pick the cache but only if it's not empty\n            keepPreviousData\n                ? cachedData !== emptyCache\n                    ? cachedData\n                    : // if the cache is empty, we will return the previous data\n                        laggyDataRef.current\n                : data;\n    const latestData = (0, useLatest_1.useLatest)(returnedData);\n    // we rewrite the mutate function to update the cache instead\n    const mutate = (0, react_1.useCallback)(async (asyncUpdate, options) => {\n        let dataBeforeOptimisticUpdate;\n        try {\n            if (options?.optimisticUpdate) {\n                if (typeof options?.rollbackOnError !== \"function\" && options?.rollbackOnError !== false) {\n                    // keep track of the data before the optimistic update,\n                    // but only if we need it (eg. only when we want to automatically rollback after)\n                    dataBeforeOptimisticUpdate = structuredClone(latestData.current);\n                }\n                const data = options.optimisticUpdate(latestData.current);\n                lastUpdateFrom.current = \"cache\";\n                laggyDataRef.current = data;\n                mutateCache(data);\n            }\n            return await _mutate(asyncUpdate, { shouldRevalidateAfter: options?.shouldRevalidateAfter });\n        }\n        catch (err) {\n            if (typeof options?.rollbackOnError === \"function\") {\n                const data = options.rollbackOnError(latestData.current);\n                lastUpdateFrom.current = \"cache\";\n                laggyDataRef.current = data;\n                mutateCache(data);\n            }\n            else if (options?.optimisticUpdate && options?.rollbackOnError !== false) {\n                lastUpdateFrom.current = \"cache\";\n                // @ts-expect-error when undefined, it's expected\n                laggyDataRef.current = dataBeforeOptimisticUpdate;\n                // @ts-expect-error when undefined, it's expected\n                mutateCache(dataBeforeOptimisticUpdate);\n            }\n            throw err;\n        }\n    }, [mutateCache, _mutate, latestData, laggyDataRef, lastUpdateFrom]);\n    (0, react_1.useEffect)(() => {\n        if (cachedData !== emptyCache) {\n            lastUpdateFrom.current = \"cache\";\n            laggyDataRef.current = cachedData;\n        }\n    }, [cachedData]);\n    return {\n        data: returnedData,\n        isLoading: state.isLoading,\n        error: state.error,\n        mutate,\n        revalidate,\n    };\n}\nexports.useCachedPromise = useCachedPromise;\n", "/*!\n * media-typer\n * Copyright(c) 2014-2017 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * RegExp to match type in RFC 6838\n *\n * type-name = restricted-name\n * subtype-name = restricted-name\n * restricted-name = restricted-name-first *126restricted-name-chars\n * restricted-name-first  = ALPHA / DIGIT\n * restricted-name-chars  = ALPHA / DIGIT / \"!\" / \"#\" /\n *                          \"$\" / \"&\" / \"-\" / \"^\" / \"_\"\n * restricted-name-chars =/ \".\" ; Characters before first dot always\n *                              ; specify a facet name\n * restricted-name-chars =/ \"+\" ; Characters after last plus always\n *                              ; specify a structured syntax suffix\n * ALPHA =  %x41-5A / %x61-7A   ; A-Z / a-z\n * DIGIT =  %x30-39             ; 0-9\n */\nvar SUBTYPE_NAME_REGEXP = /^[A-Za-z0-9][A-Za-z0-9!#$&^_.-]{0,126}$/\nvar TYPE_NAME_REGEXP = /^[A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126}$/\nvar TYPE_REGEXP = /^ *([A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126})\\/([A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126}) *$/\n\n/**\n * Module exports.\n */\n\nexports.format = format\nexports.parse = parse\nexports.test = test\n\n/**\n * Format object to media type.\n *\n * @param {object} obj\n * @return {string}\n * @public\n */\n\nfunction format (obj) {\n  if (!obj || typeof obj !== 'object') {\n    throw new TypeError('argument obj is required')\n  }\n\n  var subtype = obj.subtype\n  var suffix = obj.suffix\n  var type = obj.type\n\n  if (!type || !TYPE_NAME_REGEXP.test(type)) {\n    throw new TypeError('invalid type')\n  }\n\n  if (!subtype || !SUBTYPE_NAME_REGEXP.test(subtype)) {\n    throw new TypeError('invalid subtype')\n  }\n\n  // format as type/subtype\n  var string = type + '/' + subtype\n\n  // append +suffix\n  if (suffix) {\n    if (!TYPE_NAME_REGEXP.test(suffix)) {\n      throw new TypeError('invalid suffix')\n    }\n\n    string += '+' + suffix\n  }\n\n  return string\n}\n\n/**\n * Test media type.\n *\n * @param {string} string\n * @return {object}\n * @public\n */\n\nfunction test (string) {\n  if (!string) {\n    throw new TypeError('argument string is required')\n  }\n\n  if (typeof string !== 'string') {\n    throw new TypeError('argument string is required to be a string')\n  }\n\n  return TYPE_REGEXP.test(string.toLowerCase())\n}\n\n/**\n * Parse media type to object.\n *\n * @param {string} string\n * @return {object}\n * @public\n */\n\nfunction parse (string) {\n  if (!string) {\n    throw new TypeError('argument string is required')\n  }\n\n  if (typeof string !== 'string') {\n    throw new TypeError('argument string is required to be a string')\n  }\n\n  var match = TYPE_REGEXP.exec(string.toLowerCase())\n\n  if (!match) {\n    throw new TypeError('invalid media type')\n  }\n\n  var type = match[1]\n  var subtype = match[2]\n  var suffix\n\n  // suffix after last +\n  var index = subtype.lastIndexOf('+')\n  if (index !== -1) {\n    suffix = subtype.substr(index + 1)\n    subtype = subtype.substr(0, index)\n  }\n\n  return new MediaType(type, subtype, suffix)\n}\n\n/**\n * Class for MediaType object.\n * @public\n */\n\nfunction MediaType (type, subtype, suffix) {\n  this.type = type\n  this.subtype = subtype\n  this.suffix = suffix\n}\n", "/*!\n * content-type\n * Copyright(c) 2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * RegExp to match *( \";\" parameter ) in RFC 7231 sec 3.1.1.1\n *\n * parameter     = token \"=\" ( token / quoted-string )\n * token         = 1*tchar\n * tchar         = \"!\" / \"#\" / \"$\" / \"%\" / \"&\" / \"'\" / \"*\"\n *               / \"+\" / \"-\" / \".\" / \"^\" / \"_\" / \"`\" / \"|\" / \"~\"\n *               / DIGIT / ALPHA\n *               ; any VCHAR, except delimiters\n * quoted-string = DQUOTE *( qdtext / quoted-pair ) DQUOTE\n * qdtext        = HTAB / SP / %x21 / %x23-5B / %x5D-7E / obs-text\n * obs-text      = %x80-FF\n * quoted-pair   = \"\\\" ( HTAB / SP / VCHAR / obs-text )\n */\nvar PARAM_REGEXP = /; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *(\"(?:[\\u000b\\u0020\\u0021\\u0023-\\u005b\\u005d-\\u007e\\u0080-\\u00ff]|\\\\[\\u000b\\u0020-\\u00ff])*\"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g // eslint-disable-line no-control-regex\nvar TEXT_REGEXP = /^[\\u000b\\u0020-\\u007e\\u0080-\\u00ff]+$/ // eslint-disable-line no-control-regex\nvar TOKEN_REGEXP = /^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/\n\n/**\n * RegExp to match quoted-pair in RFC 7230 sec 3.2.6\n *\n * quoted-pair = \"\\\" ( HTAB / SP / VCHAR / obs-text )\n * obs-text    = %x80-FF\n */\nvar QESC_REGEXP = /\\\\([\\u000b\\u0020-\\u00ff])/g // eslint-disable-line no-control-regex\n\n/**\n * RegExp to match chars that must be quoted-pair in RFC 7230 sec 3.2.6\n */\nvar QUOTE_REGEXP = /([\\\\\"])/g\n\n/**\n * RegExp to match type in RFC 7231 sec 3.1.1.1\n *\n * media-type = type \"/\" subtype\n * type       = token\n * subtype    = token\n */\nvar TYPE_REGEXP = /^[!#$%&'*+.^_`|~0-9A-Za-z-]+\\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/\n\n/**\n * Module exports.\n * @public\n */\n\nexports.format = format\nexports.parse = parse\n\n/**\n * Format object to media type.\n *\n * @param {object} obj\n * @return {string}\n * @public\n */\n\nfunction format (obj) {\n  if (!obj || typeof obj !== 'object') {\n    throw new TypeError('argument obj is required')\n  }\n\n  var parameters = obj.parameters\n  var type = obj.type\n\n  if (!type || !TYPE_REGEXP.test(type)) {\n    throw new TypeError('invalid type')\n  }\n\n  var string = type\n\n  // append parameters\n  if (parameters && typeof parameters === 'object') {\n    var param\n    var params = Object.keys(parameters).sort()\n\n    for (var i = 0; i < params.length; i++) {\n      param = params[i]\n\n      if (!TOKEN_REGEXP.test(param)) {\n        throw new TypeError('invalid parameter name')\n      }\n\n      string += '; ' + param + '=' + qstring(parameters[param])\n    }\n  }\n\n  return string\n}\n\n/**\n * Parse media type to object.\n *\n * @param {string|object} string\n * @return {Object}\n * @public\n */\n\nfunction parse (string) {\n  if (!string) {\n    throw new TypeError('argument string is required')\n  }\n\n  // support req/res-like objects as argument\n  var header = typeof string === 'object'\n    ? getcontenttype(string)\n    : string\n\n  if (typeof header !== 'string') {\n    throw new TypeError('argument string is required to be a string')\n  }\n\n  var index = header.indexOf(';')\n  var type = index !== -1\n    ? header.slice(0, index).trim()\n    : header.trim()\n\n  if (!TYPE_REGEXP.test(type)) {\n    throw new TypeError('invalid media type')\n  }\n\n  var obj = new ContentType(type.toLowerCase())\n\n  // parse parameters\n  if (index !== -1) {\n    var key\n    var match\n    var value\n\n    PARAM_REGEXP.lastIndex = index\n\n    while ((match = PARAM_REGEXP.exec(header))) {\n      if (match.index !== index) {\n        throw new TypeError('invalid parameter format')\n      }\n\n      index += match[0].length\n      key = match[1].toLowerCase()\n      value = match[2]\n\n      if (value.charCodeAt(0) === 0x22 /* \" */) {\n        // remove quotes\n        value = value.slice(1, -1)\n\n        // remove escapes\n        if (value.indexOf('\\\\') !== -1) {\n          value = value.replace(QESC_REGEXP, '$1')\n        }\n      }\n\n      obj.parameters[key] = value\n    }\n\n    if (index !== header.length) {\n      throw new TypeError('invalid parameter format')\n    }\n  }\n\n  return obj\n}\n\n/**\n * Get content-type from req/res objects.\n *\n * @param {object}\n * @return {Object}\n * @private\n */\n\nfunction getcontenttype (obj) {\n  var header\n\n  if (typeof obj.getHeader === 'function') {\n    // res-like\n    header = obj.getHeader('content-type')\n  } else if (typeof obj.headers === 'object') {\n    // req-like\n    header = obj.headers && obj.headers['content-type']\n  }\n\n  if (typeof header !== 'string') {\n    throw new TypeError('content-type header is missing from object')\n  }\n\n  return header\n}\n\n/**\n * Quote a string if necessary.\n *\n * @param {string} val\n * @return {string}\n * @private\n */\n\nfunction qstring (val) {\n  var str = String(val)\n\n  // no need to quote tokens\n  if (TOKEN_REGEXP.test(str)) {\n    return str\n  }\n\n  if (str.length > 0 && !TEXT_REGEXP.test(str)) {\n    throw new TypeError('invalid parameter value')\n  }\n\n  return '\"' + str.replace(QUOTE_REGEXP, '\\\\$1') + '\"'\n}\n\n/**\n * Class to represent a content type.\n * @private\n */\nfunction ContentType (type) {\n  this.parameters = Object.create(null)\n  this.type = type\n}\n", "\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useFetch = void 0;\nconst react_1 = require(\"react\");\nconst media_typer_1 = __importDefault(require(\"media-typer\"));\nconst content_type_1 = __importDefault(require(\"content-type\"));\nconst useCachedPromise_1 = require(\"./useCachedPromise\");\nconst useLatest_1 = require(\"./useLatest\");\nconst cross_fetch_1 = require(\"cross-fetch\");\nfunction isJSON(contentTypeHeader) {\n    if (contentTypeHeader) {\n        const ct = content_type_1.default.parse(contentTypeHeader);\n        const mediaType = media_typer_1.default.parse(ct.type);\n        if (mediaType.subtype === \"json\") {\n            return true;\n        }\n        if (mediaType.suffix === \"json\") {\n            return true;\n        }\n        if (mediaType.suffix && /\\bjson\\b/i.test(mediaType.suffix)) {\n            return true;\n        }\n        if (mediaType.subtype && /\\bjson\\b/i.test(mediaType.subtype)) {\n            return true;\n        }\n    }\n    return false;\n}\nasync function defaultParsing(response) {\n    if (!response.ok) {\n        throw new Error(response.statusText);\n    }\n    const contentTypeHeader = response.headers.get(\"content-type\");\n    if (contentTypeHeader && isJSON(contentTypeHeader)) {\n        return await response.json();\n    }\n    return await response.text();\n}\n/**\n * Fetch the URL and returns the {@link AsyncState} corresponding to the execution of the fetch. The last value will be kept between command runs.\n *\n * @example\n * ```\n * import { useFetch } from '@raycast/utils';\n *\n * const Demo = () => {\n *   const { isLoading, data, revalidate } = useFetch('https://api.example');\n *\n *   return (\n *     <Detail\n *       isLoading={isLoading}\n *       markdown={data}\n *       actions={\n *         <ActionPanel>\n *           <Action title=\"Reload\" onAction={() => revalidate()} />\n *         </ActionPanel>\n *       }\n *     />\n *   );\n * };\n * ```\n */\nfunction useFetch(url, options) {\n    const { parseResponse, initialData, execute, keepPreviousData, onError, onData, onWillExecute, ...fetchOptions } = options || {};\n    const useCachedPromiseOptions = {\n        initialData,\n        execute,\n        keepPreviousData,\n        onError,\n        onData,\n        onWillExecute,\n    };\n    const parseResponseRef = (0, useLatest_1.useLatest)(parseResponse || defaultParsing);\n    const abortable = (0, react_1.useRef)();\n    const fn = (0, react_1.useCallback)(async (url, options) => {\n        const res = await (0, cross_fetch_1.fetch)(url, { signal: abortable.current?.signal, ...options });\n        return (await parseResponseRef.current(res));\n    }, [parseResponseRef]);\n    // @ts-expect-error T can't be a Promise so it's actually the same\n    return (0, useCachedPromise_1.useCachedPromise)(fn, [url, fetchOptions], { ...useCachedPromiseOptions, abortable });\n}\nexports.useFetch = useFetch;\n", "// This is not the set of all possible signals.\n//\n// It IS, however, the set of all signals that trigger\n// an exit on either Linux or BSD systems.  Linux is a\n// superset of the signal names supported on BSD, and\n// the unknown signals just fail to register, so we can\n// catch that easily enough.\n//\n// Don't bother with SIGKILL.  It's uncatchable, which\n// means that we can't fire any callbacks anyway.\n//\n// If a user does happen to register a handler on a non-\n// fatal signal like SIGWINCH or something, and then\n// exit, it'll end up firing `process.emit('exit')`, so\n// the handler will be fired anyway.\n//\n// SIGBUS, SIGFPE, SIGSEGV and SIGILL, when not raised\n// artificially, inherently leave the process in a\n// state from which it is not safe to try and enter JS\n// listeners.\nmodule.exports = [\n  'SIGABRT',\n  'SIGALRM',\n  'SIGHUP',\n  'SIGINT',\n  'SIGTERM'\n]\n\nif (process.platform !== 'win32') {\n  module.exports.push(\n    'SIGVTALRM',\n    'SIGXCPU',\n    'SIGXFSZ',\n    'SIGUSR2',\n    'SIGTRAP',\n    'SIGSYS',\n    'SIGQUIT',\n    'SIGIOT'\n    // should detect profiler and enable/disable accordingly.\n    // see #21\n    // 'SIGPROF'\n  )\n}\n\nif (process.platform === 'linux') {\n  module.exports.push(\n    'SIGIO',\n    'SIGPOLL',\n    'SIGPWR',\n    'SIGSTKFLT',\n    'SIGUNUSED'\n  )\n}\n", "// Note: since nyc uses this module to output coverage, any lines\n// that are in the direct sync flow of nyc's outputCoverage are\n// ignored, since we can never get coverage for them.\n// grab a reference to node's real process object right away\nvar process = global.process\n\nconst processOk = function (process) {\n  return process &&\n    typeof process === 'object' &&\n    typeof process.removeListener === 'function' &&\n    typeof process.emit === 'function' &&\n    typeof process.reallyExit === 'function' &&\n    typeof process.listeners === 'function' &&\n    typeof process.kill === 'function' &&\n    typeof process.pid === 'number' &&\n    typeof process.on === 'function'\n}\n\n// some kind of non-node environment, just no-op\n/* istanbul ignore if */\nif (!processOk(process)) {\n  module.exports = function () {\n    return function () {}\n  }\n} else {\n  var assert = require('assert')\n  var signals = require('./signals.js')\n  var isWin = /^win/i.test(process.platform)\n\n  var EE = require('events')\n  /* istanbul ignore if */\n  if (typeof EE !== 'function') {\n    EE = EE.EventEmitter\n  }\n\n  var emitter\n  if (process.__signal_exit_emitter__) {\n    emitter = process.__signal_exit_emitter__\n  } else {\n    emitter = process.__signal_exit_emitter__ = new EE()\n    emitter.count = 0\n    emitter.emitted = {}\n  }\n\n  // Because this emitter is a global, we have to check to see if a\n  // previous version of this library failed to enable infinite listeners.\n  // I know what you're about to say.  But literally everything about\n  // signal-exit is a compromise with evil.  Get used to it.\n  if (!emitter.infinite) {\n    emitter.setMaxListeners(Infinity)\n    emitter.infinite = true\n  }\n\n  module.exports = function (cb, opts) {\n    /* istanbul ignore if */\n    if (!processOk(global.process)) {\n      return function () {}\n    }\n    assert.equal(typeof cb, 'function', 'a callback must be provided for exit handler')\n\n    if (loaded === false) {\n      load()\n    }\n\n    var ev = 'exit'\n    if (opts && opts.alwaysLast) {\n      ev = 'afterexit'\n    }\n\n    var remove = function () {\n      emitter.removeListener(ev, cb)\n      if (emitter.listeners('exit').length === 0 &&\n          emitter.listeners('afterexit').length === 0) {\n        unload()\n      }\n    }\n    emitter.on(ev, cb)\n\n    return remove\n  }\n\n  var unload = function unload () {\n    if (!loaded || !processOk(global.process)) {\n      return\n    }\n    loaded = false\n\n    signals.forEach(function (sig) {\n      try {\n        process.removeListener(sig, sigListeners[sig])\n      } catch (er) {}\n    })\n    process.emit = originalProcessEmit\n    process.reallyExit = originalProcessReallyExit\n    emitter.count -= 1\n  }\n  module.exports.unload = unload\n\n  var emit = function emit (event, code, signal) {\n    /* istanbul ignore if */\n    if (emitter.emitted[event]) {\n      return\n    }\n    emitter.emitted[event] = true\n    emitter.emit(event, code, signal)\n  }\n\n  // { <signal>: <listener fn>, ... }\n  var sigListeners = {}\n  signals.forEach(function (sig) {\n    sigListeners[sig] = function listener () {\n      /* istanbul ignore if */\n      if (!processOk(global.process)) {\n        return\n      }\n      // If there are no other listeners, an exit is coming!\n      // Simplest way: remove us and then re-send the signal.\n      // We know that this will kill the process, so we can\n      // safely emit now.\n      var listeners = process.listeners(sig)\n      if (listeners.length === emitter.count) {\n        unload()\n        emit('exit', null, sig)\n        /* istanbul ignore next */\n        emit('afterexit', null, sig)\n        /* istanbul ignore next */\n        if (isWin && sig === 'SIGHUP') {\n          // \"SIGHUP\" throws an `ENOSYS` error on Windows,\n          // so use a supported signal instead\n          sig = 'SIGINT'\n        }\n        /* istanbul ignore next */\n        process.kill(process.pid, sig)\n      }\n    }\n  })\n\n  module.exports.signals = function () {\n    return signals\n  }\n\n  var loaded = false\n\n  var load = function load () {\n    if (loaded || !processOk(global.process)) {\n      return\n    }\n    loaded = true\n\n    // This is the number of onSignalExit's that are in play.\n    // It's important so that we can count the correct number of\n    // listeners on signals, and don't wait for the other one to\n    // handle it instead of us.\n    emitter.count += 1\n\n    signals = signals.filter(function (sig) {\n      try {\n        process.on(sig, sigListeners[sig])\n        return true\n      } catch (er) {\n        return false\n      }\n    })\n\n    process.emit = processEmit\n    process.reallyExit = processReallyExit\n  }\n  module.exports.load = load\n\n  var originalProcessReallyExit = process.reallyExit\n  var processReallyExit = function processReallyExit (code) {\n    /* istanbul ignore if */\n    if (!processOk(global.process)) {\n      return\n    }\n    process.exitCode = code || /* istanbul ignore next */ 0\n    emit('exit', process.exitCode, null)\n    /* istanbul ignore next */\n    emit('afterexit', process.exitCode, null)\n    /* istanbul ignore next */\n    originalProcessReallyExit.call(process, process.exitCode)\n  }\n\n  var originalProcessEmit = process.emit\n  var processEmit = function processEmit (ev, arg) {\n    if (ev === 'exit' && processOk(global.process)) {\n      /* istanbul ignore else */\n      if (arg !== undefined) {\n        process.exitCode = arg\n      }\n      var ret = originalProcessEmit.apply(this, arguments)\n      /* istanbul ignore next */\n      emit('exit', process.exitCode, null)\n      /* istanbul ignore next */\n      emit('afterexit', process.exitCode, null)\n      /* istanbul ignore next */\n      return ret\n    } else {\n      return originalProcessEmit.apply(this, arguments)\n    }\n  }\n}\n", "\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getSpawnedResult = exports.getSpawnedPromise = void 0;\nconst node_buffer_1 = require(\"node:buffer\");\nconst node_stream_1 = __importDefault(require(\"node:stream\"));\nconst node_util_1 = require(\"node:util\");\nconst signal_exit_1 = __importDefault(require(\"signal-exit\"));\nfunction getSpawnedPromise(spawned, { timeout } = {}) {\n    const spawnedPromise = new Promise((resolve, reject) => {\n        spawned.on(\"exit\", (exitCode, signal) => {\n            resolve({ exitCode, signal, timedOut: false });\n        });\n        spawned.on(\"error\", (error) => {\n            reject(error);\n        });\n        if (spawned.stdin) {\n            spawned.stdin.on(\"error\", (error) => {\n                reject(error);\n            });\n        }\n    });\n    if (timeout === 0 || timeout === undefined) {\n        return spawnedPromise;\n    }\n    let timeoutId;\n    const timeoutPromise = new Promise((_resolve, reject) => {\n        timeoutId = setTimeout(() => {\n            spawned.kill(\"SIGTERM\");\n            reject(Object.assign(new Error(\"Timed out\"), { timedOut: true, signal: \"SIGTERM\" }));\n        }, timeout);\n    });\n    const safeSpawnedPromise = spawnedPromise.finally(() => {\n        clearTimeout(timeoutId);\n    });\n    const removeExitHandler = (0, signal_exit_1.default)(() => {\n        spawned.kill();\n    });\n    return Promise.race([timeoutPromise, safeSpawnedPromise]).finally(() => removeExitHandler());\n}\nexports.getSpawnedPromise = getSpawnedPromise;\nclass MaxBufferError extends Error {\n    constructor() {\n        super(\"The output is too big\");\n        this.name = \"MaxBufferError\";\n    }\n}\nconst streamPipelinePromisified = (0, node_util_1.promisify)(node_stream_1.default.pipeline);\nfunction bufferStream(options) {\n    const { encoding } = options;\n    const isBuffer = encoding === \"buffer\";\n    // @ts-expect-error missing the methods we are adding below\n    const stream = new node_stream_1.default.PassThrough({ objectMode: false });\n    if (encoding && encoding !== \"buffer\") {\n        stream.setEncoding(encoding);\n    }\n    let length = 0;\n    const chunks = [];\n    stream.on(\"data\", (chunk) => {\n        chunks.push(chunk);\n        length += chunk.length;\n    });\n    stream.getBufferedValue = () => {\n        return (isBuffer ? Buffer.concat(chunks, length) : chunks.join(\"\"));\n    };\n    stream.getBufferedLength = () => length;\n    return stream;\n}\nasync function getStream(inputStream, options) {\n    const stream = bufferStream(options);\n    await new Promise((resolve, reject) => {\n        const rejectPromise = (error) => {\n            // Don't retrieve an oversized buffer.\n            if (error && stream.getBufferedLength() <= node_buffer_1.constants.MAX_LENGTH) {\n                error.bufferedData = stream.getBufferedValue();\n            }\n            reject(error);\n        };\n        (async () => {\n            try {\n                await streamPipelinePromisified(inputStream, stream);\n                resolve();\n            }\n            catch (error) {\n                rejectPromise(error);\n            }\n        })();\n        stream.on(\"data\", () => {\n            // 80mb\n            if (stream.getBufferedLength() > 1000 * 1000 * 80) {\n                rejectPromise(new MaxBufferError());\n            }\n        });\n    });\n    return stream.getBufferedValue();\n}\n// On failure, `result.stdout|stderr` should contain the currently buffered stream\nasync function getBufferedData(stream, streamPromise) {\n    stream.destroy();\n    try {\n        return await streamPromise;\n    }\n    catch (error) {\n        return error.bufferedData;\n    }\n}\nasync function getSpawnedResult({ stdout, stderr }, { encoding }, processDone) {\n    const stdoutPromise = getStream(stdout, { encoding });\n    const stderrPromise = getStream(stderr, { encoding });\n    try {\n        return await Promise.all([processDone, stdoutPromise, stderrPromise]);\n    }\n    catch (error) {\n        return Promise.all([\n            {\n                error: error,\n                exitCode: null,\n                signal: error.signal,\n                timedOut: error.timedOut || false,\n            },\n            getBufferedData(stdout, stdoutPromise),\n            getBufferedData(stderr, stderrPromise),\n        ]);\n    }\n}\nexports.getSpawnedResult = getSpawnedResult;\n", "\"use strict\";\n/*\n * Inspired by Execa\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useExec = void 0;\nconst node_child_process_1 = __importDefault(require(\"node:child_process\"));\nconst react_1 = require(\"react\");\nconst useCachedPromise_1 = require(\"./useCachedPromise\");\nconst useLatest_1 = require(\"./useLatest\");\nconst exec_utils_1 = require(\"./exec-utils\");\nconst SPACES_REGEXP = / +/g;\nfunction parseCommand(command, args) {\n    if (args) {\n        return [command, ...args];\n    }\n    const tokens = [];\n    for (const token of command.trim().split(SPACES_REGEXP)) {\n        // Allow spaces to be escaped by a backslash if not meant as a delimiter\n        const previousToken = tokens[tokens.length - 1];\n        if (previousToken && previousToken.endsWith(\"\\\\\")) {\n            // Merge previous token with current one\n            tokens[tokens.length - 1] = `${previousToken.slice(0, -1)} ${token}`;\n        }\n        else {\n            tokens.push(token);\n        }\n    }\n    return tokens;\n}\nfunction stripFinalNewline(input) {\n    const LF = typeof input === \"string\" ? \"\\n\" : \"\\n\".charCodeAt(0);\n    const CR = typeof input === \"string\" ? \"\\r\" : \"\\r\".charCodeAt(0);\n    if (input[input.length - 1] === LF) {\n        // @ts-expect-error we are doing some nasty stuff here\n        input = input.slice(0, -1);\n    }\n    if (input[input.length - 1] === CR) {\n        // @ts-expect-error we are doing some nasty stuff here\n        input = input.slice(0, -1);\n    }\n    return input;\n}\nfunction handleOutput(options, value) {\n    if (options.stripFinalNewline) {\n        return stripFinalNewline(value);\n    }\n    return value;\n}\nconst getErrorPrefix = ({ timedOut, timeout, signal, exitCode, }) => {\n    if (timedOut) {\n        return `timed out after ${timeout} milliseconds`;\n    }\n    if (signal !== undefined) {\n        return `was killed with ${signal}`;\n    }\n    if (exitCode !== undefined) {\n        return `failed with exit code ${exitCode}`;\n    }\n    return \"failed\";\n};\nconst makeError = ({ stdout, stderr, error, signal, exitCode, command, timedOut, options, }) => {\n    const prefix = getErrorPrefix({ timedOut, timeout: options?.timeout, signal, exitCode });\n    const execaMessage = `Command ${prefix}: ${command}`;\n    const shortMessage = error ? `${execaMessage}\\n${error.message}` : execaMessage;\n    const message = [shortMessage, stderr, stdout].filter(Boolean).join(\"\\n\");\n    if (error) {\n        // @ts-expect-error not on Error\n        error.originalMessage = error.message;\n        error.message = message;\n    }\n    else {\n        error = new Error(message);\n    }\n    // @ts-expect-error not on Error\n    error.shortMessage = shortMessage;\n    // @ts-expect-error not on Error\n    error.command = command;\n    // @ts-expect-error not on Error\n    error.exitCode = exitCode;\n    // @ts-expect-error not on Error\n    error.signal = signal;\n    // @ts-expect-error not on Error\n    error.stdout = stdout;\n    // @ts-expect-error not on Error\n    error.stderr = stderr;\n    if (\"bufferedData\" in error) {\n        delete error[\"bufferedData\"];\n    }\n    return error;\n};\nfunction defaultParsing({ stdout, stderr, error, exitCode, signal, timedOut, command, options, }) {\n    if (error || exitCode !== 0 || signal !== null) {\n        const returnedError = makeError({\n            error,\n            exitCode,\n            signal,\n            stdout,\n            stderr,\n            command,\n            timedOut,\n            options,\n        });\n        throw returnedError;\n    }\n    return stdout;\n}\nfunction useExec(command, optionsOrArgs, options) {\n    const { parseOutput, input, onData, onWillExecute, initialData, execute, keepPreviousData, onError, ...execOptions } = Array.isArray(optionsOrArgs) ? options || {} : optionsOrArgs || {};\n    const useCachedPromiseOptions = {\n        initialData,\n        execute,\n        keepPreviousData,\n        onError,\n        onData,\n        onWillExecute,\n    };\n    const abortable = (0, react_1.useRef)();\n    const parseOutputRef = (0, useLatest_1.useLatest)(parseOutput || defaultParsing);\n    const fn = (0, react_1.useCallback)(async (_command, _args, _options, input) => {\n        const [file, ...args] = parseCommand(_command, _args);\n        const command = [file, ...args].join(\" \");\n        const options = {\n            stripFinalNewline: true,\n            ..._options,\n            signal: abortable.current?.signal,\n            encoding: _options?.encoding === null ? \"buffer\" : _options?.encoding || \"utf8\",\n            env: { ...process.env, ..._options?.env },\n        };\n        const spawned = node_child_process_1.default.spawn(file, args, options);\n        const spawnedPromise = (0, exec_utils_1.getSpawnedPromise)(spawned, options);\n        if (input) {\n            spawned.stdin.end(input);\n        }\n        const [{ error, exitCode, signal, timedOut }, stdoutResult, stderrResult] = await (0, exec_utils_1.getSpawnedResult)(spawned, options, spawnedPromise);\n        const stdout = handleOutput(options, stdoutResult);\n        const stderr = handleOutput(options, stderrResult);\n        return parseOutputRef.current({\n            // @ts-expect-error too many generics, I give up\n            stdout,\n            // @ts-expect-error too many generics, I give up\n            stderr,\n            error,\n            exitCode,\n            signal,\n            timedOut,\n            command,\n            options,\n        });\n    }, [parseOutputRef]);\n    // @ts-expect-error T can't be a Promise so it's actually the same\n    return (0, useCachedPromise_1.useCachedPromise)(fn, [command, Array.isArray(optionsOrArgs) ? optionsOrArgs : [], execOptions, input], {\n        ...useCachedPromiseOptions,\n        abortable,\n    });\n}\nexports.useExec = useExec;\n", "\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useSQL = void 0;\nconst jsx_runtime_1 = require(\"react/jsx-runtime\");\nconst api_1 = require(\"@raycast/api\");\nconst node_fs_1 = require(\"node:fs\");\nconst promises_1 = require(\"node:fs/promises\");\nconst node_os_1 = __importDefault(require(\"node:os\"));\nconst node_child_process_1 = __importDefault(require(\"node:child_process\"));\nconst node_path_1 = __importDefault(require(\"node:path\"));\nconst object_hash_1 = __importDefault(require(\"object-hash\"));\nconst react_1 = require(\"react\");\nconst usePromise_1 = require(\"./usePromise\");\nconst useLatest_1 = require(\"./useLatest\");\nconst exec_utils_1 = require(\"./exec-utils\");\nconst handle_error_toast_action_1 = require(\"./handle-error-toast-action\");\n/**\n * Executes a query on a local SQL database and returns the {@link AsyncState} corresponding to the query of the command. The last value will be kept between command runs.\n *\n * @example\n * ```\n * import { useSQL } from \"@raycast/utils\";\n * import { resolve } from \"path\";\n * import { homedir } from \"os\";\n *\n * const NOTES_DB = resolve(homedir(), \"Library/Group Containers/group.com.apple.notes/NoteStore.sqlite\");\n * const notesQuery = `SELECT id, title FROM ...`;\n * type NoteItem = {\n *   id: string;\n *   title: string;\n * };\n *\n * const Demo = () => {\n *   const { isLoading, data, permissionView } = useSQL<NoteItem>(NOTES_DB, notesQuery);\n *\n *   if (permissionView) {\n *     return permissionView;\n *   }\n *\n *   return (\n *     <List isLoading={isLoading}>\n *       {(data || []).map((item) => (\n *         <List.Item key={item.id} title={item.title} />\n *       ))}\n *     </List>\n *  );\n * };\n * ```\n */\nfunction useSQL(databasePath, query, options) {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    const { permissionPriming, ...usePromiseOptions } = options || {};\n    const [permissionView, setPermissionView] = (0, react_1.useState)();\n    const latestOptions = (0, useLatest_1.useLatest)(options || {});\n    const abortable = (0, react_1.useRef)();\n    const handleError = (0, react_1.useCallback)((_error) => {\n        console.error(_error);\n        const error = _error instanceof Error && _error.message.includes(\"authorization denied\")\n            ? new PermissionError(\"You do not have permission to access the database.\")\n            : _error;\n        if (isPermissionError(error)) {\n            setPermissionView((0, jsx_runtime_1.jsx)(PermissionErrorScreen, { priming: latestOptions.current.permissionPriming }));\n        }\n        else {\n            if (latestOptions.current.onError) {\n                latestOptions.current.onError(error);\n            }\n            else {\n                console.error(error);\n                if (api_1.environment.launchType !== api_1.LaunchType.Background) {\n                    (0, api_1.showToast)({\n                        style: api_1.Toast.Style.Failure,\n                        title: \"Cannot query the data\",\n                        message: error.message,\n                        primaryAction: (0, handle_error_toast_action_1.handleErrorToastAction)(error),\n                    });\n                }\n            }\n        }\n    }, [latestOptions]);\n    const fn = (0, react_1.useMemo)(() => {\n        if (!(0, node_fs_1.existsSync)(databasePath)) {\n            throw new Error(\"The database does not exist\");\n        }\n        let workaroundCopiedDb = undefined;\n        return async (query) => {\n            const abortSignal = abortable.current?.signal;\n            const spawned = node_child_process_1.default.spawn(\"sqlite3\", [\"--json\", \"--readonly\", databasePath, query], {\n                signal: abortSignal,\n            });\n            const spawnedPromise = (0, exec_utils_1.getSpawnedPromise)(spawned);\n            let [{ error, exitCode, signal }, stdoutResult, stderrResult] = await (0, exec_utils_1.getSpawnedResult)(spawned, { encoding: \"utf-8\" }, spawnedPromise);\n            checkAborted(abortSignal);\n            if (stderrResult.match(\"(5)\") || stderrResult.match(\"(14)\")) {\n                // That means that the DB is busy because of another app is locking it\n                // This happens when Chrome or Arc is opened: they lock the History db.\n                // As an ugly workaround, we duplicate the file and read that instead\n                // (with vfs unix - none to just not care about locks)\n                if (!workaroundCopiedDb) {\n                    const tempFolder = node_path_1.default.join(node_os_1.default.tmpdir(), \"useSQL\", (0, object_hash_1.default)(databasePath));\n                    await (0, promises_1.mkdir)(tempFolder, { recursive: true });\n                    checkAborted(abortSignal);\n                    workaroundCopiedDb = node_path_1.default.join(tempFolder, \"db.db\");\n                    await (0, promises_1.copyFile)(databasePath, workaroundCopiedDb);\n                    // needed for certain db\n                    await (0, promises_1.writeFile)(workaroundCopiedDb + \"-shm\", \"\");\n                    await (0, promises_1.writeFile)(workaroundCopiedDb + \"-wal\", \"\");\n                    checkAborted(abortSignal);\n                }\n                const spawned = node_child_process_1.default.spawn(\"sqlite3\", [\"--json\", \"--readonly\", \"--vfs\", \"unix-none\", workaroundCopiedDb, query], {\n                    signal: abortSignal,\n                });\n                const spawnedPromise = (0, exec_utils_1.getSpawnedPromise)(spawned);\n                [{ error, exitCode, signal }, stdoutResult, stderrResult] = await (0, exec_utils_1.getSpawnedResult)(spawned, { encoding: \"utf-8\" }, spawnedPromise);\n                checkAborted(abortSignal);\n            }\n            if (error || exitCode !== 0 || signal !== null) {\n                throw new Error(stderrResult);\n            }\n            return JSON.parse(stdoutResult.trim() || \"[]\");\n        };\n    }, [databasePath]);\n    return {\n        ...(0, usePromise_1.usePromise)(fn, [query], { ...usePromiseOptions, onError: handleError }),\n        permissionView,\n    };\n}\nexports.useSQL = useSQL;\nclass PermissionError extends Error {\n    constructor(message) {\n        super(message);\n        this.name = \"PermissionError\";\n    }\n}\nfunction isPermissionError(error) {\n    return error instanceof Error && error.name === \"PermissionError\";\n}\nconst macosVenturaAndLater = parseInt(node_os_1.default.release().split(\".\")[0]) >= 22;\nconst preferencesString = macosVenturaAndLater ? \"Settings\" : \"Preferences\";\nfunction PermissionErrorScreen(props) {\n    const action = macosVenturaAndLater\n        ? {\n            title: \"Open System Settings -> Privacy\",\n            target: \"x-apple.systempreferences:com.apple.preference.security?Privacy_AllFiles\",\n        }\n        : {\n            title: \"Open System Preferences -> Security\",\n            target: \"x-apple.systempreferences:com.apple.preference.security?Privacy_AllFiles\",\n        };\n    if (api_1.environment.commandMode === \"menu-bar\") {\n        return ((0, jsx_runtime_1.jsxs)(api_1.MenuBarExtra, { icon: api_1.Icon.Warning, title: api_1.environment.commandName, children: [(0, jsx_runtime_1.jsx)(api_1.MenuBarExtra.Item, { title: \"Raycast needs full disk access\", tooltip: `You can revert this access in ${preferencesString} whenever you want` }), props.priming ? ((0, jsx_runtime_1.jsx)(api_1.MenuBarExtra.Item, { title: props.priming, tooltip: `You can revert this access in ${preferencesString} whenever you want` })) : null, (0, jsx_runtime_1.jsx)(api_1.MenuBarExtra.Separator, {}), (0, jsx_runtime_1.jsx)(api_1.MenuBarExtra.Item, { title: action.title, onAction: () => (0, api_1.open)(action.target) })] }));\n    }\n    return ((0, jsx_runtime_1.jsx)(api_1.List, { children: (0, jsx_runtime_1.jsx)(api_1.List.EmptyView, { icon: {\n                source: {\n                    light: \"https://raycast.com/uploads/extensions-utils-security-permissions-light.png\",\n                    dark: \"https://raycast.com/uploads/extensions-utils-security-permissions-dark.png\",\n                },\n            }, title: \"Raycast needs full disk access.\", description: `${props.priming ? props.priming + \"\\n\" : \"\"}You can revert this access in ${preferencesString} whenever you want.`, actions: (0, jsx_runtime_1.jsx)(api_1.ActionPanel, { children: (0, jsx_runtime_1.jsx)(api_1.Action.Open, { ...action }) }) }) }));\n}\nfunction checkAborted(signal) {\n    if (signal?.aborted) {\n        const error = new Error(\"aborted\");\n        error.name = \"AbortError\";\n        throw error;\n    }\n}\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useForm = exports.FormValidation = void 0;\nconst react_1 = require(\"react\");\nconst useLatest_1 = require(\"./useLatest\");\n/**\n * Shorthands for common validation cases\n */\nvar FormValidation;\n(function (FormValidation) {\n    /** Show an error when the value of the item is empty */\n    FormValidation[\"Required\"] = \"required\";\n})(FormValidation = exports.FormValidation || (exports.FormValidation = {}));\nfunction validationError(validation, value) {\n    if (validation) {\n        if (typeof validation === \"function\") {\n            return validation(value);\n        }\n        else if (validation === FormValidation.Required) {\n            let valueIsValid = typeof value !== \"undefined\" && value !== null;\n            if (valueIsValid) {\n                switch (typeof value) {\n                    case \"string\":\n                        valueIsValid = value.length > 0;\n                        break;\n                    case \"object\":\n                        if (Array.isArray(value)) {\n                            valueIsValid = value.length > 0;\n                        }\n                        else if (value instanceof Date) {\n                            valueIsValid = value.getTime() > 0;\n                        }\n                        break;\n                    default:\n                        break;\n                }\n            }\n            if (!valueIsValid) {\n                return \"The item is required\";\n            }\n        }\n    }\n}\n/**\n * Hook that provides a high-level interface to work with Forms, and more particularly, with Form validations. It incorporates all the good practices to provide a great User Experience for your Forms.\n *\n * @returns an object which contains the necessary methods and props to provide a good User Experience in your Form.\n *\n * @example\n * ```\n * import { Action, ActionPanel, Form, showToast, Toast } from \"@raycast/api\";\n * import { useForm, FormValidation } from \"@raycast/utils\";\n *\n * interface SignUpFormValues {\n *   nickname: string;\n *   password: string;\n * }\n *\n * export default function Main() {\n *   const { handleSubmit, itemProps } = useForm<SignUpFormValues>({\n *     onSubmit(values) {\n *       showToast(Toast.Style.Success, \"Yay!\", `${values.nickname} account created`);\n *     },\n *     validation: {\n *       nickname: FormValidation.Required,\n *       password: (value) => {\n *         if (value && value.length < 8) {\n *           return \"Password must be at least 8 symbols\";\n *         } else if (!value) {\n *           return \"The item is required\";\n *         }\n *       },\n *     },\n *   });\n *\n *   return (\n *     <Form\n *       actions={\n *         <ActionPanel>\n *           <Action.SubmitForm title=\"Submit\" onSubmit={handleSubmit} />\n *         </ActionPanel>\n *       }\n *     >\n *       <Form.TextField title=\"Nickname\" placeholder=\"Enter your nickname\" {...itemProps.nickname} />\n *       <Form.PasswordField\n *         title=\"Password\"\n *         placeholder=\"Enter password at least 8 characters long\"\n *         {...itemProps.password}\n *       />\n *     </Form>\n *   );\n * }\n * ```\n */\nfunction useForm(props) {\n    const { onSubmit: _onSubmit, validation, initialValues = {} } = props;\n    // @ts-expect-error it's fine if we don't specify all the values\n    const [values, setValues] = (0, react_1.useState)(initialValues);\n    const [errors, setErrors] = (0, react_1.useState)({});\n    const refs = (0, react_1.useRef)({});\n    const latestValidation = (0, useLatest_1.useLatest)(validation || {});\n    const latestOnSubmit = (0, useLatest_1.useLatest)(_onSubmit);\n    const focus = (0, react_1.useCallback)((id) => {\n        refs.current[id]?.focus();\n    }, [refs]);\n    const handleSubmit = (0, react_1.useCallback)(async (values) => {\n        let validationErrors = false;\n        for (const [id, validation] of Object.entries(latestValidation.current)) {\n            const error = validationError(validation, values[id]);\n            if (error) {\n                if (!validationErrors) {\n                    validationErrors = {};\n                    // we focus the first item that has an error\n                    focus(id);\n                }\n                validationErrors[id] = error;\n            }\n        }\n        if (validationErrors) {\n            setErrors(validationErrors);\n            return false;\n        }\n        const result = await latestOnSubmit.current(values);\n        return typeof result === \"boolean\" ? result : true;\n    }, [latestValidation, latestOnSubmit, focus]);\n    const setValidationError = (0, react_1.useCallback)((id, error) => {\n        setErrors((errors) => ({ ...errors, [id]: error }));\n    }, [setErrors]);\n    const setValue = (0, react_1.useCallback)(function (id, value) {\n        // @ts-expect-error TS is always confused about SetStateAction, but it's fine here\n        setValues((values) => ({ ...values, [id]: typeof value === \"function\" ? value(values[id]) : value }));\n    }, [setValues]);\n    const itemProps = (0, react_1.useMemo)(() => {\n        // we have to use a proxy because we don't actually have any object to iterate through\n        // so instead we dynamically create the props when required\n        return new Proxy(\n        // @ts-expect-error the whole point of a proxy...\n        {}, {\n            get(target, id) {\n                const validation = latestValidation.current[id];\n                const value = values[id];\n                return {\n                    onChange(value) {\n                        if (errors[id]) {\n                            const error = validationError(validation, value);\n                            if (!error) {\n                                setValidationError(id, undefined);\n                            }\n                        }\n                        setValue(id, value);\n                    },\n                    onBlur(event) {\n                        const error = validationError(validation, event.target.value);\n                        if (error) {\n                            setValidationError(id, error);\n                        }\n                    },\n                    error: errors[id],\n                    id,\n                    // we shouldn't return `undefined` otherwise it will be an uncontrolled component\n                    value: typeof value === \"undefined\" ? null : value,\n                    ref: (instance) => {\n                        refs.current[id] = instance;\n                    },\n                };\n            },\n        });\n    }, [errors, latestValidation, setValidationError, values, refs, setValue]);\n    const reset = (0, react_1.useCallback)((initialValues = {}) => {\n        // @ts-expect-error it's fine if we don't specify all the values\n        setValues(initialValues);\n        setErrors({});\n    }, [setValues, setErrors]);\n    return { handleSubmit, setValidationError, setValue, values, itemProps, focus, reset };\n}\nexports.useForm = useForm;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.slightlyLighterColor = exports.slightlyDarkerColor = void 0;\nfunction hexToRGB(hex) {\n    let r = 0;\n    let g = 0;\n    let b = 0;\n    // 3 digits\n    if (hex.length === 4) {\n        r = parseInt(`${hex[1]}${hex[1]}`, 16);\n        g = parseInt(`${hex[2]}${hex[2]}`, 16);\n        b = parseInt(`${hex[3]}${hex[3]}`, 16);\n        // 6 digits\n    }\n    else if (hex.length === 7) {\n        r = parseInt(`${hex[1]}${hex[2]}`, 16);\n        g = parseInt(`${hex[3]}${hex[4]}`, 16);\n        b = parseInt(`${hex[5]}${hex[6]}`, 16);\n    }\n    else {\n        throw new Error(`Malformed hex color: ${hex}`);\n    }\n    return { r, g, b };\n}\nfunction rgbToHex({ r, g, b }) {\n    let rString = r.toString(16);\n    let gString = g.toString(16);\n    let bString = b.toString(16);\n    if (rString.length === 1) {\n        rString = `0${rString}`;\n    }\n    if (gString.length === 1) {\n        gString = `0${gString}`;\n    }\n    if (bString.length === 1) {\n        bString = `0${bString}`;\n    }\n    return `#${rString}${gString}${bString}`;\n}\nfunction rgbToHSL({ r, g, b }) {\n    // Make r, g, and b fractions of 1\n    r /= 255;\n    g /= 255;\n    b /= 255;\n    // Find greatest and smallest channel values\n    const cmin = Math.min(r, g, b);\n    const cmax = Math.max(r, g, b);\n    const delta = cmax - cmin;\n    let h = 0;\n    let s = 0;\n    let l = 0;\n    // Calculate hue\n    // No difference\n    if (delta === 0) {\n        h = 0;\n    }\n    // Red is max\n    else if (cmax === r) {\n        h = ((g - b) / delta) % 6;\n    }\n    // Green is max\n    else if (cmax === g) {\n        h = (b - r) / delta + 2;\n    }\n    // Blue is max\n    else {\n        h = (r - g) / delta + 4;\n    }\n    h = Math.round(h * 60);\n    // Make negative hues positive behind 360\u00B0\n    if (h < 0) {\n        h += 360;\n    }\n    // Calculate lightness\n    l = (cmax + cmin) / 2;\n    // Calculate saturation\n    s = delta === 0 ? 0 : delta / (1 - Math.abs(2 * l - 1));\n    // Multiply l and s by 100\n    s = +(s * 100).toFixed(1);\n    l = +(l * 100).toFixed(1);\n    return { h, s, l };\n}\nfunction hslToRGB({ h, s, l }) {\n    // Must be fractions of 1\n    s /= 100;\n    l /= 100;\n    const c = (1 - Math.abs(2 * l - 1)) * s;\n    const x = c * (1 - Math.abs(((h / 60) % 2) - 1));\n    const m = l - c / 2;\n    let r = 0;\n    let g = 0;\n    let b = 0;\n    if (h >= 0 && h < 60) {\n        r = c;\n        g = x;\n        b = 0;\n    }\n    else if (h >= 60 && h < 120) {\n        r = x;\n        g = c;\n        b = 0;\n    }\n    else if (h >= 120 && h < 180) {\n        r = 0;\n        g = c;\n        b = x;\n    }\n    else if (h >= 180 && h < 240) {\n        r = 0;\n        g = x;\n        b = c;\n    }\n    else if (h >= 240 && h < 300) {\n        r = x;\n        g = 0;\n        b = c;\n    }\n    else if (h >= 300 && h < 360) {\n        r = c;\n        g = 0;\n        b = x;\n    }\n    r = Math.round((r + m) * 255);\n    g = Math.round((g + m) * 255);\n    b = Math.round((b + m) * 255);\n    return { r, g, b };\n}\nfunction hexToHSL(hex) {\n    return rgbToHSL(hexToRGB(hex));\n}\nfunction hslToHex(hsl) {\n    return rgbToHex(hslToRGB(hsl));\n}\nfunction clamp(value, min, max) {\n    return min < max ? (value < min ? min : value > max ? max : value) : value < max ? max : value > min ? min : value;\n}\nconst offset = 12;\nfunction slightlyDarkerColor(hex) {\n    const hsl = hexToHSL(hex);\n    return hslToHex({\n        h: hsl.h,\n        s: hsl.s,\n        l: clamp(hsl.l - offset, 0, 100),\n    });\n}\nexports.slightlyDarkerColor = slightlyDarkerColor;\nfunction slightlyLighterColor(hex) {\n    const hsl = hexToHSL(hex);\n    return hslToHex({\n        h: hsl.h,\n        s: hsl.s,\n        l: clamp(hsl.l + offset, 0, 100),\n    });\n}\nexports.slightlyLighterColor = slightlyLighterColor;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getAvatarIcon = void 0;\nconst color_1 = require(\"./color\");\nfunction getWholeCharAndI(str, i) {\n    const code = str.charCodeAt(i);\n    if (Number.isNaN(code)) {\n        return [\"\", i];\n    }\n    if (code < 0xd800 || code > 0xdfff) {\n        return [str.charAt(i), i]; // Normal character, keeping 'i' the same\n    }\n    // High surrogate (could change last hex to 0xDB7F to treat high private\n    // surrogates as single characters)\n    if (0xd800 <= code && code <= 0xdbff) {\n        if (str.length <= i + 1) {\n            throw new Error(\"High surrogate without following low surrogate\");\n        }\n        const next = str.charCodeAt(i + 1);\n        if (0xdc00 > next || next > 0xdfff) {\n            throw new Error(\"High surrogate without following low surrogate\");\n        }\n        return [str.charAt(i) + str.charAt(i + 1), i + 1];\n    }\n    // Low surrogate (0xDC00 <= code && code <= 0xDFFF)\n    if (i === 0) {\n        throw new Error(\"Low surrogate without preceding high surrogate\");\n    }\n    const prev = str.charCodeAt(i - 1);\n    // (could change last hex to 0xDB7F to treat high private surrogates\n    // as single characters)\n    if (0xd800 > prev || prev > 0xdbff) {\n        throw new Error(\"Low surrogate without preceding high surrogate\");\n    }\n    // Return the next character instead (and increment)\n    return [str.charAt(i + 1), i + 1];\n}\nconst avatarColorSet = [\n    \"#DC829A\",\n    \"#D64854\",\n    \"#D47600\",\n    \"#D36CDD\",\n    \"#52A9E4\",\n    \"#7871E8\",\n    \"#70920F\",\n    \"#43B93A\",\n    \"#EB6B3E\",\n    \"#26B795\",\n    \"#D85A9B\",\n    \"#A067DC\",\n    \"#BD9500\",\n    \"#5385D9\", // Blue\n];\n/**\n * Icon to represent an avatar when you don't have one. The generated avatar\n * will be generated from the initials of the name and have a colorful but consistent background.\n *\n * @returns an Image that can be used where Raycast expects them.\n *\n * @example\n * ```\n * <List.Item icon={getAvatarIcon('Mathieu Dutour')} title=\"Project\" />\n * ```\n */\nfunction getAvatarIcon(name, options) {\n    const words = name.trim().split(\" \");\n    let initials;\n    if (words.length == 1 && getWholeCharAndI(words[0], 0)[0]) {\n        initials = getWholeCharAndI(words[0], 0)[0];\n    }\n    else if (words.length > 1) {\n        const firstWordFirstLetter = getWholeCharAndI(words[0], 0)[0] || \"\";\n        const lastWordFirstLetter = getWholeCharAndI(words[words.length - 1], 0)[0] ?? \"\";\n        initials = firstWordFirstLetter + lastWordFirstLetter;\n    }\n    else {\n        initials = \"\";\n    }\n    let backgroundColor;\n    if (options?.background) {\n        backgroundColor = options?.background;\n    }\n    else {\n        let initialsCharIndex = 0;\n        let [char, i] = getWholeCharAndI(initials, 0);\n        while (char) {\n            initialsCharIndex += char.charCodeAt(0);\n            [char, i] = getWholeCharAndI(initials, i + 1);\n        }\n        const colorIndex = initialsCharIndex % avatarColorSet.length;\n        backgroundColor = avatarColorSet[colorIndex];\n    }\n    const padding = 0;\n    const radius = 50 - padding;\n    const svg = `<svg width=\"100px\" height=\"100px\">\n  ${options?.gradient !== false\n        ? `<defs>\n      <linearGradient id=\"Gradient\" x1=\"0.25\" x2=\"0.75\" y1=\"0\" y2=\"1\">\n        <stop offset=\"0%\" stop-color=\"${(0, color_1.slightlyLighterColor)(backgroundColor)}\"/>\n        <stop offset=\"50%\" stop-color=\"${backgroundColor}\"/>\n        <stop offset=\"100%\" stop-color=\"${(0, color_1.slightlyDarkerColor)(backgroundColor)}\"/>\n      </linearGradient>\n  </defs>`\n        : \"\"}\n      <circle cx=\"50\" cy=\"50\" r=\"${radius}\" fill=\"${options?.gradient !== false ? \"url(#Gradient)\" : backgroundColor}\" />\n      ${initials\n        ? `<text x=\"50\" y=\"80\" font-size=\"${radius - 1}\" font-family=\"Inter, sans-serif\" text-anchor=\"middle\" fill=\"white\">${initials.toUpperCase()}</text>`\n        : \"\"}\n    </svg>\n  `.replaceAll(\"\\n\", \"\");\n    return `data:image/svg+xml,${svg}`;\n}\nexports.getAvatarIcon = getAvatarIcon;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getFavicon = void 0;\nconst api_1 = require(\"@raycast/api\");\nconst url_1 = require(\"url\");\n/**\n * Icon showing the favicon of a website.\n *\n * A favicon (favorite icon) is a tiny icon included along with a website, which is displayed in places like the browser's address bar, page tabs, and bookmarks menu.\n *\n * @param url The URL of the website to represent.\n *\n * @returns an Image that can be used where Raycast expects them.\n *\n * @example\n * ```\n * <List.Item icon={getFavicon(\"https://raycast.com\")} title=\"Raycast Website\" />\n * ```\n */\nfunction getFavicon(url, options) {\n    try {\n        const urlObj = typeof url === \"string\" ? new url_1.URL(url) : url;\n        const hostname = urlObj.hostname;\n        return {\n            source: `https://www.google.com/s2/favicons?sz=${options?.size ?? 64}&domain=${hostname}`,\n            fallback: options?.fallback ?? api_1.Icon.Link,\n            mask: options?.mask,\n        };\n    }\n    catch (e) {\n        console.error(e);\n        return api_1.Icon.Link;\n    }\n}\nexports.getFavicon = getFavicon;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getProgressIcon = void 0;\nconst api_1 = require(\"@raycast/api\");\nfunction polarToCartesian(centerX, centerY, radius, angleInDegrees) {\n    const angleInRadians = ((angleInDegrees - 90) * Math.PI) / 180.0;\n    return {\n        x: centerX + radius * Math.cos(angleInRadians),\n        y: centerY + radius * Math.sin(angleInRadians),\n    };\n}\nfunction describeArc(x, y, radius, startAngle, endAngle) {\n    const start = polarToCartesian(x, y, radius, endAngle);\n    const end = polarToCartesian(x, y, radius, startAngle);\n    const largeArcFlag = endAngle - startAngle <= 180 ? \"0\" : \"1\";\n    const d = [\"M\", start.x, start.y, \"A\", radius, radius, 0, largeArcFlag, 0, end.x, end.y].join(\" \");\n    return d;\n}\n/**\n * Icon to represent the progress of _something_.\n *\n * @param progress Number between 0 and 1.\n * @param color Hex color (default `\"#FF6363\"`).\n *\n * @returns an Image that can be used where Raycast expects them.\n *\n * @example\n * ```\n * <List.Item icon={getProgressIcon(0.1)} title=\"Project\" />\n * ```\n */\nfunction getProgressIcon(progress, color = \"#FF6363\", options) {\n    const background = options?.background || (api_1.environment.theme === \"light\" ? \"black\" : \"white\");\n    const backgroundOpacity = options?.backgroundOpacity || 0.1;\n    const stroke = 10;\n    const padding = 5;\n    const radius = 50 - padding - stroke / 2;\n    const svg = `<svg width=\"100px\" height=\"100px\">\n      <circle cx=\"50\" cy=\"50\" r=\"${radius}\" stroke-width=\"${stroke}\" stroke=\"${progress < 1 ? background : color}\" opacity=\"${progress < 1 ? backgroundOpacity : \"1\"}\" fill=\"none\" />\n      ${progress > 0 && progress < 1\n        ? `<path d=\"${describeArc(50, 50, radius, 0, progress * 360)}\" stroke=\"${color}\" stroke-width=\"${stroke}\" fill=\"none\" />`\n        : \"\"}\n    </svg>\n  `.replaceAll(\"\\n\", \"\");\n    return `data:image/svg+xml,${svg}`;\n}\nexports.getProgressIcon = getProgressIcon;\n", "\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./avatar\"), exports);\n__exportStar(require(\"./favicon\"), exports);\n__exportStar(require(\"./progress\"), exports);\n", "\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./usePromise\"), exports);\n__exportStar(require(\"./useCachedState\"), exports);\n__exportStar(require(\"./useCachedPromise\"), exports);\n__exportStar(require(\"./useFetch\"), exports);\n__exportStar(require(\"./useExec\"), exports);\n__exportStar(require(\"./useSQL\"), exports);\n__exportStar(require(\"./useForm\"), exports);\n//export * as suspense from \"./suspense\";\n__exportStar(require(\"./icon\"), exports);\n", "import { getTodayFeaturedPageUrl } from \"./utils/api\";\nimport { closeMainWindow, open } from \"@raycast/api\";\nimport { getStoredLanguage } from \"./utils/language\";\nimport { openInBrowser } from \"./utils/preferences\";\n\nexport default async function featuredPage() {\n  const language = await getStoredLanguage();\n  const { title, url } = await getTodayFeaturedPageUrl(language);\n\n  if (openInBrowser) {\n    await open(url);\n    await closeMainWindow({ clearRootSearch: true });\n  } else {\n    await open(`raycast://extensions/vimtor/wikipedia/open-page?arguments=${encodeURI(JSON.stringify({ title }))}`);\n  }\n}\n", "const typedArrayTypeNames = [\n    'Int8Array',\n    'Uint8Array',\n    'Uint8ClampedArray',\n    'Int16Array',\n    'Uint16Array',\n    'Int32Array',\n    'Uint32Array',\n    'Float32Array',\n    'Float64Array',\n    'BigInt64Array',\n    'BigUint64Array',\n];\nfunction isTypedArrayName(name) {\n    return typedArrayTypeNames.includes(name);\n}\nconst objectTypeNames = [\n    'Function',\n    'Generator',\n    'AsyncGenerator',\n    'GeneratorFunction',\n    'AsyncGeneratorFunction',\n    'AsyncFunction',\n    'Observable',\n    'Array',\n    'Buffer',\n    'Blob',\n    'Object',\n    'RegExp',\n    'Date',\n    'Error',\n    'Map',\n    'Set',\n    'WeakMap',\n    'WeakSet',\n    'WeakRef',\n    'ArrayBuffer',\n    'SharedArrayBuffer',\n    'DataView',\n    'Promise',\n    'URL',\n    'FormData',\n    'URLSearchParams',\n    'HTMLElement',\n    'NaN',\n    ...typedArrayTypeNames,\n];\nfunction isObjectTypeName(name) {\n    return objectTypeNames.includes(name);\n}\nconst primitiveTypeNames = [\n    'null',\n    'undefined',\n    'string',\n    'number',\n    'bigint',\n    'boolean',\n    'symbol',\n];\nfunction isPrimitiveTypeName(name) {\n    return primitiveTypeNames.includes(name);\n}\n// eslint-disable-next-line @typescript-eslint/ban-types\nfunction isOfType(type) {\n    return (value) => typeof value === type;\n}\nconst { toString } = Object.prototype;\nconst getObjectType = (value) => {\n    const objectTypeName = toString.call(value).slice(8, -1);\n    if (/HTML\\w+Element/.test(objectTypeName) && is.domElement(value)) {\n        return 'HTMLElement';\n    }\n    if (isObjectTypeName(objectTypeName)) {\n        return objectTypeName;\n    }\n    return undefined;\n};\nconst isObjectOfType = (type) => (value) => getObjectType(value) === type;\nfunction is(value) {\n    if (value === null) {\n        return 'null';\n    }\n    switch (typeof value) {\n        case 'undefined':\n            return 'undefined';\n        case 'string':\n            return 'string';\n        case 'number':\n            return Number.isNaN(value) ? 'NaN' : 'number';\n        case 'boolean':\n            return 'boolean';\n        case 'function':\n            return 'Function';\n        case 'bigint':\n            return 'bigint';\n        case 'symbol':\n            return 'symbol';\n        default:\n    }\n    if (is.observable(value)) {\n        return 'Observable';\n    }\n    if (is.array(value)) {\n        return 'Array';\n    }\n    if (is.buffer(value)) {\n        return 'Buffer';\n    }\n    const tagType = getObjectType(value);\n    if (tagType) {\n        return tagType;\n    }\n    if (value instanceof String || value instanceof Boolean || value instanceof Number) {\n        throw new TypeError('Please don\\'t use object wrappers for primitive types');\n    }\n    return 'Object';\n}\nis.undefined = isOfType('undefined');\nis.string = isOfType('string');\nconst isNumberType = isOfType('number');\nis.number = (value) => isNumberType(value) && !is.nan(value);\nis.bigint = isOfType('bigint');\n// eslint-disable-next-line @typescript-eslint/ban-types\nis.function_ = isOfType('function');\n// eslint-disable-next-line @typescript-eslint/ban-types\nis.null_ = (value) => value === null;\nis.class_ = (value) => is.function_(value) && value.toString().startsWith('class ');\nis.boolean = (value) => value === true || value === false;\nis.symbol = isOfType('symbol');\nis.numericString = (value) => is.string(value) && !is.emptyStringOrWhitespace(value) && !Number.isNaN(Number(value));\nis.array = (value, assertion) => {\n    if (!Array.isArray(value)) {\n        return false;\n    }\n    if (!is.function_(assertion)) {\n        return true;\n    }\n    return value.every(element => assertion(element));\n};\n// eslint-disable-next-line @typescript-eslint/no-unsafe-return, @typescript-eslint/no-unsafe-call\nis.buffer = (value) => value?.constructor?.isBuffer?.(value) ?? false;\nis.blob = (value) => isObjectOfType('Blob')(value);\nis.nullOrUndefined = (value) => is.null_(value) || is.undefined(value); // eslint-disable-line @typescript-eslint/ban-types\nis.object = (value) => !is.null_(value) && (typeof value === 'object' || is.function_(value)); // eslint-disable-line @typescript-eslint/ban-types\nis.iterable = (value) => is.function_(value?.[Symbol.iterator]);\nis.asyncIterable = (value) => is.function_(value?.[Symbol.asyncIterator]);\nis.generator = (value) => is.iterable(value) && is.function_(value?.next) && is.function_(value?.throw);\nis.asyncGenerator = (value) => is.asyncIterable(value) && is.function_(value.next) && is.function_(value.throw);\nis.nativePromise = (value) => isObjectOfType('Promise')(value);\nconst hasPromiseApi = (value) => is.function_(value?.then)\n    && is.function_(value?.catch);\nis.promise = (value) => is.nativePromise(value) || hasPromiseApi(value);\nis.generatorFunction = isObjectOfType('GeneratorFunction');\nis.asyncGeneratorFunction = (value) => getObjectType(value) === 'AsyncGeneratorFunction';\nis.asyncFunction = (value) => getObjectType(value) === 'AsyncFunction';\n// eslint-disable-next-line no-prototype-builtins, @typescript-eslint/ban-types\nis.boundFunction = (value) => is.function_(value) && !value.hasOwnProperty('prototype');\nis.regExp = isObjectOfType('RegExp');\nis.date = isObjectOfType('Date');\nis.error = isObjectOfType('Error');\nis.map = (value) => isObjectOfType('Map')(value);\nis.set = (value) => isObjectOfType('Set')(value);\nis.weakMap = (value) => isObjectOfType('WeakMap')(value); // eslint-disable-line @typescript-eslint/ban-types\nis.weakSet = (value) => isObjectOfType('WeakSet')(value); // eslint-disable-line @typescript-eslint/ban-types\nis.weakRef = (value) => isObjectOfType('WeakRef')(value); // eslint-disable-line @typescript-eslint/ban-types\nis.int8Array = isObjectOfType('Int8Array');\nis.uint8Array = isObjectOfType('Uint8Array');\nis.uint8ClampedArray = isObjectOfType('Uint8ClampedArray');\nis.int16Array = isObjectOfType('Int16Array');\nis.uint16Array = isObjectOfType('Uint16Array');\nis.int32Array = isObjectOfType('Int32Array');\nis.uint32Array = isObjectOfType('Uint32Array');\nis.float32Array = isObjectOfType('Float32Array');\nis.float64Array = isObjectOfType('Float64Array');\nis.bigInt64Array = isObjectOfType('BigInt64Array');\nis.bigUint64Array = isObjectOfType('BigUint64Array');\nis.arrayBuffer = isObjectOfType('ArrayBuffer');\nis.sharedArrayBuffer = isObjectOfType('SharedArrayBuffer');\nis.dataView = isObjectOfType('DataView');\nis.enumCase = (value, targetEnum) => Object.values(targetEnum).includes(value);\nis.directInstanceOf = (instance, class_) => Object.getPrototypeOf(instance) === class_.prototype;\nis.urlInstance = (value) => isObjectOfType('URL')(value);\nis.urlString = (value) => {\n    if (!is.string(value)) {\n        return false;\n    }\n    try {\n        new URL(value); // eslint-disable-line no-new\n        return true;\n    }\n    catch {\n        return false;\n    }\n};\n// Example: `is.truthy = (value: unknown): value is (not false | not 0 | not '' | not undefined | not null) => Boolean(value);`\nis.truthy = (value) => Boolean(value); // eslint-disable-line unicorn/prefer-native-coercion-functions\n// Example: `is.falsy = (value: unknown): value is (not true | 0 | '' | undefined | null) => Boolean(value);`\nis.falsy = (value) => !value;\nis.nan = (value) => Number.isNaN(value);\nis.primitive = (value) => is.null_(value) || isPrimitiveTypeName(typeof value);\nis.integer = (value) => Number.isInteger(value);\nis.safeInteger = (value) => Number.isSafeInteger(value);\nis.plainObject = (value) => {\n    // From: https://github.com/sindresorhus/is-plain-obj/blob/main/index.js\n    if (typeof value !== 'object' || value === null) {\n        return false;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n    const prototype = Object.getPrototypeOf(value);\n    return (prototype === null || prototype === Object.prototype || Object.getPrototypeOf(prototype) === null) && !(Symbol.toStringTag in value) && !(Symbol.iterator in value);\n};\nis.typedArray = (value) => isTypedArrayName(getObjectType(value));\nconst isValidLength = (value) => is.safeInteger(value) && value >= 0;\nis.arrayLike = (value) => !is.nullOrUndefined(value) && !is.function_(value) && isValidLength(value.length);\nis.inRange = (value, range) => {\n    if (is.number(range)) {\n        return value >= Math.min(0, range) && value <= Math.max(range, 0);\n    }\n    if (is.array(range) && range.length === 2) {\n        return value >= Math.min(...range) && value <= Math.max(...range);\n    }\n    throw new TypeError(`Invalid range: ${JSON.stringify(range)}`);\n};\n// eslint-disable-next-line @typescript-eslint/naming-convention\nconst NODE_TYPE_ELEMENT = 1;\n// eslint-disable-next-line @typescript-eslint/naming-convention\nconst DOM_PROPERTIES_TO_CHECK = [\n    'innerHTML',\n    'ownerDocument',\n    'style',\n    'attributes',\n    'nodeValue',\n];\nis.domElement = (value) => is.object(value)\n    && value.nodeType === NODE_TYPE_ELEMENT\n    && is.string(value.nodeName)\n    && !is.plainObject(value)\n    && DOM_PROPERTIES_TO_CHECK.every(property => property in value);\nis.observable = (value) => {\n    if (!value) {\n        return false;\n    }\n    // eslint-disable-next-line no-use-extend-native/no-use-extend-native, @typescript-eslint/no-unsafe-call\n    if (value === value[Symbol.observable]?.()) {\n        return true;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n    if (value === value['@@observable']?.()) {\n        return true;\n    }\n    return false;\n};\nis.nodeStream = (value) => is.object(value) && is.function_(value.pipe) && !is.observable(value);\nis.infinite = (value) => value === Number.POSITIVE_INFINITY || value === Number.NEGATIVE_INFINITY;\nconst isAbsoluteMod2 = (remainder) => (value) => is.integer(value) && Math.abs(value % 2) === remainder;\nis.evenInteger = isAbsoluteMod2(0);\nis.oddInteger = isAbsoluteMod2(1);\nis.emptyArray = (value) => is.array(value) && value.length === 0;\nis.nonEmptyArray = (value) => is.array(value) && value.length > 0;\nis.emptyString = (value) => is.string(value) && value.length === 0;\nconst isWhiteSpaceString = (value) => is.string(value) && !/\\S/.test(value);\nis.emptyStringOrWhitespace = (value) => is.emptyString(value) || isWhiteSpaceString(value);\n// TODO: Use `not ''` when the `not` operator is available.\nis.nonEmptyString = (value) => is.string(value) && value.length > 0;\n// TODO: Use `not ''` when the `not` operator is available.\nis.nonEmptyStringAndNotWhitespace = (value) => is.string(value) && !is.emptyStringOrWhitespace(value);\n// eslint-disable-next-line unicorn/no-array-callback-reference\nis.emptyObject = (value) => is.object(value) && !is.map(value) && !is.set(value) && Object.keys(value).length === 0;\n// TODO: Use `not` operator here to remove `Map` and `Set` from type guard:\n// - https://github.com/Microsoft/TypeScript/pull/29317\n// eslint-disable-next-line unicorn/no-array-callback-reference\nis.nonEmptyObject = (value) => is.object(value) && !is.map(value) && !is.set(value) && Object.keys(value).length > 0;\nis.emptySet = (value) => is.set(value) && value.size === 0;\nis.nonEmptySet = (value) => is.set(value) && value.size > 0;\n// eslint-disable-next-line unicorn/no-array-callback-reference\nis.emptyMap = (value) => is.map(value) && value.size === 0;\n// eslint-disable-next-line unicorn/no-array-callback-reference\nis.nonEmptyMap = (value) => is.map(value) && value.size > 0;\n// `PropertyKey` is any value that can be used as an object key (string, number, or symbol)\nis.propertyKey = (value) => is.any([is.string, is.number, is.symbol], value);\nis.formData = (value) => isObjectOfType('FormData')(value);\nis.urlSearchParams = (value) => isObjectOfType('URLSearchParams')(value);\nconst predicateOnArray = (method, predicate, values) => {\n    if (!is.function_(predicate)) {\n        throw new TypeError(`Invalid predicate: ${JSON.stringify(predicate)}`);\n    }\n    if (values.length === 0) {\n        throw new TypeError('Invalid number of values');\n    }\n    return method.call(values, predicate);\n};\nis.any = (predicate, ...values) => {\n    const predicates = is.array(predicate) ? predicate : [predicate];\n    return predicates.some(singlePredicate => predicateOnArray(Array.prototype.some, singlePredicate, values));\n};\nis.all = (predicate, ...values) => predicateOnArray(Array.prototype.every, predicate, values);\nconst assertType = (condition, description, value, options = {}) => {\n    if (!condition) {\n        const { multipleValues } = options;\n        const valuesMessage = multipleValues\n            ? `received values of types ${[\n                ...new Set(value.map(singleValue => `\\`${is(singleValue)}\\``)),\n            ].join(', ')}`\n            : `received value of type \\`${is(value)}\\``;\n        throw new TypeError(`Expected value which is \\`${description}\\`, ${valuesMessage}.`);\n    }\n};\n/* eslint-disable @typescript-eslint/no-confusing-void-expression */\nexport const assert = {\n    // Unknowns.\n    undefined: (value) => assertType(is.undefined(value), 'undefined', value),\n    string: (value) => assertType(is.string(value), 'string', value),\n    number: (value) => assertType(is.number(value), 'number', value),\n    bigint: (value) => assertType(is.bigint(value), 'bigint', value),\n    // eslint-disable-next-line @typescript-eslint/ban-types\n    function_: (value) => assertType(is.function_(value), 'Function', value),\n    null_: (value) => assertType(is.null_(value), 'null', value),\n    class_: (value) => assertType(is.class_(value), \"Class\" /* AssertionTypeDescription.class_ */, value),\n    boolean: (value) => assertType(is.boolean(value), 'boolean', value),\n    symbol: (value) => assertType(is.symbol(value), 'symbol', value),\n    numericString: (value) => assertType(is.numericString(value), \"string with a number\" /* AssertionTypeDescription.numericString */, value),\n    array: (value, assertion) => {\n        const assert = assertType;\n        assert(is.array(value), 'Array', value);\n        if (assertion) {\n            // eslint-disable-next-line unicorn/no-array-for-each, unicorn/no-array-callback-reference\n            value.forEach(assertion);\n        }\n    },\n    buffer: (value) => assertType(is.buffer(value), 'Buffer', value),\n    blob: (value) => assertType(is.blob(value), 'Blob', value),\n    nullOrUndefined: (value) => assertType(is.nullOrUndefined(value), \"null or undefined\" /* AssertionTypeDescription.nullOrUndefined */, value),\n    object: (value) => assertType(is.object(value), 'Object', value),\n    iterable: (value) => assertType(is.iterable(value), \"Iterable\" /* AssertionTypeDescription.iterable */, value),\n    asyncIterable: (value) => assertType(is.asyncIterable(value), \"AsyncIterable\" /* AssertionTypeDescription.asyncIterable */, value),\n    generator: (value) => assertType(is.generator(value), 'Generator', value),\n    asyncGenerator: (value) => assertType(is.asyncGenerator(value), 'AsyncGenerator', value),\n    nativePromise: (value) => assertType(is.nativePromise(value), \"native Promise\" /* AssertionTypeDescription.nativePromise */, value),\n    promise: (value) => assertType(is.promise(value), 'Promise', value),\n    generatorFunction: (value) => assertType(is.generatorFunction(value), 'GeneratorFunction', value),\n    asyncGeneratorFunction: (value) => assertType(is.asyncGeneratorFunction(value), 'AsyncGeneratorFunction', value),\n    // eslint-disable-next-line @typescript-eslint/ban-types\n    asyncFunction: (value) => assertType(is.asyncFunction(value), 'AsyncFunction', value),\n    // eslint-disable-next-line @typescript-eslint/ban-types\n    boundFunction: (value) => assertType(is.boundFunction(value), 'Function', value),\n    regExp: (value) => assertType(is.regExp(value), 'RegExp', value),\n    date: (value) => assertType(is.date(value), 'Date', value),\n    error: (value) => assertType(is.error(value), 'Error', value),\n    map: (value) => assertType(is.map(value), 'Map', value),\n    set: (value) => assertType(is.set(value), 'Set', value),\n    weakMap: (value) => assertType(is.weakMap(value), 'WeakMap', value),\n    weakSet: (value) => assertType(is.weakSet(value), 'WeakSet', value),\n    weakRef: (value) => assertType(is.weakRef(value), 'WeakRef', value),\n    int8Array: (value) => assertType(is.int8Array(value), 'Int8Array', value),\n    uint8Array: (value) => assertType(is.uint8Array(value), 'Uint8Array', value),\n    uint8ClampedArray: (value) => assertType(is.uint8ClampedArray(value), 'Uint8ClampedArray', value),\n    int16Array: (value) => assertType(is.int16Array(value), 'Int16Array', value),\n    uint16Array: (value) => assertType(is.uint16Array(value), 'Uint16Array', value),\n    int32Array: (value) => assertType(is.int32Array(value), 'Int32Array', value),\n    uint32Array: (value) => assertType(is.uint32Array(value), 'Uint32Array', value),\n    float32Array: (value) => assertType(is.float32Array(value), 'Float32Array', value),\n    float64Array: (value) => assertType(is.float64Array(value), 'Float64Array', value),\n    bigInt64Array: (value) => assertType(is.bigInt64Array(value), 'BigInt64Array', value),\n    bigUint64Array: (value) => assertType(is.bigUint64Array(value), 'BigUint64Array', value),\n    arrayBuffer: (value) => assertType(is.arrayBuffer(value), 'ArrayBuffer', value),\n    sharedArrayBuffer: (value) => assertType(is.sharedArrayBuffer(value), 'SharedArrayBuffer', value),\n    dataView: (value) => assertType(is.dataView(value), 'DataView', value),\n    enumCase: (value, targetEnum) => assertType(is.enumCase(value, targetEnum), 'EnumCase', value),\n    urlInstance: (value) => assertType(is.urlInstance(value), 'URL', value),\n    urlString: (value) => assertType(is.urlString(value), \"string with a URL\" /* AssertionTypeDescription.urlString */, value),\n    truthy: (value) => assertType(is.truthy(value), \"truthy\" /* AssertionTypeDescription.truthy */, value),\n    falsy: (value) => assertType(is.falsy(value), \"falsy\" /* AssertionTypeDescription.falsy */, value),\n    nan: (value) => assertType(is.nan(value), \"NaN\" /* AssertionTypeDescription.nan */, value),\n    primitive: (value) => assertType(is.primitive(value), \"primitive\" /* AssertionTypeDescription.primitive */, value),\n    integer: (value) => assertType(is.integer(value), \"integer\" /* AssertionTypeDescription.integer */, value),\n    safeInteger: (value) => assertType(is.safeInteger(value), \"integer\" /* AssertionTypeDescription.safeInteger */, value),\n    plainObject: (value) => assertType(is.plainObject(value), \"plain object\" /* AssertionTypeDescription.plainObject */, value),\n    typedArray: (value) => assertType(is.typedArray(value), \"TypedArray\" /* AssertionTypeDescription.typedArray */, value),\n    arrayLike: (value) => assertType(is.arrayLike(value), \"array-like\" /* AssertionTypeDescription.arrayLike */, value),\n    domElement: (value) => assertType(is.domElement(value), \"HTMLElement\" /* AssertionTypeDescription.domElement */, value),\n    observable: (value) => assertType(is.observable(value), 'Observable', value),\n    nodeStream: (value) => assertType(is.nodeStream(value), \"Node.js Stream\" /* AssertionTypeDescription.nodeStream */, value),\n    infinite: (value) => assertType(is.infinite(value), \"infinite number\" /* AssertionTypeDescription.infinite */, value),\n    emptyArray: (value) => assertType(is.emptyArray(value), \"empty array\" /* AssertionTypeDescription.emptyArray */, value),\n    nonEmptyArray: (value) => assertType(is.nonEmptyArray(value), \"non-empty array\" /* AssertionTypeDescription.nonEmptyArray */, value),\n    emptyString: (value) => assertType(is.emptyString(value), \"empty string\" /* AssertionTypeDescription.emptyString */, value),\n    emptyStringOrWhitespace: (value) => assertType(is.emptyStringOrWhitespace(value), \"empty string or whitespace\" /* AssertionTypeDescription.emptyStringOrWhitespace */, value),\n    nonEmptyString: (value) => assertType(is.nonEmptyString(value), \"non-empty string\" /* AssertionTypeDescription.nonEmptyString */, value),\n    nonEmptyStringAndNotWhitespace: (value) => assertType(is.nonEmptyStringAndNotWhitespace(value), \"non-empty string and not whitespace\" /* AssertionTypeDescription.nonEmptyStringAndNotWhitespace */, value),\n    emptyObject: (value) => assertType(is.emptyObject(value), \"empty object\" /* AssertionTypeDescription.emptyObject */, value),\n    nonEmptyObject: (value) => assertType(is.nonEmptyObject(value), \"non-empty object\" /* AssertionTypeDescription.nonEmptyObject */, value),\n    emptySet: (value) => assertType(is.emptySet(value), \"empty set\" /* AssertionTypeDescription.emptySet */, value),\n    nonEmptySet: (value) => assertType(is.nonEmptySet(value), \"non-empty set\" /* AssertionTypeDescription.nonEmptySet */, value),\n    emptyMap: (value) => assertType(is.emptyMap(value), \"empty map\" /* AssertionTypeDescription.emptyMap */, value),\n    nonEmptyMap: (value) => assertType(is.nonEmptyMap(value), \"non-empty map\" /* AssertionTypeDescription.nonEmptyMap */, value),\n    propertyKey: (value) => assertType(is.propertyKey(value), 'PropertyKey', value),\n    formData: (value) => assertType(is.formData(value), 'FormData', value),\n    urlSearchParams: (value) => assertType(is.urlSearchParams(value), 'URLSearchParams', value),\n    // Numbers.\n    evenInteger: (value) => assertType(is.evenInteger(value), \"even integer\" /* AssertionTypeDescription.evenInteger */, value),\n    oddInteger: (value) => assertType(is.oddInteger(value), \"odd integer\" /* AssertionTypeDescription.oddInteger */, value),\n    // Two arguments.\n    directInstanceOf: (instance, class_) => assertType(is.directInstanceOf(instance, class_), \"T\" /* AssertionTypeDescription.directInstanceOf */, instance),\n    inRange: (value, range) => assertType(is.inRange(value, range), \"in range\" /* AssertionTypeDescription.inRange */, value),\n    // Variadic functions.\n    any: (predicate, ...values) => assertType(is.any(predicate, ...values), \"predicate returns truthy for any value\" /* AssertionTypeDescription.any */, values, { multipleValues: true }),\n    all: (predicate, ...values) => assertType(is.all(predicate, ...values), \"predicate returns truthy for all values\" /* AssertionTypeDescription.all */, values, { multipleValues: true }),\n};\n/* eslint-enable @typescript-eslint/no-confusing-void-expression */\n// Some few keywords are reserved, but we'll populate them for Node.js users\n// See https://github.com/Microsoft/TypeScript/issues/2536\nObject.defineProperties(is, {\n    class: {\n        value: is.class_,\n    },\n    function: {\n        value: is.function_,\n    },\n    null: {\n        value: is.null_,\n    },\n});\nObject.defineProperties(assert, {\n    class: {\n        value: assert.class_,\n    },\n    function: {\n        value: assert.function_,\n    },\n    null: {\n        value: assert.null_,\n    },\n});\nexport default is;\n", "import { EventEmitter } from 'node:events';\nimport is from '@sindresorhus/is';\nimport PCancelable from 'p-cancelable';\nimport { HTTPError, RetryError, } from '../core/errors.js';\nimport Request from '../core/index.js';\nimport { parseBody, isResponseOk } from '../core/response.js';\nimport proxyEvents from '../core/utils/proxy-events.js';\nimport { CancelError } from './types.js';\nconst proxiedRequestEvents = [\n    'request',\n    'response',\n    'redirect',\n    'uploadProgress',\n    'downloadProgress',\n];\nexport default function asPromise(firstRequest) {\n    let globalRequest;\n    let globalResponse;\n    let normalizedOptions;\n    const emitter = new EventEmitter();\n    const promise = new PCancelable((resolve, reject, onCancel) => {\n        onCancel(() => {\n            globalRequest.destroy();\n        });\n        onCancel.shouldReject = false;\n        onCancel(() => {\n            reject(new CancelError(globalRequest));\n        });\n        const makeRequest = (retryCount) => {\n            // Errors when a new request is made after the promise settles.\n            // Used to detect a race condition.\n            // See https://github.com/sindresorhus/got/issues/1489\n            onCancel(() => { });\n            const request = firstRequest ?? new Request(undefined, undefined, normalizedOptions);\n            request.retryCount = retryCount;\n            request._noPipe = true;\n            globalRequest = request;\n            request.once('response', async (response) => {\n                // Parse body\n                const contentEncoding = (response.headers['content-encoding'] ?? '').toLowerCase();\n                const isCompressed = contentEncoding === 'gzip' || contentEncoding === 'deflate' || contentEncoding === 'br';\n                const { options } = request;\n                if (isCompressed && !options.decompress) {\n                    response.body = response.rawBody;\n                }\n                else {\n                    try {\n                        response.body = parseBody(response, options.responseType, options.parseJson, options.encoding);\n                    }\n                    catch (error) {\n                        // Fall back to `utf8`\n                        response.body = response.rawBody.toString();\n                        if (isResponseOk(response)) {\n                            request._beforeError(error);\n                            return;\n                        }\n                    }\n                }\n                try {\n                    const hooks = options.hooks.afterResponse;\n                    for (const [index, hook] of hooks.entries()) {\n                        // @ts-expect-error TS doesn't notice that CancelableRequest is a Promise\n                        // eslint-disable-next-line no-await-in-loop\n                        response = await hook(response, async (updatedOptions) => {\n                            options.merge(updatedOptions);\n                            options.prefixUrl = '';\n                            if (updatedOptions.url) {\n                                options.url = updatedOptions.url;\n                            }\n                            // Remove any further hooks for that request, because we'll call them anyway.\n                            // The loop continues. We don't want duplicates (asPromise recursion).\n                            options.hooks.afterResponse = options.hooks.afterResponse.slice(0, index);\n                            throw new RetryError(request);\n                        });\n                        if (!(is.object(response) && is.number(response.statusCode) && !is.nullOrUndefined(response.body))) {\n                            throw new TypeError('The `afterResponse` hook returned an invalid value');\n                        }\n                    }\n                }\n                catch (error) {\n                    request._beforeError(error);\n                    return;\n                }\n                globalResponse = response;\n                if (!isResponseOk(response)) {\n                    request._beforeError(new HTTPError(response));\n                    return;\n                }\n                request.destroy();\n                resolve(request.options.resolveBodyOnly ? response.body : response);\n            });\n            const onError = (error) => {\n                if (promise.isCanceled) {\n                    return;\n                }\n                const { options } = request;\n                if (error instanceof HTTPError && !options.throwHttpErrors) {\n                    const { response } = error;\n                    request.destroy();\n                    resolve(request.options.resolveBodyOnly ? response.body : response);\n                    return;\n                }\n                reject(error);\n            };\n            request.once('error', onError);\n            const previousBody = request.options?.body;\n            request.once('retry', (newRetryCount, error) => {\n                firstRequest = undefined;\n                const newBody = request.options.body;\n                if (previousBody === newBody && is.nodeStream(newBody)) {\n                    error.message = 'Cannot retry with consumed body stream';\n                    onError(error);\n                    return;\n                }\n                // This is needed! We need to reuse `request.options` because they can get modified!\n                // For example, by calling `promise.json()`.\n                normalizedOptions = request.options;\n                makeRequest(newRetryCount);\n            });\n            proxyEvents(request, emitter, proxiedRequestEvents);\n            if (is.undefined(firstRequest)) {\n                void request.flush();\n            }\n        };\n        makeRequest(0);\n    });\n    promise.on = (event, fn) => {\n        emitter.on(event, fn);\n        return promise;\n    };\n    promise.off = (event, fn) => {\n        emitter.off(event, fn);\n        return promise;\n    };\n    const shortcut = (responseType) => {\n        const newPromise = (async () => {\n            // Wait until downloading has ended\n            await promise;\n            const { options } = globalResponse.request;\n            return parseBody(globalResponse, responseType, options.parseJson, options.encoding);\n        })();\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\n        Object.defineProperties(newPromise, Object.getOwnPropertyDescriptors(promise));\n        return newPromise;\n    };\n    promise.json = () => {\n        if (globalRequest.options) {\n            const { headers } = globalRequest.options;\n            if (!globalRequest.writableFinished && !('accept' in headers)) {\n                headers.accept = 'application/json';\n            }\n        }\n        return shortcut('json');\n    };\n    promise.buffer = () => shortcut('buffer');\n    promise.text = () => shortcut('text');\n    return promise;\n}\n", "export class CancelError extends Error {\n\tconstructor(reason) {\n\t\tsuper(reason || 'Promise was canceled');\n\t\tthis.name = 'CancelError';\n\t}\n\n\tget isCanceled() {\n\t\treturn true;\n\t}\n}\n\n// TODO: Use private class fields when ESLint 8 is out.\n\nexport default class PCancelable {\n\tstatic fn(userFunction) {\n\t\treturn (...arguments_) => {\n\t\t\treturn new PCancelable((resolve, reject, onCancel) => {\n\t\t\t\targuments_.push(onCancel);\n\t\t\t\t// eslint-disable-next-line promise/prefer-await-to-then\n\t\t\t\tuserFunction(...arguments_).then(resolve, reject);\n\t\t\t});\n\t\t};\n\t}\n\n\tconstructor(executor) {\n\t\tthis._cancelHandlers = [];\n\t\tthis._isPending = true;\n\t\tthis._isCanceled = false;\n\t\tthis._rejectOnCancel = true;\n\n\t\tthis._promise = new Promise((resolve, reject) => {\n\t\t\tthis._reject = reject;\n\n\t\t\tconst onResolve = value => {\n\t\t\t\tif (!this._isCanceled || !onCancel.shouldReject) {\n\t\t\t\t\tthis._isPending = false;\n\t\t\t\t\tresolve(value);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst onReject = error => {\n\t\t\t\tthis._isPending = false;\n\t\t\t\treject(error);\n\t\t\t};\n\n\t\t\tconst onCancel = handler => {\n\t\t\t\tif (!this._isPending) {\n\t\t\t\t\tthrow new Error('The `onCancel` handler was attached after the promise settled.');\n\t\t\t\t}\n\n\t\t\t\tthis._cancelHandlers.push(handler);\n\t\t\t};\n\n\t\t\tObject.defineProperties(onCancel, {\n\t\t\t\tshouldReject: {\n\t\t\t\t\tget: () => this._rejectOnCancel,\n\t\t\t\t\tset: boolean => {\n\t\t\t\t\t\tthis._rejectOnCancel = boolean;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\texecutor(onResolve, onReject, onCancel);\n\t\t});\n\t}\n\n\tthen(onFulfilled, onRejected) {\n\t\t// eslint-disable-next-line promise/prefer-await-to-then\n\t\treturn this._promise.then(onFulfilled, onRejected);\n\t}\n\n\tcatch(onRejected) {\n\t\t// eslint-disable-next-line promise/prefer-await-to-then\n\t\treturn this._promise.catch(onRejected);\n\t}\n\n\tfinally(onFinally) {\n\t\t// eslint-disable-next-line promise/prefer-await-to-then\n\t\treturn this._promise.finally(onFinally);\n\t}\n\n\tcancel(reason) {\n\t\tif (!this._isPending || this._isCanceled) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._isCanceled = true;\n\n\t\tif (this._cancelHandlers.length > 0) {\n\t\t\ttry {\n\t\t\t\tfor (const handler of this._cancelHandlers) {\n\t\t\t\t\thandler();\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tthis._reject(error);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (this._rejectOnCancel) {\n\t\t\tthis._reject(new CancelError(reason));\n\t\t}\n\t}\n\n\tget isCanceled() {\n\t\treturn this._isCanceled;\n\t}\n}\n\nObject.setPrototypeOf(PCancelable.prototype, Promise.prototype);\n", "import is from '@sindresorhus/is';\n// A hacky check to prevent circular references.\nfunction isRequest(x) {\n    return is.object(x) && '_onResponse' in x;\n}\n/**\nAn error to be thrown when a request fails.\nContains a `code` property with error class code, like `ECONNREFUSED`.\n*/\nexport class RequestError extends Error {\n    constructor(message, error, self) {\n        super(message);\n        Object.defineProperty(this, \"input\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"code\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"stack\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"response\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"request\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"timings\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Error.captureStackTrace(this, this.constructor);\n        this.name = 'RequestError';\n        this.code = error.code ?? 'ERR_GOT_REQUEST_ERROR';\n        this.input = error.input;\n        if (isRequest(self)) {\n            Object.defineProperty(this, 'request', {\n                enumerable: false,\n                value: self,\n            });\n            Object.defineProperty(this, 'response', {\n                enumerable: false,\n                value: self.response,\n            });\n            this.options = self.options;\n        }\n        else {\n            this.options = self;\n        }\n        this.timings = this.request?.timings;\n        // Recover the original stacktrace\n        if (is.string(error.stack) && is.string(this.stack)) {\n            const indexOfMessage = this.stack.indexOf(this.message) + this.message.length;\n            const thisStackTrace = this.stack.slice(indexOfMessage).split('\\n').reverse();\n            const errorStackTrace = error.stack.slice(error.stack.indexOf(error.message) + error.message.length).split('\\n').reverse();\n            // Remove duplicated traces\n            while (errorStackTrace.length > 0 && errorStackTrace[0] === thisStackTrace[0]) {\n                thisStackTrace.shift();\n            }\n            this.stack = `${this.stack.slice(0, indexOfMessage)}${thisStackTrace.reverse().join('\\n')}${errorStackTrace.reverse().join('\\n')}`;\n        }\n    }\n}\n/**\nAn error to be thrown when the server redirects you more than ten times.\nIncludes a `response` property.\n*/\nexport class MaxRedirectsError extends RequestError {\n    constructor(request) {\n        super(`Redirected ${request.options.maxRedirects} times. Aborting.`, {}, request);\n        this.name = 'MaxRedirectsError';\n        this.code = 'ERR_TOO_MANY_REDIRECTS';\n    }\n}\n/**\nAn error to be thrown when the server response code is not 2xx nor 3xx if `options.followRedirect` is `true`, but always except for 304.\nIncludes a `response` property.\n*/\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport class HTTPError extends RequestError {\n    constructor(response) {\n        super(`Response code ${response.statusCode} (${response.statusMessage})`, {}, response.request);\n        this.name = 'HTTPError';\n        this.code = 'ERR_NON_2XX_3XX_RESPONSE';\n    }\n}\n/**\nAn error to be thrown when a cache method fails.\nFor example, if the database goes down or there's a filesystem error.\n*/\nexport class CacheError extends RequestError {\n    constructor(error, request) {\n        super(error.message, error, request);\n        this.name = 'CacheError';\n        this.code = this.code === 'ERR_GOT_REQUEST_ERROR' ? 'ERR_CACHE_ACCESS' : this.code;\n    }\n}\n/**\nAn error to be thrown when the request body is a stream and an error occurs while reading from that stream.\n*/\nexport class UploadError extends RequestError {\n    constructor(error, request) {\n        super(error.message, error, request);\n        this.name = 'UploadError';\n        this.code = this.code === 'ERR_GOT_REQUEST_ERROR' ? 'ERR_UPLOAD' : this.code;\n    }\n}\n/**\nAn error to be thrown when the request is aborted due to a timeout.\nIncludes an `event` and `timings` property.\n*/\nexport class TimeoutError extends RequestError {\n    constructor(error, timings, request) {\n        super(error.message, error, request);\n        Object.defineProperty(this, \"timings\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"event\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.name = 'TimeoutError';\n        this.event = error.event;\n        this.timings = timings;\n    }\n}\n/**\nAn error to be thrown when reading from response stream fails.\n*/\nexport class ReadError extends RequestError {\n    constructor(error, request) {\n        super(error.message, error, request);\n        this.name = 'ReadError';\n        this.code = this.code === 'ERR_GOT_REQUEST_ERROR' ? 'ERR_READING_RESPONSE_STREAM' : this.code;\n    }\n}\n/**\nAn error which always triggers a new retry when thrown.\n*/\nexport class RetryError extends RequestError {\n    constructor(request) {\n        super('Retrying', {}, request);\n        this.name = 'RetryError';\n        this.code = 'ERR_RETRYING';\n    }\n}\n/**\nAn error to be thrown when the request is aborted by AbortController.\n*/\nexport class AbortError extends RequestError {\n    constructor(request) {\n        super('This operation was aborted.', {}, request);\n        this.code = 'ERR_ABORTED';\n        this.name = 'AbortError';\n    }\n}\n", "import process from 'node:process';\nimport { Buffer } from 'node:buffer';\nimport { Duplex } from 'node:stream';\nimport { URL, URLSearchParams } from 'node:url';\nimport http, { ServerResponse } from 'node:http';\nimport timer from '@szmarczak/http-timer';\nimport CacheableRequest, { CacheError as CacheableCacheError, } from 'cacheable-request';\nimport decompressResponse from 'decompress-response';\nimport is from '@sindresorhus/is';\nimport { buffer as getBuffer } from 'get-stream';\nimport { FormDataEncoder, isFormData as isFormDataLike } from 'form-data-encoder';\nimport getBodySize from './utils/get-body-size.js';\nimport isFormData from './utils/is-form-data.js';\nimport proxyEvents from './utils/proxy-events.js';\nimport timedOut, { TimeoutError as TimedOutTimeoutError } from './timed-out.js';\nimport urlToOptions from './utils/url-to-options.js';\nimport WeakableMap from './utils/weakable-map.js';\nimport calculateRetryDelay from './calculate-retry-delay.js';\nimport Options from './options.js';\nimport { isResponseOk } from './response.js';\nimport isClientRequest from './utils/is-client-request.js';\nimport isUnixSocketURL from './utils/is-unix-socket-url.js';\nimport { RequestError, ReadError, MaxRedirectsError, HTTPError, TimeoutError, UploadError, CacheError, AbortError, } from './errors.js';\nconst supportsBrotli = is.string(process.versions.brotli);\nconst methodsWithoutBody = new Set(['GET', 'HEAD']);\nconst cacheableStore = new WeakableMap();\nconst redirectCodes = new Set([300, 301, 302, 303, 304, 307, 308]);\nconst proxiedRequestEvents = [\n    'socket',\n    'connect',\n    'continue',\n    'information',\n    'upgrade',\n];\nconst noop = () => { };\nexport default class Request extends Duplex {\n    constructor(url, options, defaults) {\n        super({\n            // Don't destroy immediately, as the error may be emitted on unsuccessful retry\n            autoDestroy: false,\n            // It needs to be zero because we're just proxying the data to another stream\n            highWaterMark: 0,\n        });\n        // @ts-expect-error - Ignoring for now.\n        Object.defineProperty(this, 'constructor', {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_noPipe\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        // @ts-expect-error https://github.com/microsoft/TypeScript/issues/9568\n        Object.defineProperty(this, \"options\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"response\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"requestUrl\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"redirectUrls\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"retryCount\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_stopRetry\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_downloadedSize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_uploadedSize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_stopReading\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_pipedServerResponses\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_request\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_responseSize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_bodySize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_unproxyEvents\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_isFromCache\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_cannotHaveBody\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_triggerRead\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_cancelTimeouts\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_removeListeners\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_nativeResponse\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_flushed\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_aborted\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        // We need this because `this._request` if `undefined` when using cache\n        Object.defineProperty(this, \"_requestInitialized\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this._downloadedSize = 0;\n        this._uploadedSize = 0;\n        this._stopReading = false;\n        this._pipedServerResponses = new Set();\n        this._cannotHaveBody = false;\n        this._unproxyEvents = noop;\n        this._triggerRead = false;\n        this._cancelTimeouts = noop;\n        this._removeListeners = noop;\n        this._jobs = [];\n        this._flushed = false;\n        this._requestInitialized = false;\n        this._aborted = false;\n        this.redirectUrls = [];\n        this.retryCount = 0;\n        this._stopRetry = noop;\n        this.on('pipe', source => {\n            if (source.headers) {\n                Object.assign(this.options.headers, source.headers);\n            }\n        });\n        this.on('newListener', event => {\n            if (event === 'retry' && this.listenerCount('retry') > 0) {\n                throw new Error('A retry listener has been attached already.');\n            }\n        });\n        try {\n            this.options = new Options(url, options, defaults);\n            if (!this.options.url) {\n                if (this.options.prefixUrl === '') {\n                    throw new TypeError('Missing `url` property');\n                }\n                this.options.url = '';\n            }\n            this.requestUrl = this.options.url;\n        }\n        catch (error) {\n            const { options } = error;\n            if (options) {\n                this.options = options;\n            }\n            this.flush = async () => {\n                this.flush = async () => { };\n                this.destroy(error);\n            };\n            return;\n        }\n        // Important! If you replace `body` in a handler with another stream, make sure it's readable first.\n        // The below is run only once.\n        const { body } = this.options;\n        if (is.nodeStream(body)) {\n            body.once('error', error => {\n                if (this._flushed) {\n                    this._beforeError(new UploadError(error, this));\n                }\n                else {\n                    this.flush = async () => {\n                        this.flush = async () => { };\n                        this._beforeError(new UploadError(error, this));\n                    };\n                }\n            });\n        }\n        if (this.options.signal) {\n            const abort = () => {\n                this.destroy(new AbortError(this));\n            };\n            if (this.options.signal.aborted) {\n                abort();\n            }\n            else {\n                this.options.signal.addEventListener('abort', abort);\n                this._removeListeners = () => {\n                    this.options.signal.removeEventListener('abort', abort);\n                };\n            }\n        }\n    }\n    async flush() {\n        if (this._flushed) {\n            return;\n        }\n        this._flushed = true;\n        try {\n            await this._finalizeBody();\n            if (this.destroyed) {\n                return;\n            }\n            await this._makeRequest();\n            if (this.destroyed) {\n                this._request?.destroy();\n                return;\n            }\n            // Queued writes etc.\n            for (const job of this._jobs) {\n                job();\n            }\n            // Prevent memory leak\n            this._jobs.length = 0;\n            this._requestInitialized = true;\n        }\n        catch (error) {\n            this._beforeError(error);\n        }\n    }\n    _beforeError(error) {\n        if (this._stopReading) {\n            return;\n        }\n        const { response, options } = this;\n        const attemptCount = this.retryCount + (error.name === 'RetryError' ? 0 : 1);\n        this._stopReading = true;\n        if (!(error instanceof RequestError)) {\n            error = new RequestError(error.message, error, this);\n        }\n        const typedError = error;\n        void (async () => {\n            // Node.js parser is really weird.\n            // It emits post-request Parse Errors on the same instance as previous request. WTF.\n            // Therefore we need to check if it has been destroyed as well.\n            //\n            // Furthermore, Node.js 16 `response.destroy()` doesn't immediately destroy the socket,\n            // but makes the response unreadable. So we additionally need to check `response.readable`.\n            if (response?.readable && !response.rawBody && !this._request?.socket?.destroyed) {\n                // @types/node has incorrect typings. `setEncoding` accepts `null` as well.\n                response.setEncoding(this.readableEncoding);\n                const success = await this._setRawBody(response);\n                if (success) {\n                    response.body = response.rawBody.toString();\n                }\n            }\n            if (this.listenerCount('retry') !== 0) {\n                let backoff;\n                try {\n                    let retryAfter;\n                    if (response && 'retry-after' in response.headers) {\n                        retryAfter = Number(response.headers['retry-after']);\n                        if (Number.isNaN(retryAfter)) {\n                            retryAfter = Date.parse(response.headers['retry-after']) - Date.now();\n                            if (retryAfter <= 0) {\n                                retryAfter = 1;\n                            }\n                        }\n                        else {\n                            retryAfter *= 1000;\n                        }\n                    }\n                    const retryOptions = options.retry;\n                    backoff = await retryOptions.calculateDelay({\n                        attemptCount,\n                        retryOptions,\n                        error: typedError,\n                        retryAfter,\n                        computedValue: calculateRetryDelay({\n                            attemptCount,\n                            retryOptions,\n                            error: typedError,\n                            retryAfter,\n                            computedValue: retryOptions.maxRetryAfter ?? options.timeout.request ?? Number.POSITIVE_INFINITY,\n                        }),\n                    });\n                }\n                catch (error_) {\n                    void this._error(new RequestError(error_.message, error_, this));\n                    return;\n                }\n                if (backoff) {\n                    await new Promise(resolve => {\n                        const timeout = setTimeout(resolve, backoff);\n                        this._stopRetry = () => {\n                            clearTimeout(timeout);\n                            resolve();\n                        };\n                    });\n                    // Something forced us to abort the retry\n                    if (this.destroyed) {\n                        return;\n                    }\n                    try {\n                        for (const hook of this.options.hooks.beforeRetry) {\n                            // eslint-disable-next-line no-await-in-loop\n                            await hook(typedError, this.retryCount + 1);\n                        }\n                    }\n                    catch (error_) {\n                        void this._error(new RequestError(error_.message, error, this));\n                        return;\n                    }\n                    // Something forced us to abort the retry\n                    if (this.destroyed) {\n                        return;\n                    }\n                    this.destroy();\n                    this.emit('retry', this.retryCount + 1, error, (updatedOptions) => {\n                        const request = new Request(options.url, updatedOptions, options);\n                        request.retryCount = this.retryCount + 1;\n                        process.nextTick(() => {\n                            void request.flush();\n                        });\n                        return request;\n                    });\n                    return;\n                }\n            }\n            void this._error(typedError);\n        })();\n    }\n    _read() {\n        this._triggerRead = true;\n        const { response } = this;\n        if (response && !this._stopReading) {\n            // We cannot put this in the `if` above\n            // because `.read()` also triggers the `end` event\n            if (response.readableLength) {\n                this._triggerRead = false;\n            }\n            let data;\n            while ((data = response.read()) !== null) {\n                this._downloadedSize += data.length; // eslint-disable-line @typescript-eslint/restrict-plus-operands\n                const progress = this.downloadProgress;\n                if (progress.percent < 1) {\n                    this.emit('downloadProgress', progress);\n                }\n                this.push(data);\n            }\n        }\n    }\n    _write(chunk, encoding, callback) {\n        const write = () => {\n            this._writeRequest(chunk, encoding, callback);\n        };\n        if (this._requestInitialized) {\n            write();\n        }\n        else {\n            this._jobs.push(write);\n        }\n    }\n    _final(callback) {\n        const endRequest = () => {\n            // We need to check if `this._request` is present,\n            // because it isn't when we use cache.\n            if (!this._request || this._request.destroyed) {\n                callback();\n                return;\n            }\n            this._request.end((error) => {\n                // The request has been destroyed before `_final` finished.\n                // See https://github.com/nodejs/node/issues/39356\n                if (this._request._writableState?.errored) {\n                    return;\n                }\n                if (!error) {\n                    this._bodySize = this._uploadedSize;\n                    this.emit('uploadProgress', this.uploadProgress);\n                    this._request.emit('upload-complete');\n                }\n                callback(error);\n            });\n        };\n        if (this._requestInitialized) {\n            endRequest();\n        }\n        else {\n            this._jobs.push(endRequest);\n        }\n    }\n    _destroy(error, callback) {\n        this._stopReading = true;\n        this.flush = async () => { };\n        // Prevent further retries\n        this._stopRetry();\n        this._cancelTimeouts();\n        this._removeListeners();\n        if (this.options) {\n            const { body } = this.options;\n            if (is.nodeStream(body)) {\n                body.destroy();\n            }\n        }\n        if (this._request) {\n            this._request.destroy();\n        }\n        if (error !== null && !is.undefined(error) && !(error instanceof RequestError)) {\n            error = new RequestError(error.message, error, this);\n        }\n        callback(error);\n    }\n    pipe(destination, options) {\n        if (destination instanceof ServerResponse) {\n            this._pipedServerResponses.add(destination);\n        }\n        return super.pipe(destination, options);\n    }\n    unpipe(destination) {\n        if (destination instanceof ServerResponse) {\n            this._pipedServerResponses.delete(destination);\n        }\n        super.unpipe(destination);\n        return this;\n    }\n    async _finalizeBody() {\n        const { options } = this;\n        const { headers } = options;\n        const isForm = !is.undefined(options.form);\n        // eslint-disable-next-line @typescript-eslint/naming-convention\n        const isJSON = !is.undefined(options.json);\n        const isBody = !is.undefined(options.body);\n        const cannotHaveBody = methodsWithoutBody.has(options.method) && !(options.method === 'GET' && options.allowGetBody);\n        this._cannotHaveBody = cannotHaveBody;\n        if (isForm || isJSON || isBody) {\n            if (cannotHaveBody) {\n                throw new TypeError(`The \\`${options.method}\\` method cannot be used with a body`);\n            }\n            // Serialize body\n            const noContentType = !is.string(headers['content-type']);\n            if (isBody) {\n                // Body is spec-compliant FormData\n                if (isFormDataLike(options.body)) {\n                    const encoder = new FormDataEncoder(options.body);\n                    if (noContentType) {\n                        headers['content-type'] = encoder.headers['Content-Type'];\n                    }\n                    if ('Content-Length' in encoder.headers) {\n                        headers['content-length'] = encoder.headers['Content-Length'];\n                    }\n                    options.body = encoder.encode();\n                }\n                // Special case for https://github.com/form-data/form-data\n                if (isFormData(options.body) && noContentType) {\n                    headers['content-type'] = `multipart/form-data; boundary=${options.body.getBoundary()}`;\n                }\n            }\n            else if (isForm) {\n                if (noContentType) {\n                    headers['content-type'] = 'application/x-www-form-urlencoded';\n                }\n                const { form } = options;\n                options.form = undefined;\n                options.body = (new URLSearchParams(form)).toString();\n            }\n            else {\n                if (noContentType) {\n                    headers['content-type'] = 'application/json';\n                }\n                const { json } = options;\n                options.json = undefined;\n                options.body = options.stringifyJson(json);\n            }\n            const uploadBodySize = await getBodySize(options.body, options.headers);\n            // See https://tools.ietf.org/html/rfc7230#section-3.3.2\n            // A user agent SHOULD send a Content-Length in a request message when\n            // no Transfer-Encoding is sent and the request method defines a meaning\n            // for an enclosed payload body.  For example, a Content-Length header\n            // field is normally sent in a POST request even when the value is 0\n            // (indicating an empty payload body).  A user agent SHOULD NOT send a\n            // Content-Length header field when the request message does not contain\n            // a payload body and the method semantics do not anticipate such a\n            // body.\n            if (is.undefined(headers['content-length']) && is.undefined(headers['transfer-encoding']) && !cannotHaveBody && !is.undefined(uploadBodySize)) {\n                headers['content-length'] = String(uploadBodySize);\n            }\n        }\n        if (options.responseType === 'json' && !('accept' in options.headers)) {\n            options.headers.accept = 'application/json';\n        }\n        this._bodySize = Number(headers['content-length']) || undefined;\n    }\n    async _onResponseBase(response) {\n        // This will be called e.g. when using cache so we need to check if this request has been aborted.\n        if (this.isAborted) {\n            return;\n        }\n        const { options } = this;\n        const { url } = options;\n        this._nativeResponse = response;\n        if (options.decompress) {\n            response = decompressResponse(response);\n        }\n        const statusCode = response.statusCode;\n        const typedResponse = response;\n        typedResponse.statusMessage = typedResponse.statusMessage ? typedResponse.statusMessage : http.STATUS_CODES[statusCode];\n        typedResponse.url = options.url.toString();\n        typedResponse.requestUrl = this.requestUrl;\n        typedResponse.redirectUrls = this.redirectUrls;\n        typedResponse.request = this;\n        typedResponse.isFromCache = this._nativeResponse.fromCache ?? false;\n        typedResponse.ip = this.ip;\n        typedResponse.retryCount = this.retryCount;\n        typedResponse.ok = isResponseOk(typedResponse);\n        this._isFromCache = typedResponse.isFromCache;\n        this._responseSize = Number(response.headers['content-length']) || undefined;\n        this.response = typedResponse;\n        response.once('end', () => {\n            this._responseSize = this._downloadedSize;\n            this.emit('downloadProgress', this.downloadProgress);\n        });\n        response.once('error', (error) => {\n            this._aborted = true;\n            // Force clean-up, because some packages don't do this.\n            // TODO: Fix decompress-response\n            response.destroy();\n            this._beforeError(new ReadError(error, this));\n        });\n        response.once('aborted', () => {\n            this._aborted = true;\n            this._beforeError(new ReadError({\n                name: 'Error',\n                message: 'The server aborted pending request',\n                code: 'ECONNRESET',\n            }, this));\n        });\n        this.emit('downloadProgress', this.downloadProgress);\n        const rawCookies = response.headers['set-cookie'];\n        if (is.object(options.cookieJar) && rawCookies) {\n            let promises = rawCookies.map(async (rawCookie) => options.cookieJar.setCookie(rawCookie, url.toString()));\n            if (options.ignoreInvalidCookies) {\n                promises = promises.map(async (promise) => {\n                    try {\n                        await promise;\n                    }\n                    catch { }\n                });\n            }\n            try {\n                await Promise.all(promises);\n            }\n            catch (error) {\n                this._beforeError(error);\n                return;\n            }\n        }\n        // The above is running a promise, therefore we need to check if this request has been aborted yet again.\n        if (this.isAborted) {\n            return;\n        }\n        if (options.followRedirect && response.headers.location && redirectCodes.has(statusCode)) {\n            // We're being redirected, we don't care about the response.\n            // It'd be best to abort the request, but we can't because\n            // we would have to sacrifice the TCP connection. We don't want that.\n            response.resume();\n            this._cancelTimeouts();\n            this._unproxyEvents();\n            if (this.redirectUrls.length >= options.maxRedirects) {\n                this._beforeError(new MaxRedirectsError(this));\n                return;\n            }\n            this._request = undefined;\n            const updatedOptions = new Options(undefined, undefined, this.options);\n            const serverRequestedGet = statusCode === 303 && updatedOptions.method !== 'GET' && updatedOptions.method !== 'HEAD';\n            const canRewrite = statusCode !== 307 && statusCode !== 308;\n            const userRequestedGet = updatedOptions.methodRewriting && canRewrite;\n            if (serverRequestedGet || userRequestedGet) {\n                updatedOptions.method = 'GET';\n                updatedOptions.body = undefined;\n                updatedOptions.json = undefined;\n                updatedOptions.form = undefined;\n                delete updatedOptions.headers['content-length'];\n            }\n            try {\n                // We need this in order to support UTF-8\n                const redirectBuffer = Buffer.from(response.headers.location, 'binary').toString();\n                const redirectUrl = new URL(redirectBuffer, url);\n                if (!isUnixSocketURL(url) && isUnixSocketURL(redirectUrl)) {\n                    this._beforeError(new RequestError('Cannot redirect to UNIX socket', {}, this));\n                    return;\n                }\n                // Redirecting to a different site, clear sensitive data.\n                if (redirectUrl.hostname !== url.hostname || redirectUrl.port !== url.port) {\n                    if ('host' in updatedOptions.headers) {\n                        delete updatedOptions.headers.host;\n                    }\n                    if ('cookie' in updatedOptions.headers) {\n                        delete updatedOptions.headers.cookie;\n                    }\n                    if ('authorization' in updatedOptions.headers) {\n                        delete updatedOptions.headers.authorization;\n                    }\n                    if (updatedOptions.username || updatedOptions.password) {\n                        updatedOptions.username = '';\n                        updatedOptions.password = '';\n                    }\n                }\n                else {\n                    redirectUrl.username = updatedOptions.username;\n                    redirectUrl.password = updatedOptions.password;\n                }\n                this.redirectUrls.push(redirectUrl);\n                updatedOptions.prefixUrl = '';\n                updatedOptions.url = redirectUrl;\n                for (const hook of updatedOptions.hooks.beforeRedirect) {\n                    // eslint-disable-next-line no-await-in-loop\n                    await hook(updatedOptions, typedResponse);\n                }\n                this.emit('redirect', updatedOptions, typedResponse);\n                this.options = updatedOptions;\n                await this._makeRequest();\n            }\n            catch (error) {\n                this._beforeError(error);\n                return;\n            }\n            return;\n        }\n        // `HTTPError`s always have `error.response.body` defined.\n        // Therefore we cannot retry if `options.throwHttpErrors` is false.\n        // On the last retry, if `options.throwHttpErrors` is false, we would need to return the body,\n        // but that wouldn't be possible since the body would be already read in `error.response.body`.\n        if (options.isStream && options.throwHttpErrors && !isResponseOk(typedResponse)) {\n            this._beforeError(new HTTPError(typedResponse));\n            return;\n        }\n        response.on('readable', () => {\n            if (this._triggerRead) {\n                this._read();\n            }\n        });\n        this.on('resume', () => {\n            response.resume();\n        });\n        this.on('pause', () => {\n            response.pause();\n        });\n        response.once('end', () => {\n            this.push(null);\n        });\n        if (this._noPipe) {\n            const success = await this._setRawBody();\n            if (success) {\n                this.emit('response', response);\n            }\n            return;\n        }\n        this.emit('response', response);\n        for (const destination of this._pipedServerResponses) {\n            if (destination.headersSent) {\n                continue;\n            }\n            // eslint-disable-next-line guard-for-in\n            for (const key in response.headers) {\n                const isAllowed = options.decompress ? key !== 'content-encoding' : true;\n                const value = response.headers[key];\n                if (isAllowed) {\n                    destination.setHeader(key, value);\n                }\n            }\n            destination.statusCode = statusCode;\n        }\n    }\n    async _setRawBody(from = this) {\n        if (from.readableEnded) {\n            return false;\n        }\n        try {\n            // Errors are emitted via the `error` event\n            const rawBody = await getBuffer(from);\n            // On retry Request is destroyed with no error, therefore the above will successfully resolve.\n            // So in order to check if this was really successfull, we need to check if it has been properly ended.\n            if (!this.isAborted) {\n                this.response.rawBody = rawBody;\n                return true;\n            }\n        }\n        catch { }\n        return false;\n    }\n    async _onResponse(response) {\n        try {\n            await this._onResponseBase(response);\n        }\n        catch (error) {\n            /* istanbul ignore next: better safe than sorry */\n            this._beforeError(error);\n        }\n    }\n    _onRequest(request) {\n        const { options } = this;\n        const { timeout, url } = options;\n        timer(request);\n        if (this.options.http2) {\n            // Unset stream timeout, as the `timeout` option was used only for connection timeout.\n            request.setTimeout(0);\n        }\n        this._cancelTimeouts = timedOut(request, timeout, url);\n        const responseEventName = options.cache ? 'cacheableResponse' : 'response';\n        request.once(responseEventName, (response) => {\n            void this._onResponse(response);\n        });\n        request.once('error', (error) => {\n            this._aborted = true;\n            // Force clean-up, because some packages (e.g. nock) don't do this.\n            request.destroy();\n            error = error instanceof TimedOutTimeoutError ? new TimeoutError(error, this.timings, this) : new RequestError(error.message, error, this);\n            this._beforeError(error);\n        });\n        this._unproxyEvents = proxyEvents(request, this, proxiedRequestEvents);\n        this._request = request;\n        this.emit('uploadProgress', this.uploadProgress);\n        this._sendBody();\n        this.emit('request', request);\n    }\n    async _asyncWrite(chunk) {\n        return new Promise((resolve, reject) => {\n            super.write(chunk, error => {\n                if (error) {\n                    reject(error);\n                    return;\n                }\n                resolve();\n            });\n        });\n    }\n    _sendBody() {\n        // Send body\n        const { body } = this.options;\n        const currentRequest = this.redirectUrls.length === 0 ? this : this._request ?? this;\n        if (is.nodeStream(body)) {\n            body.pipe(currentRequest);\n        }\n        else if (is.generator(body) || is.asyncGenerator(body)) {\n            (async () => {\n                try {\n                    for await (const chunk of body) {\n                        await this._asyncWrite(chunk);\n                    }\n                    super.end();\n                }\n                catch (error) {\n                    this._beforeError(error);\n                }\n            })();\n        }\n        else if (!is.undefined(body)) {\n            this._writeRequest(body, undefined, () => { });\n            currentRequest.end();\n        }\n        else if (this._cannotHaveBody || this._noPipe) {\n            currentRequest.end();\n        }\n    }\n    _prepareCache(cache) {\n        if (!cacheableStore.has(cache)) {\n            const cacheableRequest = new CacheableRequest(((requestOptions, handler) => {\n                const result = requestOptions._request(requestOptions, handler);\n                // TODO: remove this when `cacheable-request` supports async request functions.\n                if (is.promise(result)) {\n                    // We only need to implement the error handler in order to support HTTP2 caching.\n                    // The result will be a promise anyway.\n                    // @ts-expect-error ignore\n                    // eslint-disable-next-line @typescript-eslint/promise-function-async\n                    result.once = (event, handler) => {\n                        if (event === 'error') {\n                            (async () => {\n                                try {\n                                    await result;\n                                }\n                                catch (error) {\n                                    handler(error);\n                                }\n                            })();\n                        }\n                        else if (event === 'abort') {\n                            // The empty catch is needed here in case when\n                            // it rejects before it's `await`ed in `_makeRequest`.\n                            (async () => {\n                                try {\n                                    const request = (await result);\n                                    request.once('abort', handler);\n                                }\n                                catch { }\n                            })();\n                        }\n                        else {\n                            /* istanbul ignore next: safety check */\n                            throw new Error(`Unknown HTTP2 promise event: ${event}`);\n                        }\n                        return result;\n                    };\n                }\n                return result;\n            }), cache);\n            cacheableStore.set(cache, cacheableRequest.request());\n        }\n    }\n    async _createCacheableRequest(url, options) {\n        return new Promise((resolve, reject) => {\n            // TODO: Remove `utils/url-to-options.ts` when `cacheable-request` is fixed\n            Object.assign(options, urlToOptions(url));\n            let request;\n            // TODO: Fix `cacheable-response`. This is ugly.\n            const cacheRequest = cacheableStore.get(options.cache)(options, async (response) => {\n                response._readableState.autoDestroy = false;\n                if (request) {\n                    const fix = () => {\n                        if (response.req) {\n                            response.complete = response.req.res.complete;\n                        }\n                    };\n                    response.prependOnceListener('end', fix);\n                    fix();\n                    (await request).emit('cacheableResponse', response);\n                }\n                resolve(response);\n            });\n            cacheRequest.once('error', reject);\n            cacheRequest.once('request', async (requestOrPromise) => {\n                request = requestOrPromise;\n                resolve(request);\n            });\n        });\n    }\n    async _makeRequest() {\n        const { options } = this;\n        const { headers, username, password } = options;\n        const cookieJar = options.cookieJar;\n        for (const key in headers) {\n            if (is.undefined(headers[key])) {\n                // eslint-disable-next-line @typescript-eslint/no-dynamic-delete\n                delete headers[key];\n            }\n            else if (is.null_(headers[key])) {\n                throw new TypeError(`Use \\`undefined\\` instead of \\`null\\` to delete the \\`${key}\\` header`);\n            }\n        }\n        if (options.decompress && is.undefined(headers['accept-encoding'])) {\n            headers['accept-encoding'] = supportsBrotli ? 'gzip, deflate, br' : 'gzip, deflate';\n        }\n        if (username || password) {\n            const credentials = Buffer.from(`${username}:${password}`).toString('base64');\n            headers.authorization = `Basic ${credentials}`;\n        }\n        // Set cookies\n        if (cookieJar) {\n            const cookieString = await cookieJar.getCookieString(options.url.toString());\n            if (is.nonEmptyString(cookieString)) {\n                headers.cookie = cookieString;\n            }\n        }\n        // Reset `prefixUrl`\n        options.prefixUrl = '';\n        let request;\n        for (const hook of options.hooks.beforeRequest) {\n            // eslint-disable-next-line no-await-in-loop\n            const result = await hook(options);\n            if (!is.undefined(result)) {\n                // @ts-expect-error Skip the type mismatch to support abstract responses\n                request = () => result;\n                break;\n            }\n        }\n        if (!request) {\n            request = options.getRequestFunction();\n        }\n        const url = options.url;\n        this._requestOptions = options.createNativeRequestOptions();\n        if (options.cache) {\n            this._requestOptions._request = request;\n            this._requestOptions.cache = options.cache;\n            this._requestOptions.body = options.body;\n            this._prepareCache(options.cache);\n        }\n        // Cache support\n        const fn = options.cache ? this._createCacheableRequest : request;\n        try {\n            // We can't do `await fn(...)`,\n            // because stream `error` event can be emitted before `Promise.resolve()`.\n            let requestOrResponse = fn(url, this._requestOptions);\n            if (is.promise(requestOrResponse)) {\n                requestOrResponse = await requestOrResponse;\n            }\n            // Fallback\n            if (is.undefined(requestOrResponse)) {\n                requestOrResponse = options.getFallbackRequestFunction()(url, this._requestOptions);\n                if (is.promise(requestOrResponse)) {\n                    requestOrResponse = await requestOrResponse;\n                }\n            }\n            if (isClientRequest(requestOrResponse)) {\n                this._onRequest(requestOrResponse);\n            }\n            else if (this.writable) {\n                this.once('finish', () => {\n                    void this._onResponse(requestOrResponse);\n                });\n                this._sendBody();\n            }\n            else {\n                void this._onResponse(requestOrResponse);\n            }\n        }\n        catch (error) {\n            if (error instanceof CacheableCacheError) {\n                throw new CacheError(error, this);\n            }\n            throw error;\n        }\n    }\n    async _error(error) {\n        try {\n            if (error instanceof HTTPError && !this.options.throwHttpErrors) {\n                // This branch can be reached only when using the Promise API\n                // Skip calling the hooks on purpose.\n                // See https://github.com/sindresorhus/got/issues/2103\n            }\n            else {\n                for (const hook of this.options.hooks.beforeError) {\n                    // eslint-disable-next-line no-await-in-loop\n                    error = await hook(error);\n                }\n            }\n        }\n        catch (error_) {\n            error = new RequestError(error_.message, error_, this);\n        }\n        this.destroy(error);\n    }\n    _writeRequest(chunk, encoding, callback) {\n        if (!this._request || this._request.destroyed) {\n            // Probably the `ClientRequest` instance will throw\n            return;\n        }\n        this._request.write(chunk, encoding, (error) => {\n            // The `!destroyed` check is required to prevent `uploadProgress` being emitted after the stream was destroyed\n            if (!error && !this._request.destroyed) {\n                this._uploadedSize += Buffer.byteLength(chunk, encoding);\n                const progress = this.uploadProgress;\n                if (progress.percent < 1) {\n                    this.emit('uploadProgress', progress);\n                }\n            }\n            callback(error);\n        });\n    }\n    /**\n    The remote IP address.\n    */\n    get ip() {\n        return this.socket?.remoteAddress;\n    }\n    /**\n    Indicates whether the request has been aborted or not.\n    */\n    get isAborted() {\n        return this._aborted;\n    }\n    get socket() {\n        return this._request?.socket ?? undefined;\n    }\n    /**\n    Progress event for downloading (receiving a response).\n    */\n    get downloadProgress() {\n        let percent;\n        if (this._responseSize) {\n            percent = this._downloadedSize / this._responseSize;\n        }\n        else if (this._responseSize === this._downloadedSize) {\n            percent = 1;\n        }\n        else {\n            percent = 0;\n        }\n        return {\n            percent,\n            transferred: this._downloadedSize,\n            total: this._responseSize,\n        };\n    }\n    /**\n    Progress event for uploading (sending a request).\n    */\n    get uploadProgress() {\n        let percent;\n        if (this._bodySize) {\n            percent = this._uploadedSize / this._bodySize;\n        }\n        else if (this._bodySize === this._uploadedSize) {\n            percent = 1;\n        }\n        else {\n            percent = 0;\n        }\n        return {\n            percent,\n            transferred: this._uploadedSize,\n            total: this._bodySize,\n        };\n    }\n    /**\n    The object contains the following properties:\n\n    - `start` - Time when the request started.\n    - `socket` - Time when a socket was assigned to the request.\n    - `lookup` - Time when the DNS lookup finished.\n    - `connect` - Time when the socket successfully connected.\n    - `secureConnect` - Time when the socket securely connected.\n    - `upload` - Time when the request finished uploading.\n    - `response` - Time when the request fired `response` event.\n    - `end` - Time when the response fired `end` event.\n    - `error` - Time when the request fired `error` event.\n    - `abort` - Time when the request fired `abort` event.\n    - `phases`\n        - `wait` - `timings.socket - timings.start`\n        - `dns` - `timings.lookup - timings.socket`\n        - `tcp` - `timings.connect - timings.lookup`\n        - `tls` - `timings.secureConnect - timings.connect`\n        - `request` - `timings.upload - (timings.secureConnect || timings.connect)`\n        - `firstByte` - `timings.response - timings.upload`\n        - `download` - `timings.end - timings.response`\n        - `total` - `(timings.end || timings.error || timings.abort) - timings.start`\n\n    If something has not been measured yet, it will be `undefined`.\n\n    __Note__: The time is a `number` representing the milliseconds elapsed since the UNIX epoch.\n    */\n    get timings() {\n        return this._request?.timings;\n    }\n    /**\n    Whether the response was retrieved from the cache.\n    */\n    get isFromCache() {\n        return this._isFromCache;\n    }\n    get reusedSocket() {\n        return this._request?.reusedSocket;\n    }\n}\n", "import { errorMonitor } from 'events';\nimport { types } from 'util';\nimport deferToConnect from 'defer-to-connect';\nconst timer = (request) => {\n    if (request.timings) {\n        return request.timings;\n    }\n    const timings = {\n        start: Date.now(),\n        socket: undefined,\n        lookup: undefined,\n        connect: undefined,\n        secureConnect: undefined,\n        upload: undefined,\n        response: undefined,\n        end: undefined,\n        error: undefined,\n        abort: undefined,\n        phases: {\n            wait: undefined,\n            dns: undefined,\n            tcp: undefined,\n            tls: undefined,\n            request: undefined,\n            firstByte: undefined,\n            download: undefined,\n            total: undefined,\n        },\n    };\n    request.timings = timings;\n    const handleError = (origin) => {\n        origin.once(errorMonitor, () => {\n            timings.error = Date.now();\n            timings.phases.total = timings.error - timings.start;\n        });\n    };\n    handleError(request);\n    const onAbort = () => {\n        timings.abort = Date.now();\n        timings.phases.total = timings.abort - timings.start;\n    };\n    request.prependOnceListener('abort', onAbort);\n    const onSocket = (socket) => {\n        timings.socket = Date.now();\n        timings.phases.wait = timings.socket - timings.start;\n        if (types.isProxy(socket)) {\n            return;\n        }\n        const lookupListener = () => {\n            timings.lookup = Date.now();\n            timings.phases.dns = timings.lookup - timings.socket;\n        };\n        socket.prependOnceListener('lookup', lookupListener);\n        deferToConnect(socket, {\n            connect: () => {\n                timings.connect = Date.now();\n                if (timings.lookup === undefined) {\n                    socket.removeListener('lookup', lookupListener);\n                    timings.lookup = timings.connect;\n                    timings.phases.dns = timings.lookup - timings.socket;\n                }\n                timings.phases.tcp = timings.connect - timings.lookup;\n            },\n            secureConnect: () => {\n                timings.secureConnect = Date.now();\n                timings.phases.tls = timings.secureConnect - timings.connect;\n            },\n        });\n    };\n    if (request.socket) {\n        onSocket(request.socket);\n    }\n    else {\n        request.prependOnceListener('socket', onSocket);\n    }\n    const onUpload = () => {\n        timings.upload = Date.now();\n        timings.phases.request = timings.upload - (timings.secureConnect ?? timings.connect);\n    };\n    if (request.writableFinished) {\n        onUpload();\n    }\n    else {\n        request.prependOnceListener('finish', onUpload);\n    }\n    request.prependOnceListener('response', (response) => {\n        timings.response = Date.now();\n        timings.phases.firstByte = timings.response - timings.upload;\n        response.timings = timings;\n        handleError(response);\n        response.prependOnceListener('end', () => {\n            request.off('abort', onAbort);\n            response.off('aborted', onAbort);\n            if (timings.phases.total) {\n                // Aborted or errored\n                return;\n            }\n            timings.end = Date.now();\n            timings.phases.download = timings.end - timings.response;\n            timings.phases.total = timings.end - timings.start;\n        });\n        response.prependOnceListener('aborted', onAbort);\n    });\n    return timings;\n};\nexport default timer;\n", null, "// https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URIs\nconst DATA_URL_DEFAULT_MIME_TYPE = 'text/plain';\nconst DATA_URL_DEFAULT_CHARSET = 'us-ascii';\n\nconst testParameter = (name, filters) => filters.some(filter => filter instanceof RegExp ? filter.test(name) : filter === name);\n\nconst supportedProtocols = new Set([\n\t'https:',\n\t'http:',\n\t'file:',\n]);\n\nconst hasCustomProtocol = urlString => {\n\ttry {\n\t\tconst {protocol} = new URL(urlString);\n\t\treturn protocol.endsWith(':') && !supportedProtocols.has(protocol);\n\t} catch {\n\t\treturn false;\n\t}\n};\n\nconst normalizeDataURL = (urlString, {stripHash}) => {\n\tconst match = /^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(urlString);\n\n\tif (!match) {\n\t\tthrow new Error(`Invalid URL: ${urlString}`);\n\t}\n\n\tlet {type, data, hash} = match.groups;\n\tconst mediaType = type.split(';');\n\thash = stripHash ? '' : hash;\n\n\tlet isBase64 = false;\n\tif (mediaType[mediaType.length - 1] === 'base64') {\n\t\tmediaType.pop();\n\t\tisBase64 = true;\n\t}\n\n\t// Lowercase MIME type\n\tconst mimeType = mediaType.shift()?.toLowerCase() ?? '';\n\tconst attributes = mediaType\n\t\t.map(attribute => {\n\t\t\tlet [key, value = ''] = attribute.split('=').map(string => string.trim());\n\n\t\t\t// Lowercase `charset`\n\t\t\tif (key === 'charset') {\n\t\t\t\tvalue = value.toLowerCase();\n\n\t\t\t\tif (value === DATA_URL_DEFAULT_CHARSET) {\n\t\t\t\t\treturn '';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn `${key}${value ? `=${value}` : ''}`;\n\t\t})\n\t\t.filter(Boolean);\n\n\tconst normalizedMediaType = [\n\t\t...attributes,\n\t];\n\n\tif (isBase64) {\n\t\tnormalizedMediaType.push('base64');\n\t}\n\n\tif (normalizedMediaType.length > 0 || (mimeType && mimeType !== DATA_URL_DEFAULT_MIME_TYPE)) {\n\t\tnormalizedMediaType.unshift(mimeType);\n\t}\n\n\treturn `data:${normalizedMediaType.join(';')},${isBase64 ? data.trim() : data}${hash ? `#${hash}` : ''}`;\n};\n\nexport default function normalizeUrl(urlString, options) {\n\toptions = {\n\t\tdefaultProtocol: 'http',\n\t\tnormalizeProtocol: true,\n\t\tforceHttp: false,\n\t\tforceHttps: false,\n\t\tstripAuthentication: true,\n\t\tstripHash: false,\n\t\tstripTextFragment: true,\n\t\tstripWWW: true,\n\t\tremoveQueryParameters: [/^utm_\\w+/i],\n\t\tremoveTrailingSlash: true,\n\t\tremoveSingleSlash: true,\n\t\tremoveDirectoryIndex: false,\n\t\tremoveExplicitPort: false,\n\t\tsortQueryParameters: true,\n\t\t...options,\n\t};\n\n\t// Legacy: Append `:` to the protocol if missing.\n\tif (typeof options.defaultProtocol === 'string' && !options.defaultProtocol.endsWith(':')) {\n\t\toptions.defaultProtocol = `${options.defaultProtocol}:`;\n\t}\n\n\turlString = urlString.trim();\n\n\t// Data URL\n\tif (/^data:/i.test(urlString)) {\n\t\treturn normalizeDataURL(urlString, options);\n\t}\n\n\tif (hasCustomProtocol(urlString)) {\n\t\treturn urlString;\n\t}\n\n\tconst hasRelativeProtocol = urlString.startsWith('//');\n\tconst isRelativeUrl = !hasRelativeProtocol && /^\\.*\\//.test(urlString);\n\n\t// Prepend protocol\n\tif (!isRelativeUrl) {\n\t\turlString = urlString.replace(/^(?!(?:\\w+:)?\\/\\/)|^\\/\\//, options.defaultProtocol);\n\t}\n\n\tconst urlObject = new URL(urlString);\n\n\tif (options.forceHttp && options.forceHttps) {\n\t\tthrow new Error('The `forceHttp` and `forceHttps` options cannot be used together');\n\t}\n\n\tif (options.forceHttp && urlObject.protocol === 'https:') {\n\t\turlObject.protocol = 'http:';\n\t}\n\n\tif (options.forceHttps && urlObject.protocol === 'http:') {\n\t\turlObject.protocol = 'https:';\n\t}\n\n\t// Remove auth\n\tif (options.stripAuthentication) {\n\t\turlObject.username = '';\n\t\turlObject.password = '';\n\t}\n\n\t// Remove hash\n\tif (options.stripHash) {\n\t\turlObject.hash = '';\n\t} else if (options.stripTextFragment) {\n\t\turlObject.hash = urlObject.hash.replace(/#?:~:text.*?$/i, '');\n\t}\n\n\t// Remove duplicate slashes if not preceded by a protocol\n\t// NOTE: This could be implemented using a single negative lookbehind\n\t// regex, but we avoid that to maintain compatibility with older js engines\n\t// which do not have support for that feature.\n\tif (urlObject.pathname) {\n\t\t// TODO: Replace everything below with `urlObject.pathname = urlObject.pathname.replace(/(?<!\\b[a-z][a-z\\d+\\-.]{1,50}:)\\/{2,}/g, '/');` when Safari supports negative lookbehind.\n\n\t\t// Split the string by occurrences of this protocol regex, and perform\n\t\t// duplicate-slash replacement on the strings between those occurrences\n\t\t// (if any).\n\t\tconst protocolRegex = /\\b[a-z][a-z\\d+\\-.]{1,50}:\\/\\//g;\n\n\t\tlet lastIndex = 0;\n\t\tlet result = '';\n\t\tfor (;;) {\n\t\t\tconst match = protocolRegex.exec(urlObject.pathname);\n\t\t\tif (!match) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tconst protocol = match[0];\n\t\t\tconst protocolAtIndex = match.index;\n\t\t\tconst intermediate = urlObject.pathname.slice(lastIndex, protocolAtIndex);\n\n\t\t\tresult += intermediate.replace(/\\/{2,}/g, '/');\n\t\t\tresult += protocol;\n\t\t\tlastIndex = protocolAtIndex + protocol.length;\n\t\t}\n\n\t\tconst remnant = urlObject.pathname.slice(lastIndex, urlObject.pathname.length);\n\t\tresult += remnant.replace(/\\/{2,}/g, '/');\n\n\t\turlObject.pathname = result;\n\t}\n\n\t// Decode URI octets\n\tif (urlObject.pathname) {\n\t\ttry {\n\t\t\turlObject.pathname = decodeURI(urlObject.pathname);\n\t\t} catch {}\n\t}\n\n\t// Remove directory index\n\tif (options.removeDirectoryIndex === true) {\n\t\toptions.removeDirectoryIndex = [/^index\\.[a-z]+$/];\n\t}\n\n\tif (Array.isArray(options.removeDirectoryIndex) && options.removeDirectoryIndex.length > 0) {\n\t\tlet pathComponents = urlObject.pathname.split('/');\n\t\tconst lastComponent = pathComponents[pathComponents.length - 1];\n\n\t\tif (testParameter(lastComponent, options.removeDirectoryIndex)) {\n\t\t\tpathComponents = pathComponents.slice(0, -1);\n\t\t\turlObject.pathname = pathComponents.slice(1).join('/') + '/';\n\t\t}\n\t}\n\n\tif (urlObject.hostname) {\n\t\t// Remove trailing dot\n\t\turlObject.hostname = urlObject.hostname.replace(/\\.$/, '');\n\n\t\t// Remove `www.`\n\t\tif (options.stripWWW && /^www\\.(?!www\\.)[a-z\\-\\d]{1,63}\\.[a-z.\\-\\d]{2,63}$/.test(urlObject.hostname)) {\n\t\t\t// Each label should be max 63 at length (min: 1).\n\t\t\t// Source: https://en.wikipedia.org/wiki/Hostname#Restrictions_on_valid_host_names\n\t\t\t// Each TLD should be up to 63 characters long (min: 2).\n\t\t\t// It is technically possible to have a single character TLD, but none currently exist.\n\t\t\turlObject.hostname = urlObject.hostname.replace(/^www\\./, '');\n\t\t}\n\t}\n\n\t// Remove query unwanted parameters\n\tif (Array.isArray(options.removeQueryParameters)) {\n\t\t// eslint-disable-next-line unicorn/no-useless-spread -- We are intentionally spreading to get a copy.\n\t\tfor (const key of [...urlObject.searchParams.keys()]) {\n\t\t\tif (testParameter(key, options.removeQueryParameters)) {\n\t\t\t\turlObject.searchParams.delete(key);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (!Array.isArray(options.keepQueryParameters) && options.removeQueryParameters === true) {\n\t\turlObject.search = '';\n\t}\n\n\t// Keep wanted query parameters\n\tif (Array.isArray(options.keepQueryParameters) && options.keepQueryParameters.length > 0) {\n\t\t// eslint-disable-next-line unicorn/no-useless-spread -- We are intentionally spreading to get a copy.\n\t\tfor (const key of [...urlObject.searchParams.keys()]) {\n\t\t\tif (!testParameter(key, options.keepQueryParameters)) {\n\t\t\t\turlObject.searchParams.delete(key);\n\t\t\t}\n\t\t}\n\t}\n\n\t// Sort query parameters\n\tif (options.sortQueryParameters) {\n\t\turlObject.searchParams.sort();\n\n\t\t// Calling `.sort()` encodes the search parameters, so we need to decode them again.\n\t\ttry {\n\t\t\turlObject.search = decodeURIComponent(urlObject.search);\n\t\t} catch {}\n\t}\n\n\tif (options.removeTrailingSlash) {\n\t\turlObject.pathname = urlObject.pathname.replace(/\\/$/, '');\n\t}\n\n\t// Remove an explicit port number, excluding a default port number, if applicable\n\tif (options.removeExplicitPort && urlObject.port) {\n\t\turlObject.port = '';\n\t}\n\n\tconst oldUrlString = urlString;\n\n\t// Take advantage of many of the Node `url` normalizations\n\turlString = urlObject.toString();\n\n\tif (!options.removeSingleSlash && urlObject.pathname === '/' && !oldUrlString.endsWith('/') && urlObject.hash === '') {\n\t\turlString = urlString.replace(/\\/$/, '');\n\t}\n\n\t// Remove ending `/` unless removeSingleSlash is false\n\tif ((options.removeTrailingSlash || urlObject.pathname === '/') && urlObject.hash === '' && options.removeSingleSlash) {\n\t\turlString = urlString.replace(/\\/$/, '');\n\t}\n\n\t// Restore relative protocol, if applicable\n\tif (hasRelativeProtocol && !options.normalizeProtocol) {\n\t\turlString = urlString.replace(/^http:\\/\\//, '//');\n\t}\n\n\t// Remove http/https\n\tif (options.stripProtocol) {\n\t\turlString = urlString.replace(/^(?:https?:)?\\/\\//, '');\n\t}\n\n\treturn urlString;\n}\n", "import {Readable as ReadableStream} from 'node:stream';\nimport lowercaseKeys from 'lowercase-keys';\n\nexport default class Response extends ReadableStream {\n\tstatusCode;\n\theaders;\n\tbody;\n\turl;\n\n\tconstructor({statusCode, headers, body, url}) {\n\t\tif (typeof statusCode !== 'number') {\n\t\t\tthrow new TypeError('Argument `statusCode` should be a number');\n\t\t}\n\n\t\tif (typeof headers !== 'object') {\n\t\t\tthrow new TypeError('Argument `headers` should be an object');\n\t\t}\n\n\t\tif (!(body instanceof Uint8Array)) {\n\t\t\tthrow new TypeError('Argument `body` should be a buffer');\n\t\t}\n\n\t\tif (typeof url !== 'string') {\n\t\t\tthrow new TypeError('Argument `url` should be a string');\n\t\t}\n\n\t\tsuper({\n\t\t\tread() {\n\t\t\t\tthis.push(body);\n\t\t\t\tthis.push(null);\n\t\t\t},\n\t\t});\n\n\t\tthis.statusCode = statusCode;\n\t\tthis.headers = lowercaseKeys(headers);\n\t\tthis.body = body;\n\t\tthis.url = url;\n\t}\n}\n", "export default function lowercaseKeys(object) {\n\treturn Object.fromEntries(Object.entries(object).map(([key, value]) => [key.toLowerCase(), value]));\n}\n", "// We define these manually to ensure they're always copied\n// even if they would move up the prototype chain\n// https://nodejs.org/api/http.html#http_class_http_incomingmessage\nconst knownProperties = [\n\t'aborted',\n\t'complete',\n\t'headers',\n\t'httpVersion',\n\t'httpVersionMinor',\n\t'httpVersionMajor',\n\t'method',\n\t'rawHeaders',\n\t'rawTrailers',\n\t'setTimeout',\n\t'socket',\n\t'statusCode',\n\t'statusMessage',\n\t'trailers',\n\t'url',\n];\n\nexport default function mimicResponse(fromStream, toStream) {\n\tif (toStream._readableState.autoDestroy) {\n\t\tthrow new Error('The second stream must have the `autoDestroy` option set to `false`');\n\t}\n\n\tconst fromProperties = new Set([...Object.keys(fromStream), ...knownProperties]);\n\n\tconst properties = {};\n\n\tfor (const property of fromProperties) {\n\t\t// Don't overwrite existing properties.\n\t\tif (property in toStream) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tproperties[property] = {\n\t\t\tget() {\n\t\t\t\tconst value = fromStream[property];\n\t\t\t\tconst isFunction = typeof value === 'function';\n\n\t\t\t\treturn isFunction ? value.bind(fromStream) : value;\n\t\t\t},\n\t\t\tset(value) {\n\t\t\t\tfromStream[property] = value;\n\t\t\t},\n\t\t\tenumerable: true,\n\t\t\tconfigurable: false,\n\t\t};\n\t}\n\n\tObject.defineProperties(toStream, properties);\n\n\tfromStream.once('aborted', () => {\n\t\ttoStream.destroy();\n\n\t\ttoStream.emit('aborted');\n\t});\n\n\tfromStream.once('close', () => {\n\t\tif (fromStream.complete) {\n\t\t\tif (toStream.readable) {\n\t\t\t\ttoStream.once('end', () => {\n\t\t\t\t\ttoStream.emit('close');\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\ttoStream.emit('close');\n\t\t\t}\n\t\t} else {\n\t\t\ttoStream.emit('close');\n\t\t}\n\t});\n\n\treturn toStream;\n}\n", null, "export const isFunction = (value) => (typeof value === \"function\");\n", "import { isFunction } from \"./isFunction.js\";\nconst isAsyncIterable = (value) => (isFunction(value[Symbol.asyncIterator]));\nasync function* readStream(readable) {\n    const reader = readable.getReader();\n    while (true) {\n        const { done, value } = await reader.read();\n        if (done) {\n            break;\n        }\n        yield value;\n    }\n}\nexport const getStreamIterator = (source) => {\n    if (isAsyncIterable(source)) {\n        return source;\n    }\n    if (isFunction(source.getReader)) {\n        return readStream(source);\n    }\n    throw new TypeError(\"Unsupported data source: Expected either ReadableStream or async iterable.\");\n};\n", "const alphabet = \"abcdefghijklmnopqrstuvwxyz0123456789\";\nexport function createBoundary() {\n    let size = 16;\n    let res = \"\";\n    while (size--) {\n        res += alphabet[(Math.random() * alphabet.length) << 0];\n    }\n    return res;\n}\n", "export const normalizeValue = (value) => String(value)\n    .replace(/\\r|\\n/g, (match, i, str) => {\n    if ((match === \"\\r\" && str[i + 1] !== \"\\n\")\n        || (match === \"\\n\" && str[i - 1] !== \"\\r\")) {\n        return \"\\r\\n\";\n    }\n    return match;\n});\n", "const getType = (value) => (Object.prototype.toString.call(value).slice(8, -1).toLowerCase());\nexport function isPlainObject(value) {\n    if (getType(value) !== \"object\") {\n        return false;\n    }\n    const pp = Object.getPrototypeOf(value);\n    if (pp === null || pp === undefined) {\n        return true;\n    }\n    const Ctor = pp.constructor && pp.constructor.toString();\n    return Ctor === Object.toString();\n}\n", "function getProperty(target, prop) {\n    if (typeof prop === \"string\") {\n        for (const [name, value] of Object.entries(target)) {\n            if (prop.toLowerCase() === name.toLowerCase()) {\n                return value;\n            }\n        }\n    }\n    return undefined;\n}\nexport const proxyHeaders = (object) => new Proxy(object, {\n    get: (target, prop) => getProperty(target, prop),\n    has: (target, prop) => getProperty(target, prop) !== undefined\n});\n", "import { isFunction } from \"./isFunction.js\";\nexport const isFormData = (value) => Boolean(value\n    && isFunction(value.constructor)\n    && value[Symbol.toStringTag] === \"FormData\"\n    && isFunction(value.append)\n    && isFunction(value.getAll)\n    && isFunction(value.entries)\n    && isFunction(value[Symbol.iterator]));\n", "export const escapeName = (name) => String(name)\n    .replace(/\\r/g, \"%0D\")\n    .replace(/\\n/g, \"%0A\")\n    .replace(/\"/g, \"%22\");\n", "import { isFunction } from \"./isFunction.js\";\nexport const isFile = (value) => Boolean(value\n    && typeof value === \"object\"\n    && isFunction(value.constructor)\n    && value[Symbol.toStringTag] === \"File\"\n    && isFunction(value.stream)\n    && value.name != null);\nexport const isFileLike = isFile;\n", "var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _FormDataEncoder_instances, _FormDataEncoder_CRLF, _FormDataEncoder_CRLF_BYTES, _FormDataEncoder_CRLF_BYTES_LENGTH, _FormDataEncoder_DASHES, _FormDataEncoder_encoder, _FormDataEncoder_footer, _FormDataEncoder_form, _FormDataEncoder_options, _FormDataEncoder_getFieldHeader, _FormDataEncoder_getContentLength;\nimport { getStreamIterator } from \"./util/getStreamIterator.js\";\nimport { createBoundary } from \"./util/createBoundary.js\";\nimport { normalizeValue } from \"./util/normalizeValue.js\";\nimport { isPlainObject } from \"./util/isPlainObject.js\";\nimport { proxyHeaders } from \"./util/proxyHeaders.js\";\nimport { isFormData } from \"./util/isFormData.js\";\nimport { escapeName } from \"./util/escapeName.js\";\nimport { isFile } from \"./util/isFile.js\";\nconst defaultOptions = {\n    enableAdditionalHeaders: false\n};\nconst readonlyProp = { writable: false, configurable: false };\nexport class FormDataEncoder {\n    constructor(form, boundaryOrOptions, options) {\n        _FormDataEncoder_instances.add(this);\n        _FormDataEncoder_CRLF.set(this, \"\\r\\n\");\n        _FormDataEncoder_CRLF_BYTES.set(this, void 0);\n        _FormDataEncoder_CRLF_BYTES_LENGTH.set(this, void 0);\n        _FormDataEncoder_DASHES.set(this, \"-\".repeat(2));\n        _FormDataEncoder_encoder.set(this, new TextEncoder());\n        _FormDataEncoder_footer.set(this, void 0);\n        _FormDataEncoder_form.set(this, void 0);\n        _FormDataEncoder_options.set(this, void 0);\n        if (!isFormData(form)) {\n            throw new TypeError(\"Expected first argument to be a FormData instance.\");\n        }\n        let boundary;\n        if (isPlainObject(boundaryOrOptions)) {\n            options = boundaryOrOptions;\n        }\n        else {\n            boundary = boundaryOrOptions;\n        }\n        if (!boundary) {\n            boundary = createBoundary();\n        }\n        if (typeof boundary !== \"string\") {\n            throw new TypeError(\"Expected boundary argument to be a string.\");\n        }\n        if (options && !isPlainObject(options)) {\n            throw new TypeError(\"Expected options argument to be an object.\");\n        }\n        __classPrivateFieldSet(this, _FormDataEncoder_form, Array.from(form.entries()), \"f\");\n        __classPrivateFieldSet(this, _FormDataEncoder_options, { ...defaultOptions, ...options }, \"f\");\n        __classPrivateFieldSet(this, _FormDataEncoder_CRLF_BYTES, __classPrivateFieldGet(this, _FormDataEncoder_encoder, \"f\").encode(__classPrivateFieldGet(this, _FormDataEncoder_CRLF, \"f\")), \"f\");\n        __classPrivateFieldSet(this, _FormDataEncoder_CRLF_BYTES_LENGTH, __classPrivateFieldGet(this, _FormDataEncoder_CRLF_BYTES, \"f\").byteLength, \"f\");\n        this.boundary = `form-data-boundary-${boundary}`;\n        this.contentType = `multipart/form-data; boundary=${this.boundary}`;\n        __classPrivateFieldSet(this, _FormDataEncoder_footer, __classPrivateFieldGet(this, _FormDataEncoder_encoder, \"f\").encode(`${__classPrivateFieldGet(this, _FormDataEncoder_DASHES, \"f\")}${this.boundary}${__classPrivateFieldGet(this, _FormDataEncoder_DASHES, \"f\")}${__classPrivateFieldGet(this, _FormDataEncoder_CRLF, \"f\").repeat(2)}`), \"f\");\n        const headers = {\n            \"Content-Type\": this.contentType\n        };\n        const contentLength = __classPrivateFieldGet(this, _FormDataEncoder_instances, \"m\", _FormDataEncoder_getContentLength).call(this);\n        if (contentLength) {\n            this.contentLength = contentLength;\n            headers[\"Content-Length\"] = contentLength;\n        }\n        this.headers = proxyHeaders(Object.freeze(headers));\n        Object.defineProperties(this, {\n            boundary: readonlyProp,\n            contentType: readonlyProp,\n            contentLength: readonlyProp,\n            headers: readonlyProp\n        });\n    }\n    getContentLength() {\n        return this.contentLength == null ? undefined : Number(this.contentLength);\n    }\n    *values() {\n        for (const [name, raw] of __classPrivateFieldGet(this, _FormDataEncoder_form, \"f\")) {\n            const value = isFile(raw) ? raw : __classPrivateFieldGet(this, _FormDataEncoder_encoder, \"f\").encode(normalizeValue(raw));\n            yield __classPrivateFieldGet(this, _FormDataEncoder_instances, \"m\", _FormDataEncoder_getFieldHeader).call(this, name, value);\n            yield value;\n            yield __classPrivateFieldGet(this, _FormDataEncoder_CRLF_BYTES, \"f\");\n        }\n        yield __classPrivateFieldGet(this, _FormDataEncoder_footer, \"f\");\n    }\n    async *encode() {\n        for (const part of this.values()) {\n            if (isFile(part)) {\n                yield* getStreamIterator(part.stream());\n            }\n            else {\n                yield part;\n            }\n        }\n    }\n    [(_FormDataEncoder_CRLF = new WeakMap(), _FormDataEncoder_CRLF_BYTES = new WeakMap(), _FormDataEncoder_CRLF_BYTES_LENGTH = new WeakMap(), _FormDataEncoder_DASHES = new WeakMap(), _FormDataEncoder_encoder = new WeakMap(), _FormDataEncoder_footer = new WeakMap(), _FormDataEncoder_form = new WeakMap(), _FormDataEncoder_options = new WeakMap(), _FormDataEncoder_instances = new WeakSet(), _FormDataEncoder_getFieldHeader = function _FormDataEncoder_getFieldHeader(name, value) {\n        let header = \"\";\n        header += `${__classPrivateFieldGet(this, _FormDataEncoder_DASHES, \"f\")}${this.boundary}${__classPrivateFieldGet(this, _FormDataEncoder_CRLF, \"f\")}`;\n        header += `Content-Disposition: form-data; name=\"${escapeName(name)}\"`;\n        if (isFile(value)) {\n            header += `; filename=\"${escapeName(value.name)}\"${__classPrivateFieldGet(this, _FormDataEncoder_CRLF, \"f\")}`;\n            header += `Content-Type: ${value.type || \"application/octet-stream\"}`;\n        }\n        const size = isFile(value) ? value.size : value.byteLength;\n        if (__classPrivateFieldGet(this, _FormDataEncoder_options, \"f\").enableAdditionalHeaders === true\n            && size != null\n            && !isNaN(size)) {\n            header += `${__classPrivateFieldGet(this, _FormDataEncoder_CRLF, \"f\")}Content-Length: ${isFile(value) ? value.size : value.byteLength}`;\n        }\n        return __classPrivateFieldGet(this, _FormDataEncoder_encoder, \"f\").encode(`${header}${__classPrivateFieldGet(this, _FormDataEncoder_CRLF, \"f\").repeat(2)}`);\n    }, _FormDataEncoder_getContentLength = function _FormDataEncoder_getContentLength() {\n        let length = 0;\n        for (const [name, raw] of __classPrivateFieldGet(this, _FormDataEncoder_form, \"f\")) {\n            const value = isFile(raw) ? raw : __classPrivateFieldGet(this, _FormDataEncoder_encoder, \"f\").encode(normalizeValue(raw));\n            const size = isFile(value) ? value.size : value.byteLength;\n            if (size == null || isNaN(size)) {\n                return undefined;\n            }\n            length += __classPrivateFieldGet(this, _FormDataEncoder_instances, \"m\", _FormDataEncoder_getFieldHeader).call(this, name, value).byteLength;\n            length += size;\n            length += __classPrivateFieldGet(this, _FormDataEncoder_CRLF_BYTES_LENGTH, \"f\");\n        }\n        return String(length + __classPrivateFieldGet(this, _FormDataEncoder_footer, \"f\").byteLength);\n    }, Symbol.iterator)]() {\n        return this.values();\n    }\n    [Symbol.asyncIterator]() {\n        return this.encode();\n    }\n}\n", "import { Buffer } from 'node:buffer';\nimport { promisify } from 'node:util';\nimport is from '@sindresorhus/is';\nimport isFormData from './is-form-data.js';\nexport default async function getBodySize(body, headers) {\n    if (headers && 'content-length' in headers) {\n        return Number(headers['content-length']);\n    }\n    if (!body) {\n        return 0;\n    }\n    if (is.string(body)) {\n        return Buffer.byteLength(body);\n    }\n    if (is.buffer(body)) {\n        return body.length;\n    }\n    if (isFormData(body)) {\n        return promisify(body.getLength.bind(body))();\n    }\n    return undefined;\n}\n", "import is from '@sindresorhus/is';\nexport default function isFormData(body) {\n    return is.nodeStream(body) && is.function_(body.getBoundary);\n}\n", "export default function proxyEvents(from, to, events) {\n    const eventFunctions = {};\n    for (const event of events) {\n        const eventFunction = (...args) => {\n            to.emit(event, ...args);\n        };\n        eventFunctions[event] = eventFunction;\n        from.on(event, eventFunction);\n    }\n    return () => {\n        for (const [event, eventFunction] of Object.entries(eventFunctions)) {\n            from.off(event, eventFunction);\n        }\n    };\n}\n", "import net from 'node:net';\nimport unhandler from './utils/unhandle.js';\nconst reentry = Symbol('reentry');\nconst noop = () => { };\nexport class TimeoutError extends Error {\n    constructor(threshold, event) {\n        super(`Timeout awaiting '${event}' for ${threshold}ms`);\n        Object.defineProperty(this, \"event\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: event\n        });\n        Object.defineProperty(this, \"code\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.name = 'TimeoutError';\n        this.code = 'ETIMEDOUT';\n    }\n}\nexport default function timedOut(request, delays, options) {\n    if (reentry in request) {\n        return noop;\n    }\n    request[reentry] = true;\n    const cancelers = [];\n    const { once, unhandleAll } = unhandler();\n    const addTimeout = (delay, callback, event) => {\n        const timeout = setTimeout(callback, delay, delay, event);\n        timeout.unref?.();\n        const cancel = () => {\n            clearTimeout(timeout);\n        };\n        cancelers.push(cancel);\n        return cancel;\n    };\n    const { host, hostname } = options;\n    const timeoutHandler = (delay, event) => {\n        request.destroy(new TimeoutError(delay, event));\n    };\n    const cancelTimeouts = () => {\n        for (const cancel of cancelers) {\n            cancel();\n        }\n        unhandleAll();\n    };\n    request.once('error', error => {\n        cancelTimeouts();\n        // Save original behavior\n        /* istanbul ignore next */\n        if (request.listenerCount('error') === 0) {\n            throw error;\n        }\n    });\n    if (typeof delays.request !== 'undefined') {\n        const cancelTimeout = addTimeout(delays.request, timeoutHandler, 'request');\n        once(request, 'response', (response) => {\n            once(response, 'end', cancelTimeout);\n        });\n    }\n    if (typeof delays.socket !== 'undefined') {\n        const { socket } = delays;\n        const socketTimeoutHandler = () => {\n            timeoutHandler(socket, 'socket');\n        };\n        request.setTimeout(socket, socketTimeoutHandler);\n        // `request.setTimeout(0)` causes a memory leak.\n        // We can just remove the listener and forget about the timer - it's unreffed.\n        // See https://github.com/sindresorhus/got/issues/690\n        cancelers.push(() => {\n            request.removeListener('timeout', socketTimeoutHandler);\n        });\n    }\n    const hasLookup = typeof delays.lookup !== 'undefined';\n    const hasConnect = typeof delays.connect !== 'undefined';\n    const hasSecureConnect = typeof delays.secureConnect !== 'undefined';\n    const hasSend = typeof delays.send !== 'undefined';\n    if (hasLookup || hasConnect || hasSecureConnect || hasSend) {\n        once(request, 'socket', (socket) => {\n            const { socketPath } = request;\n            /* istanbul ignore next: hard to test */\n            if (socket.connecting) {\n                const hasPath = Boolean(socketPath ?? net.isIP(hostname ?? host ?? '') !== 0);\n                if (hasLookup && !hasPath && typeof socket.address().address === 'undefined') {\n                    const cancelTimeout = addTimeout(delays.lookup, timeoutHandler, 'lookup');\n                    once(socket, 'lookup', cancelTimeout);\n                }\n                if (hasConnect) {\n                    const timeConnect = () => addTimeout(delays.connect, timeoutHandler, 'connect');\n                    if (hasPath) {\n                        once(socket, 'connect', timeConnect());\n                    }\n                    else {\n                        once(socket, 'lookup', (error) => {\n                            if (error === null) {\n                                once(socket, 'connect', timeConnect());\n                            }\n                        });\n                    }\n                }\n                if (hasSecureConnect && options.protocol === 'https:') {\n                    once(socket, 'connect', () => {\n                        const cancelTimeout = addTimeout(delays.secureConnect, timeoutHandler, 'secureConnect');\n                        once(socket, 'secureConnect', cancelTimeout);\n                    });\n                }\n            }\n            if (hasSend) {\n                const timeRequest = () => addTimeout(delays.send, timeoutHandler, 'send');\n                /* istanbul ignore next: hard to test */\n                if (socket.connecting) {\n                    once(socket, 'connect', () => {\n                        once(request, 'upload-complete', timeRequest());\n                    });\n                }\n                else {\n                    once(request, 'upload-complete', timeRequest());\n                }\n            }\n        });\n    }\n    if (typeof delays.response !== 'undefined') {\n        once(request, 'upload-complete', () => {\n            const cancelTimeout = addTimeout(delays.response, timeoutHandler, 'response');\n            once(request, 'response', cancelTimeout);\n        });\n    }\n    if (typeof delays.read !== 'undefined') {\n        once(request, 'response', (response) => {\n            const cancelTimeout = addTimeout(delays.read, timeoutHandler, 'read');\n            once(response, 'end', cancelTimeout);\n        });\n    }\n    return cancelTimeouts;\n}\n", "// When attaching listeners, it's very easy to forget about them.\n// Especially if you do error handling and set timeouts.\n// So instead of checking if it's proper to throw an error on every timeout ever,\n// use this simple tool which will remove all listeners you have attached.\nexport default function unhandle() {\n    const handlers = [];\n    return {\n        once(origin, event, fn) {\n            origin.once(event, fn);\n            handlers.push({ origin, event, fn });\n        },\n        unhandleAll() {\n            for (const handler of handlers) {\n                const { origin, event, fn } = handler;\n                origin.removeListener(event, fn);\n            }\n            handlers.length = 0;\n        },\n    };\n}\n", "import is from '@sindresorhus/is';\nexport default function urlToOptions(url) {\n    // Cast to URL\n    url = url;\n    const options = {\n        protocol: url.protocol,\n        hostname: is.string(url.hostname) && url.hostname.startsWith('[') ? url.hostname.slice(1, -1) : url.hostname,\n        host: url.host,\n        hash: url.hash,\n        search: url.search,\n        pathname: url.pathname,\n        href: url.href,\n        path: `${url.pathname || ''}${url.search || ''}`,\n    };\n    if (is.string(url.port) && url.port.length > 0) {\n        options.port = Number(url.port);\n    }\n    if (url.username || url.password) {\n        options.auth = `${url.username || ''}:${url.password || ''}`;\n    }\n    return options;\n}\n", "export default class WeakableMap {\n    constructor() {\n        Object.defineProperty(this, \"weakMap\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"map\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.weakMap = new WeakMap();\n        this.map = new Map();\n    }\n    set(key, value) {\n        if (typeof key === 'object') {\n            this.weakMap.set(key, value);\n        }\n        else {\n            this.map.set(key, value);\n        }\n    }\n    get(key) {\n        if (typeof key === 'object') {\n            return this.weakMap.get(key);\n        }\n        return this.map.get(key);\n    }\n    has(key) {\n        if (typeof key === 'object') {\n            return this.weakMap.has(key);\n        }\n        return this.map.has(key);\n    }\n}\n", "const calculateRetryDelay = ({ attemptCount, retryOptions, error, retryAfter, computedValue, }) => {\n    if (error.name === 'RetryError') {\n        return 1;\n    }\n    if (attemptCount > retryOptions.limit) {\n        return 0;\n    }\n    const hasMethod = retryOptions.methods.includes(error.options.method);\n    const hasErrorCode = retryOptions.errorCodes.includes(error.code);\n    const hasStatusCode = error.response && retryOptions.statusCodes.includes(error.response.statusCode);\n    if (!hasMethod || (!hasErrorCode && !hasStatusCode)) {\n        return 0;\n    }\n    if (error.response) {\n        if (retryAfter) {\n            // In this case `computedValue` is `options.request.timeout`\n            if (retryAfter > computedValue) {\n                return 0;\n            }\n            return retryAfter;\n        }\n        if (error.response.statusCode === 413) {\n            return 0;\n        }\n    }\n    const noise = Math.random() * retryOptions.noise;\n    return Math.min(((2 ** (attemptCount - 1)) * 1000), retryOptions.backoffLimit) + noise;\n};\nexport default calculateRetryDelay;\n", "import process from 'node:process';\nimport { promisify, inspect } from 'node:util';\nimport { URL, URLSearchParams } from 'node:url';\nimport { checkServerIdentity } from 'node:tls';\n// DO NOT use destructuring for `https.request` and `http.request` as it's not compatible with `nock`.\nimport http from 'node:http';\nimport https from 'node:https';\nimport is, { assert } from '@sindresorhus/is';\nimport lowercaseKeys from 'lowercase-keys';\nimport CacheableLookup from 'cacheable-lookup';\nimport http2wrapper from 'http2-wrapper';\nimport { isFormData } from 'form-data-encoder';\nimport parseLinkHeader from './parse-link-header.js';\nconst [major, minor] = process.versions.node.split('.').map(Number);\nfunction validateSearchParameters(searchParameters) {\n    // eslint-disable-next-line guard-for-in\n    for (const key in searchParameters) {\n        const value = searchParameters[key];\n        assert.any([is.string, is.number, is.boolean, is.null_, is.undefined], value);\n    }\n}\nconst globalCache = new Map();\nlet globalDnsCache;\nconst getGlobalDnsCache = () => {\n    if (globalDnsCache) {\n        return globalDnsCache;\n    }\n    globalDnsCache = new CacheableLookup();\n    return globalDnsCache;\n};\nconst defaultInternals = {\n    request: undefined,\n    agent: {\n        http: undefined,\n        https: undefined,\n        http2: undefined,\n    },\n    h2session: undefined,\n    decompress: true,\n    timeout: {\n        connect: undefined,\n        lookup: undefined,\n        read: undefined,\n        request: undefined,\n        response: undefined,\n        secureConnect: undefined,\n        send: undefined,\n        socket: undefined,\n    },\n    prefixUrl: '',\n    body: undefined,\n    form: undefined,\n    json: undefined,\n    cookieJar: undefined,\n    ignoreInvalidCookies: false,\n    searchParams: undefined,\n    dnsLookup: undefined,\n    dnsCache: undefined,\n    context: {},\n    hooks: {\n        init: [],\n        beforeRequest: [],\n        beforeError: [],\n        beforeRedirect: [],\n        beforeRetry: [],\n        afterResponse: [],\n    },\n    followRedirect: true,\n    maxRedirects: 10,\n    cache: undefined,\n    throwHttpErrors: true,\n    username: '',\n    password: '',\n    http2: false,\n    allowGetBody: false,\n    headers: {\n        'user-agent': 'got (https://github.com/sindresorhus/got)',\n    },\n    methodRewriting: false,\n    dnsLookupIpVersion: undefined,\n    parseJson: JSON.parse,\n    stringifyJson: JSON.stringify,\n    retry: {\n        limit: 2,\n        methods: [\n            'GET',\n            'PUT',\n            'HEAD',\n            'DELETE',\n            'OPTIONS',\n            'TRACE',\n        ],\n        statusCodes: [\n            408,\n            413,\n            429,\n            500,\n            502,\n            503,\n            504,\n            521,\n            522,\n            524,\n        ],\n        errorCodes: [\n            'ETIMEDOUT',\n            'ECONNRESET',\n            'EADDRINUSE',\n            'ECONNREFUSED',\n            'EPIPE',\n            'ENOTFOUND',\n            'ENETUNREACH',\n            'EAI_AGAIN',\n        ],\n        maxRetryAfter: undefined,\n        calculateDelay: ({ computedValue }) => computedValue,\n        backoffLimit: Number.POSITIVE_INFINITY,\n        noise: 100,\n    },\n    localAddress: undefined,\n    method: 'GET',\n    createConnection: undefined,\n    cacheOptions: {\n        shared: undefined,\n        cacheHeuristic: undefined,\n        immutableMinTimeToLive: undefined,\n        ignoreCargoCult: undefined,\n    },\n    https: {\n        alpnProtocols: undefined,\n        rejectUnauthorized: undefined,\n        checkServerIdentity: undefined,\n        certificateAuthority: undefined,\n        key: undefined,\n        certificate: undefined,\n        passphrase: undefined,\n        pfx: undefined,\n        ciphers: undefined,\n        honorCipherOrder: undefined,\n        minVersion: undefined,\n        maxVersion: undefined,\n        signatureAlgorithms: undefined,\n        tlsSessionLifetime: undefined,\n        dhparam: undefined,\n        ecdhCurve: undefined,\n        certificateRevocationLists: undefined,\n    },\n    encoding: undefined,\n    resolveBodyOnly: false,\n    isStream: false,\n    responseType: 'text',\n    url: undefined,\n    pagination: {\n        transform(response) {\n            if (response.request.options.responseType === 'json') {\n                return response.body;\n            }\n            return JSON.parse(response.body);\n        },\n        paginate({ response }) {\n            const rawLinkHeader = response.headers.link;\n            if (typeof rawLinkHeader !== 'string' || rawLinkHeader.trim() === '') {\n                return false;\n            }\n            const parsed = parseLinkHeader(rawLinkHeader);\n            const next = parsed.find(entry => entry.parameters.rel === 'next' || entry.parameters.rel === '\"next\"');\n            if (next) {\n                return {\n                    url: new URL(next.reference, response.url),\n                };\n            }\n            return false;\n        },\n        filter: () => true,\n        shouldContinue: () => true,\n        countLimit: Number.POSITIVE_INFINITY,\n        backoff: 0,\n        requestLimit: 10000,\n        stackAllItems: false,\n    },\n    setHost: true,\n    maxHeaderSize: undefined,\n    signal: undefined,\n    enableUnixSockets: true,\n};\nconst cloneInternals = (internals) => {\n    const { hooks, retry } = internals;\n    const result = {\n        ...internals,\n        context: { ...internals.context },\n        cacheOptions: { ...internals.cacheOptions },\n        https: { ...internals.https },\n        agent: { ...internals.agent },\n        headers: { ...internals.headers },\n        retry: {\n            ...retry,\n            errorCodes: [...retry.errorCodes],\n            methods: [...retry.methods],\n            statusCodes: [...retry.statusCodes],\n        },\n        timeout: { ...internals.timeout },\n        hooks: {\n            init: [...hooks.init],\n            beforeRequest: [...hooks.beforeRequest],\n            beforeError: [...hooks.beforeError],\n            beforeRedirect: [...hooks.beforeRedirect],\n            beforeRetry: [...hooks.beforeRetry],\n            afterResponse: [...hooks.afterResponse],\n        },\n        searchParams: internals.searchParams ? new URLSearchParams(internals.searchParams) : undefined,\n        pagination: { ...internals.pagination },\n    };\n    if (result.url !== undefined) {\n        result.prefixUrl = '';\n    }\n    return result;\n};\nconst cloneRaw = (raw) => {\n    const { hooks, retry } = raw;\n    const result = { ...raw };\n    if (is.object(raw.context)) {\n        result.context = { ...raw.context };\n    }\n    if (is.object(raw.cacheOptions)) {\n        result.cacheOptions = { ...raw.cacheOptions };\n    }\n    if (is.object(raw.https)) {\n        result.https = { ...raw.https };\n    }\n    if (is.object(raw.cacheOptions)) {\n        result.cacheOptions = { ...result.cacheOptions };\n    }\n    if (is.object(raw.agent)) {\n        result.agent = { ...raw.agent };\n    }\n    if (is.object(raw.headers)) {\n        result.headers = { ...raw.headers };\n    }\n    if (is.object(retry)) {\n        result.retry = { ...retry };\n        if (is.array(retry.errorCodes)) {\n            result.retry.errorCodes = [...retry.errorCodes];\n        }\n        if (is.array(retry.methods)) {\n            result.retry.methods = [...retry.methods];\n        }\n        if (is.array(retry.statusCodes)) {\n            result.retry.statusCodes = [...retry.statusCodes];\n        }\n    }\n    if (is.object(raw.timeout)) {\n        result.timeout = { ...raw.timeout };\n    }\n    if (is.object(hooks)) {\n        result.hooks = {\n            ...hooks,\n        };\n        if (is.array(hooks.init)) {\n            result.hooks.init = [...hooks.init];\n        }\n        if (is.array(hooks.beforeRequest)) {\n            result.hooks.beforeRequest = [...hooks.beforeRequest];\n        }\n        if (is.array(hooks.beforeError)) {\n            result.hooks.beforeError = [...hooks.beforeError];\n        }\n        if (is.array(hooks.beforeRedirect)) {\n            result.hooks.beforeRedirect = [...hooks.beforeRedirect];\n        }\n        if (is.array(hooks.beforeRetry)) {\n            result.hooks.beforeRetry = [...hooks.beforeRetry];\n        }\n        if (is.array(hooks.afterResponse)) {\n            result.hooks.afterResponse = [...hooks.afterResponse];\n        }\n    }\n    // TODO: raw.searchParams\n    if (is.object(raw.pagination)) {\n        result.pagination = { ...raw.pagination };\n    }\n    return result;\n};\nconst getHttp2TimeoutOption = (internals) => {\n    const delays = [internals.timeout.socket, internals.timeout.connect, internals.timeout.lookup, internals.timeout.request, internals.timeout.secureConnect].filter(delay => typeof delay === 'number');\n    if (delays.length > 0) {\n        return Math.min(...delays);\n    }\n    return undefined;\n};\nconst init = (options, withOptions, self) => {\n    const initHooks = options.hooks?.init;\n    if (initHooks) {\n        for (const hook of initHooks) {\n            hook(withOptions, self);\n        }\n    }\n};\nexport default class Options {\n    constructor(input, options, defaults) {\n        Object.defineProperty(this, \"_unixOptions\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_internals\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_merging\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_init\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        assert.any([is.string, is.urlInstance, is.object, is.undefined], input);\n        assert.any([is.object, is.undefined], options);\n        assert.any([is.object, is.undefined], defaults);\n        if (input instanceof Options || options instanceof Options) {\n            throw new TypeError('The defaults must be passed as the third argument');\n        }\n        this._internals = cloneInternals(defaults?._internals ?? defaults ?? defaultInternals);\n        this._init = [...(defaults?._init ?? [])];\n        this._merging = false;\n        this._unixOptions = undefined;\n        // This rule allows `finally` to be considered more important.\n        // Meaning no matter the error thrown in the `try` block,\n        // if `finally` throws then the `finally` error will be thrown.\n        //\n        // Yes, we want this. If we set `url` first, then the `url.searchParams`\n        // would get merged. Instead we set the `searchParams` first, then\n        // `url.searchParams` is overwritten as expected.\n        //\n        /* eslint-disable no-unsafe-finally */\n        try {\n            if (is.plainObject(input)) {\n                try {\n                    this.merge(input);\n                    this.merge(options);\n                }\n                finally {\n                    this.url = input.url;\n                }\n            }\n            else {\n                try {\n                    this.merge(options);\n                }\n                finally {\n                    if (options?.url !== undefined) {\n                        if (input === undefined) {\n                            this.url = options.url;\n                        }\n                        else {\n                            throw new TypeError('The `url` option is mutually exclusive with the `input` argument');\n                        }\n                    }\n                    else if (input !== undefined) {\n                        this.url = input;\n                    }\n                }\n            }\n        }\n        catch (error) {\n            error.options = this;\n            throw error;\n        }\n        /* eslint-enable no-unsafe-finally */\n    }\n    merge(options) {\n        if (!options) {\n            return;\n        }\n        if (options instanceof Options) {\n            for (const init of options._init) {\n                this.merge(init);\n            }\n            return;\n        }\n        options = cloneRaw(options);\n        init(this, options, this);\n        init(options, options, this);\n        this._merging = true;\n        // Always merge `isStream` first\n        if ('isStream' in options) {\n            this.isStream = options.isStream;\n        }\n        try {\n            let push = false;\n            for (const key in options) {\n                // `got.extend()` options\n                if (key === 'mutableDefaults' || key === 'handlers') {\n                    continue;\n                }\n                // Never merge `url`\n                if (key === 'url') {\n                    continue;\n                }\n                if (!(key in this)) {\n                    throw new Error(`Unexpected option: ${key}`);\n                }\n                // @ts-expect-error Type 'unknown' is not assignable to type 'never'.\n                this[key] = options[key];\n                push = true;\n            }\n            if (push) {\n                this._init.push(options);\n            }\n        }\n        finally {\n            this._merging = false;\n        }\n    }\n    /**\n    Custom request function.\n    The main purpose of this is to [support HTTP2 using a wrapper](https://github.com/szmarczak/http2-wrapper).\n\n    @default http.request | https.request\n    */\n    get request() {\n        return this._internals.request;\n    }\n    set request(value) {\n        assert.any([is.function_, is.undefined], value);\n        this._internals.request = value;\n    }\n    /**\n    An object representing `http`, `https` and `http2` keys for [`http.Agent`](https://nodejs.org/api/http.html#http_class_http_agent), [`https.Agent`](https://nodejs.org/api/https.html#https_class_https_agent) and [`http2wrapper.Agent`](https://github.com/szmarczak/http2-wrapper#new-http2agentoptions) instance.\n    This is necessary because a request to one protocol might redirect to another.\n    In such a scenario, Got will switch over to the right protocol agent for you.\n\n    If a key is not present, it will default to a global agent.\n\n    @example\n    ```\n    import got from 'got';\n    import HttpAgent from 'agentkeepalive';\n\n    const {HttpsAgent} = HttpAgent;\n\n    await got('https://sindresorhus.com', {\n        agent: {\n            http: new HttpAgent(),\n            https: new HttpsAgent()\n        }\n    });\n    ```\n    */\n    get agent() {\n        return this._internals.agent;\n    }\n    set agent(value) {\n        assert.plainObject(value);\n        // eslint-disable-next-line guard-for-in\n        for (const key in value) {\n            if (!(key in this._internals.agent)) {\n                throw new TypeError(`Unexpected agent option: ${key}`);\n            }\n            // @ts-expect-error - No idea why `value[key]` doesn't work here.\n            assert.any([is.object, is.undefined], value[key]);\n        }\n        if (this._merging) {\n            Object.assign(this._internals.agent, value);\n        }\n        else {\n            this._internals.agent = { ...value };\n        }\n    }\n    get h2session() {\n        return this._internals.h2session;\n    }\n    set h2session(value) {\n        this._internals.h2session = value;\n    }\n    /**\n    Decompress the response automatically.\n\n    This will set the `accept-encoding` header to `gzip, deflate, br` unless you set it yourself.\n\n    If this is disabled, a compressed response is returned as a `Buffer`.\n    This may be useful if you want to handle decompression yourself or stream the raw compressed data.\n\n    @default true\n    */\n    get decompress() {\n        return this._internals.decompress;\n    }\n    set decompress(value) {\n        assert.boolean(value);\n        this._internals.decompress = value;\n    }\n    /**\n    Milliseconds to wait for the server to end the response before aborting the request with `got.TimeoutError` error (a.k.a. `request` property).\n    By default, there's no timeout.\n\n    This also accepts an `object` with the following fields to constrain the duration of each phase of the request lifecycle:\n\n    - `lookup` starts when a socket is assigned and ends when the hostname has been resolved.\n        Does not apply when using a Unix domain socket.\n    - `connect` starts when `lookup` completes (or when the socket is assigned if lookup does not apply to the request) and ends when the socket is connected.\n    - `secureConnect` starts when `connect` completes and ends when the handshaking process completes (HTTPS only).\n    - `socket` starts when the socket is connected. See [request.setTimeout](https://nodejs.org/api/http.html#http_request_settimeout_timeout_callback).\n    - `response` starts when the request has been written to the socket and ends when the response headers are received.\n    - `send` starts when the socket is connected and ends with the request has been written to the socket.\n    - `request` starts when the request is initiated and ends when the response's end event fires.\n    */\n    get timeout() {\n        // We always return `Delays` here.\n        // It has to be `Delays | number`, otherwise TypeScript will error because the getter and the setter have incompatible types.\n        return this._internals.timeout;\n    }\n    set timeout(value) {\n        assert.plainObject(value);\n        // eslint-disable-next-line guard-for-in\n        for (const key in value) {\n            if (!(key in this._internals.timeout)) {\n                throw new Error(`Unexpected timeout option: ${key}`);\n            }\n            // @ts-expect-error - No idea why `value[key]` doesn't work here.\n            assert.any([is.number, is.undefined], value[key]);\n        }\n        if (this._merging) {\n            Object.assign(this._internals.timeout, value);\n        }\n        else {\n            this._internals.timeout = { ...value };\n        }\n    }\n    /**\n    When specified, `prefixUrl` will be prepended to `url`.\n    The prefix can be any valid URL, either relative or absolute.\n    A trailing slash `/` is optional - one will be added automatically.\n\n    __Note__: `prefixUrl` will be ignored if the `url` argument is a URL instance.\n\n    __Note__: Leading slashes in `input` are disallowed when using this option to enforce consistency and avoid confusion.\n    For example, when the prefix URL is `https://example.com/foo` and the input is `/bar`, there's ambiguity whether the resulting URL would become `https://example.com/foo/bar` or `https://example.com/bar`.\n    The latter is used by browsers.\n\n    __Tip__: Useful when used with `got.extend()` to create niche-specific Got instances.\n\n    __Tip__: You can change `prefixUrl` using hooks as long as the URL still includes the `prefixUrl`.\n    If the URL doesn't include it anymore, it will throw.\n\n    @example\n    ```\n    import got from 'got';\n\n    await got('unicorn', {prefixUrl: 'https://cats.com'});\n    //=> 'https://cats.com/unicorn'\n\n    const instance = got.extend({\n        prefixUrl: 'https://google.com'\n    });\n\n    await instance('unicorn', {\n        hooks: {\n            beforeRequest: [\n                options => {\n                    options.prefixUrl = 'https://cats.com';\n                }\n            ]\n        }\n    });\n    //=> 'https://cats.com/unicorn'\n    ```\n    */\n    get prefixUrl() {\n        // We always return `string` here.\n        // It has to be `string | URL`, otherwise TypeScript will error because the getter and the setter have incompatible types.\n        return this._internals.prefixUrl;\n    }\n    set prefixUrl(value) {\n        assert.any([is.string, is.urlInstance], value);\n        if (value === '') {\n            this._internals.prefixUrl = '';\n            return;\n        }\n        value = value.toString();\n        if (!value.endsWith('/')) {\n            value += '/';\n        }\n        if (this._internals.prefixUrl && this._internals.url) {\n            const { href } = this._internals.url;\n            this._internals.url.href = value + href.slice(this._internals.prefixUrl.length);\n        }\n        this._internals.prefixUrl = value;\n    }\n    /**\n    __Note #1__: The `body` option cannot be used with the `json` or `form` option.\n\n    __Note #2__: If you provide this option, `got.stream()` will be read-only.\n\n    __Note #3__: If you provide a payload with the `GET` or `HEAD` method, it will throw a `TypeError` unless the method is `GET` and the `allowGetBody` option is set to `true`.\n\n    __Note #4__: This option is not enumerable and will not be merged with the instance defaults.\n\n    The `content-length` header will be automatically set if `body` is a `string` / `Buffer` / [`FormData`](https://developer.mozilla.org/en-US/docs/Web/API/FormData) / [`form-data` instance](https://github.com/form-data/form-data), and `content-length` and `transfer-encoding` are not manually set in `options.headers`.\n\n    Since Got 12, the `content-length` is not automatically set when `body` is a `fs.createReadStream`.\n    */\n    get body() {\n        return this._internals.body;\n    }\n    set body(value) {\n        assert.any([is.string, is.buffer, is.nodeStream, is.generator, is.asyncGenerator, isFormData, is.undefined], value);\n        if (is.nodeStream(value)) {\n            assert.truthy(value.readable);\n        }\n        if (value !== undefined) {\n            assert.undefined(this._internals.form);\n            assert.undefined(this._internals.json);\n        }\n        this._internals.body = value;\n    }\n    /**\n    The form body is converted to a query string using [`(new URLSearchParams(object)).toString()`](https://nodejs.org/api/url.html#url_constructor_new_urlsearchparams_obj).\n\n    If the `Content-Type` header is not present, it will be set to `application/x-www-form-urlencoded`.\n\n    __Note #1__: If you provide this option, `got.stream()` will be read-only.\n\n    __Note #2__: This option is not enumerable and will not be merged with the instance defaults.\n    */\n    get form() {\n        return this._internals.form;\n    }\n    set form(value) {\n        assert.any([is.plainObject, is.undefined], value);\n        if (value !== undefined) {\n            assert.undefined(this._internals.body);\n            assert.undefined(this._internals.json);\n        }\n        this._internals.form = value;\n    }\n    /**\n    JSON body. If the `Content-Type` header is not set, it will be set to `application/json`.\n\n    __Note #1__: If you provide this option, `got.stream()` will be read-only.\n\n    __Note #2__: This option is not enumerable and will not be merged with the instance defaults.\n    */\n    get json() {\n        return this._internals.json;\n    }\n    set json(value) {\n        if (value !== undefined) {\n            assert.undefined(this._internals.body);\n            assert.undefined(this._internals.form);\n        }\n        this._internals.json = value;\n    }\n    /**\n    The URL to request, as a string, a [`https.request` options object](https://nodejs.org/api/https.html#https_https_request_options_callback), or a [WHATWG `URL`](https://nodejs.org/api/url.html#url_class_url).\n\n    Properties from `options` will override properties in the parsed `url`.\n\n    If no protocol is specified, it will throw a `TypeError`.\n\n    __Note__: The query string is **not** parsed as search params.\n\n    @example\n    ```\n    await got('https://example.com/?query=a b'); //=> https://example.com/?query=a%20b\n    await got('https://example.com/', {searchParams: {query: 'a b'}}); //=> https://example.com/?query=a+b\n\n    // The query string is overridden by `searchParams`\n    await got('https://example.com/?query=a b', {searchParams: {query: 'a b'}}); //=> https://example.com/?query=a+b\n    ```\n    */\n    get url() {\n        return this._internals.url;\n    }\n    set url(value) {\n        assert.any([is.string, is.urlInstance, is.undefined], value);\n        if (value === undefined) {\n            this._internals.url = undefined;\n            return;\n        }\n        if (is.string(value) && value.startsWith('/')) {\n            throw new Error('`url` must not start with a slash');\n        }\n        const urlString = `${this.prefixUrl}${value.toString()}`;\n        const url = new URL(urlString);\n        this._internals.url = url;\n        decodeURI(urlString);\n        if (url.protocol === 'unix:') {\n            url.href = `http://unix${url.pathname}${url.search}`;\n        }\n        if (url.protocol !== 'http:' && url.protocol !== 'https:') {\n            const error = new Error(`Unsupported protocol: ${url.protocol}`);\n            error.code = 'ERR_UNSUPPORTED_PROTOCOL';\n            throw error;\n        }\n        if (this._internals.username) {\n            url.username = this._internals.username;\n            this._internals.username = '';\n        }\n        if (this._internals.password) {\n            url.password = this._internals.password;\n            this._internals.password = '';\n        }\n        if (this._internals.searchParams) {\n            url.search = this._internals.searchParams.toString();\n            this._internals.searchParams = undefined;\n        }\n        if (url.hostname === 'unix') {\n            if (!this._internals.enableUnixSockets) {\n                throw new Error('Using UNIX domain sockets but option `enableUnixSockets` is not enabled');\n            }\n            const matches = /(?<socketPath>.+?):(?<path>.+)/.exec(`${url.pathname}${url.search}`);\n            if (matches?.groups) {\n                const { socketPath, path } = matches.groups;\n                this._unixOptions = {\n                    socketPath,\n                    path,\n                    host: '',\n                };\n            }\n            else {\n                this._unixOptions = undefined;\n            }\n            return;\n        }\n        this._unixOptions = undefined;\n    }\n    /**\n    Cookie support. You don't have to care about parsing or how to store them.\n\n    __Note__: If you provide this option, `options.headers.cookie` will be overridden.\n    */\n    get cookieJar() {\n        return this._internals.cookieJar;\n    }\n    set cookieJar(value) {\n        assert.any([is.object, is.undefined], value);\n        if (value === undefined) {\n            this._internals.cookieJar = undefined;\n            return;\n        }\n        let { setCookie, getCookieString } = value;\n        assert.function_(setCookie);\n        assert.function_(getCookieString);\n        /* istanbul ignore next: Horrible `tough-cookie` v3 check */\n        if (setCookie.length === 4 && getCookieString.length === 0) {\n            setCookie = promisify(setCookie.bind(value));\n            getCookieString = promisify(getCookieString.bind(value));\n            this._internals.cookieJar = {\n                setCookie,\n                getCookieString: getCookieString,\n            };\n        }\n        else {\n            this._internals.cookieJar = value;\n        }\n    }\n    /**\n    You can abort the `request` using [`AbortController`](https://developer.mozilla.org/en-US/docs/Web/API/AbortController).\n\n    *Requires Node.js 16 or later.*\n\n    @example\n    ```\n    import got from 'got';\n\n    const abortController = new AbortController();\n\n    const request = got('https://httpbin.org/anything', {\n        signal: abortController.signal\n    });\n\n    setTimeout(() => {\n        abortController.abort();\n    }, 100);\n    ```\n    */\n    // TODO: Replace `any` with `AbortSignal` when targeting Node 16.\n    get signal() {\n        return this._internals.signal;\n    }\n    // TODO: Replace `any` with `AbortSignal` when targeting Node 16.\n    set signal(value) {\n        assert.object(value);\n        this._internals.signal = value;\n    }\n    /**\n    Ignore invalid cookies instead of throwing an error.\n    Only useful when the `cookieJar` option has been set. Not recommended.\n\n    @default false\n    */\n    get ignoreInvalidCookies() {\n        return this._internals.ignoreInvalidCookies;\n    }\n    set ignoreInvalidCookies(value) {\n        assert.boolean(value);\n        this._internals.ignoreInvalidCookies = value;\n    }\n    /**\n    Query string that will be added to the request URL.\n    This will override the query string in `url`.\n\n    If you need to pass in an array, you can do it using a `URLSearchParams` instance.\n\n    @example\n    ```\n    import got from 'got';\n\n    const searchParams = new URLSearchParams([['key', 'a'], ['key', 'b']]);\n\n    await got('https://example.com', {searchParams});\n\n    console.log(searchParams.toString());\n    //=> 'key=a&key=b'\n    ```\n    */\n    get searchParams() {\n        if (this._internals.url) {\n            return this._internals.url.searchParams;\n        }\n        if (this._internals.searchParams === undefined) {\n            this._internals.searchParams = new URLSearchParams();\n        }\n        return this._internals.searchParams;\n    }\n    set searchParams(value) {\n        assert.any([is.string, is.object, is.undefined], value);\n        const url = this._internals.url;\n        if (value === undefined) {\n            this._internals.searchParams = undefined;\n            if (url) {\n                url.search = '';\n            }\n            return;\n        }\n        const searchParameters = this.searchParams;\n        let updated;\n        if (is.string(value)) {\n            updated = new URLSearchParams(value);\n        }\n        else if (value instanceof URLSearchParams) {\n            updated = value;\n        }\n        else {\n            validateSearchParameters(value);\n            updated = new URLSearchParams();\n            // eslint-disable-next-line guard-for-in\n            for (const key in value) {\n                const entry = value[key];\n                if (entry === null) {\n                    updated.append(key, '');\n                }\n                else if (entry === undefined) {\n                    searchParameters.delete(key);\n                }\n                else {\n                    updated.append(key, entry);\n                }\n            }\n        }\n        if (this._merging) {\n            // These keys will be replaced\n            for (const key of updated.keys()) {\n                searchParameters.delete(key);\n            }\n            for (const [key, value] of updated) {\n                searchParameters.append(key, value);\n            }\n        }\n        else if (url) {\n            url.search = searchParameters.toString();\n        }\n        else {\n            this._internals.searchParams = searchParameters;\n        }\n    }\n    get searchParameters() {\n        throw new Error('The `searchParameters` option does not exist. Use `searchParams` instead.');\n    }\n    set searchParameters(_value) {\n        throw new Error('The `searchParameters` option does not exist. Use `searchParams` instead.');\n    }\n    get dnsLookup() {\n        return this._internals.dnsLookup;\n    }\n    set dnsLookup(value) {\n        assert.any([is.function_, is.undefined], value);\n        this._internals.dnsLookup = value;\n    }\n    /**\n    An instance of [`CacheableLookup`](https://github.com/szmarczak/cacheable-lookup) used for making DNS lookups.\n    Useful when making lots of requests to different *public* hostnames.\n\n    `CacheableLookup` uses `dns.resolver4(..)` and `dns.resolver6(...)` under the hood and fall backs to `dns.lookup(...)` when the first two fail, which may lead to additional delay.\n\n    __Note__: This should stay disabled when making requests to internal hostnames such as `localhost`, `database.local` etc.\n\n    @default false\n    */\n    get dnsCache() {\n        return this._internals.dnsCache;\n    }\n    set dnsCache(value) {\n        assert.any([is.object, is.boolean, is.undefined], value);\n        if (value === true) {\n            this._internals.dnsCache = getGlobalDnsCache();\n        }\n        else if (value === false) {\n            this._internals.dnsCache = undefined;\n        }\n        else {\n            this._internals.dnsCache = value;\n        }\n    }\n    /**\n    User data. `context` is shallow merged and enumerable. If it contains non-enumerable properties they will NOT be merged.\n\n    @example\n    ```\n    import got from 'got';\n\n    const instance = got.extend({\n        hooks: {\n            beforeRequest: [\n                options => {\n                    if (!options.context || !options.context.token) {\n                        throw new Error('Token required');\n                    }\n\n                    options.headers.token = options.context.token;\n                }\n            ]\n        }\n    });\n\n    const context = {\n        token: 'secret'\n    };\n\n    const response = await instance('https://httpbin.org/headers', {context});\n\n    // Let's see the headers\n    console.log(response.body);\n    ```\n    */\n    get context() {\n        return this._internals.context;\n    }\n    set context(value) {\n        assert.object(value);\n        if (this._merging) {\n            Object.assign(this._internals.context, value);\n        }\n        else {\n            this._internals.context = { ...value };\n        }\n    }\n    /**\n    Hooks allow modifications during the request lifecycle.\n    Hook functions may be async and are run serially.\n    */\n    get hooks() {\n        return this._internals.hooks;\n    }\n    set hooks(value) {\n        assert.object(value);\n        // eslint-disable-next-line guard-for-in\n        for (const knownHookEvent in value) {\n            if (!(knownHookEvent in this._internals.hooks)) {\n                throw new Error(`Unexpected hook event: ${knownHookEvent}`);\n            }\n            const typedKnownHookEvent = knownHookEvent;\n            const hooks = value[typedKnownHookEvent];\n            assert.any([is.array, is.undefined], hooks);\n            if (hooks) {\n                for (const hook of hooks) {\n                    assert.function_(hook);\n                }\n            }\n            if (this._merging) {\n                if (hooks) {\n                    // @ts-expect-error FIXME\n                    this._internals.hooks[typedKnownHookEvent].push(...hooks);\n                }\n            }\n            else {\n                if (!hooks) {\n                    throw new Error(`Missing hook event: ${knownHookEvent}`);\n                }\n                // @ts-expect-error FIXME\n                this._internals.hooks[knownHookEvent] = [...hooks];\n            }\n        }\n    }\n    /**\n    Defines if redirect responses should be followed automatically.\n\n    Note that if a `303` is sent by the server in response to any request type (`POST`, `DELETE`, etc.), Got will automatically request the resource pointed to in the location header via `GET`.\n    This is in accordance with [the spec](https://tools.ietf.org/html/rfc7231#section-6.4.4). You can optionally turn on this behavior also for other redirect codes - see `methodRewriting`.\n\n    @default true\n    */\n    get followRedirect() {\n        return this._internals.followRedirect;\n    }\n    set followRedirect(value) {\n        assert.boolean(value);\n        this._internals.followRedirect = value;\n    }\n    get followRedirects() {\n        throw new TypeError('The `followRedirects` option does not exist. Use `followRedirect` instead.');\n    }\n    set followRedirects(_value) {\n        throw new TypeError('The `followRedirects` option does not exist. Use `followRedirect` instead.');\n    }\n    /**\n    If exceeded, the request will be aborted and a `MaxRedirectsError` will be thrown.\n\n    @default 10\n    */\n    get maxRedirects() {\n        return this._internals.maxRedirects;\n    }\n    set maxRedirects(value) {\n        assert.number(value);\n        this._internals.maxRedirects = value;\n    }\n    /**\n    A cache adapter instance for storing cached response data.\n\n    @default false\n    */\n    get cache() {\n        return this._internals.cache;\n    }\n    set cache(value) {\n        assert.any([is.object, is.string, is.boolean, is.undefined], value);\n        if (value === true) {\n            this._internals.cache = globalCache;\n        }\n        else if (value === false) {\n            this._internals.cache = undefined;\n        }\n        else {\n            this._internals.cache = value;\n        }\n    }\n    /**\n    Determines if a `got.HTTPError` is thrown for unsuccessful responses.\n\n    If this is disabled, requests that encounter an error status code will be resolved with the `response` instead of throwing.\n    This may be useful if you are checking for resource availability and are expecting error responses.\n\n    @default true\n    */\n    get throwHttpErrors() {\n        return this._internals.throwHttpErrors;\n    }\n    set throwHttpErrors(value) {\n        assert.boolean(value);\n        this._internals.throwHttpErrors = value;\n    }\n    get username() {\n        const url = this._internals.url;\n        const value = url ? url.username : this._internals.username;\n        return decodeURIComponent(value);\n    }\n    set username(value) {\n        assert.string(value);\n        const url = this._internals.url;\n        const fixedValue = encodeURIComponent(value);\n        if (url) {\n            url.username = fixedValue;\n        }\n        else {\n            this._internals.username = fixedValue;\n        }\n    }\n    get password() {\n        const url = this._internals.url;\n        const value = url ? url.password : this._internals.password;\n        return decodeURIComponent(value);\n    }\n    set password(value) {\n        assert.string(value);\n        const url = this._internals.url;\n        const fixedValue = encodeURIComponent(value);\n        if (url) {\n            url.password = fixedValue;\n        }\n        else {\n            this._internals.password = fixedValue;\n        }\n    }\n    /**\n    If set to `true`, Got will additionally accept HTTP2 requests.\n\n    It will choose either HTTP/1.1 or HTTP/2 depending on the ALPN protocol.\n\n    __Note__: This option requires Node.js 15.10.0 or newer as HTTP/2 support on older Node.js versions is very buggy.\n\n    __Note__: Overriding `options.request` will disable HTTP2 support.\n\n    @default false\n\n    @example\n    ```\n    import got from 'got';\n\n    const {headers} = await got('https://nghttp2.org/httpbin/anything', {http2: true});\n\n    console.log(headers.via);\n    //=> '2 nghttpx'\n    ```\n    */\n    get http2() {\n        return this._internals.http2;\n    }\n    set http2(value) {\n        assert.boolean(value);\n        this._internals.http2 = value;\n    }\n    /**\n    Set this to `true` to allow sending body for the `GET` method.\n    However, the [HTTP/2 specification](https://tools.ietf.org/html/rfc7540#section-8.1.3) says that `An HTTP GET request includes request header fields and no payload body`, therefore when using the HTTP/2 protocol this option will have no effect.\n    This option is only meant to interact with non-compliant servers when you have no other choice.\n\n    __Note__: The [RFC 7231](https://tools.ietf.org/html/rfc7231#section-4.3.1) doesn't specify any particular behavior for the GET method having a payload, therefore __it's considered an [anti-pattern](https://en.wikipedia.org/wiki/Anti-pattern)__.\n\n    @default false\n    */\n    get allowGetBody() {\n        return this._internals.allowGetBody;\n    }\n    set allowGetBody(value) {\n        assert.boolean(value);\n        this._internals.allowGetBody = value;\n    }\n    /**\n    Request headers.\n\n    Existing headers will be overwritten. Headers set to `undefined` will be omitted.\n\n    @default {}\n    */\n    get headers() {\n        return this._internals.headers;\n    }\n    set headers(value) {\n        assert.plainObject(value);\n        if (this._merging) {\n            Object.assign(this._internals.headers, lowercaseKeys(value));\n        }\n        else {\n            this._internals.headers = lowercaseKeys(value);\n        }\n    }\n    /**\n    Specifies if the HTTP request method should be [rewritten as `GET`](https://tools.ietf.org/html/rfc7231#section-6.4) on redirects.\n\n    As the [specification](https://tools.ietf.org/html/rfc7231#section-6.4) prefers to rewrite the HTTP method only on `303` responses, this is Got's default behavior.\n    Setting `methodRewriting` to `true` will also rewrite `301` and `302` responses, as allowed by the spec. This is the behavior followed by `curl` and browsers.\n\n    __Note__: Got never performs method rewriting on `307` and `308` responses, as this is [explicitly prohibited by the specification](https://www.rfc-editor.org/rfc/rfc7231#section-6.4.7).\n\n    @default false\n    */\n    get methodRewriting() {\n        return this._internals.methodRewriting;\n    }\n    set methodRewriting(value) {\n        assert.boolean(value);\n        this._internals.methodRewriting = value;\n    }\n    /**\n    Indicates which DNS record family to use.\n\n    Values:\n    - `undefined`: IPv4 (if present) or IPv6\n    - `4`: Only IPv4\n    - `6`: Only IPv6\n\n    @default undefined\n    */\n    get dnsLookupIpVersion() {\n        return this._internals.dnsLookupIpVersion;\n    }\n    set dnsLookupIpVersion(value) {\n        if (value !== undefined && value !== 4 && value !== 6) {\n            throw new TypeError(`Invalid DNS lookup IP version: ${value}`);\n        }\n        this._internals.dnsLookupIpVersion = value;\n    }\n    /**\n    A function used to parse JSON responses.\n\n    @example\n    ```\n    import got from 'got';\n    import Bourne from '@hapi/bourne';\n\n    const parsed = await got('https://example.com', {\n        parseJson: text => Bourne.parse(text)\n    }).json();\n\n    console.log(parsed);\n    ```\n    */\n    get parseJson() {\n        return this._internals.parseJson;\n    }\n    set parseJson(value) {\n        assert.function_(value);\n        this._internals.parseJson = value;\n    }\n    /**\n    A function used to stringify the body of JSON requests.\n\n    @example\n    ```\n    import got from 'got';\n\n    await got.post('https://example.com', {\n        stringifyJson: object => JSON.stringify(object, (key, value) => {\n            if (key.startsWith('_')) {\n                return;\n            }\n\n            return value;\n        }),\n        json: {\n            some: 'payload',\n            _ignoreMe: 1234\n        }\n    });\n    ```\n\n    @example\n    ```\n    import got from 'got';\n\n    await got.post('https://example.com', {\n        stringifyJson: object => JSON.stringify(object, (key, value) => {\n            if (typeof value === 'number') {\n                return value.toString();\n            }\n\n            return value;\n        }),\n        json: {\n            some: 'payload',\n            number: 1\n        }\n    });\n    ```\n    */\n    get stringifyJson() {\n        return this._internals.stringifyJson;\n    }\n    set stringifyJson(value) {\n        assert.function_(value);\n        this._internals.stringifyJson = value;\n    }\n    /**\n    An object representing `limit`, `calculateDelay`, `methods`, `statusCodes`, `maxRetryAfter` and `errorCodes` fields for maximum retry count, retry handler, allowed methods, allowed status codes, maximum [`Retry-After`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Retry-After) time and allowed error codes.\n\n    Delays between retries counts with function `1000 * Math.pow(2, retry) + Math.random() * 100`, where `retry` is attempt number (starts from 1).\n\n    The `calculateDelay` property is a `function` that receives an object with `attemptCount`, `retryOptions`, `error` and `computedValue` properties for current retry count, the retry options, error and default computed value.\n    The function must return a delay in milliseconds (or a Promise resolving with it) (`0` return value cancels retry).\n\n    By default, it retries *only* on the specified methods, status codes, and on these network errors:\n\n    - `ETIMEDOUT`: One of the [timeout](#timeout) limits were reached.\n    - `ECONNRESET`: Connection was forcibly closed by a peer.\n    - `EADDRINUSE`: Could not bind to any free port.\n    - `ECONNREFUSED`: Connection was refused by the server.\n    - `EPIPE`: The remote side of the stream being written has been closed.\n    - `ENOTFOUND`: Couldn't resolve the hostname to an IP address.\n    - `ENETUNREACH`: No internet connection.\n    - `EAI_AGAIN`: DNS lookup timed out.\n\n    __Note__: If `maxRetryAfter` is set to `undefined`, it will use `options.timeout`.\n    __Note__: If [`Retry-After`](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Retry-After) header is greater than `maxRetryAfter`, it will cancel the request.\n    */\n    get retry() {\n        return this._internals.retry;\n    }\n    set retry(value) {\n        assert.plainObject(value);\n        assert.any([is.function_, is.undefined], value.calculateDelay);\n        assert.any([is.number, is.undefined], value.maxRetryAfter);\n        assert.any([is.number, is.undefined], value.limit);\n        assert.any([is.array, is.undefined], value.methods);\n        assert.any([is.array, is.undefined], value.statusCodes);\n        assert.any([is.array, is.undefined], value.errorCodes);\n        assert.any([is.number, is.undefined], value.noise);\n        if (value.noise && Math.abs(value.noise) > 100) {\n            throw new Error(`The maximum acceptable retry noise is +/- 100ms, got ${value.noise}`);\n        }\n        for (const key in value) {\n            if (!(key in this._internals.retry)) {\n                throw new Error(`Unexpected retry option: ${key}`);\n            }\n        }\n        if (this._merging) {\n            Object.assign(this._internals.retry, value);\n        }\n        else {\n            this._internals.retry = { ...value };\n        }\n        const { retry } = this._internals;\n        retry.methods = [...new Set(retry.methods.map(method => method.toUpperCase()))];\n        retry.statusCodes = [...new Set(retry.statusCodes)];\n        retry.errorCodes = [...new Set(retry.errorCodes)];\n    }\n    /**\n    From `http.RequestOptions`.\n\n    The IP address used to send the request from.\n    */\n    get localAddress() {\n        return this._internals.localAddress;\n    }\n    set localAddress(value) {\n        assert.any([is.string, is.undefined], value);\n        this._internals.localAddress = value;\n    }\n    /**\n    The HTTP method used to make the request.\n\n    @default 'GET'\n    */\n    get method() {\n        return this._internals.method;\n    }\n    set method(value) {\n        assert.string(value);\n        this._internals.method = value.toUpperCase();\n    }\n    get createConnection() {\n        return this._internals.createConnection;\n    }\n    set createConnection(value) {\n        assert.any([is.function_, is.undefined], value);\n        this._internals.createConnection = value;\n    }\n    /**\n    From `http-cache-semantics`\n\n    @default {}\n    */\n    get cacheOptions() {\n        return this._internals.cacheOptions;\n    }\n    set cacheOptions(value) {\n        assert.plainObject(value);\n        assert.any([is.boolean, is.undefined], value.shared);\n        assert.any([is.number, is.undefined], value.cacheHeuristic);\n        assert.any([is.number, is.undefined], value.immutableMinTimeToLive);\n        assert.any([is.boolean, is.undefined], value.ignoreCargoCult);\n        for (const key in value) {\n            if (!(key in this._internals.cacheOptions)) {\n                throw new Error(`Cache option \\`${key}\\` does not exist`);\n            }\n        }\n        if (this._merging) {\n            Object.assign(this._internals.cacheOptions, value);\n        }\n        else {\n            this._internals.cacheOptions = { ...value };\n        }\n    }\n    /**\n    Options for the advanced HTTPS API.\n    */\n    get https() {\n        return this._internals.https;\n    }\n    set https(value) {\n        assert.plainObject(value);\n        assert.any([is.boolean, is.undefined], value.rejectUnauthorized);\n        assert.any([is.function_, is.undefined], value.checkServerIdentity);\n        assert.any([is.string, is.object, is.array, is.undefined], value.certificateAuthority);\n        assert.any([is.string, is.object, is.array, is.undefined], value.key);\n        assert.any([is.string, is.object, is.array, is.undefined], value.certificate);\n        assert.any([is.string, is.undefined], value.passphrase);\n        assert.any([is.string, is.buffer, is.array, is.undefined], value.pfx);\n        assert.any([is.array, is.undefined], value.alpnProtocols);\n        assert.any([is.string, is.undefined], value.ciphers);\n        assert.any([is.string, is.buffer, is.undefined], value.dhparam);\n        assert.any([is.string, is.undefined], value.signatureAlgorithms);\n        assert.any([is.string, is.undefined], value.minVersion);\n        assert.any([is.string, is.undefined], value.maxVersion);\n        assert.any([is.boolean, is.undefined], value.honorCipherOrder);\n        assert.any([is.number, is.undefined], value.tlsSessionLifetime);\n        assert.any([is.string, is.undefined], value.ecdhCurve);\n        assert.any([is.string, is.buffer, is.array, is.undefined], value.certificateRevocationLists);\n        for (const key in value) {\n            if (!(key in this._internals.https)) {\n                throw new Error(`HTTPS option \\`${key}\\` does not exist`);\n            }\n        }\n        if (this._merging) {\n            Object.assign(this._internals.https, value);\n        }\n        else {\n            this._internals.https = { ...value };\n        }\n    }\n    /**\n    [Encoding](https://nodejs.org/api/buffer.html#buffer_buffers_and_character_encodings) to be used on `setEncoding` of the response data.\n\n    To get a [`Buffer`](https://nodejs.org/api/buffer.html), you need to set `responseType` to `buffer` instead.\n    Don't set this option to `null`.\n\n    __Note__: This doesn't affect streams! Instead, you need to do `got.stream(...).setEncoding(encoding)`.\n\n    @default 'utf-8'\n    */\n    get encoding() {\n        return this._internals.encoding;\n    }\n    set encoding(value) {\n        if (value === null) {\n            throw new TypeError('To get a Buffer, set `options.responseType` to `buffer` instead');\n        }\n        assert.any([is.string, is.undefined], value);\n        this._internals.encoding = value;\n    }\n    /**\n    When set to `true` the promise will return the Response body instead of the Response object.\n\n    @default false\n    */\n    get resolveBodyOnly() {\n        return this._internals.resolveBodyOnly;\n    }\n    set resolveBodyOnly(value) {\n        assert.boolean(value);\n        this._internals.resolveBodyOnly = value;\n    }\n    /**\n    Returns a `Stream` instead of a `Promise`.\n    This is equivalent to calling `got.stream(url, options?)`.\n\n    @default false\n    */\n    get isStream() {\n        return this._internals.isStream;\n    }\n    set isStream(value) {\n        assert.boolean(value);\n        this._internals.isStream = value;\n    }\n    /**\n    The parsing method.\n\n    The promise also has `.text()`, `.json()` and `.buffer()` methods which return another Got promise for the parsed body.\n\n    It's like setting the options to `{responseType: 'json', resolveBodyOnly: true}` but without affecting the main Got promise.\n\n    __Note__: When using streams, this option is ignored.\n\n    @example\n    ```\n    const responsePromise = got(url);\n    const bufferPromise = responsePromise.buffer();\n    const jsonPromise = responsePromise.json();\n\n    const [response, buffer, json] = Promise.all([responsePromise, bufferPromise, jsonPromise]);\n    // `response` is an instance of Got Response\n    // `buffer` is an instance of Buffer\n    // `json` is an object\n    ```\n\n    @example\n    ```\n    // This\n    const body = await got(url).json();\n\n    // is semantically the same as this\n    const body = await got(url, {responseType: 'json', resolveBodyOnly: true});\n    ```\n    */\n    get responseType() {\n        return this._internals.responseType;\n    }\n    set responseType(value) {\n        if (value === undefined) {\n            this._internals.responseType = 'text';\n            return;\n        }\n        if (value !== 'text' && value !== 'buffer' && value !== 'json') {\n            throw new Error(`Invalid \\`responseType\\` option: ${value}`);\n        }\n        this._internals.responseType = value;\n    }\n    get pagination() {\n        return this._internals.pagination;\n    }\n    set pagination(value) {\n        assert.object(value);\n        if (this._merging) {\n            Object.assign(this._internals.pagination, value);\n        }\n        else {\n            this._internals.pagination = value;\n        }\n    }\n    get auth() {\n        throw new Error('Parameter `auth` is deprecated. Use `username` / `password` instead.');\n    }\n    set auth(_value) {\n        throw new Error('Parameter `auth` is deprecated. Use `username` / `password` instead.');\n    }\n    get setHost() {\n        return this._internals.setHost;\n    }\n    set setHost(value) {\n        assert.boolean(value);\n        this._internals.setHost = value;\n    }\n    get maxHeaderSize() {\n        return this._internals.maxHeaderSize;\n    }\n    set maxHeaderSize(value) {\n        assert.any([is.number, is.undefined], value);\n        this._internals.maxHeaderSize = value;\n    }\n    get enableUnixSockets() {\n        return this._internals.enableUnixSockets;\n    }\n    set enableUnixSockets(value) {\n        assert.boolean(value);\n        this._internals.enableUnixSockets = value;\n    }\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    toJSON() {\n        return { ...this._internals };\n    }\n    [Symbol.for('nodejs.util.inspect.custom')](_depth, options) {\n        return inspect(this._internals, options);\n    }\n    createNativeRequestOptions() {\n        const internals = this._internals;\n        const url = internals.url;\n        let agent;\n        if (url.protocol === 'https:') {\n            agent = internals.http2 ? internals.agent : internals.agent.https;\n        }\n        else {\n            agent = internals.agent.http;\n        }\n        const { https } = internals;\n        let { pfx } = https;\n        if (is.array(pfx) && is.plainObject(pfx[0])) {\n            pfx = pfx.map(object => ({\n                buf: object.buffer,\n                passphrase: object.passphrase,\n            }));\n        }\n        return {\n            ...internals.cacheOptions,\n            ...this._unixOptions,\n            // HTTPS options\n            // eslint-disable-next-line @typescript-eslint/naming-convention\n            ALPNProtocols: https.alpnProtocols,\n            ca: https.certificateAuthority,\n            cert: https.certificate,\n            key: https.key,\n            passphrase: https.passphrase,\n            pfx: https.pfx,\n            rejectUnauthorized: https.rejectUnauthorized,\n            checkServerIdentity: https.checkServerIdentity ?? checkServerIdentity,\n            ciphers: https.ciphers,\n            honorCipherOrder: https.honorCipherOrder,\n            minVersion: https.minVersion,\n            maxVersion: https.maxVersion,\n            sigalgs: https.signatureAlgorithms,\n            sessionTimeout: https.tlsSessionLifetime,\n            dhparam: https.dhparam,\n            ecdhCurve: https.ecdhCurve,\n            crl: https.certificateRevocationLists,\n            // HTTP options\n            lookup: internals.dnsLookup ?? internals.dnsCache?.lookup,\n            family: internals.dnsLookupIpVersion,\n            agent,\n            setHost: internals.setHost,\n            method: internals.method,\n            maxHeaderSize: internals.maxHeaderSize,\n            localAddress: internals.localAddress,\n            headers: internals.headers,\n            createConnection: internals.createConnection,\n            timeout: internals.http2 ? getHttp2TimeoutOption(internals) : undefined,\n            // HTTP/2 options\n            h2session: internals.h2session,\n        };\n    }\n    getRequestFunction() {\n        const url = this._internals.url;\n        const { request } = this._internals;\n        if (!request && url) {\n            return this.getFallbackRequestFunction();\n        }\n        return request;\n    }\n    getFallbackRequestFunction() {\n        const url = this._internals.url;\n        if (!url) {\n            return;\n        }\n        if (url.protocol === 'https:') {\n            if (this._internals.http2) {\n                if (major < 15 || (major === 15 && minor < 10)) {\n                    const error = new Error('To use the `http2` option, install Node.js 15.10.0 or above');\n                    error.code = 'EUNSUPPORTED';\n                    throw error;\n                }\n                return http2wrapper.auto;\n            }\n            return https.request;\n        }\n        return http.request;\n    }\n    freeze() {\n        const options = this._internals;\n        Object.freeze(options);\n        Object.freeze(options.hooks);\n        Object.freeze(options.hooks.afterResponse);\n        Object.freeze(options.hooks.beforeError);\n        Object.freeze(options.hooks.beforeRedirect);\n        Object.freeze(options.hooks.beforeRequest);\n        Object.freeze(options.hooks.beforeRetry);\n        Object.freeze(options.hooks.init);\n        Object.freeze(options.https);\n        Object.freeze(options.cacheOptions);\n        Object.freeze(options.agent);\n        Object.freeze(options.headers);\n        Object.freeze(options.timeout);\n        Object.freeze(options.retry);\n        Object.freeze(options.retry.errorCodes);\n        Object.freeze(options.retry.methods);\n        Object.freeze(options.retry.statusCodes);\n    }\n}\n", "import {\n\tV4MAPPED,\n\tADDRCONFIG,\n\tALL,\n\tpromises as dnsPromises,\n\tlookup as dnsLookup\n} from 'node:dns';\nimport {promisify} from 'node:util';\nimport os from 'node:os';\n\nconst {Resolver: AsyncResolver} = dnsPromises;\n\nconst kCacheableLookupCreateConnection = Symbol('cacheableLookupCreateConnection');\nconst kCacheableLookupInstance = Symbol('cacheableLookupInstance');\nconst kExpires = Symbol('expires');\n\nconst supportsALL = typeof ALL === 'number';\n\nconst verifyAgent = agent => {\n\tif (!(agent && typeof agent.createConnection === 'function')) {\n\t\tthrow new Error('Expected an Agent instance as the first argument');\n\t}\n};\n\nconst map4to6 = entries => {\n\tfor (const entry of entries) {\n\t\tif (entry.family === 6) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tentry.address = `::ffff:${entry.address}`;\n\t\tentry.family = 6;\n\t}\n};\n\nconst getIfaceInfo = () => {\n\tlet has4 = false;\n\tlet has6 = false;\n\n\tfor (const device of Object.values(os.networkInterfaces())) {\n\t\tfor (const iface of device) {\n\t\t\tif (iface.internal) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (iface.family === 'IPv6') {\n\t\t\t\thas6 = true;\n\t\t\t} else {\n\t\t\t\thas4 = true;\n\t\t\t}\n\n\t\t\tif (has4 && has6) {\n\t\t\t\treturn {has4, has6};\n\t\t\t}\n\t\t}\n\t}\n\n\treturn {has4, has6};\n};\n\nconst isIterable = map => {\n\treturn Symbol.iterator in map;\n};\n\nconst ignoreNoResultErrors = dnsPromise => {\n\treturn dnsPromise.catch(error => {\n\t\tif (\n\t\t\terror.code === 'ENODATA' ||\n\t\t\terror.code === 'ENOTFOUND' ||\n\t\t\terror.code === 'ENOENT' // Windows: name exists, but not this record type\n\t\t) {\n\t\t\treturn [];\n\t\t}\n\n\t\tthrow error;\n\t});\n};\n\nconst ttl = {ttl: true};\nconst all = {all: true};\nconst all4 = {all: true, family: 4};\nconst all6 = {all: true, family: 6};\n\nexport default class CacheableLookup {\n\tconstructor({\n\t\tcache = new Map(),\n\t\tmaxTtl = Infinity,\n\t\tfallbackDuration = 3600,\n\t\terrorTtl = 0.15,\n\t\tresolver = new AsyncResolver(),\n\t\tlookup = dnsLookup\n\t} = {}) {\n\t\tthis.maxTtl = maxTtl;\n\t\tthis.errorTtl = errorTtl;\n\n\t\tthis._cache = cache;\n\t\tthis._resolver = resolver;\n\t\tthis._dnsLookup = lookup && promisify(lookup);\n\t\tthis.stats = {\n\t\t\tcache: 0,\n\t\t\tquery: 0\n\t\t};\n\n\t\tif (this._resolver instanceof AsyncResolver) {\n\t\t\tthis._resolve4 = this._resolver.resolve4.bind(this._resolver);\n\t\t\tthis._resolve6 = this._resolver.resolve6.bind(this._resolver);\n\t\t} else {\n\t\t\tthis._resolve4 = promisify(this._resolver.resolve4.bind(this._resolver));\n\t\t\tthis._resolve6 = promisify(this._resolver.resolve6.bind(this._resolver));\n\t\t}\n\n\t\tthis._iface = getIfaceInfo();\n\n\t\tthis._pending = {};\n\t\tthis._nextRemovalTime = false;\n\t\tthis._hostnamesToFallback = new Set();\n\n\t\tthis.fallbackDuration = fallbackDuration;\n\n\t\tif (fallbackDuration > 0) {\n\t\t\tconst interval = setInterval(() => {\n\t\t\t\tthis._hostnamesToFallback.clear();\n\t\t\t}, fallbackDuration * 1000);\n\n\t\t\t/* istanbul ignore next: There is no `interval.unref()` when running inside an Electron renderer */\n\t\t\tif (interval.unref) {\n\t\t\t\tinterval.unref();\n\t\t\t}\n\n\t\t\tthis._fallbackInterval = interval;\n\t\t}\n\n\t\tthis.lookup = this.lookup.bind(this);\n\t\tthis.lookupAsync = this.lookupAsync.bind(this);\n\t}\n\n\tset servers(servers) {\n\t\tthis.clear();\n\n\t\tthis._resolver.setServers(servers);\n\t}\n\n\tget servers() {\n\t\treturn this._resolver.getServers();\n\t}\n\n\tlookup(hostname, options, callback) {\n\t\tif (typeof options === 'function') {\n\t\t\tcallback = options;\n\t\t\toptions = {};\n\t\t} else if (typeof options === 'number') {\n\t\t\toptions = {\n\t\t\t\tfamily: options\n\t\t\t};\n\t\t}\n\n\t\tif (!callback) {\n\t\t\tthrow new Error('Callback must be a function.');\n\t\t}\n\n\t\t// eslint-disable-next-line promise/prefer-await-to-then\n\t\tthis.lookupAsync(hostname, options).then(result => {\n\t\t\tif (options.all) {\n\t\t\t\tcallback(null, result);\n\t\t\t} else {\n\t\t\t\tcallback(null, result.address, result.family, result.expires, result.ttl, result.source);\n\t\t\t}\n\t\t}, callback);\n\t}\n\n\tasync lookupAsync(hostname, options = {}) {\n\t\tif (typeof options === 'number') {\n\t\t\toptions = {\n\t\t\t\tfamily: options\n\t\t\t};\n\t\t}\n\n\t\tlet cached = await this.query(hostname);\n\n\t\tif (options.family === 6) {\n\t\t\tconst filtered = cached.filter(entry => entry.family === 6);\n\n\t\t\tif (options.hints & V4MAPPED) {\n\t\t\t\tif ((supportsALL && options.hints & ALL) || filtered.length === 0) {\n\t\t\t\t\tmap4to6(cached);\n\t\t\t\t} else {\n\t\t\t\t\tcached = filtered;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcached = filtered;\n\t\t\t}\n\t\t} else if (options.family === 4) {\n\t\t\tcached = cached.filter(entry => entry.family === 4);\n\t\t}\n\n\t\tif (options.hints & ADDRCONFIG) {\n\t\t\tconst {_iface} = this;\n\t\t\tcached = cached.filter(entry => entry.family === 6 ? _iface.has6 : _iface.has4);\n\t\t}\n\n\t\tif (cached.length === 0) {\n\t\t\tconst error = new Error(`cacheableLookup ENOTFOUND ${hostname}`);\n\t\t\terror.code = 'ENOTFOUND';\n\t\t\terror.hostname = hostname;\n\n\t\t\tthrow error;\n\t\t}\n\n\t\tif (options.all) {\n\t\t\treturn cached;\n\t\t}\n\n\t\treturn cached[0];\n\t}\n\n\tasync query(hostname) {\n\t\tlet source = 'cache';\n\t\tlet cached = await this._cache.get(hostname);\n\n\t\tif (cached) {\n\t\t\tthis.stats.cache++;\n\t\t}\n\n\t\tif (!cached) {\n\t\t\tconst pending = this._pending[hostname];\n\t\t\tif (pending) {\n\t\t\t\tthis.stats.cache++;\n\t\t\t\tcached = await pending;\n\t\t\t} else {\n\t\t\t\tsource = 'query';\n\t\t\t\tconst newPromise = this.queryAndCache(hostname);\n\t\t\t\tthis._pending[hostname] = newPromise;\n\t\t\t\tthis.stats.query++;\n\t\t\t\ttry {\n\t\t\t\t\tcached = await newPromise;\n\t\t\t\t} finally {\n\t\t\t\t\tdelete this._pending[hostname];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tcached = cached.map(entry => {\n\t\t\treturn {...entry, source};\n\t\t});\n\n\t\treturn cached;\n\t}\n\n\tasync _resolve(hostname) {\n\t\t// ANY is unsafe as it doesn't trigger new queries in the underlying server.\n\t\tconst [A, AAAA] = await Promise.all([\n\t\t\tignoreNoResultErrors(this._resolve4(hostname, ttl)),\n\t\t\tignoreNoResultErrors(this._resolve6(hostname, ttl))\n\t\t]);\n\n\t\tlet aTtl = 0;\n\t\tlet aaaaTtl = 0;\n\t\tlet cacheTtl = 0;\n\n\t\tconst now = Date.now();\n\n\t\tfor (const entry of A) {\n\t\t\tentry.family = 4;\n\t\t\tentry.expires = now + (entry.ttl * 1000);\n\n\t\t\taTtl = Math.max(aTtl, entry.ttl);\n\t\t}\n\n\t\tfor (const entry of AAAA) {\n\t\t\tentry.family = 6;\n\t\t\tentry.expires = now + (entry.ttl * 1000);\n\n\t\t\taaaaTtl = Math.max(aaaaTtl, entry.ttl);\n\t\t}\n\n\t\tif (A.length > 0) {\n\t\t\tif (AAAA.length > 0) {\n\t\t\t\tcacheTtl = Math.min(aTtl, aaaaTtl);\n\t\t\t} else {\n\t\t\t\tcacheTtl = aTtl;\n\t\t\t}\n\t\t} else {\n\t\t\tcacheTtl = aaaaTtl;\n\t\t}\n\n\t\treturn {\n\t\t\tentries: [\n\t\t\t\t...A,\n\t\t\t\t...AAAA\n\t\t\t],\n\t\t\tcacheTtl\n\t\t};\n\t}\n\n\tasync _lookup(hostname) {\n\t\ttry {\n\t\t\tconst [A, AAAA] = await Promise.all([\n\t\t\t\t// Passing {all: true} doesn't return all IPv4 and IPv6 entries.\n\t\t\t\t// See https://github.com/szmarczak/cacheable-lookup/issues/42\n\t\t\t\tignoreNoResultErrors(this._dnsLookup(hostname, all4)),\n\t\t\t\tignoreNoResultErrors(this._dnsLookup(hostname, all6))\n\t\t\t]);\n\n\t\t\treturn {\n\t\t\t\tentries: [\n\t\t\t\t\t...A,\n\t\t\t\t\t...AAAA\n\t\t\t\t],\n\t\t\t\tcacheTtl: 0\n\t\t\t};\n\t\t} catch {\n\t\t\treturn {\n\t\t\t\tentries: [],\n\t\t\t\tcacheTtl: 0\n\t\t\t};\n\t\t}\n\t}\n\n\tasync _set(hostname, data, cacheTtl) {\n\t\tif (this.maxTtl > 0 && cacheTtl > 0) {\n\t\t\tcacheTtl = Math.min(cacheTtl, this.maxTtl) * 1000;\n\t\t\tdata[kExpires] = Date.now() + cacheTtl;\n\n\t\t\ttry {\n\t\t\t\tawait this._cache.set(hostname, data, cacheTtl);\n\t\t\t} catch (error) {\n\t\t\t\tthis.lookupAsync = async () => {\n\t\t\t\t\tconst cacheError = new Error('Cache Error. Please recreate the CacheableLookup instance.');\n\t\t\t\t\tcacheError.cause = error;\n\n\t\t\t\t\tthrow cacheError;\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (isIterable(this._cache)) {\n\t\t\t\tthis._tick(cacheTtl);\n\t\t\t}\n\t\t}\n\t}\n\n\tasync queryAndCache(hostname) {\n\t\tif (this._hostnamesToFallback.has(hostname)) {\n\t\t\treturn this._dnsLookup(hostname, all);\n\t\t}\n\n\t\tlet query = await this._resolve(hostname);\n\n\t\tif (query.entries.length === 0 && this._dnsLookup) {\n\t\t\tquery = await this._lookup(hostname);\n\n\t\t\tif (query.entries.length !== 0 && this.fallbackDuration > 0) {\n\t\t\t\t// Use `dns.lookup(...)` for that particular hostname\n\t\t\t\tthis._hostnamesToFallback.add(hostname);\n\t\t\t}\n\t\t}\n\n\t\tconst cacheTtl = query.entries.length === 0 ? this.errorTtl : query.cacheTtl;\n\t\tawait this._set(hostname, query.entries, cacheTtl);\n\n\t\treturn query.entries;\n\t}\n\n\t_tick(ms) {\n\t\tconst nextRemovalTime = this._nextRemovalTime;\n\n\t\tif (!nextRemovalTime || ms < nextRemovalTime) {\n\t\t\tclearTimeout(this._removalTimeout);\n\n\t\t\tthis._nextRemovalTime = ms;\n\n\t\t\tthis._removalTimeout = setTimeout(() => {\n\t\t\t\tthis._nextRemovalTime = false;\n\n\t\t\t\tlet nextExpiry = Infinity;\n\n\t\t\t\tconst now = Date.now();\n\n\t\t\t\tfor (const [hostname, entries] of this._cache) {\n\t\t\t\t\tconst expires = entries[kExpires];\n\n\t\t\t\t\tif (now >= expires) {\n\t\t\t\t\t\tthis._cache.delete(hostname);\n\t\t\t\t\t} else if (expires < nextExpiry) {\n\t\t\t\t\t\tnextExpiry = expires;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (nextExpiry !== Infinity) {\n\t\t\t\t\tthis._tick(nextExpiry - now);\n\t\t\t\t}\n\t\t\t}, ms);\n\n\t\t\t/* istanbul ignore next: There is no `timeout.unref()` when running inside an Electron renderer */\n\t\t\tif (this._removalTimeout.unref) {\n\t\t\t\tthis._removalTimeout.unref();\n\t\t\t}\n\t\t}\n\t}\n\n\tinstall(agent) {\n\t\tverifyAgent(agent);\n\n\t\tif (kCacheableLookupCreateConnection in agent) {\n\t\t\tthrow new Error('CacheableLookup has been already installed');\n\t\t}\n\n\t\tagent[kCacheableLookupCreateConnection] = agent.createConnection;\n\t\tagent[kCacheableLookupInstance] = this;\n\n\t\tagent.createConnection = (options, callback) => {\n\t\t\tif (!('lookup' in options)) {\n\t\t\t\toptions.lookup = this.lookup;\n\t\t\t}\n\n\t\t\treturn agent[kCacheableLookupCreateConnection](options, callback);\n\t\t};\n\t}\n\n\tuninstall(agent) {\n\t\tverifyAgent(agent);\n\n\t\tif (agent[kCacheableLookupCreateConnection]) {\n\t\t\tif (agent[kCacheableLookupInstance] !== this) {\n\t\t\t\tthrow new Error('The agent is not owned by this CacheableLookup instance');\n\t\t\t}\n\n\t\t\tagent.createConnection = agent[kCacheableLookupCreateConnection];\n\n\t\t\tdelete agent[kCacheableLookupCreateConnection];\n\t\t\tdelete agent[kCacheableLookupInstance];\n\t\t}\n\t}\n\n\tupdateInterfaceInfo() {\n\t\tconst {_iface} = this;\n\n\t\tthis._iface = getIfaceInfo();\n\n\t\tif ((_iface.has4 && !this._iface.has4) || (_iface.has6 && !this._iface.has6)) {\n\t\t\tthis._cache.clear();\n\t\t}\n\t}\n\n\tclear(hostname) {\n\t\tif (hostname) {\n\t\t\tthis._cache.delete(hostname);\n\t\t\treturn;\n\t\t}\n\n\t\tthis._cache.clear();\n\t}\n}\n", "export default function parseLinkHeader(link) {\n    const parsed = [];\n    const items = link.split(',');\n    for (const item of items) {\n        // https://tools.ietf.org/html/rfc5988#section-5\n        const [rawUriReference, ...rawLinkParameters] = item.split(';');\n        const trimmedUriReference = rawUriReference.trim();\n        // eslint-disable-next-line @typescript-eslint/prefer-string-starts-ends-with\n        if (trimmedUriReference[0] !== '<' || trimmedUriReference[trimmedUriReference.length - 1] !== '>') {\n            throw new Error(`Invalid format of the Link header reference: ${trimmedUriReference}`);\n        }\n        const reference = trimmedUriReference.slice(1, -1);\n        const parameters = {};\n        if (rawLinkParameters.length === 0) {\n            throw new Error(`Unexpected end of Link header parameters: ${rawLinkParameters.join(';')}`);\n        }\n        for (const rawParameter of rawLinkParameters) {\n            const trimmedRawParameter = rawParameter.trim();\n            const center = trimmedRawParameter.indexOf('=');\n            if (center === -1) {\n                throw new Error(`Failed to parse Link header: ${link}`);\n            }\n            const name = trimmedRawParameter.slice(0, center).trim();\n            const value = trimmedRawParameter.slice(center + 1).trim();\n            parameters[name] = value;\n        }\n        parsed.push({\n            reference,\n            parameters,\n        });\n    }\n    return parsed;\n}\n", "import { RequestError } from './errors.js';\nexport const isResponseOk = (response) => {\n    const { statusCode } = response;\n    const limitStatusCode = response.request.options.followRedirect ? 299 : 399;\n    return (statusCode >= 200 && statusCode <= limitStatusCode) || statusCode === 304;\n};\n/**\nAn error to be thrown when server response code is 2xx, and parsing body fails.\nIncludes a `response` property.\n*/\nexport class ParseError extends RequestError {\n    constructor(error, response) {\n        const { options } = response.request;\n        super(`${error.message} in \"${options.url.toString()}\"`, error, response.request);\n        this.name = 'ParseError';\n        this.code = 'ERR_BODY_PARSE_FAILURE';\n    }\n}\nexport const parseBody = (response, responseType, parseJson, encoding) => {\n    const { rawBody } = response;\n    try {\n        if (responseType === 'text') {\n            return rawBody.toString(encoding);\n        }\n        if (responseType === 'json') {\n            return rawBody.length === 0 ? '' : parseJson(rawBody.toString(encoding));\n        }\n        if (responseType === 'buffer') {\n            return rawBody;\n        }\n    }\n    catch (error) {\n        throw new ParseError(error, response);\n    }\n    throw new ParseError({\n        message: `Unknown body type '${responseType}'`,\n        name: 'Error',\n    }, response);\n};\n", "function isClientRequest(clientRequest) {\n    return clientRequest.writable && !clientRequest.writableEnded;\n}\nexport default isClientRequest;\n", "// eslint-disable-next-line @typescript-eslint/naming-convention\nexport default function isUnixSocketURL(url) {\n    return url.protocol === 'unix:' || url.hostname === 'unix';\n}\n", "import { RequestError } from '../core/errors.js';\n/**\nAn error to be thrown when the request is aborted with `.cancel()`.\n*/\nexport class CancelError extends RequestError {\n    constructor(request) {\n        super('Promise was canceled', {}, request);\n        this.name = 'CancelError';\n        this.code = 'ERR_CANCELED';\n    }\n    /**\n    Whether the promise is canceled.\n    */\n    get isCanceled() {\n        return true;\n    }\n}\n", "import is, { assert } from '@sindresorhus/is';\nimport asPromise from './as-promise/index.js';\nimport Request from './core/index.js';\nimport Options from './core/options.js';\n// The `delay` package weighs 10KB (!)\nconst delay = async (ms) => new Promise(resolve => {\n    setTimeout(resolve, ms);\n});\nconst isGotInstance = (value) => is.function_(value);\nconst aliases = [\n    'get',\n    'post',\n    'put',\n    'patch',\n    'head',\n    'delete',\n];\nconst create = (defaults) => {\n    defaults = {\n        options: new Options(undefined, undefined, defaults.options),\n        handlers: [...defaults.handlers],\n        mutableDefaults: defaults.mutableDefaults,\n    };\n    Object.defineProperty(defaults, 'mutableDefaults', {\n        enumerable: true,\n        configurable: false,\n        writable: false,\n    });\n    // Got interface\n    const got = ((url, options, defaultOptions = defaults.options) => {\n        const request = new Request(url, options, defaultOptions);\n        let promise;\n        const lastHandler = (normalized) => {\n            // Note: `options` is `undefined` when `new Options(...)` fails\n            request.options = normalized;\n            request._noPipe = !normalized.isStream;\n            void request.flush();\n            if (normalized.isStream) {\n                return request;\n            }\n            if (!promise) {\n                promise = asPromise(request);\n            }\n            return promise;\n        };\n        let iteration = 0;\n        const iterateHandlers = (newOptions) => {\n            const handler = defaults.handlers[iteration++] ?? lastHandler;\n            const result = handler(newOptions, iterateHandlers);\n            if (is.promise(result) && !request.options.isStream) {\n                if (!promise) {\n                    promise = asPromise(request);\n                }\n                if (result !== promise) {\n                    const descriptors = Object.getOwnPropertyDescriptors(promise);\n                    for (const key in descriptors) {\n                        if (key in result) {\n                            // eslint-disable-next-line @typescript-eslint/no-dynamic-delete\n                            delete descriptors[key];\n                        }\n                    }\n                    // eslint-disable-next-line @typescript-eslint/no-floating-promises\n                    Object.defineProperties(result, descriptors);\n                    result.cancel = promise.cancel;\n                }\n            }\n            return result;\n        };\n        return iterateHandlers(request.options);\n    });\n    got.extend = (...instancesOrOptions) => {\n        const options = new Options(undefined, undefined, defaults.options);\n        const handlers = [...defaults.handlers];\n        let mutableDefaults;\n        for (const value of instancesOrOptions) {\n            if (isGotInstance(value)) {\n                options.merge(value.defaults.options);\n                handlers.push(...value.defaults.handlers);\n                mutableDefaults = value.defaults.mutableDefaults;\n            }\n            else {\n                options.merge(value);\n                if (value.handlers) {\n                    handlers.push(...value.handlers);\n                }\n                mutableDefaults = value.mutableDefaults;\n            }\n        }\n        return create({\n            options,\n            handlers,\n            mutableDefaults: Boolean(mutableDefaults),\n        });\n    };\n    // Pagination\n    const paginateEach = (async function* (url, options) {\n        let normalizedOptions = new Options(url, options, defaults.options);\n        normalizedOptions.resolveBodyOnly = false;\n        const { pagination } = normalizedOptions;\n        assert.function_(pagination.transform);\n        assert.function_(pagination.shouldContinue);\n        assert.function_(pagination.filter);\n        assert.function_(pagination.paginate);\n        assert.number(pagination.countLimit);\n        assert.number(pagination.requestLimit);\n        assert.number(pagination.backoff);\n        const allItems = [];\n        let { countLimit } = pagination;\n        let numberOfRequests = 0;\n        while (numberOfRequests < pagination.requestLimit) {\n            if (numberOfRequests !== 0) {\n                // eslint-disable-next-line no-await-in-loop\n                await delay(pagination.backoff);\n            }\n            // eslint-disable-next-line no-await-in-loop\n            const response = (await got(undefined, undefined, normalizedOptions));\n            // eslint-disable-next-line no-await-in-loop\n            const parsed = await pagination.transform(response);\n            const currentItems = [];\n            assert.array(parsed);\n            for (const item of parsed) {\n                if (pagination.filter({ item, currentItems, allItems })) {\n                    if (!pagination.shouldContinue({ item, currentItems, allItems })) {\n                        return;\n                    }\n                    yield item;\n                    if (pagination.stackAllItems) {\n                        allItems.push(item);\n                    }\n                    currentItems.push(item);\n                    if (--countLimit <= 0) {\n                        return;\n                    }\n                }\n            }\n            const optionsToMerge = pagination.paginate({\n                response,\n                currentItems,\n                allItems,\n            });\n            if (optionsToMerge === false) {\n                return;\n            }\n            if (optionsToMerge === response.request.options) {\n                normalizedOptions = response.request.options;\n            }\n            else {\n                normalizedOptions.merge(optionsToMerge);\n                assert.any([is.urlInstance, is.undefined], optionsToMerge.url);\n                if (optionsToMerge.url !== undefined) {\n                    normalizedOptions.prefixUrl = '';\n                    normalizedOptions.url = optionsToMerge.url;\n                }\n            }\n            numberOfRequests++;\n        }\n    });\n    got.paginate = paginateEach;\n    got.paginate.all = (async (url, options) => {\n        const results = [];\n        for await (const item of paginateEach(url, options)) {\n            results.push(item);\n        }\n        return results;\n    });\n    // For those who like very descriptive names\n    got.paginate.each = paginateEach;\n    // Stream API\n    got.stream = ((url, options) => got(url, { ...options, isStream: true }));\n    // Shortcuts\n    for (const method of aliases) {\n        got[method] = ((url, options) => got(url, { ...options, method }));\n        got.stream[method] = ((url, options) => got(url, { ...options, method, isStream: true }));\n    }\n    if (!defaults.mutableDefaults) {\n        Object.freeze(defaults.handlers);\n        defaults.options.freeze();\n    }\n    Object.defineProperty(got, 'defaults', {\n        value: defaults,\n        writable: false,\n        configurable: false,\n        enumerable: true,\n    });\n    return got;\n};\nexport default create;\n", "import create from './create.js';\nimport Options from './core/options.js';\nconst defaults = {\n    options: new Options(),\n    handlers: [],\n    mutableDefaults: false,\n};\nconst got = create(defaults);\nexport default got;\nexport { got };\nexport { default as Options } from './core/options.js';\nexport * from './core/options.js';\nexport * from './core/response.js';\nexport * from './core/index.js';\nexport * from './core/errors.js';\nexport { default as calculateRetryDelay } from './core/calculate-retry-delay.js';\nexport * from './as-promise/types.js';\nexport * from './types.js';\nexport { default as create } from './create.js';\nexport { default as parseLinkHeader } from './core/parse-link-header.js';\n", "'use strict';\nimport fetch from 'cross-fetch';\nimport querystring from 'querystring';\nimport { pagination, api, aggregate } from './util.js';\nimport wikiPage from './page.js';\nimport QueryChain from './chain.js';\n/**\n * @namespace\n * @constant\n * @property {string} apiUrl - URL of Wikipedia API\n * @property {string} headers - Headers to pass through to the API request\n * @property {string} origin - When accessing the API using a cross-domain AJAX\n * request (CORS), set this to the originating domain. This must be included in\n * any pre-flight request, and therefore must be part of the request URI (not\n * the POST body). This must match one of the origins in the Origin header\n * exactly, so it has to be set to something like https://en.wikipedia.org or\n * https://meta.wikimedia.org. If this parameter does not match the Origin\n * header, a 403 response will be returned. If this parameter matches the Origin\n * header and the origin is whitelisted, an Access-Control-Allow-Origin header\n * will be set.\n */\nconst defaultOptions = {\n    apiUrl: 'http://en.wikipedia.org/w/api.php',\n    origin: '*'\n};\n/**\n * wiki\n * @example\n * wiki({ apiUrl: 'http://fr.wikipedia.org/w/api.php' }).search(...);\n * @namespace Wiki\n * @param  {Object} options\n * @return {Object} - wiki (for chaining methods)\n */\nexport default function wiki(options = {}) {\n    if (this instanceof wiki) {\n        // eslint-disable-next-line\n        console.log('Please do not use wikijs ^1.0.0 as a class. Please see the new README.');\n    }\n    const apiOptions = Object.assign({}, defaultOptions, options);\n    function handleRedirect(res) {\n        if (res.query.redirects && res.query.redirects.length === 1) {\n            return api(apiOptions, {\n                prop: 'info|pageprops',\n                inprop: 'url',\n                ppprop: 'disambiguation',\n                titles: res.query.redirects[0].to\n            });\n        }\n        return res;\n    }\n    /**\n     * Search articles\n     * @example\n     * wiki.search('star wars').then(data => console.log(data.results.length));\n     * @example\n     * wiki.search('star wars').then(data => {\n     * \tdata.next().then(...);\n     * });\n     * @method Wiki#search\n     * @param  {string} query - keyword query\n     * @param  {Number} [limit] - limits the number of results\n     * @param  {Boolean} [all] - returns entire article objects instead of just titles\n     * @return {Promise} - pagination promise with results and next page function\n     */\n    function search(query, limit = 50, all = false) {\n        return pagination(apiOptions, {\n            list: 'search',\n            srsearch: query,\n            srlimit: limit\n        }, res => res.query.search.map(article => {\n            return all ? article : article.title;\n        })).catch(err => {\n            if (err.message === '\"text\" search is disabled.') {\n                // Try backup search method\n                return opensearch(query, limit);\n            }\n            throw err;\n        });\n    }\n    /**\n     * Search articles using \"fuzzy\" prefixsearch\n     * @example\n     * wiki.prefixSearch('star wars').then(data => console.log(data.results.length));\n     * @example\n     * wiki.prefixSearch('star wars').then(data => {\n     * \tdata.next().then(...);\n     * });\n     * @method Wiki#prefixSearch\n     * @param  {string} query - keyword query\n     * @param  {Number} [limit] - limits the number of results\n     * @return {Promise} - pagination promise with results and next page function\n     */\n    function prefixSearch(query, limit = 50) {\n        return pagination(apiOptions, {\n            list: 'prefixsearch',\n            pslimit: limit,\n            psprofile: 'fuzzy',\n            pssearch: query\n        }, res => res.query.prefixsearch.map(article => article.title));\n    }\n    /**\n     * Opensearch (mainly used as a backup to normal text search)\n     * @param  {string} query - keyword query\n     * @param  {Number} limit - limits the number of results\n     * @return {Array}       List of page title results\n     */\n    function opensearch(query, limit = 50) {\n        return api(apiOptions, {\n            search: query,\n            limit,\n            namespace: 0,\n            action: 'opensearch',\n            redirects: undefined\n        }).then(res => res[1]);\n    }\n    /**\n     * Random articles\n     * @example\n     * wiki.random(3).then(results => console.log(results[0]));\n     * @method Wiki#random\n     * @param  {Number} [limit] - limits the number of random articles\n     * @return {Promise} - List of page titles\n     */\n    function random(limit = 1) {\n        return api(apiOptions, {\n            list: 'random',\n            rnnamespace: 0,\n            rnlimit: limit\n        }).then(res => res.query.random.map(article => article.title));\n    }\n    /**\n     * Get Page\n     * @example\n     * wiki.page('Batman').then(page => console.log(page.pageid));\n     * @method Wiki#page\n     * @param  {string} title - title of article\n     * @return {Promise}\n     */\n    function page(title) {\n        return api(apiOptions, {\n            prop: 'info|pageprops',\n            inprop: 'url',\n            ppprop: 'disambiguation',\n            titles: title\n        })\n            .then(handleRedirect)\n            .then(res => {\n            const id = Object.keys(res.query.pages)[0];\n            if (!id || id === '-1') {\n                throw new Error('No article found');\n            }\n            return wikiPage(res.query.pages[id], apiOptions);\n        });\n    }\n    /**\n     * Get Page by PageId\n     * @example\n     * wiki.findById(4335).then(page => console.log(page.title));\n     * @method Wiki#findById\n     * @param {integer} pageid, id of the page\n     * @return {Promise}\n     */\n    function findById(pageid) {\n        return api(apiOptions, {\n            prop: 'info|pageprops',\n            inprop: 'url',\n            ppprop: 'disambiguation',\n            pageids: pageid\n        })\n            .then(handleRedirect)\n            .then(res => {\n            const id = Object.keys(res.query.pages)[0];\n            if (!id || id === '-1') {\n                throw new Error('No article found');\n            }\n            return wikiPage(res.query.pages[id], apiOptions);\n        });\n    }\n    /**\n     * Find page by query and optional predicate\n     * @example\n     * wiki.find('luke skywalker').then(page => console.log(page.title));\n     * @method Wiki#find\n     * @param {string} search query\n     * @param {function} [predicate] - testing function for choosing which page result to fetch. Default is first result.\n     * @return {Promise}\n     */\n    function find(query, predicate = results => results[0]) {\n        return search(query)\n            .then(res => predicate(res.results))\n            .then(name => page(name));\n    }\n    /**\n     * Geographical Search\n     * @example\n     * wiki.geoSearch(32.329, -96.136).then(titles => console.log(titles.length));\n     * @method Wiki#geoSearch\n     * @param  {Number} lat - latitude\n     * @param  {Number} lon - longitude\n     * @param  {Number} [radius=1000] - search radius in meters (default: 1km)\n     * @param  {Number} [limit=10] - number of results (default: 10 results)\n     * @return {Promise} - List of page titles\n     */\n    function geoSearch(lat, lon, radius = 1000, limit = 10) {\n        return api(apiOptions, {\n            list: 'geosearch',\n            gsradius: radius,\n            gscoord: `${lat}|${lon}`,\n            gslimit: limit\n        }).then(res => res.query.geosearch.map(article => article.title));\n    }\n    /**\n     * @summary Find the most viewed pages with counts\n     * @example\n     * wiki.mostViewed().then(list => console.log(`${list[0].title}: ${list[0].count}`))\n     * @method Wiki#mostViewed\n     * @returns {Promise} - Array of {title,count}\n     */\n    function mostViewed() {\n        return api(apiOptions, {\n            list: 'mostviewed'\n        }).then(res => {\n            return res.query.mostviewed.map(({ title, count }) => ({ title, count }));\n        });\n    }\n    /**\n     * Fetch all page titles in wiki\n     * @method Wiki#allPages\n     * @return {Array} Array of pages\n     */\n    function allPages() {\n        return aggregate(apiOptions, {}, 'allpages', 'title', 'ap');\n    }\n    /**\n     * Fetch all categories in wiki\n     * @method Wiki#allCategories\n     * @return {Array} Array of categories\n     */\n    function allCategories() {\n        return aggregate(apiOptions, {}, 'allcategories', '*', 'ac');\n    }\n    /**\n     * Fetch all pages in category\n     * @method Wiki#pagesInCategory\n     * @param  {String} category Category to fetch from\n     * @return {Array} Array of pages\n     */\n    function pagesInCategory(category) {\n        return aggregate(apiOptions, {\n            cmtitle: category\n        }, 'categorymembers', 'title', 'cm');\n    }\n    /**\n     * @summary Helper function to query API directly\n     * @method Wiki#api\n     * @param {Object} params [https://www.mediawiki.org/wiki/API:Query](https://www.mediawiki.org/wiki/API:Query)\n     * @returns {Promise} Query Response\n     * @example\n     * wiki().api({\n     *\taction: 'parse',\n     *\tpage: 'Pet_door'\n     * }).then(res => res.parse.title.should.equal('Pet door'));\n     */\n    function rawApi(params) {\n        return api(apiOptions, params);\n    }\n    /**\n     * @summary Returns a QueryChain to efficiently query specific data\n     * @method Wiki#chain\n     * @returns {QueryChain}\n     * @example\n     * // Find summaries and images of places near a specific location\n     * wiki()\n     *\t.chain()\n     *\t.geosearch(52.52437, 13.41053)\n     *\t.summary()\n     *\t.image()\n     *\t.coordinates()\n     *\t.request()\n     */\n    function chain() {\n        return new QueryChain(apiOptions);\n    }\n    /**\n     * @summary Returns the Export XML for a page to be used for importing into another MediaWiki\n     * @method Wiki#exportXml\n     * @param {string} pageName\n     * @returns {Promise<string>} Export XML\n     */\n    function exportXml(pageName) {\n        const qs = {\n            title: 'Special:Export',\n            pages: pageName\n        };\n        // The replace here is kinda hacky since\n        // the export action does not use\n        // the normal api endpoint.\n        const url = `${apiOptions.apiUrl.replace('api', 'index')}?${querystring.stringify(qs)}`;\n        const headers = Object.assign({ 'User-Agent': 'WikiJS Bot v1.0' }, apiOptions.headers);\n        return fetch(url, { headers }).then(res => res.text());\n    }\n    return {\n        search,\n        random,\n        page,\n        geoSearch,\n        options,\n        findById,\n        find,\n        allPages,\n        allCategories,\n        pagesInCategory,\n        opensearch,\n        prefixSearch,\n        mostViewed,\n        api: rawApi,\n        chain,\n        exportXml\n    };\n}\n", "import fetch from 'cross-fetch';\nimport querystring from 'querystring';\nconst fetchOptions = {\n    method: 'GET',\n    mode: 'cors',\n    credentials: 'omit'\n};\nexport function api(apiOptions, params = {}) {\n    const qs = Object.assign({\n        format: 'json',\n        action: 'query',\n        redirects: '1'\n    }, params);\n    // Remove undefined properties\n    Object.keys(qs).forEach(key => {\n        if (qs[key] === undefined) {\n            delete qs[key];\n        }\n    });\n    if (apiOptions.origin) {\n        qs.origin = apiOptions.origin;\n    }\n    const url = `${apiOptions.apiUrl}?${querystring.stringify(qs)}`;\n    const headers = Object.assign({ 'User-Agent': 'WikiJS Bot v1.0' }, apiOptions.headers);\n    return fetch(url, Object.assign({ headers }, fetchOptions))\n        .then(res => {\n        if (res.ok) {\n            return res.json();\n        }\n        throw new Error(`${res.status}: ${res.statusText}`);\n    })\n        .then(res => {\n        if (res.error) {\n            throw new Error(res.error.info);\n        }\n        return res;\n    });\n}\nexport function pagination(apiOptions, params, parseResults) {\n    return api(apiOptions, params).then(res => {\n        let resolution = {};\n        resolution.results = parseResults(res);\n        resolution.query = params.srsearch;\n        if (res['continue']) {\n            const continueType = Object.keys(res['continue']).filter(key => key !== 'continue')[0];\n            const continueKey = res['continue'][continueType];\n            params[continueType] = continueKey;\n            resolution.next = () => pagination(apiOptions, params, parseResults);\n        }\n        return resolution;\n    });\n}\nexport function aggregatePagination(pagination, previousResults = []) {\n    return pagination.then(res => {\n        const results = [...previousResults, ...res.results];\n        if (res.next) {\n            return aggregatePagination(res.next(), results);\n        }\n        else {\n            return results;\n        }\n    });\n}\nconst pageLimit = 500;\nexport function aggregate(apiOptions, params, list, key, prefix, results = []) {\n    params.list = list;\n    params[prefix + 'limit'] = pageLimit;\n    return api(apiOptions, params).then(res => {\n        const nextResults = [...results, ...res.query[list].map(e => e[key])];\n        const continueWith = res['query-continue'] || res.continue;\n        if (continueWith) {\n            const nextFromKey = (continueWith[list] && continueWith[list][prefix + 'from']) ||\n                (continueWith[list] && continueWith[list][prefix + 'continue']) ||\n                continueWith[prefix + 'continue'];\n            params[prefix + 'continue'] = nextFromKey;\n            params[prefix + 'from'] = nextFromKey;\n            return aggregate(apiOptions, params, list, key, prefix, nextResults);\n        }\n        return nextResults;\n    });\n}\nconst headingPattern = /(==+)(?:(?!\\n)\\s?)((?:(?!==|\\n)[^])+)(?:(?!\\n)\\s?)(==+)/g;\nfunction getHeadings(text) {\n    let match;\n    const matches = [];\n    while ((match = headingPattern.exec(text)) !== null) {\n        matches.push({\n            level: match[1].trim().length,\n            text: match[2].trim(),\n            start: match.index,\n            end: match.index + match[0].length\n        });\n    }\n    return matches;\n}\nexport function parseContent(source) {\n    const headings = getHeadings(source);\n    const minLevel = Math.min(...headings.map(({ level }) => level));\n    const sections = headings.map((heading, index) => {\n        const next = headings[index + 1];\n        const content = source\n            .substring(heading.end, next ? next.start : undefined)\n            .trim();\n        return {\n            title: heading.text,\n            level: heading.level - minLevel,\n            id: index,\n            content,\n            items: []\n        };\n    });\n    const lastParentLevel = (index, level) => {\n        if (level === 0)\n            return null;\n        for (let i = index - 1; i >= 0; i--) {\n            if (sections[i].level < level) {\n                return sections[i].id;\n            }\n        }\n        return null;\n    };\n    // Set parents\n    sections.forEach((section, index) => {\n        section.parent = lastParentLevel(index, section.level);\n    });\n    const root = {\n        items: []\n    };\n    const findSection = id => sections.find(s => id === s.id);\n    // Organize\n    sections.forEach(section => {\n        if (section.parent === null) {\n            root.items.push(section);\n        }\n        else {\n            findSection(section.parent).items.push(section);\n        }\n    });\n    // Clean up\n    sections.forEach(section => {\n        delete section.id;\n        delete section.parent;\n        delete section.level;\n        if (!section.items.length) {\n            delete section.items;\n        }\n    });\n    return root.items;\n}\n", "import infoboxParser from 'infobox-parser';\nimport { tokenize, constructTree } from 'hyntax';\nimport { aggregatePagination, pagination, api, parseContent } from './util.js';\nimport { parseCoordinates } from './coordinates.js';\nimport QueryChain from './chain.js';\nconst get = (obj, first, ...rest) => {\n    if (obj === undefined || first === undefined)\n        return obj;\n    if (typeof first === 'function') {\n        return get(first(obj), ...rest);\n    }\n    return get(obj[first], ...rest);\n};\nconst firstValue = obj => {\n    if (typeof obj === 'object')\n        return obj[Object.keys(obj)[0]];\n    return obj[0];\n};\nconst getFileName = text => {\n    if (Array.isArray(text))\n        text = text[0];\n    if (!text)\n        return undefined;\n    if (text.indexOf(':') !== -1) {\n        const [, name] = text.split(':');\n        return name;\n    }\n    return text;\n};\n/**\n * WikiPage\n * @namespace WikiPage\n */\nexport default function wikiPage(rawPageInfo, apiOptions) {\n    const raw = rawPageInfo;\n    /**\n     * HTML from page\n     * @example\n     * wiki.page('batman').then(page => page.html()).then(console.log);\n     * @method WikiPage#html\n     * @return {Promise}\n     */\n    function html() {\n        return api(apiOptions, {\n            prop: 'revisions',\n            rvprop: 'content',\n            rvlimit: 1,\n            rvparse: '',\n            titles: raw.title\n        }).then(res => res.query.pages[raw.pageid].revisions[0]['*']);\n    }\n    /**\n     * @summary Useful for extracting structured section content from the page\n     * @alias sections\n     * @example\n     * wiki.page('batman').then(page => page.content()).then(console.log);\n     * @method WikiPage#content\n     * @return {Promise}\n     */\n    function content() {\n        return rawContent().then(parseContent);\n    }\n    /**\n     * Raw content from page\n     * @example\n     * wiki.page('batman').then(page => page.rawContent()).then(console.log);\n     * @method WikiPage#rawContent\n     * @return {Promise}\n     */\n    function rawContent() {\n        return chain()\n            .content()\n            .request()\n            .then(res => res.extract);\n    }\n    /**\n     * Text summary from page\n     * @example\n     * wiki.page('batman').then(page => page.summary()).then(console.log);\n     * @method WikiPage#summary\n     * @return {Promise}\n     */\n    function summary() {\n        return chain()\n            .summary()\n            .request()\n            .then(res => res.extract);\n    }\n    /**\n     * Main page image directly from API\n     * @method WikiPage#pageImage\n     * @returns URL\n     */\n    function pageImage() {\n        return chain()\n            .image({ original: true, name: true })\n            .request()\n            .then(res => get(res, 'image', 'original', 'source'));\n    }\n    /**\n     * Raw data from images from page\n     * @example\n     * wiki.page('batman').then(page => page.rawImages()).then(console.log);\n     * @method WikiPage#rawImages\n     * @return {Promise}\n     */\n    function rawImages() {\n        return api(apiOptions, {\n            generator: 'images',\n            gimlimit: 'max',\n            prop: 'imageinfo',\n            iiprop: 'url',\n            titles: raw.title\n        }).then(res => {\n            if (res.query) {\n                return Object.keys(res.query.pages).map(id => res.query.pages[id]);\n            }\n            return [];\n        });\n    }\n    /**\n     * Main image URL from infobox on page\n     * @example\n     * wiki.page('batman').then(page => page.mainImage()).then(console.log);\n     * @method WikiPage#mainImage\n     * @return {Promise}\n     */\n    function mainImage() {\n        return Promise.all([rawImages(), info()]).then(([images, info]) => {\n            // Handle different translations of \"image\" here\n            const mainImageName = getFileName(info.image ||\n                info.bildname ||\n                info.imagen ||\n                info.Immagine ||\n                info.badge ||\n                info.logo);\n            // Handle case where no info box exists\n            if (!mainImageName) {\n                return rawInfo().then(text => {\n                    if (!images.length)\n                        return undefined;\n                    // Sort images by what is seen first in page's info text\n                    images.sort((a, b) => text.indexOf(b.title) - text.indexOf(a.title));\n                    const image = images[0];\n                    const fallback = image && image.imageinfo.length > 0\n                        ? image.imageinfo[0].url\n                        : undefined;\n                    // If no image could be found, fallback to page image api result\n                    return pageImage().then(url => url || fallback);\n                });\n            }\n            const image = images.find(({ title }) => {\n                const filename = getFileName(title);\n                // Some wikis use underscores for spaces, some don't\n                return (filename.toUpperCase() === mainImageName.toUpperCase() ||\n                    filename.replace(/\\s/g, '_') === mainImageName);\n            });\n            const fallback = image && image.imageinfo.length > 0\n                ? image.imageinfo[0].url\n                : undefined;\n            // If no image could be found, fallback to page image api result\n            return pageImage().then(url => url || fallback);\n        });\n    }\n    /**\n     * Image URL's from page\n     * @example\n     * wiki.page('batman').then(page => page.image()).then(console.log);\n     * @method WikiPage#images\n     * @return {Promise}\n     */\n    function images() {\n        return rawImages().then(images => {\n            return images\n                .map(image => image.imageinfo)\n                .reduce((imageInfos, list) => [...imageInfos, ...list], [])\n                .map(info => info.url);\n        });\n    }\n    /**\n     * External links from page\n     * @example\n     * wiki().page('batman').then(page => page.externalLinks()).then(console.log);\n     * // or\n     * wiki().chain().search('batman').extlinks().request()\n     * @method WikiPage#externalLinks\n     * @return {Promise}\n     */\n    function externalLinks() {\n        return chain().direct('extlinks');\n    }\n    function hasClass(node, className) {\n        return (node.content.attributes &&\n            node.content.attributes.some(attr => attr.key.content === 'class' &&\n                attr.value.content.indexOf(className) !== -1));\n    }\n    function isTag(node) {\n        return node.nodeType === 'tag';\n    }\n    function hasName(node, name) {\n        return node.content.name === name;\n    }\n    function findNode(node, predicate) {\n        if (predicate(node))\n            return node;\n        // search through children as well\n        if (node.content.children) {\n            for (let child of node.content.children) {\n                const found = findNode(child, predicate);\n                if (found) {\n                    return found;\n                }\n            }\n        }\n        return null;\n    }\n    function findNodes(node, predicate, nodes) {\n        if (predicate(node)) {\n            nodes.push(node);\n        }\n        if (node.content.children) {\n            for (let child of node.content.children) {\n                findNodes(child, predicate, nodes);\n            }\n        }\n    }\n    /**\n     * References from page\n     * @example\n     * wiki().page('batman').then(page => page.references()).then(console.log);\n     * @method WikiPage#references\n     * @return {Promise}\n     */\n    function references() {\n        return html()\n            .then(inputHTML => {\n            const { tokens } = tokenize(inputHTML);\n            const { ast } = constructTree(tokens);\n            return ast;\n        })\n            .then(ast => {\n            const links = [];\n            const refs = [];\n            // There can be mulitple reference sections\n            findNodes(ast, node => isTag(node) && hasName(node, 'ol') && hasClass(node, 'references'), refs);\n            for (let ref of refs) {\n                const items = ref.content.children.filter(el => isTag(el) && hasName(el, 'li') && el.content.children);\n                for (let item of items) {\n                    // The reference was moved under a span under li\n                    const span = item.content.children[2];\n                    const cite = findNode(span, node => isTag(node) && hasName(node, 'cite'));\n                    if (cite) {\n                        for (let el of cite.content.children) {\n                            if (isTag(el) && hasName(el, 'a') && hasClass(el, 'external')) {\n                                const linkAttr = el.content.attributes.find(attr => attr.key.content === 'href');\n                                links.push(linkAttr.value.content);\n                            }\n                        }\n                    }\n                }\n            }\n            return links;\n        });\n    }\n    /**\n     * Paginated links from page\n     * @example\n     * wiki().page('batman').then(page => page.links()).then(console.log);\n     * @method WikiPage#links\n     * @param  {Boolean} [aggregated] - return all links (default is true)\n     * @param  {Number} [limit] - number of links per page\n     * @return {Promise} - returns results if aggregated [and next function for more results if not aggregated]\n     */\n    function links(aggregated = true, limit = 100) {\n        const _pagination = pagination(apiOptions, {\n            prop: 'links',\n            plnamespace: 0,\n            pllimit: limit,\n            titles: raw.title\n        }, res => (res.query.pages[raw.pageid].links || []).map(link => link.title));\n        if (aggregated) {\n            return aggregatePagination(_pagination);\n        }\n        return _pagination;\n    }\n    /**\n     * Paginated categories from page\n     * @example\n     * wiki().page('batman').then(page => page.categories()).then(console.log);\n     * @method WikiPage#categories\n     * @param  {Boolean} [aggregated] - return all categories (default is true)\n     * @param  {Number} [limit] - number of categories per page\n     * @return {Promise} - returns results if aggregated [and next function for more results if not aggregated]\n     */\n    function categories(aggregated = true, limit = 100) {\n        const _pagination = pagination(apiOptions, chain()\n            .categories(limit)\n            .params(), res => (res.query.pages[raw.pageid].categories || []).map(category => category.title));\n        if (aggregated) {\n            return aggregatePagination(_pagination);\n        }\n        return _pagination;\n    }\n    /**\n     * Geographical coordinates from page\n     * @example\n     * wiki().page('Texas').then(texas => texas.coordinates())\n     * @method WikiPage#coordinates\n     * @return {Promise}\n     */\n    function coordinates() {\n        return chain()\n            .direct('coordinates')\n            .then(coords => {\n            if (coords)\n                return coords;\n            // No coordinates for this page, check infobox for deprecated version\n            return info().then(data => parseCoordinates(data));\n        });\n    }\n    function rawInfo(title) {\n        return api(apiOptions, {\n            prop: 'revisions',\n            rvprop: 'content',\n            rvsection: 0,\n            titles: title || raw.title\n        }).then(res => get(res, 'query', 'pages', firstValue, 'revisions', 0, '*'));\n    }\n    /**\n     * Fetch and parse tables within page\n     * @method WikiPage#tables\n     * @return {Promise} Resolves to a collection of tables\n     */\n    function tables() {\n        return api(apiOptions, {\n            prop: 'revisions',\n            rvprop: 'content',\n            titles: raw.title\n        })\n            .then(res => get(res, 'query', 'pages', firstValue, 'revisions', 0, '*'))\n            .then(wikitext => infoboxParser(wikitext, apiOptions.parser).tables);\n    }\n    /**\n     * Get general information from page, with optional specifc property\n     * @deprecated This method will be dropped and replaced with the `fullInfo` implementation in v5\n     * @example\n     * wiki().page('Batman').then(page => page.info('alter_ego'));\n     * @method WikiPage#info\n     * @param  {String} [key] - Information key. Falsy keys are ignored\n     * @return {Promise} - info Object contains key/value pairs of infobox data, or specific value if key given\n     */\n    function info(key) {\n        return rawInfo()\n            .then(wikitext => {\n            // Use general data for now...\n            const info = infoboxParser(wikitext, apiOptions.parser).general;\n            if (Object.keys(info).length === 0) {\n                // If empty, check to see if this page has a templated infobox\n                return rawInfo(`Template:Infobox ${raw.title.toLowerCase()}`).then(_wikitext => infoboxParser(_wikitext || '', apiOptions.parser).general);\n            }\n            return info;\n        })\n            .then(metadata => {\n            if (!key) {\n                return metadata;\n            }\n            if (metadata.hasOwnProperty(key)) {\n                return metadata[key];\n            }\n        });\n    }\n    /**\n     * Get the full infobox data, parsed in a easy to use manner\n     * @example\n     * new Wiki().page('Batman').then(page => page.fullInfo()).then(info => info.general.aliases);\n     * @method WikiPage#fullInfo\n     * @return {Promise} - Parsed object of all infobox data\n     */\n    function fullInfo() {\n        return rawInfo().then(wikitext => infoboxParser(wikitext, apiOptions.parser));\n    }\n    /**\n     * Paginated backlinks from page\n     * @method WikiPage#backlinks\n     * @param  {Boolean} [aggregated] - return all backlinks (default is true)\n     * @param  {Number} [limit] - number of backlinks per page\n     * @return {Promise} - includes results [and next function for more results if not aggregated]\n     */\n    function backlinks(aggregated = true, limit = 100) {\n        const _pagination = pagination(apiOptions, {\n            list: 'backlinks',\n            bllimit: limit,\n            bltitle: raw.title\n        }, res => (res.query.backlinks || []).map(link => link.title));\n        if (aggregated) {\n            return aggregatePagination(_pagination);\n        }\n        return _pagination;\n    }\n    /**\n     * Get list of links to different translations\n     * @method WikiPage#langlinks\n     * @return {Promise} - includes link objects { lang, title, url }\n     */\n    function langlinks() {\n        return chain().direct('langlinks');\n    }\n    /**\n     * Get URL for wiki page\n     * @method WikiPage#url\n     * @return {String}\n     */\n    function url() {\n        return raw.canonicalurl;\n    }\n    const page = Object.assign({}, raw);\n    /**\n     * Returns a QueryChain for the page\n     * @method WikiPage#chain\n     * @returns {QueryChain}\n     */\n    function chain() {\n        return new QueryChain(apiOptions, raw.pageid);\n    }\n    Object.assign(page, {\n        raw,\n        html,\n        rawContent,\n        content,\n        sections: content,\n        summary,\n        images,\n        references,\n        links,\n        externalLinks,\n        categories,\n        coordinates,\n        info,\n        backlinks,\n        rawImages,\n        mainImage,\n        langlinks,\n        rawInfo,\n        fullInfo,\n        pageImage,\n        tables,\n        url,\n        chain\n    });\n    return page;\n}\n", "import got from \"got\";\nimport wiki from \"wikijs\";\n\nexport interface PageSummary {\n  title: string;\n  extract: string;\n  description: string;\n  thumbnail: {\n    source: string;\n  };\n  content_urls: {\n    desktop: {\n      page: string;\n    };\n  };\n}\n\nexport interface WikiNode {\n  title: string;\n  content: string;\n  items?: WikiNode[];\n}\n\nconst getApiUrl = (language = \"en\") => `https://${language}.wikipedia.org/`;\n\nexport async function getRandomPageUrl(language: string) {\n  const response = await got.get(`${getApiUrl(language)}api/rest_v1/page/random/summary`).json<PageSummary>();\n  return {\n    url: response.content_urls.desktop.page,\n    title: response.title,\n  };\n}\n\nexport async function getTodayFeaturedPageUrl(language: string) {\n  const today = new Date();\n  const year = today.getFullYear();\n  const month = (today.getMonth() + 1).toString().padStart(2, \"0\");\n  const day = today.getDate().toString().padStart(2, \"0\");\n  const response = await got\n    .get(`${getApiUrl(language)}api/rest_v1/feed/featured/${year}/${month}/${day}`)\n    .json<{ tfa: PageSummary }>();\n  return {\n    url: response.tfa.content_urls.desktop.page,\n    title: response.tfa.title,\n  };\n}\n\nexport async function findPagesByTitle(search: string, language: string) {\n  if (!search) {\n    return { language, results: [] };\n  }\n  const response = await got\n    .get(`${getApiUrl(language)}w/api.php`, {\n      searchParams: {\n        action: \"query\",\n        list: \"prefixsearch\",\n        format: \"json\",\n        pssearch: search,\n        pslimit: 9,\n      },\n    })\n    .json<{ query: { prefixsearch: { title: string }[] } }>();\n  return { language, results: response.query.prefixsearch.map((result) => result.title) };\n}\n\nexport async function getPageData(title: string, language: string) {\n  return got.get(`${getApiUrl(language)}api/rest_v1/page/summary/${encodeURIComponent(title)}`).json<PageSummary>();\n}\n\nexport async function getPageContent(title: string, language: string): Promise<WikiNode[]> {\n  return (\n    wiki({\n      apiUrl: `${getApiUrl(language)}w/api.php`,\n    })\n      .page(title)\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      .then((page) => page.content() as any as WikiNode[])\n      .catch(() => [])\n  );\n}\n\nexport async function getPageMetadata(title: string, language: string): Promise<Record<string, any>> {\n  return (\n    wiki({\n      apiUrl: `${getApiUrl(language)}w/api.php`,\n    })\n      .page(title)\n      .then((page) => page.fullInfo())\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      .then((page) => page?.general ?? {})\n      .catch(() => ({}))\n  );\n}\n\nexport async function getPageLinks(title: string, language: string) {\n  return wiki({\n    apiUrl: `${getApiUrl(language)}w/api.php`,\n  })\n    .page(title)\n    .then((page) => page.links())\n    .catch(() => []);\n}\n\nexport async function getAvailableLanguages(title: string, language: string) {\n  return wiki({\n    apiUrl: `${getApiUrl(language)}w/api.php`,\n  })\n    .page(title)\n    .then((page) => page.langlinks())\n    .then((items) => items.flatMap((item) => item.lang))\n    .catch(() => [language]);\n}\n", "import { useCachedState } from \"@raycast/utils\";\nimport { Cache } from \"@raycast/api\";\n\nexport type Locale =\n  | \"en\"\n  | \"es\"\n  | \"de\"\n  | \"fr\"\n  | \"ja\"\n  | \"ru\"\n  | \"pt\"\n  | \"it\"\n  | \"zh\"\n  | \"fa\"\n  | \"ar\"\n  | \"pl\"\n  | \"nl\"\n  | \"tr\"\n  | \"el\";\n\nexport function useLanguage() {\n  return useCachedState<Locale>(\"language\", \"en\");\n}\n\nexport async function getStoredLanguage() {\n  const cache = new Cache();\n  const language = await cache.get(\"language\");\n  return (language ? JSON.parse(language) : \"en\") as Locale;\n}\n\nexport const languages: { icon: string; title: string; value: Locale }[] = [\n  { icon: \"\uD83C\uDDFA\uD83C\uDDF8\", title: \"English\", value: \"en\" },\n  { icon: \"\uD83C\uDDEA\uD83C\uDDF8\", title: \"Spanish\", value: \"es\" },\n  { icon: \"\uD83C\uDDE9\uD83C\uDDEA\", title: \"German\", value: \"de\" },\n  { icon: \"\uD83C\uDDEB\uD83C\uDDF7\", title: \"French\", value: \"fr\" },\n  { icon: \"\uD83C\uDDEF\uD83C\uDDF5\", title: \"Japanese\", value: \"ja\" },\n  { icon: \"\uD83C\uDDF7\uD83C\uDDFA\", title: \"Russian\", value: \"ru\" },\n  { icon: \"\uD83C\uDDF5\uD83C\uDDF9\", title: \"Portuguese\", value: \"pt\" },\n  { icon: \"\uD83C\uDDEE\uD83C\uDDF9\", title: \"Italian\", value: \"it\" },\n  { icon: \"\uD83C\uDDE8\uD83C\uDDF3\", title: \"Chinese\", value: \"zh\" },\n  { icon: \"\uD83C\uDDEE\uD83C\uDDF7\", title: \"Persian\", value: \"fa\" },\n  { icon: \"\uD83C\uDDE6\uD83C\uDDEA\", title: \"Arabic\", value: \"ar\" },\n  { icon: \"\uD83C\uDDF5\uD83C\uDDF1\", title: \"Polish\", value: \"pl\" },\n  { icon: \"\uD83C\uDDF8\uD83C\uDDFD\", title: \"Dutch\", value: \"nl\" },\n  { icon: \"\uD83C\uDDF9\uD83C\uDDF7\", title: \"Turkish\", value: \"tr\" },\n  { icon: \"\uD83C\uDDEC\uD83C\uDDF7\", title: \"Greek\", value: \"el\" },\n];\n", "import { getPreferenceValues } from \"@raycast/api\";\n\nconst preferences = getPreferenceValues();\n\nexport const openInBrowser = preferences.openIn === \"browser\";\nexport const prefersListView = preferences.viewType === \"list\";\n"],
  "mappings": "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",
  "names": ["require_source", "__commonJSMin", "exports", "module", "isTLSSocket", "socket", "deferToConnect", "fn", "listeners", "hasConnectListener", "hasSecureConnectListener", "hasCloseListener", "onConnect", "require_buffer_stream", "__commonJSMin", "exports", "module", "PassThroughStream", "options", "array", "encoding", "isBuffer", "objectMode", "stream", "length", "chunks", "chunk", "require_get_stream", "__commonJSMin", "exports", "module", "BufferConstants", "stream", "promisify", "bufferStream", "streamPipelinePromisified", "MaxBufferError", "getStream", "inputStream", "options", "maxBuffer", "resolve", "reject", "rejectPromise", "error", "require_http_cache_semantics", "__commonJSMin", "exports", "module", "statusCodeCacheableByDefault", "understoodStatuses", "errorStatusCodes", "hopByHopHeaders", "excludedFromRevalidationUpdate", "toNumberOrZero", "s", "n", "isErrorResponse", "response", "parseCacheControl", "header", "cc", "parts", "part", "k", "v", "formatCacheControl", "req", "res", "shared", "cacheHeuristic", "immutableMinTimeToLive", "ignoreCargoCult", "_fromObject", "requestCC", "allowHeadMethod", "fields", "name", "inHeaders", "headers", "tokens", "warnings", "warning", "age", "serverDate", "residentTime", "defaultMinTtl", "expires", "lastModified", "staleIfErrorAge", "staleWhileRevalidateAge", "obj", "incomingReq", "etags", "etag", "request", "matches", "newResponse", "require_json_buffer", "__commonJSMin", "exports", "stringify", "o", "s", "array", "first", "k", "ignore", "key", "value", "require_src", "__commonJSMin", "exports", "module", "EventEmitter", "JSONB", "loadStore", "options", "adapters", "adapter", "iterableAdapters", "Keyv", "uri", "emitErrors", "adapterOptions", "compression", "error", "generateIterator", "iterator", "key", "raw", "data", "element", "keys", "store", "isArray", "keyPrefixed", "promises", "values", "value", "result", "row", "ttl", "expires", "x", "require_mimic_response", "__commonJSMin", "exports", "module", "knownProperties", "fromStream", "toStream", "fromProperties", "properties", "property", "value", "require_decompress_response", "__commonJSMin", "exports", "module", "Transform", "PassThrough", "zlib", "mimicResponse", "response", "contentEncoding", "isBrotli", "isEmpty", "checker", "data", "_encoding", "callback", "finalStream", "error", "decompressStream", "require_quick_lru", "__commonJSMin", "exports", "module", "QuickLRU", "options", "key", "value", "deleted", "item", "oldCacheSize", "require_delay_async_destroy", "__commonJSMin", "exports", "module", "stream", "args", "callback", "error", "onError", "require_agent", "__commonJSMin", "exports", "module", "URL", "EventEmitter", "tls", "http2", "QuickLRU", "delayAsyncDestroy", "kCurrentStreamCount", "kRequest", "kOriginSet", "kGracefullyClosing", "kLength", "nameKeys", "getSortedIndex", "array", "value", "compare", "low", "high", "mid", "compareSessions", "a", "b", "closeCoveredSessions", "where", "session", "index", "coveredSession", "origin", "gracefullyClose", "closeSessionIfCovered", "Agent", "timeout", "maxSessions", "maxEmptySessions", "maxCachedTlsSessions", "options", "normalized", "key", "normalizedOptions", "normalizedOrigin", "item", "thisStreamCount", "thatStreamCount", "listeners", "resolve", "reject", "servername", "hostname", "error", "sessions", "maxConcurrentStreams", "currentStreamsCount", "optimalSession", "sessionMaxConcurrentStreams", "sessionCurrentStreamsCount", "removeFromQueue", "entry", "name", "receivedSettings", "socket", "computedOptions", "getOriginSet", "originSet", "isFree", "tlsSession", "processListeners", "queue", "completed", "mainOrigin", "headers", "streamOptions", "stream", "port", "host", "maxCount", "closedCount", "thisSessions", "reason", "entries", "require_incoming_message", "__commonJSMin", "exports", "module", "Readable", "IncomingMessage", "socket", "highWaterMark", "value", "error", "callback", "ms", "require_proxy_events", "__commonJSMin", "exports", "module", "from", "to", "events", "event", "args", "require_errors", "__commonJSMin", "exports", "module", "makeError", "Base", "key", "getMessage", "args", "type", "valid", "isManyTypes", "require_is_request_pseudo_header", "__commonJSMin", "exports", "module", "header", "require_validate_header_name", "__commonJSMin", "exports", "module", "ERR_INVALID_HTTP_TOKEN", "isRequestPseudoHeader", "isValidHttpToken", "name", "require_validate_header_value", "__commonJSMin", "exports", "module", "ERR_HTTP_INVALID_HEADER_VALUE", "ERR_INVALID_CHAR", "isInvalidHeaderValue", "name", "value", "require_proxy_socket_handler", "__commonJSMin", "exports", "module", "ERR_HTTP2_NO_SOCKET_MANIPULATION", "proxySocketHandler", "stream", "property", "reference", "session", "value", "require_client_request", "__commonJSMin", "exports", "module", "URL", "urlToHttpOptions", "http2", "Writable", "Agent", "globalAgent", "IncomingMessage", "proxyEvents", "ERR_INVALID_ARG_TYPE", "ERR_INVALID_PROTOCOL", "ERR_HTTP_HEADERS_SENT", "validateHeaderName", "validateHeaderValue", "proxySocketHandler", "HTTP2_HEADER_STATUS", "HTTP2_HEADER_METHOD", "HTTP2_HEADER_PATH", "HTTP2_HEADER_AUTHORITY", "HTTP2_METHOD_CONNECT", "kHeaders", "kOrigin", "kSession", "kOptions", "kFlushedHeaders", "kJobs", "kPendingAgentPromise", "ClientRequest", "input", "options", "callback", "timeout", "headers", "header", "reuseSocket", "args", "value", "_value", "chunk", "encoding", "callWrite", "callEnd", "error", "internalError", "isConnectMethod", "onStream", "stream", "res", "onResponse", "flags", "rawHeaders", "response", "trailers", "rawTrailers", "aborted", "finish", "job", "promise", "name", "lowercased", "ms", "applyTimeout", "require_resolve_alpn", "__commonJSMin", "exports", "module", "tls", "options", "connect", "resolve", "reject", "timeout", "socket", "callback", "socketPromise", "onTimeout", "error", "require_calculate_server_name", "__commonJSMin", "exports", "module", "isIP", "assert", "getHost", "host", "idx", "servername", "require_auto", "__commonJSMin", "exports", "module", "URL", "urlToHttpOptions", "http", "https", "resolveALPN", "QuickLRU", "Agent", "globalAgent", "Http2ClientRequest", "calculateServerName", "delayAsyncDestroy", "cache", "queue", "installSocket", "agent", "socket", "options", "onFree", "onClose", "onTimeout", "freeSockets", "sockets", "onRemove", "createResolveProtocol", "connect", "name", "path", "resultPromise", "result", "error", "defaultResolveProtocol", "input", "callback", "isHttps", "resolveProtocol", "alpnProtocol", "timeout", "isHttp2", "defaultCreateConnection", "require_js_stream_socket", "__commonJSMin", "exports", "module", "stream", "tls", "JSStreamSocket", "require_unexpected_status_code_error", "__commonJSMin", "exports", "module", "UnexpectedStatusCodeError", "statusCode", "statusMessage", "require_check_type", "__commonJSMin", "exports", "module", "checkType", "name", "value", "types", "type", "names", "require_initialize", "__commonJSMin", "exports", "module", "URL", "checkType", "self", "proxyOptions", "url", "require_get_auth_headers", "__commonJSMin", "exports", "module", "self", "username", "password", "data", "authorization", "require_h1_over_h2", "__commonJSMin", "exports", "module", "tls", "http", "https", "JSStreamSocket", "globalAgent", "UnexpectedStatusCodeError", "initialize", "getAuthorizationHeaders", "createConnection", "self", "options", "callback", "proxyOptions", "url", "headers", "raw", "stream", "statusCode", "encrypted", "secureStream", "socket", "out", "error", "HttpOverHttp2", "HttpsOverHttp2", "require_h2_over_hx", "__commonJSMin", "exports", "module", "Agent", "JSStreamSocket", "UnexpectedStatusCodeError", "initialize", "Http2OverHttpX", "options", "origin", "authority", "stream", "statusCode", "statusMessage", "socket", "out", "require_h2_over_h2", "__commonJSMin", "exports", "module", "globalAgent", "Http2OverHttpX", "getAuthorizationHeaders", "getStatusCode", "stream", "resolve", "reject", "headers", "Http2OverHttp2", "authority", "proxyOptions", "statusCode", "require_h2_over_h1", "__commonJSMin", "exports", "module", "http", "https", "Http2OverHttpX", "getAuthorizationHeaders", "getStream", "request", "resolve", "reject", "onConnect", "response", "socket", "head", "Http2OverHttp", "authority", "proxyOptions", "url", "headers", "require_source", "__commonJSMin", "exports", "module", "http2", "Agent", "globalAgent", "ClientRequest", "IncomingMessage", "auto", "HttpOverHttp2", "HttpsOverHttp2", "Http2OverHttp2", "Http2OverHttp", "Http2OverHttps", "validateHeaderName", "validateHeaderValue", "request", "url", "options", "callback", "get", "req", "require_lib", "__commonJSMin", "exports", "module", "conversions", "sign", "x", "evenRound", "createNumberConversion", "bitLength", "typeOpts", "lowerBound", "upperBound", "moduloVal", "moduloBound", "V", "opts", "val", "c", "i", "S", "n", "U", "a", "b", "require_utils", "__commonJSMin", "exports", "module", "target", "source", "keys", "i", "impl", "wrapper", "require_tr46", "__commonJSMin", "exports", "module", "punycode", "mappingTable", "PROCESSING_OPTIONS", "normalize", "str", "s", "findStatus", "val", "start", "end", "mid", "target", "regexAstralSymbols", "countSymbols", "string", "mapChars", "domain_name", "useSTD3", "processing_option", "hasError", "processed", "len", "i", "codePoint", "status", "combiningMarksRegex", "validateLabel", "label", "error", "processing", "result", "labels", "validation", "verifyDnsLength", "l", "total", "require_url_state_machine", "__commonJSMin", "exports", "module", "punycode", "tr46", "specialSchemes", "failure", "countSymbols", "str", "at", "input", "idx", "c", "isASCIIDigit", "isASCIIAlpha", "isASCIIAlphanumeric", "isASCIIHex", "isSingleDot", "buffer", "isDoubleDot", "isWindowsDriveLetterCodePoints", "cp1", "cp2", "isWindowsDriveLetterString", "string", "isNormalizedWindowsDriveLetterString", "containsForbiddenHostCodePoint", "containsForbiddenHostCodePointExcludingPercent", "isSpecialScheme", "scheme", "isSpecial", "url", "defaultPort", "percentEncode", "hex", "utf8PercentEncode", "buf", "i", "utf8PercentDecode", "output", "isC0ControlPercentEncode", "extraPathPercentEncodeSet", "isPathPercentEncode", "extraUserinfoPercentEncodeSet", "isUserinfoPercentEncode", "percentEncodeChar", "encodeSetPredicate", "cStr", "parseIPv4Number", "R", "parseIPv4", "parts", "numbers", "part", "n", "ipv4", "counter", "serializeIPv4", "address", "parseIPv6", "pieceIndex", "compress", "pointer", "value", "length", "numbersSeen", "ipv4Piece", "number", "swaps", "temp", "serializeIPv6", "findLongestZeroSequence", "ignore0", "parseHost", "isSpecialArg", "parseOpaqueHost", "domain", "asciiDomain", "ipv4Host", "decoded", "arr", "maxIdx", "maxLen", "currStart", "currLen", "serializeHost", "host", "trimControlChars", "trimTabAndNewline", "shortenPath", "path", "isNormalizedWindowsDriveLetter", "includesCredentials", "cannotHaveAUsernamePasswordPort", "URLStateMachine", "base", "encodingOverride", "stateOverride", "res", "ret", "len", "codePoint", "encodedCodePoints", "port", "fileOtherwiseCodePoints", "serializeURL", "excludeFragment", "serializeOrigin", "tuple", "result", "options", "usm", "username", "password", "integer", "require_URL_impl", "__commonJSMin", "exports", "usm", "constructorArgs", "url", "base", "parsedBase", "parsedURL", "v", "input", "require_URL", "__commonJSMin", "exports", "module", "conversions", "utils", "Impl", "impl", "URL", "url", "args", "i", "V", "obj", "constructorArgs", "privateData", "require_public_api", "__commonJSMin", "exports", "require_lib", "__commonJSMin", "exports", "module", "_interopDefault", "ex", "Stream", "http", "Url", "whatwgUrl", "https", "zlib", "Readable", "BUFFER", "TYPE", "Blob", "blobParts", "options", "buffers", "size", "a", "length", "i", "element", "buffer", "type", "buf", "ab", "readable", "start", "end", "relativeStart", "relativeEnd", "span", "slicedBuffer", "blob", "FetchError", "message", "systemError", "convert", "INTERNALS", "PassThrough", "Body", "body", "_this", "_ref", "_ref$size", "_ref$timeout", "timeout", "isURLSearchParams", "isBlob", "err", "error", "consumeBody", "ct", "_this2", "_this3", "convertBody", "proto", "name", "desc", "_this4", "accum", "accumBytes", "abort", "resolve", "reject", "resTimeout", "chunk", "headers", "charset", "res", "str", "obj", "clone", "instance", "p1", "p2", "extractContentType", "getTotalBytes", "writeToStream", "dest", "invalidTokenRegex", "invalidHeaderCharRegex", "validateName", "validateValue", "value", "find", "map", "key", "MAP", "Headers", "init", "rawHeaders", "headerNames", "headerName", "method", "pairs", "pair", "callback", "thisArg", "getHeaders", "_pairs$i", "createHeadersIterator", "kind", "k", "INTERNAL", "target", "iterator", "HeadersIteratorPrototype", "_INTERNAL", "index", "values", "len", "exportNodeCompatibleHeaders", "hostHeaderKey", "createHeadersLenient", "val", "INTERNALS$1", "STATUS_CODES", "Response", "opts", "status", "contentType", "INTERNALS$2", "URL", "parse_url", "format_url", "parseURL", "urlStr", "streamDestructionSupported", "isRequest", "input", "isAbortSignal", "signal", "Request", "parsedURL", "inputBody", "getNodeRequestOptions", "request", "contentLengthValue", "totalBytes", "agent", "AbortError", "URL$1", "PassThrough$1", "isDomainOrSubdomain", "destination", "original", "orig", "fetch", "url", "send", "response", "abortAndFinalize", "finalize", "req", "reqTimeout", "socket", "location", "locationURL", "requestOpts", "response_options", "codings", "zlibOptions", "code", "require_node_ponyfill", "__commonJSMin", "exports", "module", "nodeFetch", "realFetch", "fetch", "url", "options", "require_camelcase", "__commonJSMin", "exports", "module", "preserveCamelCase", "str", "isLastCharLower", "isLastCharUpper", "isLastLastCharUpper", "i", "c", "x", "m", "p1", "trimWrappers", "str", "replace", "trim", "trimOr", "orPosition", "indexOf", "substring", "getValue", "raw", "key", "cleansed", "extraPropertyPattern", "endingPattern", "links", "match", "linksPattern", "split", "linkSeparatorPattern", "filter", "t", "text", "dataType", "globalPattern", "parsePattern", "parse", "variable", "name", "source", "matches", "defineProperty", "instances", "map", "sourceAfter", "reduce", "memo", "index", "DO_NOT_REPLACE", "byDataHandler", "handler", "context", "data", "Object", "assign", "extractData", "dataTypes", "type", "findPropertyList", "keyValuePairs", "keyValueGlobalPattern", "result", "keyValuePattern", "exec", "r", "slicedToArray", "rawKey", "rawValue", "camelCase", "item", "fillVariable", "value", "simplifyDataValues", "log", "JSON", "stringify", "find", "pattern", "l", "matched", "dataValue", "parseInt", "fillVariables", "options", "Date", "Array", "isArray", "keys", "filled", "handleSmallData", "smallDataType", "primary", "secondary", "getVariableValue", "smallData", "reduceVariable", "float", "numberParse", "parseFloat", "isNaN", "dateValue", "variableValue", "byVariableReduction", "reduced", "extractProperties", "transformProperties", "properties", "transformed", "blankNamePattern", "id", "blankName", "blankInfo", "blankInfoPattern", "findOuterIndex", "lastOpen", "i", "length", "nextTwo", "substr", "pop", "push", "startMatch", "infoBoxStartPattern", "sourceLeft", "startIndex", "withStart", "outerIndex", "extractInfoboxes", "parsed", "infoboxes", "cleanSource", "removeSmall", "removeReferences", "transformRowSpan", "rows", "transformCells", "merged", "cells", "k", "o", "join", "clean", "linkPattern", "m", "x", "parseRow", "countMatch", "count", "icons", "getMatches", "parseTableData", "rowPattern", "e", "el", "rowPatternSingle", "slice", "getTables", "tableStarts", "tableStartPattern", "tableEnds", "tableEndPattern", "tableStart", "tableEnd", "Error", "end", "start", "last", "list", "undefined", "parseInfobox", "infobox", "res", "shift", "forEach", "next", "general", "tables", "parseTables", "bsTables", "parseBsTables", "lists", "parseLists", "smallGlobalPattern", "smallPattern", "small", "results", "flagGlobalPattern", "flagPattern", "flag", "coordsGlobalPattern", "coordsPattern", "coords", "listItemPrefixPattern", "unbulletedListGlobalPattern", "unbulletedListItemPattern", "unbulletedLists", "listItems", "plainListGlobalPattern", "plainListItemPattern", "unmarkedLists", "plainLists", "marriageGlobalPattern", "marriagePattern", "marriages", "nbayGlobalPattern", "nbayPattern", "nbay", "year", "otherGlobalPattern", "otherPattern", "other", "label", "hlistGlobalPattern", "hlistPattern", "hlist", "birthDateGlobalPattern", "birthDatePattern", "millisInYear", "birthDates", "month", "day", "date", "Math", "floor", "now", "Symbol", "labeledDateGlobalPattern", "labeledDatePattern", "labeledDates", "firstPipeIndex", "potentialDate", "getTime", "deathDateGlobalPattern", "deathDatePattern", "deathDates", "deathYear", "deathMonth", "deathDay", "birthYear", "birthMonth", "birthDay", "deathDate", "birthDate", "Number", "URLGlobalPattern", "URLPattern", "url", "websiteGlobalPattern", "websitePattern", "website", "protocol", "hostname", "path", "propPattern", "extra", "globalPattern$1", "obj", "convertGlobalPattern", "convertPattern", "convert", "filmDatesPattern", "filmDatePatternGlobal", "filmDatePattern", "filmDates", "location", "ref", "attributeGlobalPattern", "attributePattern", "ref1", "attributesSource", "contents", "attributes", "attr", "ref2", "formatNum", "globalPattern$2", "parsePattern$1", "createDataTypeHandler", "RegExp", "number", "parseEnglish", "parseSpanish", "toString", "headersPattern", "cellSeparatorPattern", "linkNamePattern", "inlineHeaderPattern", "actionPattern", "rowSpanCountPattern", "stripLinks", "capture", "removeActions", "transformCell", "row", "findIndex", "p", "findTableStart", "findTableEnd", "getHeaders", "headers", "getRows", "spanN", "spanCount", "rowsInSpan", "n", "getNextTable", "left", "a", "camelcase", "cleanedSource", "kmPattern", "headingPattern", "subheadingPattern", "headings", "subheadings", "headingsBefore", "heading", "table", "subheadingsBefore", "subheading", "require_helpers", "__commonJSMin", "exports", "module", "OPEN_TAG_NAME_PATTERN", "CLOSE_TAG_NAME_PATTERN", "prettyJSON", "obj", "clearAst", "ast", "cleanAst", "node", "parseOpenTagName", "openTagStartTokenContent", "match", "parseCloseTagName", "closeTagTokenContent", "calculateTokenCharactersRange", "state", "keepBuffer", "startPosition", "endPosition", "isWhitespace", "char", "require_token_types", "__commonJSMin", "exports", "module", "require_tokenizer_contexts", "__commonJSMin", "exports", "module", "require_data", "__commonJSMin", "exports", "module", "calculateTokenCharactersRange", "TOKEN_TEXT", "TOKEN_COMMENT_START", "OPEN_TAG_START_CONTEXT", "CLOSE_TAG_CONTEXT", "DOCTYPE_START_CONTEXT", "COMMENT_CONTENT_CONTEXT", "COMMENT_START", "generateTextToken", "state", "range", "openingCornerBraceWithText", "tokens", "openingCornerBraceWithSlash", "doctypeStart", "commentStart", "commentStartRange", "handleContentEnd", "textContent", "isIncompleteDoctype", "chars", "charsUpperCase", "OPEN_TAG_START_PATTERN", "parseSyntax", "require_open_tag_start", "__commonJSMin", "exports", "module", "parseOpenTagName", "isWhitespace", "calculateTokenCharactersRange", "TOKEN_OPEN_TAG_START", "TOKEN_OPEN_TAG_START_SCRIPT", "TOKEN_OPEN_TAG_START_STYLE", "OPEN_TAG_END_CONTEXT", "ATTRIBUTES_CONTEXT", "tokensMap", "tagEnd", "state", "tokens", "tagName", "range", "whitespace", "parseSyntax", "chars", "require_close_tag", "__commonJSMin", "exports", "module", "calculateTokenCharactersRange", "TOKEN_CLOSE_TAG", "DATA_CONTEXT", "closingCornerBrace", "state", "tokens", "range", "parseSyntax", "chars", "require_open_tag_end", "__commonJSMin", "exports", "module", "calculateTokenCharactersRange", "TOKEN_OPEN_TAG_END", "TOKEN_OPEN_TAG_END_SCRIPT", "TOKEN_OPEN_TAG_END_STYLE", "OPEN_TAG_END_CONTEXT", "DATA_CONTEXT", "SCRIPT_CONTENT_CONTEXT", "STYLE_CONTENT_CONTEXT", "tokensMap", "contextsMap", "closingCornerBrace", "state", "tokens", "range", "tagName", "parseSyntax", "chars", "require_attributes", "__commonJSMin", "exports", "module", "isWhitespace", "calculateTokenCharactersRange", "ATTRIBUTES_CONTEXT", "OPEN_TAG_END_CONTEXT", "ATTRIBUTE_VALUE_CONTEXT", "ATTRIBUTE_KEY_CONTEXT", "TOKEN_ATTRIBUTE_ASSIGNMENT", "tagEnd", "state", "tagName", "noneWhitespace", "equal", "tokens", "range", "parseSyntax", "chars", "require_attribute_key", "__commonJSMin", "exports", "module", "calculateTokenCharactersRange", "TOKEN_ATTRIBUTE_KEY", "ATTRIBUTES_CONTEXT", "keyEnd", "state", "tokens", "range", "isKeyBreak", "chars", "parseSyntax", "require_attribute_value", "__commonJSMin", "exports", "module", "isWhitespace", "ATTRIBUTE_VALUE_WRAPPED_CONTEXT", "ATTRIBUTES_CONTEXT", "ATTRIBUTE_VALUE_BARE_CONTEXT", "TOKEN_ATTRIBUTE_VALUE_WRAPPER_START", "wrapper", "state", "tokens", "bare", "tagEnd", "parseSyntax", "chars", "require_attribute_value_bare", "__commonJSMin", "exports", "module", "calculateTokenCharactersRange", "isWhitespace", "TOKEN_ATTRIBUTE_VALUE", "ATTRIBUTES_CONTEXT", "valueEnd", "state", "tokens", "range", "parseSyntax", "chars", "require_attribute_value_wrapped", "__commonJSMin", "exports", "module", "calculateTokenCharactersRange", "TOKEN_ATTRIBUTE_VALUE", "TOKEN_ATTRIBUTE_VALUE_WRAPPER_END", "ATTRIBUTES_CONTEXT", "ATTRIBUTE_VALUE_WRAPPED_CONTEXT", "wrapper", "state", "tokens", "range", "endWrapperPosition", "parseSyntax", "chars", "wrapperChar", "require_script_tag_content", "__commonJSMin", "exports", "module", "calculateTokenCharactersRange", "TOKEN_SCRIPT_TAG_CONTENT", "TOKEN_CLOSE_TAG_SCRIPT", "DATA_CONTEXT", "closingScriptTag", "state", "tokens", "range", "INCOMPLETE_CLOSING_TAG_PATTERN", "CLOSING_SCRIPT_TAG_PATTERN", "parseSyntax", "chars", "require_style_tag_content", "__commonJSMin", "exports", "module", "calculateTokenCharactersRange", "TOKEN_STYLE_TAG_CONTENT", "TOKEN_CLOSE_TAG_STYLE", "DATA_CONTEXT", "closingStyleTag", "state", "tokens", "range", "INCOMPLETE_CLOSING_TAG_PATTERN", "CLOSING_STYLE_TAG_PATTERN", "parseSyntax", "chars", "require_doctype_start", "__commonJSMin", "exports", "module", "isWhitespace", "calculateTokenCharactersRange", "TOKEN_DOCTYPE_START", "DOCTYPE_END_CONTEXT", "DOCTYPE_ATTRIBUTES_CONTEXT", "generateDoctypeStartToken", "state", "range", "closingCornerBrace", "tokens", "whitespace", "parseSyntax", "chars", "require_doctype_end", "__commonJSMin", "exports", "module", "calculateTokenCharactersRange", "TOKEN_DOCTYPE_END", "DATA_CONTEXT", "closingCornerBrace", "state", "tokens", "range", "parseSyntax", "chars", "require_doctype_attributes", "__commonJSMin", "exports", "module", "isWhitespace", "DOCTYPE_ATTRIBUTE_WRAPPED_CONTEXT", "DOCTYPE_ATTRIBUTE_BARE_CONTEXT", "DOCTYPE_END_CONTEXT", "TOKEN_DOCTYPE_ATTRIBUTE_WRAPPER_START", "wrapper", "state", "tokens", "bare", "closingCornerBrace", "parseSyntax", "chars", "require_doctype_attribute_wrapped", "__commonJSMin", "exports", "module", "calculateTokenCharactersRange", "TOKEN_DOCTYPE_ATTRIBUTE_WRAPPER_END", "TOKEN_DOCTYPE_ATTRIBUTE", "DOCTYPE_ATTRIBUTE_WRAPPED_CONTEXT", "DOCTYPE_ATTRIBUTES_CONTEXT", "wrapper", "state", "tokens", "range", "endWrapperPosition", "parseSyntax", "chars", "wrapperChar", "require_doctype_attribute_bare", "__commonJSMin", "exports", "module", "isWhitespace", "calculateTokenCharactersRange", "TOKEN_DOCTYPE_ATTRIBUTE", "DOCTYPE_ATTRIBUTES_CONTEXT", "attributeEnd", "state", "tokens", "range", "parseSyntax", "chars", "require_comment_content", "__commonJSMin", "exports", "module", "calculateTokenCharactersRange", "TOKEN_COMMENT_END", "TOKEN_COMMENT_CONTENT", "DATA_CONTEXT", "COMMENT_END", "commentEnd", "state", "tokens", "contentRange", "commentEndRange", "parseSyntax", "chars", "require_tokenize", "__commonJSMin", "exports", "module", "dataContext", "openTagStartContext", "closeTagContext", "openTagEndContext", "attributesContext", "attributeKeyContext", "attributeValueContext", "attributeValueBareContext", "attributeValueWrappedContext", "scriptContentContext", "styleContentContext", "doctypeStartContext", "doctypeEndContextFactory", "doctypeAttributesContext", "doctypeAttributeWrappedContext", "doctypeAttributeBareEndContext", "commentContentContext", "DATA_CONTEXT", "OPEN_TAG_START_CONTEXT", "CLOSE_TAG_CONTEXT", "ATTRIBUTES_CONTEXT", "OPEN_TAG_END_CONTEXT", "ATTRIBUTE_KEY_CONTEXT", "ATTRIBUTE_VALUE_CONTEXT", "ATTRIBUTE_VALUE_BARE_CONTEXT", "ATTRIBUTE_VALUE_WRAPPED_CONTEXT", "SCRIPT_CONTENT_CONTEXT", "STYLE_CONTENT_CONTEXT", "DOCTYPE_START_CONTEXT", "DOCTYPE_END_CONTEXT", "DOCTYPE_ATTRIBUTES_CONTEXT", "DOCTYPE_ATTRIBUTE_WRAPPED_CONTEXT", "DOCTYPE_ATTRIBUTE_BARE_CONTEXT", "COMMENT_CONTENT_CONTEXT", "contextHandlersMap", "tokenizeChars", "chars", "state", "tokens", "isFinalChunk", "positionOffset", "charIndex", "context", "tokenize", "content", "existingState", "require_tree_constructor_contexts", "__commonJSMin", "exports", "module", "require_tag", "__commonJSMin", "exports", "module", "TOKEN_OPEN_TAG_START", "TOKEN_OPEN_TAG_END", "TOKEN_CLOSE_TAG", "TOKEN_ATTRIBUTE_KEY", "TOKEN_ATTRIBUTE_ASSIGNMENT", "TAG_NAME_CONTEXT", "ATTRIBUTES_CONTEXT", "TAG_CONTENT_CONTEXT", "handleOpenTagStart", "state", "token", "handleAttributeStart", "handleOpenTagEnd", "SELF_CLOSING_TAGS", "tagName", "handleCloseTag", "require_ast_nodes", "__commonJSMin", "exports", "module", "require_tag_content", "__commonJSMin", "exports", "module", "parseCloseTagName", "TOKEN_OPEN_TAG_START", "TOKEN_CLOSE_TAG", "TOKEN_COMMENT_START", "TOKEN_DOCTYPE_START", "TOKEN_TEXT", "TOKEN_OPEN_TAG_START_SCRIPT", "TOKEN_OPEN_TAG_START_STYLE", "TAG_CONTEXT", "COMMENT_CONTEXT", "DOCTYPE_CONTEXT", "SCRIPT_TAG_CONTEXT", "STYLE_TAG_CONTEXT", "NODE_TAG", "NODE_TEXT", "NODE_DOCTYPE", "NODE_COMMENT", "NODE_SCRIPT", "NODE_STYLE", "handleOpenTagStart", "state", "tagNode", "handleCloseTag", "token", "handleCommentStart", "commentNode", "handleDoctypeStart", "doctypeNode", "handleText", "textNode", "handleOpenTagStartScript", "scriptNode", "handleOpenTagStartStyle", "styleNode", "require_tag_name", "__commonJSMin", "exports", "module", "parseOpenTagName", "TOKEN_OPEN_TAG_START", "handleTagOpenStart", "state", "token", "require_attributes", "__commonJSMin", "exports", "module", "TOKEN_ATTRIBUTE_KEY", "TOKEN_ATTRIBUTE_ASSIGNMENT", "TOKEN_OPEN_TAG_END", "TOKEN_OPEN_TAG_END_SCRIPT", "TOKEN_OPEN_TAG_END_STYLE", "ATTRIBUTE_CONTEXT", "handlerAttributeStart", "state", "handleOpenTagEnd", "token", "require_attribute", "__commonJSMin", "exports", "module", "TOKEN_OPEN_TAG_END", "TOKEN_OPEN_TAG_END_SCRIPT", "TOKEN_OPEN_TAG_END_STYLE", "TOKEN_ATTRIBUTE_KEY", "TOKEN_ATTRIBUTE_ASSIGNMENT", "ATTRIBUTE_VALUE_CONTEXT", "getLastAttribute", "state", "attributes", "handleOpenTagEnd", "handleAttributeKey", "token", "attribute", "handleAttributeAssignment", "require_attribute_value", "__commonJSMin", "exports", "module", "TOKEN_OPEN_TAG_END", "TOKEN_OPEN_TAG_END_SCRIPT", "TOKEN_OPEN_TAG_END_STYLE", "TOKEN_ATTRIBUTE_KEY", "TOKEN_ATTRIBUTE_ASSIGNMENT", "TOKEN_ATTRIBUTE_VALUE", "TOKEN_ATTRIBUTE_VALUE_WRAPPER_START", "TOKEN_ATTRIBUTE_VALUE_WRAPPER_END", "getLastAttribute", "state", "attributes", "handleValueEnd", "handleAttributeValue", "token", "attribute", "handleAttributeValueWrapperStart", "handleAttributeValueWrapperEnd", "require_comment", "__commonJSMin", "exports", "module", "TOKEN_COMMENT_START", "TOKEN_COMMENT_END", "TOKEN_COMMENT_CONTENT", "handleCommentStart", "state", "token", "handleCommentContent", "handleCommentEnd", "require_doctype", "__commonJSMin", "exports", "module", "TOKEN_DOCTYPE_END", "TOKEN_DOCTYPE_ATTRIBUTE", "TOKEN_DOCTYPE_START", "TOKEN_DOCTYPE_ATTRIBUTE_WRAPPER_START", "DOCTYPE_ATTRIBUTES_CONTEXT", "handleDoctypeStart", "state", "token", "handleDoctypeEnd", "handleDoctypeAttributes", "require_doctype_attributes", "__commonJSMin", "exports", "module", "DOCTYPE_ATTRIBUTE_CONTEXT", "TOKEN_DOCTYPE_END", "TOKEN_DOCTYPE_ATTRIBUTE", "TOKEN_DOCTYPE_ATTRIBUTE_WRAPPER_START", "handleDoctypeEnd", "state", "handleAttribute", "token", "require_doctype_attribute", "__commonJSMin", "exports", "module", "TOKEN_DOCTYPE_END", "TOKEN_DOCTYPE_ATTRIBUTE", "TOKEN_DOCTYPE_ATTRIBUTE_WRAPPER_START", "TOKEN_DOCTYPE_ATTRIBUTE_WRAPPER_END", "getLastAttribute", "state", "attributes", "handleDoctypeEnd", "handleAttributeValue", "token", "attribute", "handleAttributeWrapperStart", "handleAttributeWrapperEnd", "require_script_tag", "__commonJSMin", "exports", "module", "TOKEN_OPEN_TAG_START_SCRIPT", "TOKEN_OPEN_TAG_END_SCRIPT", "TOKEN_CLOSE_TAG_SCRIPT", "TOKEN_ATTRIBUTE_KEY", "TOKEN_ATTRIBUTE_ASSIGNMENT", "TOKEN_SCRIPT_TAG_CONTENT", "ATTRIBUTES_CONTEXT", "handleOpenTagStartScript", "state", "token", "handleAttributeStartScript", "handleOpenTagEndScript", "handleScriptContent", "handleCloseTagScript", "require_style_tag", "__commonJSMin", "exports", "module", "TOKEN_OPEN_TAG_START_STYLE", "TOKEN_OPEN_TAG_END_STYLE", "TOKEN_CLOSE_TAG_STYLE", "TOKEN_ATTRIBUTE_KEY", "TOKEN_ATTRIBUTE_ASSIGNMENT", "TOKEN_STYLE_TAG_CONTENT", "ATTRIBUTES_CONTEXT", "handleOpenTagStartStyle", "state", "token", "handleAttributeStartStyle", "handleOpenTagEndStyle", "handleStyleContent", "handleCloseTagStyle", "require_construct_tree", "__commonJSMin", "exports", "module", "tag", "tagContent", "tagName", "attributes", "attribute", "attributeValue", "comment", "doctype", "doctypeAttributes", "doctypeAttribute", "scriptTag", "styleTag", "TAG_CONTENT_CONTEXT", "TAG_CONTEXT", "TAG_NAME_CONTEXT", "ATTRIBUTES_CONTEXT", "ATTRIBUTE_CONTEXT", "ATTRIBUTE_VALUE_CONTEXT", "COMMENT_CONTEXT", "DOCTYPE_CONTEXT", "DOCTYPE_ATTRIBUTES_CONTEXT", "DOCTYPE_ATTRIBUTE_CONTEXT", "SCRIPT_TAG_CONTEXT", "STYLE_TAG_CONTEXT", "NODE_DOCUMENT", "contextsMap", "processTokens", "tokens", "state", "positionOffset", "tokenIndex", "token", "contextHandler", "existingState", "rootContext", "rootNode", "require_stream_tokenizer", "__commonJSMin", "exports", "module", "Transform", "tokenize", "StreamTokenizer", "options", "chunk", "encoding", "callback", "chunkString", "state", "tokens", "tokenizeResults", "require_stream_tree_constructor", "__commonJSMin", "exports", "module", "Transform", "constructTree", "StreamTreeConstructor", "options", "tokensChunk", "encoding", "callback", "state", "ast", "require_hyntax", "__commonJSMin", "exports", "module", "tokenize", "constructTree", "StreamTokenizer", "StreamTreeConstructor", "require_lite", "__commonJSMin", "exports", "has", "dequal", "foo", "bar", "ctor", "len", "require_useDeepMemo", "__commonJSMin", "exports", "react_1", "lite_1", "useDeepMemo", "value", "ref", "signalRef", "require_useLatest", "__commonJSMin", "exports", "react_1", "useLatest", "value", "ref", "require_handle_error_toast_action", "__commonJSMin", "exports", "__createBinding", "o", "m", "k", "k2", "desc", "__setModuleDefault", "v", "__importStar", "mod", "result", "fs", "path", "api_1", "handleErrorToastAction", "error", "privateExtension", "title", "extensionURL", "packageJSON", "fallback", "toast", "require_usePromise", "__commonJSMin", "exports", "react_1", "api_1", "useDeepMemo_1", "useLatest_1", "handle_error_toast_action_1", "usePromise", "fn", "args", "options", "lastCallId", "state", "set", "fnRef", "latestAbortable", "latestArgs", "latestOnError", "latestOnData", "latestOnWillExecute", "latestValue", "latestCallback", "callback", "callId", "prevState", "data", "error", "toast", "revalidate", "mutate", "asyncUpdate", "dataBeforeOptimisticUpdate", "update", "err", "require_useCachedState", "__commonJSMin", "exports", "react_1", "api_1", "useLatest_1", "replacer", "key", "_value", "value", "reviver", "_key", "rootCache", "cacheMap", "useCachedState", "initialState", "config", "cacheKey", "cache", "keyRef", "initialValueRef", "cachedState", "error", "state", "err", "stateRef", "setStateAndCache", "updater", "newValue", "stringifiedValue", "require_object_hash", "__commonJSMin", "exports", "module", "crypto", "objectHash", "object", "options", "applyDefaults", "hash", "hashes", "encodings", "sourceOptions", "i", "isNativeFunction", "f", "exp", "hashingStream", "PassThrough", "hasher", "typeHasher", "buf", "stream", "writeTo", "context", "write", "str", "value", "type", "pattern", "objString", "objType", "objectNumber", "keys", "key", "self", "arr", "unordered", "entry", "contextAdditions", "entries", "strm", "localContext", "date", "sym", "err", "bool", "string", "fn", "number", "xml", "regex", "url", "map", "set", "file", "b", "require_useCachedPromise", "__commonJSMin", "exports", "__importDefault", "mod", "react_1", "object_hash_1", "useCachedState_1", "usePromise_1", "useLatest_1", "emptyCache", "useCachedPromise", "fn", "args", "options", "initialData", "keepPreviousData", "usePromiseOptions", "lastUpdateFrom", "cachedData", "mutateCache", "laggyDataRef", "_mutate", "revalidate", "state", "data", "returnedData", "latestData", "mutate", "asyncUpdate", "dataBeforeOptimisticUpdate", "err", "require_media_typer", "__commonJSMin", "exports", "SUBTYPE_NAME_REGEXP", "TYPE_NAME_REGEXP", "TYPE_REGEXP", "format", "parse", "test", "obj", "subtype", "suffix", "type", "string", "match", "index", "MediaType", "require_content_type", "__commonJSMin", "exports", "PARAM_REGEXP", "TEXT_REGEXP", "TOKEN_REGEXP", "QESC_REGEXP", "QUOTE_REGEXP", "TYPE_REGEXP", "format", "parse", "obj", "parameters", "type", "string", "param", "params", "i", "qstring", "header", "getcontenttype", "index", "ContentType", "key", "match", "value", "val", "str", "require_useFetch", "__commonJSMin", "exports", "__importDefault", "mod", "react_1", "media_typer_1", "content_type_1", "useCachedPromise_1", "useLatest_1", "cross_fetch_1", "isJSON", "contentTypeHeader", "ct", "mediaType", "defaultParsing", "response", "useFetch", "url", "options", "parseResponse", "initialData", "execute", "keepPreviousData", "onError", "onData", "onWillExecute", "fetchOptions", "useCachedPromiseOptions", "parseResponseRef", "abortable", "fn", "res", "require_signals", "__commonJSMin", "exports", "module", "require_signal_exit", "__commonJSMin", "exports", "module", "process", "processOk", "assert", "signals", "isWin", "EE", "emitter", "cb", "opts", "loaded", "load", "ev", "remove", "unload", "sig", "sigListeners", "originalProcessEmit", "originalProcessReallyExit", "emit", "event", "code", "signal", "listeners", "processEmit", "processReallyExit", "arg", "ret", "require_exec_utils", "__commonJSMin", "exports", "__importDefault", "mod", "node_buffer_1", "node_stream_1", "node_util_1", "signal_exit_1", "getSpawnedPromise", "spawned", "timeout", "spawnedPromise", "resolve", "reject", "exitCode", "signal", "error", "timeoutId", "timeoutPromise", "_resolve", "safeSpawnedPromise", "removeExitHandler", "MaxBufferError", "streamPipelinePromisified", "bufferStream", "options", "encoding", "isBuffer", "stream", "length", "chunks", "chunk", "getStream", "inputStream", "rejectPromise", "getBufferedData", "streamPromise", "getSpawnedResult", "stdout", "stderr", "processDone", "stdoutPromise", "stderrPromise", "require_useExec", "__commonJSMin", "exports", "__importDefault", "mod", "node_child_process_1", "react_1", "useCachedPromise_1", "useLatest_1", "exec_utils_1", "SPACES_REGEXP", "parseCommand", "command", "args", "tokens", "token", "previousToken", "stripFinalNewline", "input", "LF", "CR", "handleOutput", "options", "value", "getErrorPrefix", "timedOut", "timeout", "signal", "exitCode", "makeError", "stdout", "stderr", "error", "execaMessage", "shortMessage", "message", "defaultParsing", "useExec", "optionsOrArgs", "parseOutput", "onData", "onWillExecute", "initialData", "execute", "keepPreviousData", "onError", "execOptions", "useCachedPromiseOptions", "abortable", "parseOutputRef", "fn", "_command", "_args", "_options", "file", "spawned", "spawnedPromise", "stdoutResult", "stderrResult", "require_useSQL", "__commonJSMin", "exports", "__importDefault", "mod", "jsx_runtime_1", "api_1", "node_fs_1", "promises_1", "node_os_1", "node_child_process_1", "node_path_1", "object_hash_1", "react_1", "usePromise_1", "useLatest_1", "exec_utils_1", "handle_error_toast_action_1", "useSQL", "databasePath", "query", "options", "permissionPriming", "usePromiseOptions", "permissionView", "setPermissionView", "latestOptions", "abortable", "handleError", "_error", "error", "PermissionError", "isPermissionError", "PermissionErrorScreen", "fn", "workaroundCopiedDb", "abortSignal", "spawned", "spawnedPromise", "exitCode", "signal", "stdoutResult", "stderrResult", "checkAborted", "tempFolder", "message", "macosVenturaAndLater", "preferencesString", "props", "action", "require_useForm", "__commonJSMin", "exports", "react_1", "useLatest_1", "FormValidation", "validationError", "validation", "value", "valueIsValid", "useForm", "props", "_onSubmit", "initialValues", "values", "setValues", "errors", "setErrors", "refs", "latestValidation", "latestOnSubmit", "focus", "id", "handleSubmit", "validationErrors", "error", "result", "setValidationError", "setValue", "itemProps", "target", "event", "instance", "reset", "require_color", "__commonJSMin", "exports", "hexToRGB", "hex", "r", "g", "b", "rgbToHex", "rString", "gString", "bString", "rgbToHSL", "cmin", "cmax", "delta", "h", "s", "l", "hslToRGB", "c", "x", "m", "hexToHSL", "hslToHex", "hsl", "clamp", "value", "min", "max", "offset", "slightlyDarkerColor", "slightlyLighterColor", "require_avatar", "__commonJSMin", "exports", "color_1", "getWholeCharAndI", "str", "i", "code", "next", "prev", "avatarColorSet", "getAvatarIcon", "name", "options", "words", "initials", "firstWordFirstLetter", "lastWordFirstLetter", "backgroundColor", "initialsCharIndex", "char", "colorIndex", "radius", "require_favicon", "__commonJSMin", "exports", "api_1", "url_1", "getFavicon", "url", "options", "hostname", "e", "require_progress", "__commonJSMin", "exports", "api_1", "polarToCartesian", "centerX", "centerY", "radius", "angleInDegrees", "angleInRadians", "describeArc", "x", "y", "startAngle", "endAngle", "start", "end", "largeArcFlag", "getProgressIcon", "progress", "color", "options", "background", "backgroundOpacity", "stroke", "require_icon", "__commonJSMin", "exports", "__createBinding", "o", "m", "k", "k2", "desc", "__exportStar", "p", "require_dist", "__commonJSMin", "exports", "__createBinding", "o", "m", "k", "k2", "desc", "__exportStar", "p", "featured_page_exports", "__export", "featuredPage", "__toCommonJS", "typedArrayTypeNames", "isTypedArrayName", "name", "objectTypeNames", "isObjectTypeName", "primitiveTypeNames", "isPrimitiveTypeName", "isOfType", "type", "value", "toString", "getObjectType", "objectTypeName", "is", "isObjectOfType", "tagType", "isNumberType", "assertion", "element", "hasPromiseApi", "targetEnum", "instance", "class_", "prototype", "isValidLength", "range", "NODE_TYPE_ELEMENT", "DOM_PROPERTIES_TO_CHECK", "property", "isAbsoluteMod2", "remainder", "isWhiteSpaceString", "predicateOnArray", "method", "predicate", "values", "singlePredicate", "assertType", "condition", "description", "options", "multipleValues", "valuesMessage", "singleValue", "assert", "dist_default", "import_node_events", "CancelError", "reason", "PCancelable", "userFunction", "arguments_", "resolve", "reject", "onCancel", "executor", "onResolve", "value", "onReject", "error", "handler", "boolean", "onFulfilled", "onRejected", "onFinally", "isRequest", "x", "dist_default", "RequestError", "message", "error", "self", "indexOfMessage", "thisStackTrace", "errorStackTrace", "MaxRedirectsError", "request", "HTTPError", "response", "CacheError", "UploadError", "TimeoutError", "timings", "ReadError", "RetryError", "AbortError", "import_node_process", "import_node_buffer", "import_node_stream", "import_node_url", "import_node_http", "import_events", "import_util", "import_defer_to_connect", "timer", "request", "timings", "handleError", "origin", "onAbort", "onSocket", "socket", "lookupListener", "deferToConnect", "onUpload", "response", "source_default", "import_node_events", "import_node_url", "import_node_crypto", "import_node_stream", "DATA_URL_DEFAULT_MIME_TYPE", "DATA_URL_DEFAULT_CHARSET", "testParameter", "name", "filters", "filter", "supportedProtocols", "hasCustomProtocol", "urlString", "protocol", "normalizeDataURL", "stripHash", "match", "type", "data", "hash", "mediaType", "isBase64", "mimeType", "normalizedMediaType", "attribute", "key", "value", "string", "normalizeUrl", "options", "hasRelativeProtocol", "urlObject", "protocolRegex", "lastIndex", "result", "protocolAtIndex", "pathComponents", "lastComponent", "oldUrlString", "import_get_stream", "import_http_cache_semantics", "import_node_stream", "lowercaseKeys", "object", "key", "value", "Response", "ReadableStream", "statusCode", "headers", "body", "url", "lowercaseKeys", "import_keyv", "knownProperties", "mimicResponse", "fromStream", "toStream", "fromProperties", "properties", "property", "value", "RequestError", "error", "CacheError", "CacheableRequest", "cacheRequest", "cacheAdapter", "options", "cb", "url", "normalizeUrlObject", "urlLib", "pathname", "searchParts", "search", "urlObjectToRequestOptions", "entries", "key", "value", "ee", "EventEmitter", "normalizedUrlString", "normalizeUrl", "stream", "crypto", "revalidate", "madeRequest", "makeRequest", "options_", "requestErrored", "requestErrorCallback", "requestErrorPromise", "resolve", "handler", "response", "revalidatedPolicy", "CachePolicy", "headers", "convertHeaders", "Response", "clonedResponse", "cloneResponse", "bodyPromise", "getStream", "body", "ttl", "key_", "error", "CacheError", "request_", "RequestError", "get", "cacheEntry", "policy", "errorHandler", "Keyv", "cachek", "name", "fn", "args", "clone", "PassThroughStream", "mimicResponse", "result", "dist_default", "import_decompress_response", "import_get_stream", "isFunction", "value", "isAsyncIterable", "value", "isFunction", "readStream", "readable", "reader", "done", "getStreamIterator", "source", "alphabet", "createBoundary", "size", "res", "normalizeValue", "value", "match", "i", "str", "getType", "value", "isPlainObject", "pp", "getProperty", "target", "prop", "name", "value", "proxyHeaders", "object", "isFormData", "value", "isFunction", "escapeName", "name", "isFile", "value", "isFunction", "__classPrivateFieldSet", "receiver", "state", "value", "kind", "f", "__classPrivateFieldGet", "_FormDataEncoder_instances", "_FormDataEncoder_CRLF", "_FormDataEncoder_CRLF_BYTES", "_FormDataEncoder_CRLF_BYTES_LENGTH", "_FormDataEncoder_DASHES", "_FormDataEncoder_encoder", "_FormDataEncoder_footer", "_FormDataEncoder_form", "_FormDataEncoder_options", "_FormDataEncoder_getFieldHeader", "_FormDataEncoder_getContentLength", "defaultOptions", "readonlyProp", "FormDataEncoder", "form", "boundaryOrOptions", "options", "isFormData", "boundary", "isPlainObject", "createBoundary", "headers", "contentLength", "proxyHeaders", "name", "raw", "isFile", "normalizeValue", "part", "getStreamIterator", "header", "escapeName", "size", "length", "import_node_buffer", "import_node_util", "isFormData", "body", "dist_default", "getBodySize", "body", "headers", "dist_default", "isFormData", "proxyEvents", "from", "to", "events", "eventFunctions", "event", "eventFunction", "args", "import_node_net", "unhandle", "handlers", "origin", "event", "fn", "handler", "reentry", "noop", "TimeoutError", "threshold", "event", "timedOut", "request", "delays", "options", "cancelers", "once", "unhandleAll", "unhandle", "addTimeout", "delay", "callback", "timeout", "cancel", "host", "hostname", "timeoutHandler", "cancelTimeouts", "error", "cancelTimeout", "response", "socket", "socketTimeoutHandler", "hasLookup", "hasConnect", "hasSecureConnect", "hasSend", "socketPath", "hasPath", "net", "timeConnect", "timeRequest", "urlToOptions", "url", "options", "dist_default", "WeakableMap", "key", "value", "calculateRetryDelay", "attemptCount", "retryOptions", "error", "retryAfter", "computedValue", "hasMethod", "hasErrorCode", "hasStatusCode", "noise", "calculate_retry_delay_default", "import_node_process", "import_node_util", "import_node_url", "import_node_tls", "import_node_http", "import_node_https", "import_node_dns", "import_node_util", "import_node_os", "AsyncResolver", "dnsPromises", "kCacheableLookupCreateConnection", "kCacheableLookupInstance", "kExpires", "supportsALL", "verifyAgent", "agent", "map4to6", "entries", "entry", "getIfaceInfo", "has4", "has6", "device", "os", "iface", "isIterable", "map", "ignoreNoResultErrors", "dnsPromise", "error", "ttl", "all", "all4", "all6", "CacheableLookup", "cache", "maxTtl", "fallbackDuration", "errorTtl", "resolver", "lookup", "dnsLookup", "interval", "servers", "hostname", "options", "callback", "result", "cached", "filtered", "_iface", "source", "pending", "newPromise", "A", "AAAA", "aTtl", "aaaaTtl", "cacheTtl", "now", "data", "cacheError", "query", "ms", "nextRemovalTime", "nextExpiry", "expires", "import_http2_wrapper", "parseLinkHeader", "link", "parsed", "items", "item", "rawUriReference", "rawLinkParameters", "trimmedUriReference", "reference", "parameters", "rawParameter", "trimmedRawParameter", "center", "name", "value", "major", "minor", "process", "validateSearchParameters", "searchParameters", "key", "value", "assert", "dist_default", "globalCache", "globalDnsCache", "getGlobalDnsCache", "CacheableLookup", "defaultInternals", "computedValue", "response", "rawLinkHeader", "next", "parseLinkHeader", "entry", "cloneInternals", "internals", "hooks", "retry", "result", "cloneRaw", "raw", "getHttp2TimeoutOption", "delays", "delay", "init", "options", "withOptions", "self", "initHooks", "hook", "Options", "input", "defaults", "error", "push", "href", "isFormData", "urlString", "url", "matches", "socketPath", "path", "setCookie", "getCookieString", "updated", "_value", "knownHookEvent", "typedKnownHookEvent", "fixedValue", "lowercaseKeys", "method", "_depth", "agent", "https", "pfx", "object", "request", "http2wrapper", "http", "isResponseOk", "response", "statusCode", "limitStatusCode", "ParseError", "RequestError", "error", "options", "parseBody", "responseType", "parseJson", "encoding", "rawBody", "isClientRequest", "clientRequest", "is_client_request_default", "isUnixSocketURL", "url", "supportsBrotli", "dist_default", "process", "methodsWithoutBody", "cacheableStore", "WeakableMap", "redirectCodes", "proxiedRequestEvents", "noop", "Request", "url", "options", "defaults", "source", "event", "Options", "error", "body", "UploadError", "abort", "AbortError", "job", "response", "attemptCount", "RequestError", "typedError", "backoff", "retryAfter", "retryOptions", "calculate_retry_delay_default", "error_", "resolve", "timeout", "hook", "updatedOptions", "request", "data", "progress", "chunk", "encoding", "callback", "write", "endRequest", "destination", "headers", "isForm", "isJSON", "isBody", "cannotHaveBody", "noContentType", "isFormData", "encoder", "FormDataEncoder", "form", "json", "uploadBodySize", "getBodySize", "decompressResponse", "statusCode", "typedResponse", "http", "isResponseOk", "ReadError", "rawCookies", "promises", "rawCookie", "promise", "MaxRedirectsError", "serverRequestedGet", "canRewrite", "userRequestedGet", "redirectBuffer", "redirectUrl", "isUnixSocketURL", "HTTPError", "key", "isAllowed", "value", "from", "rawBody", "getBuffer", "source_default", "timedOut", "responseEventName", "TimeoutError", "proxyEvents", "reject", "currentRequest", "cache", "cacheableRequest", "requestOptions", "handler", "result", "urlToOptions", "cacheRequest", "fix", "requestOrPromise", "username", "password", "cookieJar", "credentials", "cookieString", "fn", "requestOrResponse", "is_client_request_default", "CacheError", "percent", "CancelError", "RequestError", "request", "proxiedRequestEvents", "asPromise", "firstRequest", "globalRequest", "globalResponse", "normalizedOptions", "emitter", "promise", "PCancelable", "resolve", "reject", "onCancel", "CancelError", "makeRequest", "retryCount", "request", "Request", "response", "contentEncoding", "isCompressed", "options", "parseBody", "error", "isResponseOk", "hooks", "index", "hook", "updatedOptions", "RetryError", "dist_default", "HTTPError", "onError", "previousBody", "newRetryCount", "newBody", "proxyEvents", "event", "fn", "shortcut", "responseType", "newPromise", "headers", "delay", "ms", "resolve", "isGotInstance", "value", "dist_default", "aliases", "create", "defaults", "Options", "got", "url", "options", "defaultOptions", "request", "Request", "promise", "lastHandler", "normalized", "asPromise", "iteration", "iterateHandlers", "newOptions", "result", "descriptors", "key", "instancesOrOptions", "handlers", "mutableDefaults", "paginateEach", "normalizedOptions", "pagination", "assert", "allItems", "countLimit", "numberOfRequests", "response", "parsed", "currentItems", "item", "optionsToMerge", "results", "method", "create_default", "defaults", "Options", "got", "create_default", "source_default", "import_cross_fetch", "import_cross_fetch", "import_infobox_parser", "import_hyntax", "getApiUrl", "language", "getTodayFeaturedPageUrl", "language", "today", "year", "month", "day", "response", "source_default", "getApiUrl", "import_api", "import_utils", "import_api", "getStoredLanguage", "language", "import_api", "preferences", "openInBrowser", "prefersListView", "featuredPage", "language", "getStoredLanguage", "title", "url", "getTodayFeaturedPageUrl", "openInBrowser"]
}
